(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))i(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const p of y.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function s(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function i(d){if(d.ep)return;d.ep=!0;const y=s(d);fetch(d.href,y)}})();var Ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uu(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ud={exports:{}},vu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function Pb(){if(Ay)return vu;Ay=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(i,d,y){var p=null;if(y!==void 0&&(p=""+y),d.key!==void 0&&(p=""+d.key),"key"in d){y={};for(var g in d)g!=="key"&&(y[g]=d[g])}else y=d;return d=y.ref,{$$typeof:a,type:i,key:p,ref:d!==void 0?d:null,props:y}}return vu.Fragment=n,vu.jsx=s,vu.jsxs=s,vu}var Ry;function Lb(){return Ry||(Ry=1,ud.exports=Pb()),ud.exports}var Te=Lb(),ld={exports:{}},ln={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function Mb(){if(ky)return ln;ky=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.iterator;function D(H){return H===null||typeof H!="object"?null:(H=S&&H[S]||H["@@iterator"],typeof H=="function"?H:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,O={};function U(H,he,Re){this.props=H,this.context=he,this.refs=O,this.updater=Re||M}U.prototype.isReactComponent={},U.prototype.setState=function(H,he){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,he,"setState")},U.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function F(){}F.prototype=U.prototype;function P(H,he,Re){this.props=H,this.context=he,this.refs=O,this.updater=Re||M}var I=P.prototype=new F;I.constructor=P,C(I,U.prototype),I.isPureReactComponent=!0;var B=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function Q(H,he,Re,be,tt,gt){return Re=gt.ref,{$$typeof:a,type:H,key:he,ref:Re!==void 0?Re:null,props:gt}}function ve(H,he){return Q(H.type,he,void 0,void 0,void 0,H.props)}function qe(H){return typeof H=="object"&&H!==null&&H.$$typeof===a}function J(H){var he={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Re){return he[Re]})}var pe=/\/+/g;function Xe(H,he){return typeof H=="object"&&H!==null&&H.key!=null?J(""+H.key):he.toString(36)}function ke(){}function wt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(ke,ke):(H.status="pending",H.then(function(he){H.status==="pending"&&(H.status="fulfilled",H.value=he)},function(he){H.status==="pending"&&(H.status="rejected",H.reason=he)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function mt(H,he,Re,be,tt){var gt=typeof H;(gt==="undefined"||gt==="boolean")&&(H=null);var xt=!1;if(H===null)xt=!0;else switch(gt){case"bigint":case"string":case"number":xt=!0;break;case"object":switch(H.$$typeof){case a:case n:xt=!0;break;case _:return xt=H._init,mt(xt(H._payload),he,Re,be,tt)}}if(xt)return tt=tt(H),xt=be===""?"."+Xe(H,0):be,B(tt)?(Re="",xt!=null&&(Re=xt.replace(pe,"$&/")+"/"),mt(tt,he,Re,"",function(Ue){return Ue})):tt!=null&&(qe(tt)&&(tt=ve(tt,Re+(tt.key==null||H&&H.key===tt.key?"":(""+tt.key).replace(pe,"$&/")+"/")+xt)),he.push(tt)),1;xt=0;var Ut=be===""?".":be+":";if(B(H))for(var Ye=0;Ye<H.length;Ye++)be=H[Ye],gt=Ut+Xe(be,Ye),xt+=mt(be,he,Re,gt,tt);else if(Ye=D(H),typeof Ye=="function")for(H=Ye.call(H),Ye=0;!(be=H.next()).done;)be=be.value,gt=Ut+Xe(be,Ye++),xt+=mt(be,he,Re,gt,tt);else if(gt==="object"){if(typeof H.then=="function")return mt(wt(H),he,Re,be,tt);throw he=String(H),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.")}return xt}function Ne(H,he,Re){if(H==null)return H;var be=[],tt=0;return mt(H,be,"","",function(gt){return he.call(Re,gt,tt++)}),be}function Me(H){if(H._status===-1){var he=H._result;he=he(),he.then(function(Re){(H._status===0||H._status===-1)&&(H._status=1,H._result=Re)},function(Re){(H._status===0||H._status===-1)&&(H._status=2,H._result=Re)}),H._status===-1&&(H._status=0,H._result=he)}if(H._status===1)return H._result.default;throw H._result}var Fe=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var he=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(he))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function it(){}return ln.Children={map:Ne,forEach:function(H,he,Re){Ne(H,function(){he.apply(this,arguments)},Re)},count:function(H){var he=0;return Ne(H,function(){he++}),he},toArray:function(H){return Ne(H,function(he){return he})||[]},only:function(H){if(!qe(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},ln.Component=U,ln.Fragment=s,ln.Profiler=d,ln.PureComponent=P,ln.StrictMode=i,ln.Suspense=E,ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,ln.__COMPILER_RUNTIME={__proto__:null,c:function(H){return z.H.useMemoCache(H)}},ln.cache=function(H){return function(){return H.apply(null,arguments)}},ln.cloneElement=function(H,he,Re){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var be=C({},H.props),tt=H.key,gt=void 0;if(he!=null)for(xt in he.ref!==void 0&&(gt=void 0),he.key!==void 0&&(tt=""+he.key),he)!Y.call(he,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&he.ref===void 0||(be[xt]=he[xt]);var xt=arguments.length-2;if(xt===1)be.children=Re;else if(1<xt){for(var Ut=Array(xt),Ye=0;Ye<xt;Ye++)Ut[Ye]=arguments[Ye+2];be.children=Ut}return Q(H.type,tt,void 0,void 0,gt,be)},ln.createContext=function(H){return H={$$typeof:p,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:y,_context:H},H},ln.createElement=function(H,he,Re){var be,tt={},gt=null;if(he!=null)for(be in he.key!==void 0&&(gt=""+he.key),he)Y.call(he,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(tt[be]=he[be]);var xt=arguments.length-2;if(xt===1)tt.children=Re;else if(1<xt){for(var Ut=Array(xt),Ye=0;Ye<xt;Ye++)Ut[Ye]=arguments[Ye+2];tt.children=Ut}if(H&&H.defaultProps)for(be in xt=H.defaultProps,xt)tt[be]===void 0&&(tt[be]=xt[be]);return Q(H,gt,void 0,void 0,null,tt)},ln.createRef=function(){return{current:null}},ln.forwardRef=function(H){return{$$typeof:g,render:H}},ln.isValidElement=qe,ln.lazy=function(H){return{$$typeof:_,_payload:{_status:-1,_result:H},_init:Me}},ln.memo=function(H,he){return{$$typeof:m,type:H,compare:he===void 0?null:he}},ln.startTransition=function(H){var he=z.T,Re={};z.T=Re;try{var be=H(),tt=z.S;tt!==null&&tt(Re,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(it,Fe)}catch(gt){Fe(gt)}finally{z.T=he}},ln.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},ln.use=function(H){return z.H.use(H)},ln.useActionState=function(H,he,Re){return z.H.useActionState(H,he,Re)},ln.useCallback=function(H,he){return z.H.useCallback(H,he)},ln.useContext=function(H){return z.H.useContext(H)},ln.useDebugValue=function(){},ln.useDeferredValue=function(H,he){return z.H.useDeferredValue(H,he)},ln.useEffect=function(H,he,Re){var be=z.H;if(typeof Re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return be.useEffect(H,he)},ln.useId=function(){return z.H.useId()},ln.useImperativeHandle=function(H,he,Re){return z.H.useImperativeHandle(H,he,Re)},ln.useInsertionEffect=function(H,he){return z.H.useInsertionEffect(H,he)},ln.useLayoutEffect=function(H,he){return z.H.useLayoutEffect(H,he)},ln.useMemo=function(H,he){return z.H.useMemo(H,he)},ln.useOptimistic=function(H,he){return z.H.useOptimistic(H,he)},ln.useReducer=function(H,he,Re){return z.H.useReducer(H,he,Re)},ln.useRef=function(H){return z.H.useRef(H)},ln.useState=function(H){return z.H.useState(H)},ln.useSyncExternalStore=function(H,he,Re){return z.H.useSyncExternalStore(H,he,Re)},ln.useTransition=function(){return z.H.useTransition()},ln.version="19.1.0",ln}var Fy;function hh(){return Fy||(Fy=1,ld.exports=Mb()),ld.exports}var nn=hh();const ps=Uu(nn);var cd={exports:{}},bu={},fd={exports:{}},dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function Bb(){return Ny||(Ny=1,function(a){function n(Ne,Me){var Fe=Ne.length;Ne.push(Me);e:for(;0<Fe;){var it=Fe-1>>>1,H=Ne[it];if(0<d(H,Me))Ne[it]=Me,Ne[Fe]=H,Fe=it;else break e}}function s(Ne){return Ne.length===0?null:Ne[0]}function i(Ne){if(Ne.length===0)return null;var Me=Ne[0],Fe=Ne.pop();if(Fe!==Me){Ne[0]=Fe;e:for(var it=0,H=Ne.length,he=H>>>1;it<he;){var Re=2*(it+1)-1,be=Ne[Re],tt=Re+1,gt=Ne[tt];if(0>d(be,Fe))tt<H&&0>d(gt,be)?(Ne[it]=gt,Ne[tt]=Fe,it=tt):(Ne[it]=be,Ne[Re]=Fe,it=Re);else if(tt<H&&0>d(gt,Fe))Ne[it]=gt,Ne[tt]=Fe,it=tt;else break e}}return Me}function d(Ne,Me){var Fe=Ne.sortIndex-Me.sortIndex;return Fe!==0?Fe:Ne.id-Me.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;a.unstable_now=function(){return y.now()}}else{var p=Date,g=p.now();a.unstable_now=function(){return p.now()-g}}var E=[],m=[],_=1,S=null,D=3,M=!1,C=!1,O=!1,U=!1,F=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function B(Ne){for(var Me=s(m);Me!==null;){if(Me.callback===null)i(m);else if(Me.startTime<=Ne)i(m),Me.sortIndex=Me.expirationTime,n(E,Me);else break;Me=s(m)}}function z(Ne){if(O=!1,B(Ne),!C)if(s(E)!==null)C=!0,Y||(Y=!0,Xe());else{var Me=s(m);Me!==null&&mt(z,Me.startTime-Ne)}}var Y=!1,Q=-1,ve=5,qe=-1;function J(){return U?!0:!(a.unstable_now()-qe<ve)}function pe(){if(U=!1,Y){var Ne=a.unstable_now();qe=Ne;var Me=!0;try{e:{C=!1,O&&(O=!1,P(Q),Q=-1),M=!0;var Fe=D;try{t:{for(B(Ne),S=s(E);S!==null&&!(S.expirationTime>Ne&&J());){var it=S.callback;if(typeof it=="function"){S.callback=null,D=S.priorityLevel;var H=it(S.expirationTime<=Ne);if(Ne=a.unstable_now(),typeof H=="function"){S.callback=H,B(Ne),Me=!0;break t}S===s(E)&&i(E),B(Ne)}else i(E);S=s(E)}if(S!==null)Me=!0;else{var he=s(m);he!==null&&mt(z,he.startTime-Ne),Me=!1}}break e}finally{S=null,D=Fe,M=!1}Me=void 0}}finally{Me?Xe():Y=!1}}}var Xe;if(typeof I=="function")Xe=function(){I(pe)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,wt=ke.port2;ke.port1.onmessage=pe,Xe=function(){wt.postMessage(null)}}else Xe=function(){F(pe,0)};function mt(Ne,Me){Q=F(function(){Ne(a.unstable_now())},Me)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Ne){Ne.callback=null},a.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<Ne?Math.floor(1e3/Ne):5},a.unstable_getCurrentPriorityLevel=function(){return D},a.unstable_next=function(Ne){switch(D){case 1:case 2:case 3:var Me=3;break;default:Me=D}var Fe=D;D=Me;try{return Ne()}finally{D=Fe}},a.unstable_requestPaint=function(){U=!0},a.unstable_runWithPriority=function(Ne,Me){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var Fe=D;D=Ne;try{return Me()}finally{D=Fe}},a.unstable_scheduleCallback=function(Ne,Me,Fe){var it=a.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?it+Fe:it):Fe=it,Ne){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Fe+H,Ne={id:_++,callback:Me,priorityLevel:Ne,startTime:Fe,expirationTime:H,sortIndex:-1},Fe>it?(Ne.sortIndex=Fe,n(m,Ne),s(E)===null&&Ne===s(m)&&(O?(P(Q),Q=-1):O=!0,mt(z,Fe-it))):(Ne.sortIndex=H,n(E,Ne),C||M||(C=!0,Y||(Y=!0,Xe()))),Ne},a.unstable_shouldYield=J,a.unstable_wrapCallback=function(Ne){var Me=D;return function(){var Fe=D;D=Me;try{return Ne.apply(this,arguments)}finally{D=Fe}}}}(dd)),dd}var Cy;function Hb(){return Cy||(Cy=1,fd.exports=Bb()),fd.exports}var hd={exports:{}},Br={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function Kb(){if(Oy)return Br;Oy=1;var a=hh();function n(E){var m="https://react.dev/errors/"+E;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+E+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},d=Symbol.for("react.portal");function y(E,m,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:S==null?null:""+S,children:E,containerInfo:m,implementation:_}}var p=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(E,m){if(E==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Br.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Br.createPortal=function(E,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return y(E,m,null,_)},Br.flushSync=function(E){var m=p.T,_=i.p;try{if(p.T=null,i.p=2,E)return E()}finally{p.T=m,i.p=_,i.d.f()}},Br.preconnect=function(E,m){typeof E=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(E,m))},Br.prefetchDNS=function(E){typeof E=="string"&&i.d.D(E)},Br.preinit=function(E,m){if(typeof E=="string"&&m&&typeof m.as=="string"){var _=m.as,S=g(_,m.crossOrigin),D=typeof m.integrity=="string"?m.integrity:void 0,M=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(E,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:S,integrity:D,fetchPriority:M}):_==="script"&&i.d.X(E,{crossOrigin:S,integrity:D,fetchPriority:M,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Br.preinitModule=function(E,m){if(typeof E=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=g(m.as,m.crossOrigin);i.d.M(E,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(E)},Br.preload=function(E,m){if(typeof E=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,S=g(_,m.crossOrigin);i.d.L(E,_,{crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Br.preloadModule=function(E,m){if(typeof E=="string")if(m){var _=g(m.as,m.crossOrigin);i.d.m(E,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(E)},Br.requestFormReset=function(E){i.d.r(E)},Br.unstable_batchedUpdates=function(E,m){return E(m)},Br.useFormState=function(E,m,_){return p.H.useFormState(E,m,_)},Br.useFormStatus=function(){return p.H.useHostTransitionStatus()},Br.version="19.1.0",Br}var Dy;function qb(){if(Dy)return hd.exports;Dy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),hd.exports=Kb(),hd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function zb(){if(Iy)return bu;Iy=1;var a=Hb(),n=hh(),s=qb();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function y(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(y(e)!==e)throw Error(i(188))}function E(e){var t=e.alternate;if(!t){if(t=y(e),t===null)throw Error(i(188));return t!==e?null:e}for(var r=e,o=t;;){var h=r.return;if(h===null)break;var w=h.alternate;if(w===null){if(o=h.return,o!==null){r=o;continue}break}if(h.child===w.child){for(w=h.child;w;){if(w===r)return g(h),e;if(w===o)return g(h),t;w=w.sibling}throw Error(i(188))}if(r.return!==o.return)r=h,o=w;else{for(var q=!1,te=h.child;te;){if(te===r){q=!0,r=h,o=w;break}if(te===o){q=!0,o=h,r=w;break}te=te.sibling}if(!q){for(te=w.child;te;){if(te===r){q=!0,r=w,o=h;break}if(te===o){q=!0,o=w,r=h;break}te=te.sibling}if(!q)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:t}function m(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=m(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),I=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),qe=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function Xe(e){return e===null||typeof e!="object"?null:(e=pe&&e[pe]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Symbol.for("react.client.reference");function wt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ke?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case U:return"Profiler";case O:return"StrictMode";case z:return"Suspense";case Y:return"SuspenseList";case qe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case M:return"Portal";case I:return(e.displayName||"Context")+".Provider";case P:return(e._context.displayName||"Context")+".Consumer";case B:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return t=e.displayName||null,t!==null?t:wt(e.type)||"Memo";case ve:t=e._payload,e=e._init;try{return wt(e(t))}catch{}}return null}var mt=Array.isArray,Ne=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe={pending:!1,data:null,method:null,action:null},it=[],H=-1;function he(e){return{current:e}}function Re(e){0>H||(e.current=it[H],it[H]=null,H--)}function be(e,t){H++,it[H]=e.current,e.current=t}var tt=he(null),gt=he(null),xt=he(null),Ut=he(null);function Ye(e,t){switch(be(xt,t),be(gt,e),be(tt,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ey(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ey(t),e=ty(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Re(tt),be(tt,e)}function Ue(){Re(tt),Re(gt),Re(xt)}function bt(e){e.memoizedState!==null&&be(Ut,e);var t=tt.current,r=ty(t,e.type);t!==r&&(be(gt,e),be(tt,r))}function ue(e){gt.current===e&&(Re(tt),Re(gt)),Ut.current===e&&(Re(Ut),hu._currentValue=Fe)}var j=Object.prototype.hasOwnProperty,T=a.unstable_scheduleCallback,G=a.unstable_cancelCallback,ee=a.unstable_shouldYield,me=a.unstable_requestPaint,Se=a.unstable_now,at=a.unstable_getCurrentPriorityLevel,we=a.unstable_ImmediatePriority,ot=a.unstable_UserBlockingPriority,dt=a.unstable_NormalPriority,ft=a.unstable_LowPriority,Dt=a.unstable_IdlePriority,pn=a.log,At=a.unstable_setDisableYieldValue,Kt=null,$=null;function R(e){if(typeof pn=="function"&&At(e),$&&typeof $.setStrictMode=="function")try{$.setStrictMode(Kt,e)}catch{}}var N=Math.clz32?Math.clz32:Ge,k=Math.log,Ce=Math.LN2;function Ge(e){return e>>>=0,e===0?32:31-(k(e)/Ce|0)|0}var Ie=256,$t=4194304;function sn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rt(e,t,r){var o=e.pendingLanes;if(o===0)return 0;var h=0,w=e.suspendedLanes,q=e.pingedLanes;e=e.warmLanes;var te=o&134217727;return te!==0?(o=te&~w,o!==0?h=sn(o):(q&=te,q!==0?h=sn(q):r||(r=te&~e,r!==0&&(h=sn(r))))):(te=o&~w,te!==0?h=sn(te):q!==0?h=sn(q):r||(r=o&~e,r!==0&&(h=sn(r)))),h===0?0:t!==0&&t!==h&&(t&w)===0&&(w=h&-h,r=t&-t,w>=r||w===32&&(r&4194048)!==0)?t:h}function rn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function an(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(){var e=Ie;return Ie<<=1,(Ie&4194048)===0&&(Ie=256),e}function Tt(){var e=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),e}function vn(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function jr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function In(e,t,r,o,h,w){var q=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var te=e.entanglements,Ee=e.expirationTimes,Qe=e.hiddenUpdates;for(r=q&~r;0<r;){var pt=31-N(r),vt=1<<pt;te[pt]=0,Ee[pt]=-1;var rt=Qe[pt];if(rt!==null)for(Qe[pt]=null,pt=0;pt<rt.length;pt++){var st=rt[pt];st!==null&&(st.lane&=-536870913)}r&=~vt}o!==0&&or(e,o,0),w!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=w&~(q&~t))}function or(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-N(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|r&4194090}function nr(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-N(r),h=1<<o;h&t|e[o]&t&&(e[o]|=t),r&=~h}}function Ii(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ae(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function de(){var e=Me.p;return e!==0?e:(e=window.event,e===void 0?32:_y(e.type))}function St(e,t){var r=Me.p;try{return Me.p=e,t()}finally{Me.p=r}}var Et=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Et,qt="__reactProps$"+Et,un="__reactContainer$"+Et,si="__reactEvents$"+Et,Er="__reactListeners$"+Et,wi="__reactHandles$"+Et,ui="__reactResources$"+Et,li="__reactMarker$"+Et;function sr(e){delete e[Ot],delete e[qt],delete e[si],delete e[Er],delete e[wi]}function ur(e){var t=e[Ot];if(t)return t;for(var r=e.parentNode;r;){if(t=r[un]||r[Ot]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ay(e);e!==null;){if(r=e[Ot])return r;e=ay(e)}return t}e=r,r=e.parentNode}return null}function Vn(e){if(e=e[Ot]||e[un]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function xr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function gn(e){var t=e[ui];return t||(t=e[ui]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Vt(e){e[li]=!0}var pr=new Set,ci={};function fi(e,t){An(e,t),An(e+"Capture",t)}function An(e,t){for(ci[e]=t,e=0;e<t.length;e++)pr.add(t[e])}var Ln=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Si={},Yr={};function Do(e){return j.call(Yr,e)?!0:j.call(Si,e)?!1:Ln.test(e)?Yr[e]=!0:(Si[e]=!0,!1)}function di(e,t,r){if(Do(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function ji(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function Hr(e,t,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+o)}}var ua,Ei;function Ui(e){if(ua===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ua=t&&t[1]||"",Ei=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ua+e+Ei}var l=!1;function u(e,t){if(!e||l)return"";l=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(st){var rt=st}Reflect.construct(e,[],vt)}else{try{vt.call()}catch(st){rt=st}e.call(vt.prototype)}}else{try{throw Error()}catch(st){rt=st}(vt=e())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(st){if(st&&rt&&typeof st.stack=="string")return[st.stack,rt.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=o.DetermineComponentFrameRoot(),q=w[0],te=w[1];if(q&&te){var Ee=q.split(`
`),Qe=te.split(`
`);for(h=o=0;o<Ee.length&&!Ee[o].includes("DetermineComponentFrameRoot");)o++;for(;h<Qe.length&&!Qe[h].includes("DetermineComponentFrameRoot");)h++;if(o===Ee.length||h===Qe.length)for(o=Ee.length-1,h=Qe.length-1;1<=o&&0<=h&&Ee[o]!==Qe[h];)h--;for(;1<=o&&0<=h;o--,h--)if(Ee[o]!==Qe[h]){if(o!==1||h!==1)do if(o--,h--,0>h||Ee[o]!==Qe[h]){var pt=`
`+Ee[o].replace(" at new "," at ");return e.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",e.displayName)),pt}while(1<=o&&0<=h);break}}}finally{l=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Ui(r):""}function c(e){switch(e.tag){case 26:case 27:case 5:return Ui(e.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return u(e.type,!1);case 11:return u(e.type.render,!1);case 1:return u(e.type,!0);case 31:return Ui("Activity");default:return""}}function v(e){try{var t="";do t+=c(e),e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function x(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function W(e){var t=K(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,w=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(q){o=""+q,w.call(this,q)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(q){o=""+q},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ie(e){e._valueTracker||(e._valueTracker=W(e))}function ne(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=K(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function re(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var fe=/[\n"\\]/g;function ce(e){return e.replace(fe,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ye(e,t,r,o,h,w,q,te){e.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?e.type=q:e.removeAttribute("type"),t!=null?q==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+x(t)):e.value!==""+x(t)&&(e.value=""+x(t)):q!=="submit"&&q!=="reset"||e.removeAttribute("value"),t!=null?Ke(e,q,x(t)):r!=null?Ke(e,q,x(r)):o!=null&&e.removeAttribute("value"),h==null&&w!=null&&(e.defaultChecked=!!w),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?e.name=""+x(te):e.removeAttribute("name")}function Ae(e,t,r,o,h,w,q,te){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.type=w),t!=null||r!=null){if(!(w!=="submit"&&w!=="reset"||t!=null))return;r=r!=null?""+x(r):"",t=t!=null?""+x(t):r,te||t===e.value||(e.value=t),e.defaultValue=t}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=te?e.checked:!!o,e.defaultChecked=!!o,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(e.name=q)}function Ke(e,t,r){t==="number"&&re(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Ze(e,t,r,o){if(e=e.options,t){t={};for(var h=0;h<r.length;h++)t["$"+r[h]]=!0;for(r=0;r<e.length;r++)h=t.hasOwnProperty("$"+e[r].value),e[r].selected!==h&&(e[r].selected=h),h&&o&&(e[r].defaultSelected=!0)}else{for(r=""+x(r),t=null,h=0;h<e.length;h++){if(e[h].value===r){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function nt(e,t,r){if(t!=null&&(t=""+x(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+x(r):""}function X(e,t,r,o){if(t==null){if(o!=null){if(r!=null)throw Error(i(92));if(mt(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),t=r}r=x(t),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o)}function le(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var oe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ge(e,t,r){var o=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,r):typeof r!="number"||r===0||oe.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Je(e,t,r){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in t)o=t[h],t.hasOwnProperty(h)&&r[h]!==o&&ge(e,h,o)}else for(var w in t)t.hasOwnProperty(w)&&ge(e,w,t[w])}function ut(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zt(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function Ht(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bn=null,Qt=null;function fn(e){var t=Vn(e);if(t&&(e=t.stateNode)){var r=e[qt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ye(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ce(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var h=o[qt]||null;if(!h)throw Error(i(90));ye(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(t=0;t<r.length;t++)o=r[t],o.form===e.form&&ne(o)}break e;case"textarea":nt(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&Ze(e,!!r.multiple,t,!1)}}}var qn=!1;function Mn(e,t,r){if(qn)return e(t,r);qn=!0;try{var o=e(t);return o}finally{if(qn=!1,(bn!==null||Qt!==null)&&(Rl(),bn&&(t=bn,e=Qt,Qt=bn=null,fn(t),e)))for(t=0;t<e.length;t++)fn(e[t])}}function Bn(e,t){var r=e.stateNode;if(r===null)return null;var o=r[qt]||null;if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,t,typeof r));return r}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hn=!1;if(cn)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){Hn=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{Hn=!1}var Nn=null,xi=null,Kr=null;function Qr(){if(Kr)return Kr;var e,t=xi,r=t.length,o,h="value"in Nn?Nn.value:Nn.textContent,w=h.length;for(e=0;e<r&&t[e]===h[e];e++);var q=r-e;for(o=1;o<=q&&t[r-o]===h[w-o];o++);return Kr=h.slice(e,1<o?1-o:void 0)}function qr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pi(){return!0}function Wi(){return!1}function En(e){function t(r,o,h,w,q){this._reactName=r,this._targetInst=h,this.type=o,this.nativeEvent=w,this.target=q,this.currentTarget=null;for(var te in e)e.hasOwnProperty(te)&&(r=e[te],this[te]=r?r(w):w[te]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Pi:Wi,this.isPropagationStopped=Wi,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),t}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=En(Xn),Ur=_({},Xn,{view:0,detail:0}),Mi=En(Ur),hi,la,pi,gr=_({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pi&&(pi&&e.type==="mousemove"?(hi=e.screenX-pi.screenX,la=e.screenY-pi.screenY):la=hi=0,pi=e),hi)},movementY:function(e){return"movementY"in e?e.movementY:la}}),Xr=En(gr),zr=_({},gr,{dataTransfer:0}),Rn=En(zr),Pr=_({},Ur,{relatedTarget:0}),Vr=En(Pr),Un=_({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Da=En(Un),Bi=_({},Xn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zr=En(Bi),co=_({},Xn,{data:0}),Ia=En(co),ja={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},As={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fo(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yr[e])?!!t[e]:!1}function ca(){return fo}var qu=_({},Ur,{key:function(e){if(e.key){var t=ja[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?As[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(e){return e.type==="keypress"?qr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Io=En(qu),zu=_({},gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rs=En(zu),jo=_({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca}),ks=En(jo),fa=_({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fs=En(fa),Ns=_({},gr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Uo=En(Ns),Cs=_({},Xn,{newState:0,oldState:0}),Vu=En(Cs),Sc=[9,13,27,32],ho=cn&&"CompositionEvent"in window,Yi=null;cn&&"documentMode"in document&&(Yi=document.documentMode);var Ec=cn&&"TextEvent"in window&&!Yi,Po=cn&&(!ho||Yi&&8<Yi&&11>=Yi),Lo=" ",Gu=!1;function Os(e,t){switch(e){case"keyup":return Sc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $u(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var da=!1;function Ju(e,t){switch(e){case"compositionend":return $u(t);case"keypress":return t.which!==32?null:(Gu=!0,Lo);case"textInput":return e=t.data,e===Lo&&Gu?null:e;default:return null}}function xc(e,t){if(da)return e==="compositionend"||!ho&&Os(e,t)?(e=Qr(),Kr=xi=Nn=null,da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Po&&t.locale!=="ko"?null:t.data;default:return null}}var Wu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wu[e.type]:t==="textarea"}function Ds(e,t,r,o){bn?Qt?Qt.push(o):Qt=[o]:bn=o,t=Dl(t,"onChange"),0<t.length&&(r=new Li("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Ua=null,po=null;function Tc(e){Wg(e,0)}function Bo(e){var t=xr(e);if(ne(t))return e}function go(e,t){if(e==="change")return t}var Ti=!1;if(cn){var Kn;if(cn){var Pa="oninput"in document;if(!Pa){var Gr=document.createElement("div");Gr.setAttribute("oninput","return;"),Pa=typeof Gr.oninput=="function"}Kn=Pa}else Kn=!1;Ti=Kn&&(!document.documentMode||9<document.documentMode)}function Yu(){Ua&&(Ua.detachEvent("onpropertychange",Ho),po=Ua=null)}function Ho(e){if(e.propertyName==="value"&&Bo(po)){var t=[];Ds(t,po,e,Ht(e)),Mn(Tc,t)}}function Qu(e,t,r){e==="focusin"?(Yu(),Ua=t,po=r,Ua.attachEvent("onpropertychange",Ho)):e==="focusout"&&Yu()}function ha(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bo(po)}function Is(e,t){if(e==="click")return Bo(t)}function La(e,t){if(e==="input"||e==="change")return Bo(t)}function Qi(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lr=typeof Object.is=="function"?Object.is:Qi;function f(e,t){if(Lr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var h=r[o];if(!j.call(t,h)||!Lr(e[h],t[h]))return!1}return!0}function b(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A(e,t){var r=b(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=b(r)}}function L(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?L(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function V(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=re(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=re(e.document)}return t}function Z(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var se=cn&&"documentMode"in document&&11>=document.documentMode,_e=null,De=null,Pe=null,He=!1;function xe(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;He||_e==null||_e!==re(o)||(o=_e,"selectionStart"in o&&Z(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Pe&&f(Pe,o)||(Pe=o,o=Dl(De,"onSelect"),0<o.length&&(t=new Li("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=_e)))}function Ve(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Oe={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionrun:Ve("Transition","TransitionRun"),transitionstart:Ve("Transition","TransitionStart"),transitioncancel:Ve("Transition","TransitionCancel"),transitionend:Ve("Transition","TransitionEnd")},Be={},$e={};cn&&($e=document.createElement("div").style,"AnimationEvent"in window||(delete Oe.animationend.animation,delete Oe.animationiteration.animation,delete Oe.animationstart.animation),"TransitionEvent"in window||delete Oe.transitionend.transition);function Le(e){if(Be[e])return Be[e];if(!Oe[e])return e;var t=Oe[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in $e)return Be[e]=t[r];return e}var et=Le("animationend"),lt=Le("animationiteration"),ct=Le("animationstart"),ht=Le("transitionrun"),Nt=Le("transitionstart"),jt=Le("transitioncancel"),kt=Le("transitionend"),Ct=new Map,Lt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lt.push("scrollEnd");function Ft(e,t){Ct.set(e,t),fi(t,[e])}var Mt=new WeakMap;function Gt(e,t){if(typeof e=="object"&&e!==null){var r=Mt.get(e);return r!==void 0?r:(t={value:e,source:t,stack:v(t)},Mt.set(e,t),t)}return{value:e,source:t,stack:v(t)}}var Wt=[],on=0,Tr=0;function en(){for(var e=on,t=Tr=on=0;t<e;){var r=Wt[t];Wt[t++]=null;var o=Wt[t];Wt[t++]=null;var h=Wt[t];Wt[t++]=null;var w=Wt[t];if(Wt[t++]=null,o!==null&&h!==null){var q=o.pending;q===null?h.next=h:(h.next=q.next,q.next=h),o.pending=h}w!==0&&mr(r,h,w)}}function rr(e,t,r,o){Wt[on++]=e,Wt[on++]=t,Wt[on++]=r,Wt[on++]=o,Tr|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function lr(e,t,r,o){return rr(e,t,r,o),Ai(e)}function Hi(e,t){return rr(e,null,null,t),Ai(e)}function mr(e,t,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var h=!1,w=e.return;w!==null;)w.childLanes|=r,o=w.alternate,o!==null&&(o.childLanes|=r),w.tag===22&&(e=w.stateNode,e===null||e._visibility&1||(h=!0)),e=w,w=w.return;return e.tag===3?(w=e.stateNode,h&&t!==null&&(h=31-N(r),e=w.hiddenUpdates,o=e[h],o===null?e[h]=[t]:o.push(t),t.lane=r|536870912),w):null}function Ai(e){if(50<au)throw au=0,Of=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Xi={};function wv(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(e,t,r,o){return new wv(e,t,r,o)}function Ac(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pa(e,t){var r=e.alternate;return r===null?(r=gi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Ih(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Xu(e,t,r,o,h,w){var q=0;if(o=e,typeof e=="function")Ac(e)&&(q=1);else if(typeof e=="string")q=Eb(e,r,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case qe:return e=gi(31,r,t,h),e.elementType=qe,e.lanes=w,e;case C:return yo(r.children,h,w,t);case O:q=8,h|=24;break;case U:return e=gi(12,r,t,h|2),e.elementType=U,e.lanes=w,e;case z:return e=gi(13,r,t,h),e.elementType=z,e.lanes=w,e;case Y:return e=gi(19,r,t,h),e.elementType=Y,e.lanes=w,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F:case I:q=10;break e;case P:q=9;break e;case B:q=11;break e;case Q:q=14;break e;case ve:q=16,o=null;break e}q=29,r=Error(i(130,e===null?"null":typeof e,"")),o=null}return t=gi(q,r,t,h),t.elementType=e,t.type=o,t.lanes=w,t}function yo(e,t,r,o){return e=gi(7,e,o,t),e.lanes=r,e}function Rc(e,t,r){return e=gi(6,e,null,t),e.lanes=r,e}function kc(e,t,r){return t=gi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ko=[],qo=0,Zu=null,el=0,Ri=[],ki=0,mo=null,ga=1,ya="";function vo(e,t){Ko[qo++]=el,Ko[qo++]=Zu,Zu=e,el=t}function jh(e,t,r){Ri[ki++]=ga,Ri[ki++]=ya,Ri[ki++]=mo,mo=e;var o=ga;e=ya;var h=32-N(o)-1;o&=~(1<<h),r+=1;var w=32-N(t)+h;if(30<w){var q=h-h%5;w=(o&(1<<q)-1).toString(32),o>>=q,h-=q,ga=1<<32-N(t)+h|r<<h|o,ya=w+e}else ga=1<<w|r<<h|o,ya=e}function Fc(e){e.return!==null&&(vo(e,1),jh(e,1,0))}function Nc(e){for(;e===Zu;)Zu=Ko[--qo],Ko[qo]=null,el=Ko[--qo],Ko[qo]=null;for(;e===mo;)mo=Ri[--ki],Ri[ki]=null,ya=Ri[--ki],Ri[ki]=null,ga=Ri[--ki],Ri[ki]=null}var $r=null,Zn=null,Tn=!1,bo=null,Zi=!1,Cc=Error(i(519));function _o(e){var t=Error(i(418,""));throw Ps(Gt(t,e)),Cc}function Uh(e){var t=e.stateNode,r=e.type,o=e.memoizedProps;switch(t[Ot]=e,t[qt]=o,r){case"dialog":mn("cancel",t),mn("close",t);break;case"iframe":case"object":case"embed":mn("load",t);break;case"video":case"audio":for(r=0;r<su.length;r++)mn(su[r],t);break;case"source":mn("error",t);break;case"img":case"image":case"link":mn("error",t),mn("load",t);break;case"details":mn("toggle",t);break;case"input":mn("invalid",t),Ae(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ie(t);break;case"select":mn("invalid",t);break;case"textarea":mn("invalid",t),X(t,o.value,o.defaultValue,o.children),ie(t)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||o.suppressHydrationWarning===!0||Zg(t.textContent,r)?(o.popover!=null&&(mn("beforetoggle",t),mn("toggle",t)),o.onScroll!=null&&mn("scroll",t),o.onScrollEnd!=null&&mn("scrollend",t),o.onClick!=null&&(t.onclick=Il),t=!0):t=!1,t||_o(e)}function Ph(e){for($r=e.return;$r;)switch($r.tag){case 5:case 13:Zi=!1;return;case 27:case 3:Zi=!0;return;default:$r=$r.return}}function js(e){if(e!==$r)return!1;if(!Tn)return Ph(e),Tn=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Jf(e.type,e.memoizedProps)),r=!r),r&&Zn&&_o(e),Ph(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(t===0){Zn=qi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++;e=e.nextSibling}Zn=null}}else t===27?(t=Zn,eo(e.type)?(e=Xf,Xf=null,Zn=e):Zn=t):Zn=$r?qi(e.stateNode.nextSibling):null;return!0}function Us(){Zn=$r=null,Tn=!1}function Lh(){var e=bo;return e!==null&&(ni===null?ni=e:ni.push.apply(ni,e),bo=null),e}function Ps(e){bo===null?bo=[e]:bo.push(e)}var Oc=he(null),wo=null,ma=null;function Ma(e,t,r){be(Oc,t._currentValue),t._currentValue=r}function va(e){e._currentValue=Oc.current,Re(Oc)}function Dc(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Ic(e,t,r,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var w=h.dependencies;if(w!==null){var q=h.child;w=w.firstContext;e:for(;w!==null;){var te=w;w=h;for(var Ee=0;Ee<t.length;Ee++)if(te.context===t[Ee]){w.lanes|=r,te=w.alternate,te!==null&&(te.lanes|=r),Dc(w.return,r,e),o||(q=null);break e}w=te.next}}else if(h.tag===18){if(q=h.return,q===null)throw Error(i(341));q.lanes|=r,w=q.alternate,w!==null&&(w.lanes|=r),Dc(q,r,e),q=null}else q=h.child;if(q!==null)q.return=h;else for(q=h;q!==null;){if(q===e){q=null;break}if(h=q.sibling,h!==null){h.return=q.return,q=h;break}q=q.return}h=q}}function Ls(e,t,r,o){e=null;for(var h=t,w=!1;h!==null;){if(!w){if((h.flags&524288)!==0)w=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var q=h.alternate;if(q===null)throw Error(i(387));if(q=q.memoizedProps,q!==null){var te=h.type;Lr(h.pendingProps.value,q.value)||(e!==null?e.push(te):e=[te])}}else if(h===Ut.current){if(q=h.alternate,q===null)throw Error(i(387));q.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(hu):e=[hu])}h=h.return}e!==null&&Ic(t,e,r,o),t.flags|=262144}function tl(e){for(e=e.firstContext;e!==null;){if(!Lr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function So(e){wo=e,ma=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mr(e){return Mh(wo,e)}function nl(e,t){return wo===null&&So(e),Mh(e,t)}function Mh(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},ma===null){if(e===null)throw Error(i(308));ma=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ma=ma.next=t;return r}var Sv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},Ev=a.unstable_scheduleCallback,xv=a.unstable_NormalPriority,dr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jc(){return{controller:new Sv,data:new Map,refCount:0}}function Ms(e){e.refCount--,e.refCount===0&&Ev(xv,function(){e.controller.abort()})}var Bs=null,Uc=0,zo=0,Vo=null;function Tv(e,t){if(Bs===null){var r=Bs=[];Uc=0,zo=Mf(),Vo={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Uc++,t.then(Bh,Bh),t}function Bh(){if(--Uc===0&&Bs!==null){Vo!==null&&(Vo.status="fulfilled");var e=Bs;Bs=null,zo=0,Vo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Av(e,t){var r=[],o={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var h=0;h<r.length;h++)(0,r[h])(t)},function(h){for(o.status="rejected",o.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),o}var Hh=Ne.S;Ne.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Tv(e,t),Hh!==null&&Hh(e,t)};var Eo=he(null);function Pc(){var e=Eo.current;return e!==null?e:Pn.pooledCache}function rl(e,t){t===null?be(Eo,Eo.current):be(Eo,t.pool)}function Kh(){var e=Pc();return e===null?null:{parent:dr._currentValue,pool:e}}var Hs=Error(i(460)),qh=Error(i(474)),il=Error(i(542)),Lc={then:function(){}};function zh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function al(){}function Vh(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(al,al),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$h(e),e;default:if(typeof t.status=="string")t.then(al,al);else{if(e=Pn,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var h=t;h.status="fulfilled",h.value=o}},function(o){if(t.status==="pending"){var h=t;h.status="rejected",h.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$h(e),e}throw Ks=t,Hs}}var Ks=null;function Gh(){if(Ks===null)throw Error(i(459));var e=Ks;return Ks=null,e}function $h(e){if(e===Hs||e===il)throw Error(i(483))}var Ba=!1;function Mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ha(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ka(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(kn&2)!==0){var h=o.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),o.pending=t,t=Ai(e),mr(e,null,r),t}return rr(e,o,t,r),Ai(e)}function qs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,nr(e,r)}}function Hc(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var h=null,w=null;if(r=r.firstBaseUpdate,r!==null){do{var q={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};w===null?h=w=q:w=w.next=q,r=r.next}while(r!==null);w===null?h=w=t:w=w.next=t}else h=w=t;r={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:w,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var Kc=!1;function zs(){if(Kc){var e=Vo;if(e!==null)throw e}}function Vs(e,t,r,o){Kc=!1;var h=e.updateQueue;Ba=!1;var w=h.firstBaseUpdate,q=h.lastBaseUpdate,te=h.shared.pending;if(te!==null){h.shared.pending=null;var Ee=te,Qe=Ee.next;Ee.next=null,q===null?w=Qe:q.next=Qe,q=Ee;var pt=e.alternate;pt!==null&&(pt=pt.updateQueue,te=pt.lastBaseUpdate,te!==q&&(te===null?pt.firstBaseUpdate=Qe:te.next=Qe,pt.lastBaseUpdate=Ee))}if(w!==null){var vt=h.baseState;q=0,pt=Qe=Ee=null,te=w;do{var rt=te.lane&-536870913,st=rt!==te.lane;if(st?(wn&rt)===rt:(o&rt)===rt){rt!==0&&rt===zo&&(Kc=!0),pt!==null&&(pt=pt.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var tn=e,Yt=te;rt=t;var Dn=r;switch(Yt.tag){case 1:if(tn=Yt.payload,typeof tn=="function"){vt=tn.call(Dn,vt,rt);break e}vt=tn;break e;case 3:tn.flags=tn.flags&-65537|128;case 0:if(tn=Yt.payload,rt=typeof tn=="function"?tn.call(Dn,vt,rt):tn,rt==null)break e;vt=_({},vt,rt);break e;case 2:Ba=!0}}rt=te.callback,rt!==null&&(e.flags|=64,st&&(e.flags|=8192),st=h.callbacks,st===null?h.callbacks=[rt]:st.push(rt))}else st={lane:rt,tag:te.tag,payload:te.payload,callback:te.callback,next:null},pt===null?(Qe=pt=st,Ee=vt):pt=pt.next=st,q|=rt;if(te=te.next,te===null){if(te=h.shared.pending,te===null)break;st=te,te=st.next,st.next=null,h.lastBaseUpdate=st,h.shared.pending=null}}while(!0);pt===null&&(Ee=vt),h.baseState=Ee,h.firstBaseUpdate=Qe,h.lastBaseUpdate=pt,w===null&&(h.shared.lanes=0),Ya|=q,e.lanes=q,e.memoizedState=vt}}function Jh(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Wh(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Jh(r[e],t)}var Go=he(null),ol=he(0);function Yh(e,t){e=Ta,be(ol,e),be(Go,t),Ta=e|t.baseLanes}function qc(){be(ol,Ta),be(Go,Go.current)}function zc(){Ta=ol.current,Re(Go),Re(ol)}var qa=0,dn=null,Cn=null,cr=null,sl=!1,$o=!1,xo=!1,ul=0,Gs=0,Jo=null,Rv=0;function ir(){throw Error(i(321))}function Vc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Lr(e[r],t[r]))return!1;return!0}function Gc(e,t,r,o,h,w){return qa=w,dn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ne.H=e===null||e.memoizedState===null?Dp:Ip,xo=!1,w=r(o,h),xo=!1,$o&&(w=Xh(t,r,o,h)),Qh(e),w}function Qh(e){Ne.H=pl;var t=Cn!==null&&Cn.next!==null;if(qa=0,cr=Cn=dn=null,sl=!1,Gs=0,Jo=null,t)throw Error(i(300));e===null||vr||(e=e.dependencies,e!==null&&tl(e)&&(vr=!0))}function Xh(e,t,r,o){dn=e;var h=0;do{if($o&&(Jo=null),Gs=0,$o=!1,25<=h)throw Error(i(301));if(h+=1,cr=Cn=null,e.updateQueue!=null){var w=e.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Ne.H=Iv,w=t(r,o)}while($o);return w}function kv(){var e=Ne.H,t=e.useState()[0];return t=typeof t.then=="function"?$s(t):t,e=e.useState()[0],(Cn!==null?Cn.memoizedState:null)!==e&&(dn.flags|=1024),t}function $c(){var e=ul!==0;return ul=0,e}function Jc(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Wc(e){if(sl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}sl=!1}qa=0,cr=Cn=dn=null,$o=!1,Gs=ul=0,Jo=null}function ei(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?dn.memoizedState=cr=e:cr=cr.next=e,cr}function fr(){if(Cn===null){var e=dn.alternate;e=e!==null?e.memoizedState:null}else e=Cn.next;var t=cr===null?dn.memoizedState:cr.next;if(t!==null)cr=t,Cn=e;else{if(e===null)throw dn.alternate===null?Error(i(467)):Error(i(310));Cn=e,e={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},cr===null?dn.memoizedState=cr=e:cr=cr.next=e}return cr}function Yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $s(e){var t=Gs;return Gs+=1,Jo===null&&(Jo=[]),e=Vh(Jo,e,t),t=dn,(cr===null?t.memoizedState:cr.next)===null&&(t=t.alternate,Ne.H=t===null||t.memoizedState===null?Dp:Ip),e}function ll(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $s(e);if(e.$$typeof===I)return Mr(e)}throw Error(i(438,String(e)))}function Qc(e){var t=null,r=dn.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var o=dn.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(h){return h.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=Yc(),dn.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),o=0;o<e;o++)r[o]=J;return t.index++,r}function ba(e,t){return typeof t=="function"?t(e):t}function cl(e){var t=fr();return Xc(t,Cn,e)}function Xc(e,t,r){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var h=e.baseQueue,w=o.pending;if(w!==null){if(h!==null){var q=h.next;h.next=w.next,w.next=q}t.baseQueue=h=w,o.pending=null}if(w=e.baseState,h===null)e.memoizedState=w;else{t=h.next;var te=q=null,Ee=null,Qe=t,pt=!1;do{var vt=Qe.lane&-536870913;if(vt!==Qe.lane?(wn&vt)===vt:(qa&vt)===vt){var rt=Qe.revertLane;if(rt===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),vt===zo&&(pt=!0);else if((qa&rt)===rt){Qe=Qe.next,rt===zo&&(pt=!0);continue}else vt={lane:0,revertLane:Qe.revertLane,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Ee===null?(te=Ee=vt,q=w):Ee=Ee.next=vt,dn.lanes|=rt,Ya|=rt;vt=Qe.action,xo&&r(w,vt),w=Qe.hasEagerState?Qe.eagerState:r(w,vt)}else rt={lane:vt,revertLane:Qe.revertLane,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Ee===null?(te=Ee=rt,q=w):Ee=Ee.next=rt,dn.lanes|=vt,Ya|=vt;Qe=Qe.next}while(Qe!==null&&Qe!==t);if(Ee===null?q=w:Ee.next=te,!Lr(w,e.memoizedState)&&(vr=!0,pt&&(r=Vo,r!==null)))throw r;e.memoizedState=w,e.baseState=q,e.baseQueue=Ee,o.lastRenderedState=w}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Zc(e){var t=fr(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var o=r.dispatch,h=r.pending,w=t.memoizedState;if(h!==null){r.pending=null;var q=h=h.next;do w=e(w,q.action),q=q.next;while(q!==h);Lr(w,t.memoizedState)||(vr=!0),t.memoizedState=w,t.baseQueue===null&&(t.baseState=w),r.lastRenderedState=w}return[w,o]}function Zh(e,t,r){var o=dn,h=fr(),w=Tn;if(w){if(r===void 0)throw Error(i(407));r=r()}else r=t();var q=!Lr((Cn||h).memoizedState,r);q&&(h.memoizedState=r,vr=!0),h=h.queue;var te=np.bind(null,o,h,e);if(Js(2048,8,te,[e]),h.getSnapshot!==t||q||cr!==null&&cr.memoizedState.tag&1){if(o.flags|=2048,Wo(9,fl(),tp.bind(null,o,h,r,t),null),Pn===null)throw Error(i(349));w||(qa&124)!==0||ep(o,t,r)}return r}function ep(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=dn.updateQueue,t===null?(t=Yc(),dn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function tp(e,t,r,o){t.value=r,t.getSnapshot=o,rp(t)&&ip(e)}function np(e,t,r){return r(function(){rp(t)&&ip(e)})}function rp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Lr(e,r)}catch{return!0}}function ip(e){var t=Hi(e,2);t!==null&&_i(t,e,2)}function ef(e){var t=ei();if(typeof e=="function"){var r=e;if(e=r(),xo){R(!0);try{r()}finally{R(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t}function ap(e,t,r,o){return e.baseState=r,Xc(e,Cn,typeof o=="function"?o:ba)}function Fv(e,t,r,o,h){if(hl(e))throw Error(i(485));if(e=t.action,e!==null){var w={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){w.listeners.push(q)}};Ne.T!==null?r(!0):w.isTransition=!1,o(w),r=t.pending,r===null?(w.next=t.pending=w,op(t,w)):(w.next=r.next,t.pending=r.next=w)}}function op(e,t){var r=t.action,o=t.payload,h=e.state;if(t.isTransition){var w=Ne.T,q={};Ne.T=q;try{var te=r(h,o),Ee=Ne.S;Ee!==null&&Ee(q,te),sp(e,t,te)}catch(Qe){tf(e,t,Qe)}finally{Ne.T=w}}else try{w=r(h,o),sp(e,t,w)}catch(Qe){tf(e,t,Qe)}}function sp(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){up(e,t,o)},function(o){return tf(e,t,o)}):up(e,t,r)}function up(e,t,r){t.status="fulfilled",t.value=r,lp(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,op(e,r)))}function tf(e,t,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=r,lp(t),t=t.next;while(t!==o)}e.action=null}function lp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function cp(e,t){return t}function fp(e,t){if(Tn){var r=Pn.formState;if(r!==null){e:{var o=dn;if(Tn){if(Zn){t:{for(var h=Zn,w=Zi;h.nodeType!==8;){if(!w){h=null;break t}if(h=qi(h.nextSibling),h===null){h=null;break t}}w=h.data,h=w==="F!"||w==="F"?h:null}if(h){Zn=qi(h.nextSibling),o=h.data==="F!";break e}}_o(o)}o=!1}o&&(t=r[0])}}return r=ei(),r.memoizedState=r.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cp,lastRenderedState:t},r.queue=o,r=Np.bind(null,dn,o),o.dispatch=r,o=ef(!1),w=sf.bind(null,dn,!1,o.queue),o=ei(),h={state:t,dispatch:null,action:e,pending:null},o.queue=h,r=Fv.bind(null,dn,h,w,r),h.dispatch=r,o.memoizedState=e,[t,r,!1]}function dp(e){var t=fr();return hp(t,Cn,e)}function hp(e,t,r){if(t=Xc(e,t,cp)[0],e=cl(ba)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=$s(t)}catch(q){throw q===Hs?il:q}else o=t;t=fr();var h=t.queue,w=h.dispatch;return r!==t.memoizedState&&(dn.flags|=2048,Wo(9,fl(),Nv.bind(null,h,r),null)),[o,w,e]}function Nv(e,t){e.action=t}function pp(e){var t=fr(),r=Cn;if(r!==null)return hp(t,r,e);fr(),t=t.memoizedState,r=fr();var o=r.queue.dispatch;return r.memoizedState=e,[t,o,!1]}function Wo(e,t,r,o){return e={tag:e,create:r,deps:o,inst:t,next:null},t=dn.updateQueue,t===null&&(t=Yc(),dn.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e),e}function fl(){return{destroy:void 0,resource:void 0}}function gp(){return fr().memoizedState}function dl(e,t,r,o){var h=ei();o=o===void 0?null:o,dn.flags|=e,h.memoizedState=Wo(1|t,fl(),r,o)}function Js(e,t,r,o){var h=fr();o=o===void 0?null:o;var w=h.memoizedState.inst;Cn!==null&&o!==null&&Vc(o,Cn.memoizedState.deps)?h.memoizedState=Wo(t,w,r,o):(dn.flags|=e,h.memoizedState=Wo(1|t,w,r,o))}function yp(e,t){dl(8390656,8,e,t)}function mp(e,t){Js(2048,8,e,t)}function vp(e,t){return Js(4,2,e,t)}function bp(e,t){return Js(4,4,e,t)}function _p(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wp(e,t,r){r=r!=null?r.concat([e]):null,Js(4,4,_p.bind(null,t,e),r)}function nf(){}function Sp(e,t){var r=fr();t=t===void 0?null:t;var o=r.memoizedState;return t!==null&&Vc(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function Ep(e,t){var r=fr();t=t===void 0?null:t;var o=r.memoizedState;if(t!==null&&Vc(t,o[1]))return o[0];if(o=e(),xo){R(!0);try{e()}finally{R(!1)}}return r.memoizedState=[o,t],o}function rf(e,t,r){return r===void 0||(qa&1073741824)!==0?e.memoizedState=t:(e.memoizedState=r,e=Ag(),dn.lanes|=e,Ya|=e,r)}function xp(e,t,r,o){return Lr(r,t)?r:Go.current!==null?(e=rf(e,r,o),Lr(e,t)||(vr=!0),e):(qa&42)===0?(vr=!0,e.memoizedState=r):(e=Ag(),dn.lanes|=e,Ya|=e,t)}function Tp(e,t,r,o,h){var w=Me.p;Me.p=w!==0&&8>w?w:8;var q=Ne.T,te={};Ne.T=te,sf(e,!1,t,r);try{var Ee=h(),Qe=Ne.S;if(Qe!==null&&Qe(te,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var pt=Av(Ee,o);Ws(e,t,pt,bi(e))}else Ws(e,t,o,bi(e))}catch(vt){Ws(e,t,{then:function(){},status:"rejected",reason:vt},bi())}finally{Me.p=w,Ne.T=q}}function Cv(){}function af(e,t,r,o){if(e.tag!==5)throw Error(i(476));var h=Ap(e).queue;Tp(e,h,t,Fe,r===null?Cv:function(){return Rp(e),r(o)})}function Ap(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Fe,baseState:Fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:Fe},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Rp(e){var t=Ap(e).next.queue;Ws(e,t,{},bi())}function of(){return Mr(hu)}function kp(){return fr().memoizedState}function Fp(){return fr().memoizedState}function Ov(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=bi();e=Ha(r);var o=Ka(t,e,r);o!==null&&(_i(o,t,r),qs(o,t,r)),t={cache:jc()},e.payload=t;return}t=t.return}}function Dv(e,t,r){var o=bi();r={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},hl(e)?Cp(t,r):(r=lr(e,t,r,o),r!==null&&(_i(r,e,o),Op(r,t,o)))}function Np(e,t,r){var o=bi();Ws(e,t,r,o)}function Ws(e,t,r,o){var h={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(hl(e))Cp(t,h);else{var w=e.alternate;if(e.lanes===0&&(w===null||w.lanes===0)&&(w=t.lastRenderedReducer,w!==null))try{var q=t.lastRenderedState,te=w(q,r);if(h.hasEagerState=!0,h.eagerState=te,Lr(te,q))return rr(e,t,h,0),Pn===null&&en(),!1}catch{}finally{}if(r=lr(e,t,h,o),r!==null)return _i(r,e,o),Op(r,t,o),!0}return!1}function sf(e,t,r,o){if(o={lane:2,revertLane:Mf(),action:o,hasEagerState:!1,eagerState:null,next:null},hl(e)){if(t)throw Error(i(479))}else t=lr(e,r,o,2),t!==null&&_i(t,e,2)}function hl(e){var t=e.alternate;return e===dn||t!==null&&t===dn}function Cp(e,t){$o=sl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Op(e,t,r){if((r&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,nr(e,r)}}var pl={readContext:Mr,use:ll,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useLayoutEffect:ir,useInsertionEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useSyncExternalStore:ir,useId:ir,useHostTransitionStatus:ir,useFormState:ir,useActionState:ir,useOptimistic:ir,useMemoCache:ir,useCacheRefresh:ir},Dp={readContext:Mr,use:ll,useCallback:function(e,t){return ei().memoizedState=[e,t===void 0?null:t],e},useContext:Mr,useEffect:yp,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,dl(4194308,4,_p.bind(null,t,e),r)},useLayoutEffect:function(e,t){return dl(4194308,4,e,t)},useInsertionEffect:function(e,t){dl(4,2,e,t)},useMemo:function(e,t){var r=ei();t=t===void 0?null:t;var o=e();if(xo){R(!0);try{e()}finally{R(!1)}}return r.memoizedState=[o,t],o},useReducer:function(e,t,r){var o=ei();if(r!==void 0){var h=r(t);if(xo){R(!0);try{r(t)}finally{R(!1)}}}else h=t;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=Dv.bind(null,dn,e),[o.memoizedState,e]},useRef:function(e){var t=ei();return e={current:e},t.memoizedState=e},useState:function(e){e=ef(e);var t=e.queue,r=Np.bind(null,dn,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:nf,useDeferredValue:function(e,t){var r=ei();return rf(r,e,t)},useTransition:function(){var e=ef(!1);return e=Tp.bind(null,dn,e.queue,!0,!1),ei().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var o=dn,h=ei();if(Tn){if(r===void 0)throw Error(i(407));r=r()}else{if(r=t(),Pn===null)throw Error(i(349));(wn&124)!==0||ep(o,t,r)}h.memoizedState=r;var w={value:r,getSnapshot:t};return h.queue=w,yp(np.bind(null,o,w,e),[e]),o.flags|=2048,Wo(9,fl(),tp.bind(null,o,w,r,t),null),r},useId:function(){var e=ei(),t=Pn.identifierPrefix;if(Tn){var r=ya,o=ga;r=(o&~(1<<32-N(o)-1)).toString(32)+r,t="«"+t+"R"+r,r=ul++,0<r&&(t+="H"+r.toString(32)),t+="»"}else r=Rv++,t="«"+t+"r"+r.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:of,useFormState:fp,useActionState:fp,useOptimistic:function(e){var t=ei();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=sf.bind(null,dn,!0,r),r.dispatch=t,[e,t]},useMemoCache:Qc,useCacheRefresh:function(){return ei().memoizedState=Ov.bind(null,dn)}},Ip={readContext:Mr,use:ll,useCallback:Sp,useContext:Mr,useEffect:mp,useImperativeHandle:wp,useInsertionEffect:vp,useLayoutEffect:bp,useMemo:Ep,useReducer:cl,useRef:gp,useState:function(){return cl(ba)},useDebugValue:nf,useDeferredValue:function(e,t){var r=fr();return xp(r,Cn.memoizedState,e,t)},useTransition:function(){var e=cl(ba)[0],t=fr().memoizedState;return[typeof e=="boolean"?e:$s(e),t]},useSyncExternalStore:Zh,useId:kp,useHostTransitionStatus:of,useFormState:dp,useActionState:dp,useOptimistic:function(e,t){var r=fr();return ap(r,Cn,e,t)},useMemoCache:Qc,useCacheRefresh:Fp},Iv={readContext:Mr,use:ll,useCallback:Sp,useContext:Mr,useEffect:mp,useImperativeHandle:wp,useInsertionEffect:vp,useLayoutEffect:bp,useMemo:Ep,useReducer:Zc,useRef:gp,useState:function(){return Zc(ba)},useDebugValue:nf,useDeferredValue:function(e,t){var r=fr();return Cn===null?rf(r,e,t):xp(r,Cn.memoizedState,e,t)},useTransition:function(){var e=Zc(ba)[0],t=fr().memoizedState;return[typeof e=="boolean"?e:$s(e),t]},useSyncExternalStore:Zh,useId:kp,useHostTransitionStatus:of,useFormState:pp,useActionState:pp,useOptimistic:function(e,t){var r=fr();return Cn!==null?ap(r,Cn,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Qc,useCacheRefresh:Fp},Yo=null,Ys=0;function gl(e){var t=Ys;return Ys+=1,Yo===null&&(Yo=[]),Vh(Yo,e,t)}function Qs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yl(e,t){throw t.$$typeof===S?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function jp(e){var t=e._init;return t(e._payload)}function Up(e){function t(ze,je){if(e){var We=ze.deletions;We===null?(ze.deletions=[je],ze.flags|=16):We.push(je)}}function r(ze,je){if(!e)return null;for(;je!==null;)t(ze,je),je=je.sibling;return null}function o(ze){for(var je=new Map;ze!==null;)ze.key!==null?je.set(ze.key,ze):je.set(ze.index,ze),ze=ze.sibling;return je}function h(ze,je){return ze=pa(ze,je),ze.index=0,ze.sibling=null,ze}function w(ze,je,We){return ze.index=We,e?(We=ze.alternate,We!==null?(We=We.index,We<je?(ze.flags|=67108866,je):We):(ze.flags|=67108866,je)):(ze.flags|=1048576,je)}function q(ze){return e&&ze.alternate===null&&(ze.flags|=67108866),ze}function te(ze,je,We,yt){return je===null||je.tag!==6?(je=Rc(We,ze.mode,yt),je.return=ze,je):(je=h(je,We),je.return=ze,je)}function Ee(ze,je,We,yt){var Bt=We.type;return Bt===C?pt(ze,je,We.props.children,yt,We.key):je!==null&&(je.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===ve&&jp(Bt)===je.type)?(je=h(je,We.props),Qs(je,We),je.return=ze,je):(je=Xu(We.type,We.key,We.props,null,ze.mode,yt),Qs(je,We),je.return=ze,je)}function Qe(ze,je,We,yt){return je===null||je.tag!==4||je.stateNode.containerInfo!==We.containerInfo||je.stateNode.implementation!==We.implementation?(je=kc(We,ze.mode,yt),je.return=ze,je):(je=h(je,We.children||[]),je.return=ze,je)}function pt(ze,je,We,yt,Bt){return je===null||je.tag!==7?(je=yo(We,ze.mode,yt,Bt),je.return=ze,je):(je=h(je,We),je.return=ze,je)}function vt(ze,je,We){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return je=Rc(""+je,ze.mode,We),je.return=ze,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case D:return We=Xu(je.type,je.key,je.props,null,ze.mode,We),Qs(We,je),We.return=ze,We;case M:return je=kc(je,ze.mode,We),je.return=ze,je;case ve:var yt=je._init;return je=yt(je._payload),vt(ze,je,We)}if(mt(je)||Xe(je))return je=yo(je,ze.mode,We,null),je.return=ze,je;if(typeof je.then=="function")return vt(ze,gl(je),We);if(je.$$typeof===I)return vt(ze,nl(ze,je),We);yl(ze,je)}return null}function rt(ze,je,We,yt){var Bt=je!==null?je.key:null;if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return Bt!==null?null:te(ze,je,""+We,yt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case D:return We.key===Bt?Ee(ze,je,We,yt):null;case M:return We.key===Bt?Qe(ze,je,We,yt):null;case ve:return Bt=We._init,We=Bt(We._payload),rt(ze,je,We,yt)}if(mt(We)||Xe(We))return Bt!==null?null:pt(ze,je,We,yt,null);if(typeof We.then=="function")return rt(ze,je,gl(We),yt);if(We.$$typeof===I)return rt(ze,je,nl(ze,We),yt);yl(ze,We)}return null}function st(ze,je,We,yt,Bt){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return ze=ze.get(We)||null,te(je,ze,""+yt,Bt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case D:return ze=ze.get(yt.key===null?We:yt.key)||null,Ee(je,ze,yt,Bt);case M:return ze=ze.get(yt.key===null?We:yt.key)||null,Qe(je,ze,yt,Bt);case ve:var hn=yt._init;return yt=hn(yt._payload),st(ze,je,We,yt,Bt)}if(mt(yt)||Xe(yt))return ze=ze.get(We)||null,pt(je,ze,yt,Bt,null);if(typeof yt.then=="function")return st(ze,je,We,gl(yt),Bt);if(yt.$$typeof===I)return st(ze,je,We,nl(je,yt),Bt);yl(je,yt)}return null}function tn(ze,je,We,yt){for(var Bt=null,hn=null,zt=je,Xt=je=0,_r=null;zt!==null&&Xt<We.length;Xt++){zt.index>Xt?(_r=zt,zt=null):_r=zt.sibling;var xn=rt(ze,zt,We[Xt],yt);if(xn===null){zt===null&&(zt=_r);break}e&&zt&&xn.alternate===null&&t(ze,zt),je=w(xn,je,Xt),hn===null?Bt=xn:hn.sibling=xn,hn=xn,zt=_r}if(Xt===We.length)return r(ze,zt),Tn&&vo(ze,Xt),Bt;if(zt===null){for(;Xt<We.length;Xt++)zt=vt(ze,We[Xt],yt),zt!==null&&(je=w(zt,je,Xt),hn===null?Bt=zt:hn.sibling=zt,hn=zt);return Tn&&vo(ze,Xt),Bt}for(zt=o(zt);Xt<We.length;Xt++)_r=st(zt,ze,Xt,We[Xt],yt),_r!==null&&(e&&_r.alternate!==null&&zt.delete(_r.key===null?Xt:_r.key),je=w(_r,je,Xt),hn===null?Bt=_r:hn.sibling=_r,hn=_r);return e&&zt.forEach(function(ao){return t(ze,ao)}),Tn&&vo(ze,Xt),Bt}function Yt(ze,je,We,yt){if(We==null)throw Error(i(151));for(var Bt=null,hn=null,zt=je,Xt=je=0,_r=null,xn=We.next();zt!==null&&!xn.done;Xt++,xn=We.next()){zt.index>Xt?(_r=zt,zt=null):_r=zt.sibling;var ao=rt(ze,zt,xn.value,yt);if(ao===null){zt===null&&(zt=_r);break}e&&zt&&ao.alternate===null&&t(ze,zt),je=w(ao,je,Xt),hn===null?Bt=ao:hn.sibling=ao,hn=ao,zt=_r}if(xn.done)return r(ze,zt),Tn&&vo(ze,Xt),Bt;if(zt===null){for(;!xn.done;Xt++,xn=We.next())xn=vt(ze,xn.value,yt),xn!==null&&(je=w(xn,je,Xt),hn===null?Bt=xn:hn.sibling=xn,hn=xn);return Tn&&vo(ze,Xt),Bt}for(zt=o(zt);!xn.done;Xt++,xn=We.next())xn=st(zt,ze,Xt,xn.value,yt),xn!==null&&(e&&xn.alternate!==null&&zt.delete(xn.key===null?Xt:xn.key),je=w(xn,je,Xt),hn===null?Bt=xn:hn.sibling=xn,hn=xn);return e&&zt.forEach(function(jb){return t(ze,jb)}),Tn&&vo(ze,Xt),Bt}function Dn(ze,je,We,yt){if(typeof We=="object"&&We!==null&&We.type===C&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case D:e:{for(var Bt=We.key;je!==null;){if(je.key===Bt){if(Bt=We.type,Bt===C){if(je.tag===7){r(ze,je.sibling),yt=h(je,We.props.children),yt.return=ze,ze=yt;break e}}else if(je.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===ve&&jp(Bt)===je.type){r(ze,je.sibling),yt=h(je,We.props),Qs(yt,We),yt.return=ze,ze=yt;break e}r(ze,je);break}else t(ze,je);je=je.sibling}We.type===C?(yt=yo(We.props.children,ze.mode,yt,We.key),yt.return=ze,ze=yt):(yt=Xu(We.type,We.key,We.props,null,ze.mode,yt),Qs(yt,We),yt.return=ze,ze=yt)}return q(ze);case M:e:{for(Bt=We.key;je!==null;){if(je.key===Bt)if(je.tag===4&&je.stateNode.containerInfo===We.containerInfo&&je.stateNode.implementation===We.implementation){r(ze,je.sibling),yt=h(je,We.children||[]),yt.return=ze,ze=yt;break e}else{r(ze,je);break}else t(ze,je);je=je.sibling}yt=kc(We,ze.mode,yt),yt.return=ze,ze=yt}return q(ze);case ve:return Bt=We._init,We=Bt(We._payload),Dn(ze,je,We,yt)}if(mt(We))return tn(ze,je,We,yt);if(Xe(We)){if(Bt=Xe(We),typeof Bt!="function")throw Error(i(150));return We=Bt.call(We),Yt(ze,je,We,yt)}if(typeof We.then=="function")return Dn(ze,je,gl(We),yt);if(We.$$typeof===I)return Dn(ze,je,nl(ze,We),yt);yl(ze,We)}return typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint"?(We=""+We,je!==null&&je.tag===6?(r(ze,je.sibling),yt=h(je,We),yt.return=ze,ze=yt):(r(ze,je),yt=Rc(We,ze.mode,yt),yt.return=ze,ze=yt),q(ze)):r(ze,je)}return function(ze,je,We,yt){try{Ys=0;var Bt=Dn(ze,je,We,yt);return Yo=null,Bt}catch(zt){if(zt===Hs||zt===il)throw zt;var hn=gi(29,zt,null,ze.mode);return hn.lanes=yt,hn.return=ze,hn}finally{}}}var Qo=Up(!0),Pp=Up(!1),Fi=he(null),ea=null;function za(e){var t=e.alternate;be(hr,hr.current&1),be(Fi,e),ea===null&&(t===null||Go.current!==null||t.memoizedState!==null)&&(ea=e)}function Lp(e){if(e.tag===22){if(be(hr,hr.current),be(Fi,e),ea===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ea=e)}}else Va()}function Va(){be(hr,hr.current),be(Fi,Fi.current)}function _a(e){Re(Fi),ea===e&&(ea=null),Re(hr)}var hr=he(0);function ml(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Qf(r)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function uf(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:_({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var lf={enqueueSetState:function(e,t,r){e=e._reactInternals;var o=bi(),h=Ha(o);h.payload=t,r!=null&&(h.callback=r),t=Ka(e,h,o),t!==null&&(_i(t,e,o),qs(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=bi(),h=Ha(o);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=Ka(e,h,o),t!==null&&(_i(t,e,o),qs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=bi(),o=Ha(r);o.tag=2,t!=null&&(o.callback=t),t=Ka(e,o,r),t!==null&&(_i(t,e,r),qs(t,e,r))}};function Mp(e,t,r,o,h,w,q){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,w,q):t.prototype&&t.prototype.isPureReactComponent?!f(r,o)||!f(h,w):!0}function Bp(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&lf.enqueueReplaceState(t,t.state,null)}function To(e,t){var r=t;if("ref"in t){r={};for(var o in t)o!=="ref"&&(r[o]=t[o])}if(e=e.defaultProps){r===t&&(r=_({},r));for(var h in e)r[h]===void 0&&(r[h]=e[h])}return r}var vl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Hp(e){vl(e)}function Kp(e){console.error(e)}function qp(e){vl(e)}function bl(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function zp(e,t,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function cf(e,t,r){return r=Ha(r),r.tag=3,r.payload={element:null},r.callback=function(){bl(e,t)},r}function Vp(e){return e=Ha(e),e.tag=3,e}function Gp(e,t,r,o){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var w=o.value;e.payload=function(){return h(w)},e.callback=function(){zp(t,r,o)}}var q=r.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(e.callback=function(){zp(t,r,o),typeof h!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var te=o.stack;this.componentDidCatch(o.value,{componentStack:te!==null?te:""})})}function jv(e,t,r,o,h){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=r.alternate,t!==null&&Ls(t,r,h,!0),r=Fi.current,r!==null){switch(r.tag){case 13:return ea===null?If():r.alternate===null&&er===0&&(er=3),r.flags&=-257,r.flags|=65536,r.lanes=h,o===Lc?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([o]):t.add(o),Uf(e,o,h)),!1;case 22:return r.flags|=65536,o===Lc?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([o]):r.add(o)),Uf(e,o,h)),!1}throw Error(i(435,r.tag))}return Uf(e,o,h),If(),!1}if(Tn)return t=Fi.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=h,o!==Cc&&(e=Error(i(422),{cause:o}),Ps(Gt(e,r)))):(o!==Cc&&(t=Error(i(423),{cause:o}),Ps(Gt(t,r))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Gt(o,r),h=cf(e.stateNode,o,h),Hc(e,h),er!==4&&(er=2)),!1;var w=Error(i(520),{cause:o});if(w=Gt(w,r),iu===null?iu=[w]:iu.push(w),er!==4&&(er=2),t===null)return!0;o=Gt(o,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=h&-h,r.lanes|=e,e=cf(r.stateNode,o,e),Hc(r,e),!1;case 1:if(t=r.type,w=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Qa===null||!Qa.has(w))))return r.flags|=65536,h&=-h,r.lanes|=h,h=Vp(h),Gp(h,e,r,o),Hc(r,h),!1}r=r.return}while(r!==null);return!1}var $p=Error(i(461)),vr=!1;function Ar(e,t,r,o){t.child=e===null?Pp(t,null,r,o):Qo(t,e.child,r,o)}function Jp(e,t,r,o,h){r=r.render;var w=t.ref;if("ref"in o){var q={};for(var te in o)te!=="ref"&&(q[te]=o[te])}else q=o;return So(t),o=Gc(e,t,r,q,w,h),te=$c(),e!==null&&!vr?(Jc(e,t,h),wa(e,t,h)):(Tn&&te&&Fc(t),t.flags|=1,Ar(e,t,o,h),t.child)}function Wp(e,t,r,o,h){if(e===null){var w=r.type;return typeof w=="function"&&!Ac(w)&&w.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=w,Yp(e,t,w,o,h)):(e=Xu(r.type,null,o,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(w=e.child,!vf(e,h)){var q=w.memoizedProps;if(r=r.compare,r=r!==null?r:f,r(q,o)&&e.ref===t.ref)return wa(e,t,h)}return t.flags|=1,e=pa(w,o),e.ref=t.ref,e.return=t,t.child=e}function Yp(e,t,r,o,h){if(e!==null){var w=e.memoizedProps;if(f(w,o)&&e.ref===t.ref)if(vr=!1,t.pendingProps=o=w,vf(e,h))(e.flags&131072)!==0&&(vr=!0);else return t.lanes=e.lanes,wa(e,t,h)}return ff(e,t,r,o,h)}function Qp(e,t,r){var o=t.pendingProps,h=o.children,w=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((t.flags&128)!==0){if(o=w!==null?w.baseLanes|r:r,e!==null){for(h=t.child=e.child,w=0;h!==null;)w=w|h.lanes|h.childLanes,h=h.sibling;t.childLanes=w&~o}else t.childLanes=0,t.child=null;return Xp(e,t,o,r)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&rl(t,w!==null?w.cachePool:null),w!==null?Yh(t,w):qc(),Lp(t);else return t.lanes=t.childLanes=536870912,Xp(e,t,w!==null?w.baseLanes|r:r,r)}else w!==null?(rl(t,w.cachePool),Yh(t,w),Va(),t.memoizedState=null):(e!==null&&rl(t,null),qc(),Va());return Ar(e,t,h,r),t.child}function Xp(e,t,r,o){var h=Pc();return h=h===null?null:{parent:dr._currentValue,pool:h},t.memoizedState={baseLanes:r,cachePool:h},e!==null&&rl(t,null),qc(),Lp(t),e!==null&&Ls(e,t,o,!0),null}function _l(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function ff(e,t,r,o,h){return So(t),r=Gc(e,t,r,o,void 0,h),o=$c(),e!==null&&!vr?(Jc(e,t,h),wa(e,t,h)):(Tn&&o&&Fc(t),t.flags|=1,Ar(e,t,r,h),t.child)}function Zp(e,t,r,o,h,w){return So(t),t.updateQueue=null,r=Xh(t,o,r,h),Qh(e),o=$c(),e!==null&&!vr?(Jc(e,t,w),wa(e,t,w)):(Tn&&o&&Fc(t),t.flags|=1,Ar(e,t,r,w),t.child)}function eg(e,t,r,o,h){if(So(t),t.stateNode===null){var w=Xi,q=r.contextType;typeof q=="object"&&q!==null&&(w=Mr(q)),w=new r(o,w),t.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=lf,t.stateNode=w,w._reactInternals=t,w=t.stateNode,w.props=o,w.state=t.memoizedState,w.refs={},Mc(t),q=r.contextType,w.context=typeof q=="object"&&q!==null?Mr(q):Xi,w.state=t.memoizedState,q=r.getDerivedStateFromProps,typeof q=="function"&&(uf(t,r,q,o),w.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(q=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),q!==w.state&&lf.enqueueReplaceState(w,w.state,null),Vs(t,o,w,h),zs(),w.state=t.memoizedState),typeof w.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){w=t.stateNode;var te=t.memoizedProps,Ee=To(r,te);w.props=Ee;var Qe=w.context,pt=r.contextType;q=Xi,typeof pt=="object"&&pt!==null&&(q=Mr(pt));var vt=r.getDerivedStateFromProps;pt=typeof vt=="function"||typeof w.getSnapshotBeforeUpdate=="function",te=t.pendingProps!==te,pt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(te||Qe!==q)&&Bp(t,w,o,q),Ba=!1;var rt=t.memoizedState;w.state=rt,Vs(t,o,w,h),zs(),Qe=t.memoizedState,te||rt!==Qe||Ba?(typeof vt=="function"&&(uf(t,r,vt,o),Qe=t.memoizedState),(Ee=Ba||Mp(t,r,Ee,o,rt,Qe,q))?(pt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(t.flags|=4194308)):(typeof w.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=Qe),w.props=o,w.state=Qe,w.context=q,o=Ee):(typeof w.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{w=t.stateNode,Bc(e,t),q=t.memoizedProps,pt=To(r,q),w.props=pt,vt=t.pendingProps,rt=w.context,Qe=r.contextType,Ee=Xi,typeof Qe=="object"&&Qe!==null&&(Ee=Mr(Qe)),te=r.getDerivedStateFromProps,(Qe=typeof te=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(q!==vt||rt!==Ee)&&Bp(t,w,o,Ee),Ba=!1,rt=t.memoizedState,w.state=rt,Vs(t,o,w,h),zs();var st=t.memoizedState;q!==vt||rt!==st||Ba||e!==null&&e.dependencies!==null&&tl(e.dependencies)?(typeof te=="function"&&(uf(t,r,te,o),st=t.memoizedState),(pt=Ba||Mp(t,r,pt,o,rt,st,Ee)||e!==null&&e.dependencies!==null&&tl(e.dependencies))?(Qe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(o,st,Ee),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(o,st,Ee)),typeof w.componentDidUpdate=="function"&&(t.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof w.componentDidUpdate!="function"||q===e.memoizedProps&&rt===e.memoizedState||(t.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||q===e.memoizedProps&&rt===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=st),w.props=o,w.state=st,w.context=Ee,o=pt):(typeof w.componentDidUpdate!="function"||q===e.memoizedProps&&rt===e.memoizedState||(t.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||q===e.memoizedProps&&rt===e.memoizedState||(t.flags|=1024),o=!1)}return w=o,_l(e,t),o=(t.flags&128)!==0,w||o?(w=t.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:w.render(),t.flags|=1,e!==null&&o?(t.child=Qo(t,e.child,null,h),t.child=Qo(t,null,r,h)):Ar(e,t,r,h),t.memoizedState=w.state,e=t.child):e=wa(e,t,h),e}function tg(e,t,r,o){return Us(),t.flags|=256,Ar(e,t,r,o),t.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hf(e){return{baseLanes:e,cachePool:Kh()}}function pf(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Ni),e}function ng(e,t,r){var o=t.pendingProps,h=!1,w=(t.flags&128)!==0,q;if((q=w)||(q=e!==null&&e.memoizedState===null?!1:(hr.current&2)!==0),q&&(h=!0,t.flags&=-129),q=(t.flags&32)!==0,t.flags&=-33,e===null){if(Tn){if(h?za(t):Va(),Tn){var te=Zn,Ee;if(Ee=te){e:{for(Ee=te,te=Zi;Ee.nodeType!==8;){if(!te){te=null;break e}if(Ee=qi(Ee.nextSibling),Ee===null){te=null;break e}}te=Ee}te!==null?(t.memoizedState={dehydrated:te,treeContext:mo!==null?{id:ga,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},Ee=gi(18,null,null,0),Ee.stateNode=te,Ee.return=t,t.child=Ee,$r=t,Zn=null,Ee=!0):Ee=!1}Ee||_o(t)}if(te=t.memoizedState,te!==null&&(te=te.dehydrated,te!==null))return Qf(te)?t.lanes=32:t.lanes=536870912,null;_a(t)}return te=o.children,o=o.fallback,h?(Va(),h=t.mode,te=wl({mode:"hidden",children:te},h),o=yo(o,h,r,null),te.return=t,o.return=t,te.sibling=o,t.child=te,h=t.child,h.memoizedState=hf(r),h.childLanes=pf(e,q,r),t.memoizedState=df,o):(za(t),gf(t,te))}if(Ee=e.memoizedState,Ee!==null&&(te=Ee.dehydrated,te!==null)){if(w)t.flags&256?(za(t),t.flags&=-257,t=yf(e,t,r)):t.memoizedState!==null?(Va(),t.child=e.child,t.flags|=128,t=null):(Va(),h=o.fallback,te=t.mode,o=wl({mode:"visible",children:o.children},te),h=yo(h,te,r,null),h.flags|=2,o.return=t,h.return=t,o.sibling=h,t.child=o,Qo(t,e.child,null,r),o=t.child,o.memoizedState=hf(r),o.childLanes=pf(e,q,r),t.memoizedState=df,t=h);else if(za(t),Qf(te)){if(q=te.nextSibling&&te.nextSibling.dataset,q)var Qe=q.dgst;q=Qe,o=Error(i(419)),o.stack="",o.digest=q,Ps({value:o,source:null,stack:null}),t=yf(e,t,r)}else if(vr||Ls(e,t,r,!1),q=(r&e.childLanes)!==0,vr||q){if(q=Pn,q!==null&&(o=r&-r,o=(o&42)!==0?1:Ii(o),o=(o&(q.suspendedLanes|r))!==0?0:o,o!==0&&o!==Ee.retryLane))throw Ee.retryLane=o,Hi(e,o),_i(q,e,o),$p;te.data==="$?"||If(),t=yf(e,t,r)}else te.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=Ee.treeContext,Zn=qi(te.nextSibling),$r=t,Tn=!0,bo=null,Zi=!1,e!==null&&(Ri[ki++]=ga,Ri[ki++]=ya,Ri[ki++]=mo,ga=e.id,ya=e.overflow,mo=t),t=gf(t,o.children),t.flags|=4096);return t}return h?(Va(),h=o.fallback,te=t.mode,Ee=e.child,Qe=Ee.sibling,o=pa(Ee,{mode:"hidden",children:o.children}),o.subtreeFlags=Ee.subtreeFlags&65011712,Qe!==null?h=pa(Qe,h):(h=yo(h,te,r,null),h.flags|=2),h.return=t,o.return=t,o.sibling=h,t.child=o,o=h,h=t.child,te=e.child.memoizedState,te===null?te=hf(r):(Ee=te.cachePool,Ee!==null?(Qe=dr._currentValue,Ee=Ee.parent!==Qe?{parent:Qe,pool:Qe}:Ee):Ee=Kh(),te={baseLanes:te.baseLanes|r,cachePool:Ee}),h.memoizedState=te,h.childLanes=pf(e,q,r),t.memoizedState=df,o):(za(t),r=e.child,e=r.sibling,r=pa(r,{mode:"visible",children:o.children}),r.return=t,r.sibling=null,e!==null&&(q=t.deletions,q===null?(t.deletions=[e],t.flags|=16):q.push(e)),t.child=r,t.memoizedState=null,r)}function gf(e,t){return t=wl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function wl(e,t){return e=gi(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function yf(e,t,r){return Qo(t,e.child,null,r),e=gf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rg(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Dc(e.return,t,r)}function mf(e,t,r,o,h){var w=e.memoizedState;w===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:h}:(w.isBackwards=t,w.rendering=null,w.renderingStartTime=0,w.last=o,w.tail=r,w.tailMode=h)}function ig(e,t,r){var o=t.pendingProps,h=o.revealOrder,w=o.tail;if(Ar(e,t,o.children,r),o=hr.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rg(e,r,t);else if(e.tag===19)rg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(be(hr,o),h){case"forwards":for(r=t.child,h=null;r!==null;)e=r.alternate,e!==null&&ml(e)===null&&(h=r),r=r.sibling;r=h,r===null?(h=t.child,t.child=null):(h=r.sibling,r.sibling=null),mf(t,!1,h,r,w);break;case"backwards":for(r=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&ml(e)===null){t.child=h;break}e=h.sibling,h.sibling=r,r=h,h=e}mf(t,!0,r,null,w);break;case"together":mf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ya|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(Ls(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,r=pa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=pa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function vf(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&tl(e)))}function Uv(e,t,r){switch(t.tag){case 3:Ye(t,t.stateNode.containerInfo),Ma(t,dr,e.memoizedState.cache),Us();break;case 27:case 5:bt(t);break;case 4:Ye(t,t.stateNode.containerInfo);break;case 10:Ma(t,t.type,t.memoizedProps.value);break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(za(t),t.flags|=128,null):(r&t.child.childLanes)!==0?ng(e,t,r):(za(t),e=wa(e,t,r),e!==null?e.sibling:null);za(t);break;case 19:var h=(e.flags&128)!==0;if(o=(r&t.childLanes)!==0,o||(Ls(e,t,r,!1),o=(r&t.childLanes)!==0),h){if(o)return ig(e,t,r);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),be(hr,hr.current),o)break;return null;case 22:case 23:return t.lanes=0,Qp(e,t,r);case 24:Ma(t,dr,e.memoizedState.cache)}return wa(e,t,r)}function ag(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)vr=!0;else{if(!vf(e,r)&&(t.flags&128)===0)return vr=!1,Uv(e,t,r);vr=(e.flags&131072)!==0}else vr=!1,Tn&&(t.flags&1048576)!==0&&jh(t,el,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var o=t.elementType,h=o._init;if(o=h(o._payload),t.type=o,typeof o=="function")Ac(o)?(e=To(o,e),t.tag=1,t=eg(null,t,o,e,r)):(t.tag=0,t=ff(null,t,o,e,r));else{if(o!=null){if(h=o.$$typeof,h===B){t.tag=11,t=Jp(null,t,o,e,r);break e}else if(h===Q){t.tag=14,t=Wp(null,t,o,e,r);break e}}throw t=wt(o)||o,Error(i(306,t,""))}}return t;case 0:return ff(e,t,t.type,t.pendingProps,r);case 1:return o=t.type,h=To(o,t.pendingProps),eg(e,t,o,h,r);case 3:e:{if(Ye(t,t.stateNode.containerInfo),e===null)throw Error(i(387));o=t.pendingProps;var w=t.memoizedState;h=w.element,Bc(e,t),Vs(t,o,null,r);var q=t.memoizedState;if(o=q.cache,Ma(t,dr,o),o!==w.cache&&Ic(t,[dr],r,!0),zs(),o=q.element,w.isDehydrated)if(w={element:o,isDehydrated:!1,cache:q.cache},t.updateQueue.baseState=w,t.memoizedState=w,t.flags&256){t=tg(e,t,o,r);break e}else if(o!==h){h=Gt(Error(i(424)),t),Ps(h),t=tg(e,t,o,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Zn=qi(e.firstChild),$r=t,Tn=!0,bo=null,Zi=!0,r=Pp(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Us(),o===h){t=wa(e,t,r);break e}Ar(e,t,o,r)}t=t.child}return t;case 26:return _l(e,t),e===null?(r=ly(t.type,null,t.pendingProps,null))?t.memoizedState=r:Tn||(r=t.type,e=t.pendingProps,o=jl(xt.current).createElement(r),o[Ot]=t,o[qt]=e,kr(o,r,e),Vt(o),t.stateNode=o):t.memoizedState=ly(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return bt(t),e===null&&Tn&&(o=t.stateNode=oy(t.type,t.pendingProps,xt.current),$r=t,Zi=!0,h=Zn,eo(t.type)?(Xf=h,Zn=qi(o.firstChild)):Zn=h),Ar(e,t,t.pendingProps.children,r),_l(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Tn&&((h=o=Zn)&&(o=cb(o,t.type,t.pendingProps,Zi),o!==null?(t.stateNode=o,$r=t,Zn=qi(o.firstChild),Zi=!1,h=!0):h=!1),h||_o(t)),bt(t),h=t.type,w=t.pendingProps,q=e!==null?e.memoizedProps:null,o=w.children,Jf(h,w)?o=null:q!==null&&Jf(h,q)&&(t.flags|=32),t.memoizedState!==null&&(h=Gc(e,t,kv,null,null,r),hu._currentValue=h),_l(e,t),Ar(e,t,o,r),t.child;case 6:return e===null&&Tn&&((e=r=Zn)&&(r=fb(r,t.pendingProps,Zi),r!==null?(t.stateNode=r,$r=t,Zn=null,e=!0):e=!1),e||_o(t)),null;case 13:return ng(e,t,r);case 4:return Ye(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Qo(t,null,o,r):Ar(e,t,o,r),t.child;case 11:return Jp(e,t,t.type,t.pendingProps,r);case 7:return Ar(e,t,t.pendingProps,r),t.child;case 8:return Ar(e,t,t.pendingProps.children,r),t.child;case 12:return Ar(e,t,t.pendingProps.children,r),t.child;case 10:return o=t.pendingProps,Ma(t,t.type,o.value),Ar(e,t,o.children,r),t.child;case 9:return h=t.type._context,o=t.pendingProps.children,So(t),h=Mr(h),o=o(h),t.flags|=1,Ar(e,t,o,r),t.child;case 14:return Wp(e,t,t.type,t.pendingProps,r);case 15:return Yp(e,t,t.type,t.pendingProps,r);case 19:return ig(e,t,r);case 31:return o=t.pendingProps,r=t.mode,o={mode:o.mode,children:o.children},e===null?(r=wl(o,r),r.ref=t.ref,t.child=r,r.return=t,t=r):(r=pa(e.child,o),r.ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Qp(e,t,r);case 24:return So(t),o=Mr(dr),e===null?(h=Pc(),h===null&&(h=Pn,w=jc(),h.pooledCache=w,w.refCount++,w!==null&&(h.pooledCacheLanes|=r),h=w),t.memoizedState={parent:o,cache:h},Mc(t),Ma(t,dr,h)):((e.lanes&r)!==0&&(Bc(e,t),Vs(t,null,null,r),zs()),h=e.memoizedState,w=t.memoizedState,h.parent!==o?(h={parent:o,cache:o},t.memoizedState=h,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=h),Ma(t,dr,o)):(o=w.cache,Ma(t,dr,o),o!==h.cache&&Ic(t,[dr],r,!0))),Ar(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Sa(e){e.flags|=4}function og(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!py(t)){if(t=Fi.current,t!==null&&((wn&4194048)===wn?ea!==null:(wn&62914560)!==wn&&(wn&536870912)===0||t!==ea))throw Ks=Lc,qh;e.flags|=8192}}function Sl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Tt():536870912,e.lanes|=t,ts|=t)}function Xs(e,t){if(!Tn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Gn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function Pv(e,t,r){var o=t.pendingProps;switch(Nc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(t),null;case 1:return Gn(t),null;case 3:return r=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),va(dr),Ue(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(js(t)?Sa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Lh())),Gn(t),null;case 26:return r=t.memoizedState,e===null?(Sa(t),r!==null?(Gn(t),og(t,r)):(Gn(t),t.flags&=-16777217)):r?r!==e.memoizedState?(Sa(t),Gn(t),og(t,r)):(Gn(t),t.flags&=-16777217):(e.memoizedProps!==o&&Sa(t),Gn(t),t.flags&=-16777217),null;case 27:ue(t),r=xt.current;var h=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Sa(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return Gn(t),null}e=tt.current,js(t)?Uh(t):(e=oy(h,o,r),t.stateNode=e,Sa(t))}return Gn(t),null;case 5:if(ue(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Sa(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return Gn(t),null}if(e=tt.current,js(t))Uh(t);else{switch(h=jl(xt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(r,{is:o.is}):h.createElement(r)}}e[Ot]=t,e[qt]=o;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=e;e:switch(kr(e,r,o),r){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Sa(t)}}return Gn(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Sa(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(i(166));if(e=xt.current,js(t)){if(e=t.stateNode,r=t.memoizedProps,o=null,h=$r,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Ot]=t,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Zg(e.nodeValue,r)),e||_o(t)}else e=jl(e).createTextNode(o),e[Ot]=t,t.stateNode=e}return Gn(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=js(t),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(i(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Ot]=t}else Us(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Gn(t),h=!1}else h=Lh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return t.flags&256?(_a(t),t):(_a(t),null)}if(_a(t),(t.flags&128)!==0)return t.lanes=r,t;if(r=o!==null,e=e!==null&&e.memoizedState!==null,r){o=t.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var w=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(w=o.memoizedState.cachePool.pool),w!==h&&(o.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),Sl(t,t.updateQueue),Gn(t),null;case 4:return Ue(),e===null&&qf(t.stateNode.containerInfo),Gn(t),null;case 10:return va(t.type),Gn(t),null;case 19:if(Re(hr),h=t.memoizedState,h===null)return Gn(t),null;if(o=(t.flags&128)!==0,w=h.rendering,w===null)if(o)Xs(h,!1);else{if(er!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(w=ml(e),w!==null){for(t.flags|=128,Xs(h,!1),e=w.updateQueue,t.updateQueue=e,Sl(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)Ih(r,e),r=r.sibling;return be(hr,hr.current&1|2),t.child}e=e.sibling}h.tail!==null&&Se()>Tl&&(t.flags|=128,o=!0,Xs(h,!1),t.lanes=4194304)}else{if(!o)if(e=ml(w),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Sl(t,e),Xs(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!Tn)return Gn(t),null}else 2*Se()-h.renderingStartTime>Tl&&r!==536870912&&(t.flags|=128,o=!0,Xs(h,!1),t.lanes=4194304);h.isBackwards?(w.sibling=t.child,t.child=w):(e=h.last,e!==null?e.sibling=w:t.child=w,h.last=w)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Se(),t.sibling=null,e=hr.current,be(hr,o?e&1|2:e&1),t):(Gn(t),null);case 22:case 23:return _a(t),zc(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(r&536870912)!==0&&(t.flags&128)===0&&(Gn(t),t.subtreeFlags&6&&(t.flags|=8192)):Gn(t),r=t.updateQueue,r!==null&&Sl(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==r&&(t.flags|=2048),e!==null&&Re(Eo),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),va(dr),Gn(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Lv(e,t){switch(Nc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return va(dr),Ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ue(t),null;case 13:if(_a(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(hr),null;case 4:return Ue(),null;case 10:return va(t.type),null;case 22:case 23:return _a(t),zc(),e!==null&&Re(Eo),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return va(dr),null;case 25:return null;default:return null}}function sg(e,t){switch(Nc(t),t.tag){case 3:va(dr),Ue();break;case 26:case 27:case 5:ue(t);break;case 4:Ue();break;case 13:_a(t);break;case 19:Re(hr);break;case 10:va(t.type);break;case 22:case 23:_a(t),zc(),e!==null&&Re(Eo);break;case 24:va(dr)}}function Zs(e,t){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var h=o.next;r=h;do{if((r.tag&e)===e){o=void 0;var w=r.create,q=r.inst;o=w(),q.destroy=o}r=r.next}while(r!==h)}}catch(te){jn(t,t.return,te)}}function Ga(e,t,r){try{var o=t.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var w=h.next;o=w;do{if((o.tag&e)===e){var q=o.inst,te=q.destroy;if(te!==void 0){q.destroy=void 0,h=t;var Ee=r,Qe=te;try{Qe()}catch(pt){jn(h,Ee,pt)}}}o=o.next}while(o!==w)}}catch(pt){jn(t,t.return,pt)}}function ug(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{Wh(t,r)}catch(o){jn(e,e.return,o)}}}function lg(e,t,r){r.props=To(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){jn(e,t,o)}}function eu(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(h){jn(e,t,h)}}function ta(e,t){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(h){jn(e,t,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){jn(e,t,h)}else r.current=null}function cg(e){var t=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(h){jn(e,e.return,h)}}function bf(e,t,r){try{var o=e.stateNode;ab(o,e.type,r,t),o[qt]=t}catch(h){jn(e,e.return,h)}}function fg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&eo(e.type)||e.tag===4}function _f(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&eo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wf(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Il));else if(o!==4&&(o===27&&eo(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(wf(e,t,r),e=e.sibling;e!==null;)wf(e,t,r),e=e.sibling}function El(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(o===27&&eo(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(El(e,t,r),e=e.sibling;e!==null;)El(e,t,r),e=e.sibling}function dg(e){var t=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,h=t.attributes;h.length;)t.removeAttributeNode(h[0]);kr(t,o,r),t[Ot]=e,t[qt]=r}catch(w){jn(e,e.return,w)}}var Ea=!1,ar=!1,Sf=!1,hg=typeof WeakSet=="function"?WeakSet:Set,br=null;function Mv(e,t){if(e=e.containerInfo,Gf=Hl,e=V(e),Z(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var h=o.anchorOffset,w=o.focusNode;o=o.focusOffset;try{r.nodeType,w.nodeType}catch{r=null;break e}var q=0,te=-1,Ee=-1,Qe=0,pt=0,vt=e,rt=null;t:for(;;){for(var st;vt!==r||h!==0&&vt.nodeType!==3||(te=q+h),vt!==w||o!==0&&vt.nodeType!==3||(Ee=q+o),vt.nodeType===3&&(q+=vt.nodeValue.length),(st=vt.firstChild)!==null;)rt=vt,vt=st;for(;;){if(vt===e)break t;if(rt===r&&++Qe===h&&(te=q),rt===w&&++pt===o&&(Ee=q),(st=vt.nextSibling)!==null)break;vt=rt,rt=vt.parentNode}vt=st}r=te===-1||Ee===-1?null:{start:te,end:Ee}}else r=null}r=r||{start:0,end:0}}else r=null;for($f={focusedElem:e,selectionRange:r},Hl=!1,br=t;br!==null;)if(t=br,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,br=e;else for(;br!==null;){switch(t=br,w=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&w!==null){e=void 0,r=t,h=w.memoizedProps,w=w.memoizedState,o=r.stateNode;try{var tn=To(r.type,h,r.elementType===r.type);e=o.getSnapshotBeforeUpdate(tn,w),o.__reactInternalSnapshotBeforeUpdate=e}catch(Yt){jn(r,r.return,Yt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)Yf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Yf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,br=e;break}br=t.return}}function pg(e,t,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:$a(e,r),o&4&&Zs(5,r);break;case 1:if($a(e,r),o&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(q){jn(r,r.return,q)}else{var h=To(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(h,t,e.__reactInternalSnapshotBeforeUpdate)}catch(q){jn(r,r.return,q)}}o&64&&ug(r),o&512&&eu(r,r.return);break;case 3:if($a(e,r),o&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{Wh(e,t)}catch(q){jn(r,r.return,q)}}break;case 27:t===null&&o&4&&dg(r);case 26:case 5:$a(e,r),t===null&&o&4&&cg(r),o&512&&eu(r,r.return);break;case 12:$a(e,r);break;case 13:$a(e,r),o&4&&mg(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Jv.bind(null,r),db(e,r))));break;case 22:if(o=r.memoizedState!==null||Ea,!o){t=t!==null&&t.memoizedState!==null||ar,h=Ea;var w=ar;Ea=o,(ar=t)&&!w?Ja(e,r,(r.subtreeFlags&8772)!==0):$a(e,r),Ea=h,ar=w}break;case 30:break;default:$a(e,r)}}function gg(e){var t=e.alternate;t!==null&&(e.alternate=null,gg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&sr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zn=null,ti=!1;function xa(e,t,r){for(r=r.child;r!==null;)yg(e,t,r),r=r.sibling}function yg(e,t,r){if($&&typeof $.onCommitFiberUnmount=="function")try{$.onCommitFiberUnmount(Kt,r)}catch{}switch(r.tag){case 26:ar||ta(r,t),xa(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ar||ta(r,t);var o=zn,h=ti;eo(r.type)&&(zn=r.stateNode,ti=!1),xa(e,t,r),lu(r.stateNode),zn=o,ti=h;break;case 5:ar||ta(r,t);case 6:if(o=zn,h=ti,zn=null,xa(e,t,r),zn=o,ti=h,zn!==null)if(ti)try{(zn.nodeType===9?zn.body:zn.nodeName==="HTML"?zn.ownerDocument.body:zn).removeChild(r.stateNode)}catch(w){jn(r,t,w)}else try{zn.removeChild(r.stateNode)}catch(w){jn(r,t,w)}break;case 18:zn!==null&&(ti?(e=zn,iy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),mu(e)):iy(zn,r.stateNode));break;case 4:o=zn,h=ti,zn=r.stateNode.containerInfo,ti=!0,xa(e,t,r),zn=o,ti=h;break;case 0:case 11:case 14:case 15:ar||Ga(2,r,t),ar||Ga(4,r,t),xa(e,t,r);break;case 1:ar||(ta(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"&&lg(r,t,o)),xa(e,t,r);break;case 21:xa(e,t,r);break;case 22:ar=(o=ar)||r.memoizedState!==null,xa(e,t,r),ar=o;break;default:xa(e,t,r)}}function mg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{mu(e)}catch(r){jn(t,t.return,r)}}function Bv(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new hg),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new hg),t;default:throw Error(i(435,e.tag))}}function Ef(e,t){var r=Bv(e);t.forEach(function(o){var h=Wv.bind(null,e,o);r.has(o)||(r.add(o),o.then(h,h))})}function yi(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var h=r[o],w=e,q=t,te=q;e:for(;te!==null;){switch(te.tag){case 27:if(eo(te.type)){zn=te.stateNode,ti=!1;break e}break;case 5:zn=te.stateNode,ti=!1;break e;case 3:case 4:zn=te.stateNode.containerInfo,ti=!0;break e}te=te.return}if(zn===null)throw Error(i(160));yg(w,q,h),zn=null,ti=!1,w=h.alternate,w!==null&&(w.return=null),h.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)vg(t,e),t=t.sibling}var Ki=null;function vg(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yi(t,e),mi(e),o&4&&(Ga(3,e,e.return),Zs(3,e),Ga(5,e,e.return));break;case 1:yi(t,e),mi(e),o&512&&(ar||r===null||ta(r,r.return)),o&64&&Ea&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var h=Ki;if(yi(t,e),mi(e),o&512&&(ar||r===null||ta(r,r.return)),o&4){var w=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":w=h.getElementsByTagName("title")[0],(!w||w[li]||w[Ot]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=h.createElement(o),h.head.insertBefore(w,h.querySelector("head > title"))),kr(w,o,r),w[Ot]=e,Vt(w),o=w;break e;case"link":var q=dy("link","href",h).get(o+(r.href||""));if(q){for(var te=0;te<q.length;te++)if(w=q[te],w.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&w.getAttribute("rel")===(r.rel==null?null:r.rel)&&w.getAttribute("title")===(r.title==null?null:r.title)&&w.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){q.splice(te,1);break t}}w=h.createElement(o),kr(w,o,r),h.head.appendChild(w);break;case"meta":if(q=dy("meta","content",h).get(o+(r.content||""))){for(te=0;te<q.length;te++)if(w=q[te],w.getAttribute("content")===(r.content==null?null:""+r.content)&&w.getAttribute("name")===(r.name==null?null:r.name)&&w.getAttribute("property")===(r.property==null?null:r.property)&&w.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&w.getAttribute("charset")===(r.charSet==null?null:r.charSet)){q.splice(te,1);break t}}w=h.createElement(o),kr(w,o,r),h.head.appendChild(w);break;default:throw Error(i(468,o))}w[Ot]=e,Vt(w),o=w}e.stateNode=o}else hy(h,e.type,e.stateNode);else e.stateNode=fy(h,o,e.memoizedProps);else w!==o?(w===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):w.count--,o===null?hy(h,e.type,e.stateNode):fy(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&bf(e,e.memoizedProps,r.memoizedProps)}break;case 27:yi(t,e),mi(e),o&512&&(ar||r===null||ta(r,r.return)),r!==null&&o&4&&bf(e,e.memoizedProps,r.memoizedProps);break;case 5:if(yi(t,e),mi(e),o&512&&(ar||r===null||ta(r,r.return)),e.flags&32){h=e.stateNode;try{le(h,"")}catch(st){jn(e,e.return,st)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,bf(e,h,r!==null?r.memoizedProps:h)),o&1024&&(Sf=!0);break;case 6:if(yi(t,e),mi(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(st){jn(e,e.return,st)}}break;case 3:if(Ll=null,h=Ki,Ki=Ul(t.containerInfo),yi(t,e),Ki=h,mi(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{mu(t.containerInfo)}catch(st){jn(e,e.return,st)}Sf&&(Sf=!1,bg(e));break;case 4:o=Ki,Ki=Ul(e.stateNode.containerInfo),yi(t,e),mi(e),Ki=o;break;case 12:yi(t,e),mi(e);break;case 13:yi(t,e),mi(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Ff=Se()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ef(e,o)));break;case 22:h=e.memoizedState!==null;var Ee=r!==null&&r.memoizedState!==null,Qe=Ea,pt=ar;if(Ea=Qe||h,ar=pt||Ee,yi(t,e),ar=pt,Ea=Qe,mi(e),o&8192)e:for(t=e.stateNode,t._visibility=h?t._visibility&-2:t._visibility|1,h&&(r===null||Ee||Ea||ar||Ao(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){Ee=r=t;try{if(w=Ee.stateNode,h)q=w.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{te=Ee.stateNode;var vt=Ee.memoizedProps.style,rt=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;te.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(st){jn(Ee,Ee.return,st)}}}else if(t.tag===6){if(r===null){Ee=t;try{Ee.stateNode.nodeValue=h?"":Ee.memoizedProps}catch(st){jn(Ee,Ee.return,st)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Ef(e,r))));break;case 19:yi(t,e),mi(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ef(e,o)));break;case 30:break;case 21:break;default:yi(t,e),mi(e)}}function mi(e){var t=e.flags;if(t&2){try{for(var r,o=e.return;o!==null;){if(fg(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var h=r.stateNode,w=_f(e);El(e,w,h);break;case 5:var q=r.stateNode;r.flags&32&&(le(q,""),r.flags&=-33);var te=_f(e);El(e,te,q);break;case 3:case 4:var Ee=r.stateNode.containerInfo,Qe=_f(e);wf(e,Qe,Ee);break;default:throw Error(i(161))}}catch(pt){jn(e,e.return,pt)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;bg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function $a(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)pg(e,t.alternate,t),t=t.sibling}function Ao(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ga(4,t,t.return),Ao(t);break;case 1:ta(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&lg(t,t.return,r),Ao(t);break;case 27:lu(t.stateNode);case 26:case 5:ta(t,t.return),Ao(t);break;case 22:t.memoizedState===null&&Ao(t);break;case 30:Ao(t);break;default:Ao(t)}e=e.sibling}}function Ja(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,h=e,w=t,q=w.flags;switch(w.tag){case 0:case 11:case 15:Ja(h,w,r),Zs(4,w);break;case 1:if(Ja(h,w,r),o=w,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Qe){jn(o,o.return,Qe)}if(o=w,h=o.updateQueue,h!==null){var te=o.stateNode;try{var Ee=h.shared.hiddenCallbacks;if(Ee!==null)for(h.shared.hiddenCallbacks=null,h=0;h<Ee.length;h++)Jh(Ee[h],te)}catch(Qe){jn(o,o.return,Qe)}}r&&q&64&&ug(w),eu(w,w.return);break;case 27:dg(w);case 26:case 5:Ja(h,w,r),r&&o===null&&q&4&&cg(w),eu(w,w.return);break;case 12:Ja(h,w,r);break;case 13:Ja(h,w,r),r&&q&4&&mg(h,w);break;case 22:w.memoizedState===null&&Ja(h,w,r),eu(w,w.return);break;case 30:break;default:Ja(h,w,r)}t=t.sibling}}function xf(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Ms(r))}function Tf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ms(e))}function na(e,t,r,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_g(e,t,r,o),t=t.sibling}function _g(e,t,r,o){var h=t.flags;switch(t.tag){case 0:case 11:case 15:na(e,t,r,o),h&2048&&Zs(9,t);break;case 1:na(e,t,r,o);break;case 3:na(e,t,r,o),h&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ms(e)));break;case 12:if(h&2048){na(e,t,r,o),e=t.stateNode;try{var w=t.memoizedProps,q=w.id,te=w.onPostCommit;typeof te=="function"&&te(q,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(Ee){jn(t,t.return,Ee)}}else na(e,t,r,o);break;case 13:na(e,t,r,o);break;case 23:break;case 22:w=t.stateNode,q=t.alternate,t.memoizedState!==null?w._visibility&2?na(e,t,r,o):tu(e,t):w._visibility&2?na(e,t,r,o):(w._visibility|=2,Xo(e,t,r,o,(t.subtreeFlags&10256)!==0)),h&2048&&xf(q,t);break;case 24:na(e,t,r,o),h&2048&&Tf(t.alternate,t);break;default:na(e,t,r,o)}}function Xo(e,t,r,o,h){for(h=h&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var w=e,q=t,te=r,Ee=o,Qe=q.flags;switch(q.tag){case 0:case 11:case 15:Xo(w,q,te,Ee,h),Zs(8,q);break;case 23:break;case 22:var pt=q.stateNode;q.memoizedState!==null?pt._visibility&2?Xo(w,q,te,Ee,h):tu(w,q):(pt._visibility|=2,Xo(w,q,te,Ee,h)),h&&Qe&2048&&xf(q.alternate,q);break;case 24:Xo(w,q,te,Ee,h),h&&Qe&2048&&Tf(q.alternate,q);break;default:Xo(w,q,te,Ee,h)}t=t.sibling}}function tu(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,o=t,h=o.flags;switch(o.tag){case 22:tu(r,o),h&2048&&xf(o.alternate,o);break;case 24:tu(r,o),h&2048&&Tf(o.alternate,o);break;default:tu(r,o)}t=t.sibling}}var nu=8192;function Zo(e){if(e.subtreeFlags&nu)for(e=e.child;e!==null;)wg(e),e=e.sibling}function wg(e){switch(e.tag){case 26:Zo(e),e.flags&nu&&e.memoizedState!==null&&Tb(Ki,e.memoizedState,e.memoizedProps);break;case 5:Zo(e);break;case 3:case 4:var t=Ki;Ki=Ul(e.stateNode.containerInfo),Zo(e),Ki=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=nu,nu=16777216,Zo(e),nu=t):Zo(e));break;default:Zo(e)}}function Sg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ru(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];br=o,xg(o,e)}Sg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Eg(e),e=e.sibling}function Eg(e){switch(e.tag){case 0:case 11:case 15:ru(e),e.flags&2048&&Ga(9,e,e.return);break;case 3:ru(e);break;case 12:ru(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xl(e)):ru(e);break;default:ru(e)}}function xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];br=o,xg(o,e)}Sg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ga(8,t,t.return),xl(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,xl(t));break;default:xl(t)}e=e.sibling}}function xg(e,t){for(;br!==null;){var r=br;switch(r.tag){case 0:case 11:case 15:Ga(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ms(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,br=o;else e:for(r=e;br!==null;){o=br;var h=o.sibling,w=o.return;if(gg(o),o===r){br=null;break e}if(h!==null){h.return=w,br=h;break e}br=w}}}var Hv={getCacheForType:function(e){var t=Mr(dr),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r}},Kv=typeof WeakMap=="function"?WeakMap:Map,kn=0,Pn=null,yn=null,wn=0,Fn=0,vi=null,Wa=!1,es=!1,Af=!1,Ta=0,er=0,Ya=0,Ro=0,Rf=0,Ni=0,ts=0,iu=null,ni=null,kf=!1,Ff=0,Tl=1/0,Al=null,Qa=null,Rr=0,Xa=null,ns=null,rs=0,Nf=0,Cf=null,Tg=null,au=0,Of=null;function bi(){if((kn&2)!==0&&wn!==0)return wn&-wn;if(Ne.T!==null){var e=zo;return e!==0?e:Mf()}return de()}function Ag(){Ni===0&&(Ni=(wn&536870912)===0||Tn?Ir():536870912);var e=Fi.current;return e!==null&&(e.flags|=32),Ni}function _i(e,t,r){(e===Pn&&(Fn===2||Fn===9)||e.cancelPendingCommit!==null)&&(is(e,0),Za(e,wn,Ni,!1)),jr(e,r),((kn&2)===0||e!==Pn)&&(e===Pn&&((kn&2)===0&&(Ro|=r),er===4&&Za(e,wn,Ni,!1)),ra(e))}function Rg(e,t,r){if((kn&6)!==0)throw Error(i(327));var o=!r&&(t&124)===0&&(t&e.expiredLanes)===0||rn(e,t),h=o?Vv(e,t):jf(e,t,!0),w=o;do{if(h===0){es&&!o&&Za(e,t,0,!1);break}else{if(r=e.current.alternate,w&&!qv(r)){h=jf(e,t,!1),w=!1;continue}if(h===2){if(w=t,e.errorRecoveryDisabledLanes&w)var q=0;else q=e.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){t=q;e:{var te=e;h=iu;var Ee=te.current.memoizedState.isDehydrated;if(Ee&&(is(te,q).flags|=256),q=jf(te,q,!1),q!==2){if(Af&&!Ee){te.errorRecoveryDisabledLanes|=w,Ro|=w,h=4;break e}w=ni,ni=h,w!==null&&(ni===null?ni=w:ni.push.apply(ni,w))}h=q}if(w=!1,h!==2)continue}}if(h===1){is(e,0),Za(e,t,0,!0);break}e:{switch(o=e,w=h,w){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Za(o,t,Ni,!Wa);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(h=Ff+300-Se(),10<h)){if(Za(o,t,Ni,!Wa),Rt(o,0,!0)!==0)break e;o.timeoutHandle=ny(kg.bind(null,o,r,ni,Al,kf,t,Ni,Ro,ts,Wa,w,2,-0,0),h);break e}kg(o,r,ni,Al,kf,t,Ni,Ro,ts,Wa,w,0,-0,0)}}break}while(!0);ra(e)}function kg(e,t,r,o,h,w,q,te,Ee,Qe,pt,vt,rt,st){if(e.timeoutHandle=-1,vt=t.subtreeFlags,(vt&8192||(vt&16785408)===16785408)&&(du={stylesheets:null,count:0,unsuspend:xb},wg(t),vt=Ab(),vt!==null)){e.cancelPendingCommit=vt(jg.bind(null,e,t,w,r,o,h,q,te,Ee,pt,1,rt,st)),Za(e,w,q,!Qe);return}jg(e,t,w,r,o,h,q,te,Ee)}function qv(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var h=r[o],w=h.getSnapshot;h=h.value;try{if(!Lr(w(),h))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Za(e,t,r,o){t&=~Rf,t&=~Ro,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var h=t;0<h;){var w=31-N(h),q=1<<w;o[w]=-1,h&=~q}r!==0&&or(e,r,t)}function Rl(){return(kn&6)===0?(ou(0),!1):!0}function Df(){if(yn!==null){if(Fn===0)var e=yn.return;else e=yn,ma=wo=null,Wc(e),Yo=null,Ys=0,e=yn;for(;e!==null;)sg(e.alternate,e),e=e.return;yn=null}}function is(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,sb(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Df(),Pn=e,yn=r=pa(e.current,null),wn=t,Fn=0,vi=null,Wa=!1,es=rn(e,t),Af=!1,ts=Ni=Rf=Ro=Ya=er=0,ni=iu=null,kf=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var h=31-N(o),w=1<<h;t|=e[h],o&=~w}return Ta=t,en(),r}function Fg(e,t){dn=null,Ne.H=pl,t===Hs||t===il?(t=Gh(),Fn=3):t===qh?(t=Gh(),Fn=4):Fn=t===$p?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,vi=t,yn===null&&(er=1,bl(e,Gt(t,e.current)))}function Ng(){var e=Ne.H;return Ne.H=pl,e===null?pl:e}function Cg(){var e=Ne.A;return Ne.A=Hv,e}function If(){er=4,Wa||(wn&4194048)!==wn&&Fi.current!==null||(es=!0),(Ya&134217727)===0&&(Ro&134217727)===0||Pn===null||Za(Pn,wn,Ni,!1)}function jf(e,t,r){var o=kn;kn|=2;var h=Ng(),w=Cg();(Pn!==e||wn!==t)&&(Al=null,is(e,t)),t=!1;var q=er;e:do try{if(Fn!==0&&yn!==null){var te=yn,Ee=vi;switch(Fn){case 8:Df(),q=6;break e;case 3:case 2:case 9:case 6:Fi.current===null&&(t=!0);var Qe=Fn;if(Fn=0,vi=null,as(e,te,Ee,Qe),r&&es){q=0;break e}break;default:Qe=Fn,Fn=0,vi=null,as(e,te,Ee,Qe)}}zv(),q=er;break}catch(pt){Fg(e,pt)}while(!0);return t&&e.shellSuspendCounter++,ma=wo=null,kn=o,Ne.H=h,Ne.A=w,yn===null&&(Pn=null,wn=0,en()),q}function zv(){for(;yn!==null;)Og(yn)}function Vv(e,t){var r=kn;kn|=2;var o=Ng(),h=Cg();Pn!==e||wn!==t?(Al=null,Tl=Se()+500,is(e,t)):es=rn(e,t);e:do try{if(Fn!==0&&yn!==null){t=yn;var w=vi;t:switch(Fn){case 1:Fn=0,vi=null,as(e,t,w,1);break;case 2:case 9:if(zh(w)){Fn=0,vi=null,Dg(t);break}t=function(){Fn!==2&&Fn!==9||Pn!==e||(Fn=7),ra(e)},w.then(t,t);break e;case 3:Fn=7;break e;case 4:Fn=5;break e;case 7:zh(w)?(Fn=0,vi=null,Dg(t)):(Fn=0,vi=null,as(e,t,w,7));break;case 5:var q=null;switch(yn.tag){case 26:q=yn.memoizedState;case 5:case 27:var te=yn;if(!q||py(q)){Fn=0,vi=null;var Ee=te.sibling;if(Ee!==null)yn=Ee;else{var Qe=te.return;Qe!==null?(yn=Qe,kl(Qe)):yn=null}break t}}Fn=0,vi=null,as(e,t,w,5);break;case 6:Fn=0,vi=null,as(e,t,w,6);break;case 8:Df(),er=6;break e;default:throw Error(i(462))}}Gv();break}catch(pt){Fg(e,pt)}while(!0);return ma=wo=null,Ne.H=o,Ne.A=h,kn=r,yn!==null?0:(Pn=null,wn=0,en(),er)}function Gv(){for(;yn!==null&&!ee();)Og(yn)}function Og(e){var t=ag(e.alternate,e,Ta);e.memoizedProps=e.pendingProps,t===null?kl(e):yn=t}function Dg(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Zp(r,t,t.pendingProps,t.type,void 0,wn);break;case 11:t=Zp(r,t,t.pendingProps,t.type.render,t.ref,wn);break;case 5:Wc(t);default:sg(r,t),t=yn=Ih(t,Ta),t=ag(r,t,Ta)}e.memoizedProps=e.pendingProps,t===null?kl(e):yn=t}function as(e,t,r,o){ma=wo=null,Wc(t),Yo=null,Ys=0;var h=t.return;try{if(jv(e,h,t,r,wn)){er=1,bl(e,Gt(r,e.current)),yn=null;return}}catch(w){if(h!==null)throw yn=h,w;er=1,bl(e,Gt(r,e.current)),yn=null;return}t.flags&32768?(Tn||o===1?e=!0:es||(wn&536870912)!==0?e=!1:(Wa=e=!0,(o===2||o===9||o===3||o===6)&&(o=Fi.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ig(t,e)):kl(t)}function kl(e){var t=e;do{if((t.flags&32768)!==0){Ig(t,Wa);return}e=t.return;var r=Pv(t.alternate,t,Ta);if(r!==null){yn=r;return}if(t=t.sibling,t!==null){yn=t;return}yn=t=e}while(t!==null);er===0&&(er=5)}function Ig(e,t){do{var r=Lv(e.alternate,e);if(r!==null){r.flags&=32767,yn=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){yn=e;return}yn=e=r}while(e!==null);er=6,yn=null}function jg(e,t,r,o,h,w,q,te,Ee){e.cancelPendingCommit=null;do Fl();while(Rr!==0);if((kn&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(w=t.lanes|t.childLanes,w|=Tr,In(e,r,w,q,te,Ee),e===Pn&&(yn=Pn=null,wn=0),ns=t,Xa=e,rs=r,Nf=w,Cf=h,Tg=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Yv(dt,function(){return Bg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=Ne.T,Ne.T=null,h=Me.p,Me.p=2,q=kn,kn|=4;try{Mv(e,t,r)}finally{kn=q,Me.p=h,Ne.T=o}}Rr=1,Ug(),Pg(),Lg()}}function Ug(){if(Rr===1){Rr=0;var e=Xa,t=ns,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=Ne.T,Ne.T=null;var o=Me.p;Me.p=2;var h=kn;kn|=4;try{vg(t,e);var w=$f,q=V(e.containerInfo),te=w.focusedElem,Ee=w.selectionRange;if(q!==te&&te&&te.ownerDocument&&L(te.ownerDocument.documentElement,te)){if(Ee!==null&&Z(te)){var Qe=Ee.start,pt=Ee.end;if(pt===void 0&&(pt=Qe),"selectionStart"in te)te.selectionStart=Qe,te.selectionEnd=Math.min(pt,te.value.length);else{var vt=te.ownerDocument||document,rt=vt&&vt.defaultView||window;if(rt.getSelection){var st=rt.getSelection(),tn=te.textContent.length,Yt=Math.min(Ee.start,tn),Dn=Ee.end===void 0?Yt:Math.min(Ee.end,tn);!st.extend&&Yt>Dn&&(q=Dn,Dn=Yt,Yt=q);var ze=A(te,Yt),je=A(te,Dn);if(ze&&je&&(st.rangeCount!==1||st.anchorNode!==ze.node||st.anchorOffset!==ze.offset||st.focusNode!==je.node||st.focusOffset!==je.offset)){var We=vt.createRange();We.setStart(ze.node,ze.offset),st.removeAllRanges(),Yt>Dn?(st.addRange(We),st.extend(je.node,je.offset)):(We.setEnd(je.node,je.offset),st.addRange(We))}}}}for(vt=[],st=te;st=st.parentNode;)st.nodeType===1&&vt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<vt.length;te++){var yt=vt[te];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}Hl=!!Gf,$f=Gf=null}finally{kn=h,Me.p=o,Ne.T=r}}e.current=t,Rr=2}}function Pg(){if(Rr===2){Rr=0;var e=Xa,t=ns,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=Ne.T,Ne.T=null;var o=Me.p;Me.p=2;var h=kn;kn|=4;try{pg(e,t.alternate,t)}finally{kn=h,Me.p=o,Ne.T=r}}Rr=3}}function Lg(){if(Rr===4||Rr===3){Rr=0,me();var e=Xa,t=ns,r=rs,o=Tg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Rr=5:(Rr=0,ns=Xa=null,Mg(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Qa=null),ae(r),t=t.stateNode,$&&typeof $.onCommitFiberRoot=="function")try{$.onCommitFiberRoot(Kt,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=Ne.T,h=Me.p,Me.p=2,Ne.T=null;try{for(var w=e.onRecoverableError,q=0;q<o.length;q++){var te=o[q];w(te.value,{componentStack:te.stack})}}finally{Ne.T=t,Me.p=h}}(rs&3)!==0&&Fl(),ra(e),h=e.pendingLanes,(r&4194090)!==0&&(h&42)!==0?e===Of?au++:(au=0,Of=e):au=0,ou(0)}}function Mg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ms(t)))}function Fl(e){return Ug(),Pg(),Lg(),Bg()}function Bg(){if(Rr!==5)return!1;var e=Xa,t=Nf;Nf=0;var r=ae(rs),o=Ne.T,h=Me.p;try{Me.p=32>r?32:r,Ne.T=null,r=Cf,Cf=null;var w=Xa,q=rs;if(Rr=0,ns=Xa=null,rs=0,(kn&6)!==0)throw Error(i(331));var te=kn;if(kn|=4,Eg(w.current),_g(w,w.current,q,r),kn=te,ou(0,!1),$&&typeof $.onPostCommitFiberRoot=="function")try{$.onPostCommitFiberRoot(Kt,w)}catch{}return!0}finally{Me.p=h,Ne.T=o,Mg(e,t)}}function Hg(e,t,r){t=Gt(r,t),t=cf(e.stateNode,t,2),e=Ka(e,t,2),e!==null&&(jr(e,2),ra(e))}function jn(e,t,r){if(e.tag===3)Hg(e,e,r);else for(;t!==null;){if(t.tag===3){Hg(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Qa===null||!Qa.has(o))){e=Gt(r,e),r=Vp(2),o=Ka(t,r,2),o!==null&&(Gp(r,o,t,e),jr(o,2),ra(o));break}}t=t.return}}function Uf(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new Kv;var h=new Set;o.set(t,h)}else h=o.get(t),h===void 0&&(h=new Set,o.set(t,h));h.has(r)||(Af=!0,h.add(r),e=$v.bind(null,e,t,r),t.then(e,e))}function $v(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Pn===e&&(wn&r)===r&&(er===4||er===3&&(wn&62914560)===wn&&300>Se()-Ff?(kn&2)===0&&is(e,0):Rf|=r,ts===wn&&(ts=0)),ra(e)}function Kg(e,t){t===0&&(t=Tt()),e=Hi(e,t),e!==null&&(jr(e,t),ra(e))}function Jv(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Kg(e,r)}function Wv(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(r=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(t),Kg(e,r)}function Yv(e,t){return T(e,t)}var Nl=null,os=null,Pf=!1,Cl=!1,Lf=!1,ko=0;function ra(e){e!==os&&e.next===null&&(os===null?Nl=os=e:os=os.next=e),Cl=!0,Pf||(Pf=!0,Xv())}function ou(e,t){if(!Lf&&Cl){Lf=!0;do for(var r=!1,o=Nl;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var w=0;else{var q=o.suspendedLanes,te=o.pingedLanes;w=(1<<31-N(42|e)+1)-1,w&=h&~(q&~te),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(r=!0,Gg(o,w))}else w=wn,w=Rt(o,o===Pn?w:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(w&3)===0||rn(o,w)||(r=!0,Gg(o,w));o=o.next}while(r);Lf=!1}}function Qv(){qg()}function qg(){Cl=Pf=!1;var e=0;ko!==0&&(ob()&&(e=ko),ko=0);for(var t=Se(),r=null,o=Nl;o!==null;){var h=o.next,w=zg(o,t);w===0?(o.next=null,r===null?Nl=h:r.next=h,h===null&&(os=r)):(r=o,(e!==0||(w&3)!==0)&&(Cl=!0)),o=h}ou(e)}function zg(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,w=e.pendingLanes&-62914561;0<w;){var q=31-N(w),te=1<<q,Ee=h[q];Ee===-1?((te&r)===0||(te&o)!==0)&&(h[q]=an(te,t)):Ee<=t&&(e.expiredLanes|=te),w&=~te}if(t=Pn,r=wn,r=Rt(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===t&&(Fn===2||Fn===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&G(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||rn(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(o!==null&&G(o),ae(r)){case 2:case 8:r=ot;break;case 32:r=dt;break;case 268435456:r=Dt;break;default:r=dt}return o=Vg.bind(null,e),r=T(r,o),e.callbackPriority=t,e.callbackNode=r,t}return o!==null&&o!==null&&G(o),e.callbackPriority=2,e.callbackNode=null,2}function Vg(e,t){if(Rr!==0&&Rr!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Fl()&&e.callbackNode!==r)return null;var o=wn;return o=Rt(e,e===Pn?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Rg(e,o,t),zg(e,Se()),e.callbackNode!=null&&e.callbackNode===r?Vg.bind(null,e):null)}function Gg(e,t){if(Fl())return null;Rg(e,t,!0)}function Xv(){ub(function(){(kn&6)!==0?T(we,Qv):qg()})}function Mf(){return ko===0&&(ko=Ir()),ko}function $g(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zt(""+e)}function Jg(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function Zv(e,t,r,o,h){if(t==="submit"&&r&&r.stateNode===h){var w=$g((h[qt]||null).action),q=o.submitter;q&&(t=(t=q[qt]||null)?$g(t.formAction):q.getAttribute("formAction"),t!==null&&(w=t,q=null));var te=new Li("action","action",null,o,h);e.push({event:te,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ko!==0){var Ee=q?Jg(h,q):new FormData(h);af(r,{pending:!0,data:Ee,method:h.method,action:w},null,Ee)}}else typeof w=="function"&&(te.preventDefault(),Ee=q?Jg(h,q):new FormData(h),af(r,{pending:!0,data:Ee,method:h.method,action:w},w,Ee))},currentTarget:h}]})}}for(var Bf=0;Bf<Lt.length;Bf++){var Hf=Lt[Bf],eb=Hf.toLowerCase(),tb=Hf[0].toUpperCase()+Hf.slice(1);Ft(eb,"on"+tb)}Ft(et,"onAnimationEnd"),Ft(lt,"onAnimationIteration"),Ft(ct,"onAnimationStart"),Ft("dblclick","onDoubleClick"),Ft("focusin","onFocus"),Ft("focusout","onBlur"),Ft(ht,"onTransitionRun"),Ft(Nt,"onTransitionStart"),Ft(jt,"onTransitionCancel"),Ft(kt,"onTransitionEnd"),An("onMouseEnter",["mouseout","mouseover"]),An("onMouseLeave",["mouseout","mouseover"]),An("onPointerEnter",["pointerout","pointerover"]),An("onPointerLeave",["pointerout","pointerover"]),fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(su));function Wg(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],h=o.event;o=o.listeners;e:{var w=void 0;if(t)for(var q=o.length-1;0<=q;q--){var te=o[q],Ee=te.instance,Qe=te.currentTarget;if(te=te.listener,Ee!==w&&h.isPropagationStopped())break e;w=te,h.currentTarget=Qe;try{w(h)}catch(pt){vl(pt)}h.currentTarget=null,w=Ee}else for(q=0;q<o.length;q++){if(te=o[q],Ee=te.instance,Qe=te.currentTarget,te=te.listener,Ee!==w&&h.isPropagationStopped())break e;w=te,h.currentTarget=Qe;try{w(h)}catch(pt){vl(pt)}h.currentTarget=null,w=Ee}}}}function mn(e,t){var r=t[si];r===void 0&&(r=t[si]=new Set);var o=e+"__bubble";r.has(o)||(Yg(t,e,2,!1),r.add(o))}function Kf(e,t,r){var o=0;t&&(o|=4),Yg(r,e,o,t)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function qf(e){if(!e[Ol]){e[Ol]=!0,pr.forEach(function(r){r!=="selectionchange"&&(nb.has(r)||Kf(r,!1,e),Kf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ol]||(t[Ol]=!0,Kf("selectionchange",!1,t))}}function Yg(e,t,r,o){switch(_y(t)){case 2:var h=Fb;break;case 8:h=Nb;break;default:h=rd}r=h.bind(null,t,r,e),h=void 0,!Hn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(t,r,{capture:!0,passive:h}):e.addEventListener(t,r,!0):h!==void 0?e.addEventListener(t,r,{passive:h}):e.addEventListener(t,r,!1)}function zf(e,t,r,o,h){var w=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var q=o.tag;if(q===3||q===4){var te=o.stateNode.containerInfo;if(te===h)break;if(q===4)for(q=o.return;q!==null;){var Ee=q.tag;if((Ee===3||Ee===4)&&q.stateNode.containerInfo===h)return;q=q.return}for(;te!==null;){if(q=ur(te),q===null)return;if(Ee=q.tag,Ee===5||Ee===6||Ee===26||Ee===27){o=w=q;continue e}te=te.parentNode}}o=o.return}Mn(function(){var Qe=w,pt=Ht(r),vt=[];e:{var rt=Ct.get(e);if(rt!==void 0){var st=Li,tn=e;switch(e){case"keypress":if(qr(r)===0)break e;case"keydown":case"keyup":st=Io;break;case"focusin":tn="focus",st=Vr;break;case"focusout":tn="blur",st=Vr;break;case"beforeblur":case"afterblur":st=Vr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Xr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=ks;break;case et:case lt:case ct:st=Da;break;case kt:st=Fs;break;case"scroll":case"scrollend":st=Mi;break;case"wheel":st=Uo;break;case"copy":case"cut":case"paste":st=Zr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Rs;break;case"toggle":case"beforetoggle":st=Vu}var Yt=(t&4)!==0,Dn=!Yt&&(e==="scroll"||e==="scrollend"),ze=Yt?rt!==null?rt+"Capture":null:rt;Yt=[];for(var je=Qe,We;je!==null;){var yt=je;if(We=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||We===null||ze===null||(yt=Bn(je,ze),yt!=null&&Yt.push(uu(je,yt,We))),Dn)break;je=je.return}0<Yt.length&&(rt=new st(rt,tn,null,r,pt),vt.push({event:rt,listeners:Yt}))}}if((t&7)===0){e:{if(rt=e==="mouseover"||e==="pointerover",st=e==="mouseout"||e==="pointerout",rt&&r!==It&&(tn=r.relatedTarget||r.fromElement)&&(ur(tn)||tn[un]))break e;if((st||rt)&&(rt=pt.window===pt?pt:(rt=pt.ownerDocument)?rt.defaultView||rt.parentWindow:window,st?(tn=r.relatedTarget||r.toElement,st=Qe,tn=tn?ur(tn):null,tn!==null&&(Dn=y(tn),Yt=tn.tag,tn!==Dn||Yt!==5&&Yt!==27&&Yt!==6)&&(tn=null)):(st=null,tn=Qe),st!==tn)){if(Yt=Xr,yt="onMouseLeave",ze="onMouseEnter",je="mouse",(e==="pointerout"||e==="pointerover")&&(Yt=Rs,yt="onPointerLeave",ze="onPointerEnter",je="pointer"),Dn=st==null?rt:xr(st),We=tn==null?rt:xr(tn),rt=new Yt(yt,je+"leave",st,r,pt),rt.target=Dn,rt.relatedTarget=We,yt=null,ur(pt)===Qe&&(Yt=new Yt(ze,je+"enter",tn,r,pt),Yt.target=We,Yt.relatedTarget=Dn,yt=Yt),Dn=yt,st&&tn)t:{for(Yt=st,ze=tn,je=0,We=Yt;We;We=ss(We))je++;for(We=0,yt=ze;yt;yt=ss(yt))We++;for(;0<je-We;)Yt=ss(Yt),je--;for(;0<We-je;)ze=ss(ze),We--;for(;je--;){if(Yt===ze||ze!==null&&Yt===ze.alternate)break t;Yt=ss(Yt),ze=ss(ze)}Yt=null}else Yt=null;st!==null&&Qg(vt,rt,st,Yt,!1),tn!==null&&Dn!==null&&Qg(vt,Dn,tn,Yt,!0)}}e:{if(rt=Qe?xr(Qe):window,st=rt.nodeName&&rt.nodeName.toLowerCase(),st==="select"||st==="input"&&rt.type==="file")var Bt=go;else if(Mo(rt))if(Ti)Bt=La;else{Bt=ha;var hn=Qu}else st=rt.nodeName,!st||st.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?Qe&&ut(Qe.elementType)&&(Bt=go):Bt=Is;if(Bt&&(Bt=Bt(e,Qe))){Ds(vt,Bt,r,pt);break e}hn&&hn(e,rt,Qe),e==="focusout"&&Qe&&rt.type==="number"&&Qe.memoizedProps.value!=null&&Ke(rt,"number",rt.value)}switch(hn=Qe?xr(Qe):window,e){case"focusin":(Mo(hn)||hn.contentEditable==="true")&&(_e=hn,De=Qe,Pe=null);break;case"focusout":Pe=De=_e=null;break;case"mousedown":He=!0;break;case"contextmenu":case"mouseup":case"dragend":He=!1,xe(vt,r,pt);break;case"selectionchange":if(se)break;case"keydown":case"keyup":xe(vt,r,pt)}var zt;if(ho)e:{switch(e){case"compositionstart":var Xt="onCompositionStart";break e;case"compositionend":Xt="onCompositionEnd";break e;case"compositionupdate":Xt="onCompositionUpdate";break e}Xt=void 0}else da?Os(e,r)&&(Xt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Xt="onCompositionStart");Xt&&(Po&&r.locale!=="ko"&&(da||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&da&&(zt=Qr()):(Nn=pt,xi="value"in Nn?Nn.value:Nn.textContent,da=!0)),hn=Dl(Qe,Xt),0<hn.length&&(Xt=new Ia(Xt,e,null,r,pt),vt.push({event:Xt,listeners:hn}),zt?Xt.data=zt:(zt=$u(r),zt!==null&&(Xt.data=zt)))),(zt=Ec?Ju(e,r):xc(e,r))&&(Xt=Dl(Qe,"onBeforeInput"),0<Xt.length&&(hn=new Ia("onBeforeInput","beforeinput",null,r,pt),vt.push({event:hn,listeners:Xt}),hn.data=zt)),Zv(vt,e,Qe,r,pt)}Wg(vt,t)})}function uu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Dl(e,t){for(var r=t+"Capture",o=[];e!==null;){var h=e,w=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||w===null||(h=Bn(e,r),h!=null&&o.unshift(uu(e,h,w)),h=Bn(e,t),h!=null&&o.push(uu(e,h,w))),e.tag===3)return o;e=e.return}return[]}function ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Qg(e,t,r,o,h){for(var w=t._reactName,q=[];r!==null&&r!==o;){var te=r,Ee=te.alternate,Qe=te.stateNode;if(te=te.tag,Ee!==null&&Ee===o)break;te!==5&&te!==26&&te!==27||Qe===null||(Ee=Qe,h?(Qe=Bn(r,w),Qe!=null&&q.unshift(uu(r,Qe,Ee))):h||(Qe=Bn(r,w),Qe!=null&&q.push(uu(r,Qe,Ee)))),r=r.return}q.length!==0&&e.push({event:t,listeners:q})}var rb=/\r\n?/g,ib=/\u0000|\uFFFD/g;function Xg(e){return(typeof e=="string"?e:""+e).replace(rb,`
`).replace(ib,"")}function Zg(e,t){return t=Xg(t),Xg(e)===t}function Il(){}function On(e,t,r,o,h,w){switch(r){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||le(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&le(e,""+o);break;case"className":ji(e,"class",o);break;case"tabIndex":ji(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ji(e,r,o);break;case"style":Je(e,o,w);break;case"data":if(t!=="object"){ji(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Zt(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(r==="formAction"?(t!=="input"&&On(e,t,"name",h.name,h,null),On(e,t,"formEncType",h.formEncType,h,null),On(e,t,"formMethod",h.formMethod,h,null),On(e,t,"formTarget",h.formTarget,h,null)):(On(e,t,"encType",h.encType,h,null),On(e,t,"method",h.method,h,null),On(e,t,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Zt(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=Il);break;case"onScroll":o!=null&&mn("scroll",e);break;case"onScrollEnd":o!=null&&mn("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=Zt(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":mn("beforetoggle",e),mn("toggle",e),di(e,"popover",o);break;case"xlinkActuate":Hr(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Hr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Hr(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Hr(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Hr(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Hr(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Hr(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Hr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Hr(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":di(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Pt.get(r)||r,di(e,r,o))}}function Vf(e,t,r,o,h,w){switch(r){case"style":Je(e,o,w);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof o=="string"?le(e,o):(typeof o=="number"||typeof o=="bigint")&&le(e,""+o);break;case"onScroll":o!=null&&mn("scroll",e);break;case"onScrollEnd":o!=null&&mn("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Il);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ci.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),t=r.slice(2,h?r.length-7:void 0),w=e[qt]||null,w=w!=null?w[r]:null,typeof w=="function"&&e.removeEventListener(t,w,h),typeof o=="function")){typeof w!="function"&&w!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,o,h);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):di(e,r,o)}}}function kr(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mn("error",e),mn("load",e);var o=!1,h=!1,w;for(w in r)if(r.hasOwnProperty(w)){var q=r[w];if(q!=null)switch(w){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:On(e,t,w,q,r,null)}}h&&On(e,t,"srcSet",r.srcSet,r,null),o&&On(e,t,"src",r.src,r,null);return;case"input":mn("invalid",e);var te=w=q=h=null,Ee=null,Qe=null;for(o in r)if(r.hasOwnProperty(o)){var pt=r[o];if(pt!=null)switch(o){case"name":h=pt;break;case"type":q=pt;break;case"checked":Ee=pt;break;case"defaultChecked":Qe=pt;break;case"value":w=pt;break;case"defaultValue":te=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(i(137,t));break;default:On(e,t,o,pt,r,null)}}Ae(e,w,te,Ee,Qe,q,h,!1),ie(e);return;case"select":mn("invalid",e),o=q=w=null;for(h in r)if(r.hasOwnProperty(h)&&(te=r[h],te!=null))switch(h){case"value":w=te;break;case"defaultValue":q=te;break;case"multiple":o=te;default:On(e,t,h,te,r,null)}t=w,r=q,e.multiple=!!o,t!=null?Ze(e,!!o,t,!1):r!=null&&Ze(e,!!o,r,!0);return;case"textarea":mn("invalid",e),w=h=o=null;for(q in r)if(r.hasOwnProperty(q)&&(te=r[q],te!=null))switch(q){case"value":o=te;break;case"defaultValue":h=te;break;case"children":w=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(91));break;default:On(e,t,q,te,r,null)}X(e,o,h,w),ie(e);return;case"option":for(Ee in r)if(r.hasOwnProperty(Ee)&&(o=r[Ee],o!=null))switch(Ee){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:On(e,t,Ee,o,r,null)}return;case"dialog":mn("beforetoggle",e),mn("toggle",e),mn("cancel",e),mn("close",e);break;case"iframe":case"object":mn("load",e);break;case"video":case"audio":for(o=0;o<su.length;o++)mn(su[o],e);break;case"image":mn("error",e),mn("load",e);break;case"details":mn("toggle",e);break;case"embed":case"source":case"link":mn("error",e),mn("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Qe in r)if(r.hasOwnProperty(Qe)&&(o=r[Qe],o!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:On(e,t,Qe,o,r,null)}return;default:if(ut(t)){for(pt in r)r.hasOwnProperty(pt)&&(o=r[pt],o!==void 0&&Vf(e,t,pt,o,r,void 0));return}}for(te in r)r.hasOwnProperty(te)&&(o=r[te],o!=null&&On(e,t,te,o,r,null))}function ab(e,t,r,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,w=null,q=null,te=null,Ee=null,Qe=null,pt=null;for(st in r){var vt=r[st];if(r.hasOwnProperty(st)&&vt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":Ee=vt;default:o.hasOwnProperty(st)||On(e,t,st,null,o,vt)}}for(var rt in o){var st=o[rt];if(vt=r[rt],o.hasOwnProperty(rt)&&(st!=null||vt!=null))switch(rt){case"type":w=st;break;case"name":h=st;break;case"checked":Qe=st;break;case"defaultChecked":pt=st;break;case"value":q=st;break;case"defaultValue":te=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,t));break;default:st!==vt&&On(e,t,rt,st,o,vt)}}ye(e,q,te,Ee,Qe,pt,w,h);return;case"select":st=q=te=rt=null;for(w in r)if(Ee=r[w],r.hasOwnProperty(w)&&Ee!=null)switch(w){case"value":break;case"multiple":st=Ee;default:o.hasOwnProperty(w)||On(e,t,w,null,o,Ee)}for(h in o)if(w=o[h],Ee=r[h],o.hasOwnProperty(h)&&(w!=null||Ee!=null))switch(h){case"value":rt=w;break;case"defaultValue":te=w;break;case"multiple":q=w;default:w!==Ee&&On(e,t,h,w,o,Ee)}t=te,r=q,o=st,rt!=null?Ze(e,!!r,rt,!1):!!o!=!!r&&(t!=null?Ze(e,!!r,t,!0):Ze(e,!!r,r?[]:"",!1));return;case"textarea":st=rt=null;for(te in r)if(h=r[te],r.hasOwnProperty(te)&&h!=null&&!o.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:On(e,t,te,null,o,h)}for(q in o)if(h=o[q],w=r[q],o.hasOwnProperty(q)&&(h!=null||w!=null))switch(q){case"value":rt=h;break;case"defaultValue":st=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==w&&On(e,t,q,h,o,w)}nt(e,rt,st);return;case"option":for(var tn in r)if(rt=r[tn],r.hasOwnProperty(tn)&&rt!=null&&!o.hasOwnProperty(tn))switch(tn){case"selected":e.selected=!1;break;default:On(e,t,tn,null,o,rt)}for(Ee in o)if(rt=o[Ee],st=r[Ee],o.hasOwnProperty(Ee)&&rt!==st&&(rt!=null||st!=null))switch(Ee){case"selected":e.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:On(e,t,Ee,rt,o,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in r)rt=r[Yt],r.hasOwnProperty(Yt)&&rt!=null&&!o.hasOwnProperty(Yt)&&On(e,t,Yt,null,o,rt);for(Qe in o)if(rt=o[Qe],st=r[Qe],o.hasOwnProperty(Qe)&&rt!==st&&(rt!=null||st!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(i(137,t));break;default:On(e,t,Qe,rt,o,st)}return;default:if(ut(t)){for(var Dn in r)rt=r[Dn],r.hasOwnProperty(Dn)&&rt!==void 0&&!o.hasOwnProperty(Dn)&&Vf(e,t,Dn,void 0,o,rt);for(pt in o)rt=o[pt],st=r[pt],!o.hasOwnProperty(pt)||rt===st||rt===void 0&&st===void 0||Vf(e,t,pt,rt,o,st);return}}for(var ze in r)rt=r[ze],r.hasOwnProperty(ze)&&rt!=null&&!o.hasOwnProperty(ze)&&On(e,t,ze,null,o,rt);for(vt in o)rt=o[vt],st=r[vt],!o.hasOwnProperty(vt)||rt===st||rt==null&&st==null||On(e,t,vt,rt,o,st)}var Gf=null,$f=null;function jl(e){return e.nodeType===9?e:e.ownerDocument}function ey(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ty(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Jf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wf=null;function ob(){var e=window.event;return e&&e.type==="popstate"?e===Wf?!1:(Wf=e,!0):(Wf=null,!1)}var ny=typeof setTimeout=="function"?setTimeout:void 0,sb=typeof clearTimeout=="function"?clearTimeout:void 0,ry=typeof Promise=="function"?Promise:void 0,ub=typeof queueMicrotask=="function"?queueMicrotask:typeof ry<"u"?function(e){return ry.resolve(null).then(e).catch(lb)}:ny;function lb(e){setTimeout(function(){throw e})}function eo(e){return e==="head"}function iy(e,t){var r=t,o=0,h=0;do{var w=r.nextSibling;if(e.removeChild(r),w&&w.nodeType===8)if(r=w.data,r==="/$"){if(0<o&&8>o){r=o;var q=e.ownerDocument;if(r&1&&lu(q.documentElement),r&2&&lu(q.body),r&4)for(r=q.head,lu(r),q=r.firstChild;q;){var te=q.nextSibling,Ee=q.nodeName;q[li]||Ee==="SCRIPT"||Ee==="STYLE"||Ee==="LINK"&&q.rel.toLowerCase()==="stylesheet"||r.removeChild(q),q=te}}if(h===0){e.removeChild(w),mu(t);return}h--}else r==="$"||r==="$?"||r==="$!"?h++:o=r.charCodeAt(0)-48;else o=0;r=w}while(r);mu(t)}function Yf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Yf(r),sr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function cb(e,t,r,o){for(;e.nodeType===1;){var h=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[li])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(w=e.getAttribute("rel"),w==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(w!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(w=e.getAttribute("src"),(w!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&w&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var w=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===w)return e}else return e;if(e=qi(e.nextSibling),e===null)break}return null}function fb(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=qi(e.nextSibling),e===null))return null;return e}function Qf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function db(e,t){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")t();else{var o=function(){t(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function qi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Xf=null;function ay(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}function oy(e,t,r){switch(t=jl(r),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function lu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);sr(e)}var Ci=new Map,sy=new Set;function Ul(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Aa=Me.d;Me.d={f:hb,r:pb,D:gb,C:yb,L:mb,m:vb,X:_b,S:bb,M:wb};function hb(){var e=Aa.f(),t=Rl();return e||t}function pb(e){var t=Vn(e);t!==null&&t.tag===5&&t.type==="form"?Rp(t):Aa.r(e)}var us=typeof document>"u"?null:document;function uy(e,t,r){var o=us;if(o&&typeof t=="string"&&t){var h=ce(t);h='link[rel="'+e+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),sy.has(h)||(sy.add(h),e={rel:e,crossOrigin:r,href:t},o.querySelector(h)===null&&(t=o.createElement("link"),kr(t,"link",e),Vt(t),o.head.appendChild(t)))}}function gb(e){Aa.D(e),uy("dns-prefetch",e,null)}function yb(e,t){Aa.C(e,t),uy("preconnect",e,t)}function mb(e,t,r){Aa.L(e,t,r);var o=us;if(o&&e&&t){var h='link[rel="preload"][as="'+ce(t)+'"]';t==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+ce(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+ce(r.imageSizes)+'"]')):h+='[href="'+ce(e)+'"]';var w=h;switch(t){case"style":w=ls(e);break;case"script":w=cs(e)}Ci.has(w)||(e=_({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),Ci.set(w,e),o.querySelector(h)!==null||t==="style"&&o.querySelector(cu(w))||t==="script"&&o.querySelector(fu(w))||(t=o.createElement("link"),kr(t,"link",e),Vt(t),o.head.appendChild(t)))}}function vb(e,t){Aa.m(e,t);var r=us;if(r&&e){var o=t&&typeof t.as=="string"?t.as:"script",h='link[rel="modulepreload"][as="'+ce(o)+'"][href="'+ce(e)+'"]',w=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=cs(e)}if(!Ci.has(w)&&(e=_({rel:"modulepreload",href:e},t),Ci.set(w,e),r.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(fu(w)))return}o=r.createElement("link"),kr(o,"link",e),Vt(o),r.head.appendChild(o)}}}function bb(e,t,r){Aa.S(e,t,r);var o=us;if(o&&e){var h=gn(o).hoistableStyles,w=ls(e);t=t||"default";var q=h.get(w);if(!q){var te={loading:0,preload:null};if(q=o.querySelector(cu(w)))te.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Ci.get(w))&&Zf(e,r);var Ee=q=o.createElement("link");Vt(Ee),kr(Ee,"link",e),Ee._p=new Promise(function(Qe,pt){Ee.onload=Qe,Ee.onerror=pt}),Ee.addEventListener("load",function(){te.loading|=1}),Ee.addEventListener("error",function(){te.loading|=2}),te.loading|=4,Pl(q,t,o)}q={type:"stylesheet",instance:q,count:1,state:te},h.set(w,q)}}}function _b(e,t){Aa.X(e,t);var r=us;if(r&&e){var o=gn(r).hoistableScripts,h=cs(e),w=o.get(h);w||(w=r.querySelector(fu(h)),w||(e=_({src:e,async:!0},t),(t=Ci.get(h))&&ed(e,t),w=r.createElement("script"),Vt(w),kr(w,"link",e),r.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},o.set(h,w))}}function wb(e,t){Aa.M(e,t);var r=us;if(r&&e){var o=gn(r).hoistableScripts,h=cs(e),w=o.get(h);w||(w=r.querySelector(fu(h)),w||(e=_({src:e,async:!0,type:"module"},t),(t=Ci.get(h))&&ed(e,t),w=r.createElement("script"),Vt(w),kr(w,"link",e),r.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},o.set(h,w))}}function ly(e,t,r,o){var h=(h=xt.current)?Ul(h):null;if(!h)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=ls(r.href),r=gn(h).hoistableStyles,o=r.get(t),o||(o={type:"style",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=ls(r.href);var w=gn(h).hoistableStyles,q=w.get(e);if(q||(h=h.ownerDocument||h,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(e,q),(w=h.querySelector(cu(e)))&&!w._p&&(q.instance=w,q.state.loading=5),Ci.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ci.set(e,r),w||Sb(h,e,r,q.state))),t&&o===null)throw Error(i(528,""));return q}if(t&&o!==null)throw Error(i(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=cs(r),r=gn(h).hoistableScripts,o=r.get(t),o||(o={type:"script",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function ls(e){return'href="'+ce(e)+'"'}function cu(e){return'link[rel="stylesheet"]['+e+"]"}function cy(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function Sb(e,t,r,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),kr(t,"link",r),Vt(t),e.head.appendChild(t))}function cs(e){return'[src="'+ce(e)+'"]'}function fu(e){return"script[async]"+e}function fy(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+ce(r.href)+'"]');if(o)return t.instance=o,Vt(o),o;var h=_({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Vt(o),kr(o,"style",h),Pl(o,r.precedence,e),t.instance=o;case"stylesheet":h=ls(r.href);var w=e.querySelector(cu(h));if(w)return t.state.loading|=4,t.instance=w,Vt(w),w;o=cy(r),(h=Ci.get(h))&&Zf(o,h),w=(e.ownerDocument||e).createElement("link"),Vt(w);var q=w;return q._p=new Promise(function(te,Ee){q.onload=te,q.onerror=Ee}),kr(w,"link",o),t.state.loading|=4,Pl(w,r.precedence,e),t.instance=w;case"script":return w=cs(r.src),(h=e.querySelector(fu(w)))?(t.instance=h,Vt(h),h):(o=r,(h=Ci.get(w))&&(o=_({},r),ed(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Vt(h),kr(h,"link",o),e.head.appendChild(h),t.instance=h);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,Pl(o,r.precedence,e));return t.instance}function Pl(e,t,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,w=h,q=0;q<o.length;q++){var te=o[q];if(te.dataset.precedence===t)w=te;else if(w!==h)break}w?w.parentNode.insertBefore(e,w.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function Zf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ed(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ll=null;function dy(e,t,r){if(Ll===null){var o=new Map,h=Ll=new Map;h.set(r,o)}else h=Ll,o=h.get(r),o||(o=new Map,h.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),h=0;h<r.length;h++){var w=r[h];if(!(w[li]||w[Ot]||e==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var q=w.getAttribute(t)||"";q=e+q;var te=o.get(q);te?te.push(w):o.set(q,[w])}}return o}function hy(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function Eb(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function py(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var du=null;function xb(){}function Tb(e,t,r){if(du===null)throw Error(i(475));var o=du;if(t.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var h=ls(r.href),w=e.querySelector(cu(h));if(w){e=w._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Ml.bind(o),e.then(o,o)),t.state.loading|=4,t.instance=w,Vt(w);return}w=e.ownerDocument||e,r=cy(r),(h=Ci.get(h))&&Zf(r,h),w=w.createElement("link"),Vt(w);var q=w;q._p=new Promise(function(te,Ee){q.onload=te,q.onerror=Ee}),kr(w,"link",r),t.instance=w}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(o.count++,t=Ml.bind(o),e.addEventListener("load",t),e.addEventListener("error",t))}}function Ab(){if(du===null)throw Error(i(475));var e=du;return e.stylesheets&&e.count===0&&td(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&td(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}function Ml(){if(this.count--,this.count===0){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Bl=null;function td(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Bl=new Map,t.forEach(Rb,e),Bl=null,Ml.call(e))}function Rb(e,t){if(!(t.state.loading&4)){var r=Bl.get(e);if(r)var o=r.get(null);else{r=new Map,Bl.set(e,r);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<h.length;w++){var q=h[w];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(r.set(q.dataset.precedence,q),o=q)}o&&r.set(null,o)}h=t.instance,q=h.getAttribute("data-precedence"),w=r.get(q)||o,w===o&&r.set(null,h),r.set(q,h),this.count++,o=Ml.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),w?w.parentNode.insertBefore(h,w.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),t.state.loading|=4}}var hu={$$typeof:I,Provider:null,Consumer:null,_currentValue:Fe,_currentValue2:Fe,_threadCount:0};function kb(e,t,r,o,h,w,q,te){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vn(0),this.hiddenUpdates=vn(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=w,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function gy(e,t,r,o,h,w,q,te,Ee,Qe,pt,vt){return e=new kb(e,t,r,q,te,Ee,Qe,vt),t=1,w===!0&&(t|=24),w=gi(3,null,null,t),e.current=w,w.stateNode=e,t=jc(),t.refCount++,e.pooledCache=t,t.refCount++,w.memoizedState={element:o,isDehydrated:r,cache:t},Mc(w),e}function yy(e){return e?(e=Xi,e):Xi}function my(e,t,r,o,h,w){h=yy(h),o.context===null?o.context=h:o.pendingContext=h,o=Ha(t),o.payload={element:r},w=w===void 0?null:w,w!==null&&(o.callback=w),r=Ka(e,o,t),r!==null&&(_i(r,e,t),qs(r,e,t))}function vy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function nd(e,t){vy(e,t),(e=e.alternate)&&vy(e,t)}function by(e){if(e.tag===13){var t=Hi(e,67108864);t!==null&&_i(t,e,67108864),nd(e,67108864)}}var Hl=!0;function Fb(e,t,r,o){var h=Ne.T;Ne.T=null;var w=Me.p;try{Me.p=2,rd(e,t,r,o)}finally{Me.p=w,Ne.T=h}}function Nb(e,t,r,o){var h=Ne.T;Ne.T=null;var w=Me.p;try{Me.p=8,rd(e,t,r,o)}finally{Me.p=w,Ne.T=h}}function rd(e,t,r,o){if(Hl){var h=id(o);if(h===null)zf(e,t,o,Kl,r),wy(e,o);else if(Ob(h,e,t,r,o))o.stopPropagation();else if(wy(e,o),t&4&&-1<Cb.indexOf(e)){for(;h!==null;){var w=Vn(h);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var q=sn(w.pendingLanes);if(q!==0){var te=w;for(te.pendingLanes|=2,te.entangledLanes|=2;q;){var Ee=1<<31-N(q);te.entanglements[1]|=Ee,q&=~Ee}ra(w),(kn&6)===0&&(Tl=Se()+500,ou(0))}}break;case 13:te=Hi(w,2),te!==null&&_i(te,w,2),Rl(),nd(w,2)}if(w=id(o),w===null&&zf(e,t,o,Kl,r),w===h)break;h=w}h!==null&&o.stopPropagation()}else zf(e,t,o,null,r)}}function id(e){return e=Ht(e),ad(e)}var Kl=null;function ad(e){if(Kl=null,e=ur(e),e!==null){var t=y(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=p(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Kl=e,null}function _y(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case we:return 2;case ot:return 8;case dt:case ft:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var od=!1,to=null,no=null,ro=null,pu=new Map,gu=new Map,io=[],Cb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wy(e,t){switch(e){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":pu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(t.pointerId)}}function yu(e,t,r,o,h,w){return e===null||e.nativeEvent!==w?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:w,targetContainers:[h]},t!==null&&(t=Vn(t),t!==null&&by(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function Ob(e,t,r,o,h){switch(t){case"focusin":return to=yu(to,e,t,r,o,h),!0;case"dragenter":return no=yu(no,e,t,r,o,h),!0;case"mouseover":return ro=yu(ro,e,t,r,o,h),!0;case"pointerover":var w=h.pointerId;return pu.set(w,yu(pu.get(w)||null,e,t,r,o,h)),!0;case"gotpointercapture":return w=h.pointerId,gu.set(w,yu(gu.get(w)||null,e,t,r,o,h)),!0}return!1}function Sy(e){var t=ur(e.target);if(t!==null){var r=y(t);if(r!==null){if(t=r.tag,t===13){if(t=p(r),t!==null){e.blockedOn=t,St(e.priority,function(){if(r.tag===13){var o=bi();o=Ii(o);var h=Hi(r,o);h!==null&&_i(h,r,o),nd(r,o)}});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ql(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=id(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);It=o,r.target.dispatchEvent(o),It=null}else return t=Vn(r),t!==null&&by(t),e.blockedOn=r,!1;t.shift()}return!0}function Ey(e,t,r){ql(e)&&r.delete(t)}function Db(){od=!1,to!==null&&ql(to)&&(to=null),no!==null&&ql(no)&&(no=null),ro!==null&&ql(ro)&&(ro=null),pu.forEach(Ey),gu.forEach(Ey)}function zl(e,t){e.blockedOn===t&&(e.blockedOn=null,od||(od=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Db)))}var Vl=null;function xy(e){Vl!==e&&(Vl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Vl===e&&(Vl=null);for(var t=0;t<e.length;t+=3){var r=e[t],o=e[t+1],h=e[t+2];if(typeof o!="function"){if(ad(o||r)===null)continue;break}var w=Vn(r);w!==null&&(e.splice(t,3),t-=3,af(w,{pending:!0,data:h,method:r.method,action:o},o,h))}}))}function mu(e){function t(Ee){return zl(Ee,e)}to!==null&&zl(to,e),no!==null&&zl(no,e),ro!==null&&zl(ro,e),pu.forEach(t),gu.forEach(t);for(var r=0;r<io.length;r++){var o=io[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<io.length&&(r=io[0],r.blockedOn===null);)Sy(r),r.blockedOn===null&&io.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var h=r[o],w=r[o+1],q=h[qt]||null;if(typeof w=="function")q||xy(r);else if(q){var te=null;if(w&&w.hasAttribute("formAction")){if(h=w,q=w[qt]||null)te=q.formAction;else if(ad(h)!==null)continue}else te=q.action;typeof te=="function"?r[o+1]=te:(r.splice(o,3),o-=3),xy(r)}}}function sd(e){this._internalRoot=e}Gl.prototype.render=sd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var r=t.current,o=bi();my(r,o,e,t,null,null)},Gl.prototype.unmount=sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;my(e.current,2,null,e,null,null),Rl(),t[un]=null}};function Gl(e){this._internalRoot=e}Gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=de();e={blockedOn:null,target:e,priority:t};for(var r=0;r<io.length&&t!==0&&t<io[r].priority;r++);io.splice(r,0,e),r===0&&Sy(e)}};var Ty=n.version;if(Ty!=="19.1.0")throw Error(i(527,Ty,"19.1.0"));Me.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=E(t),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var Ib={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Ne,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Kt=$l.inject(Ib),$=$l}catch{}}return bu.createRoot=function(e,t){if(!d(e))throw Error(i(299));var r=!1,o="",h=Hp,w=Kp,q=qp,te=null;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(h=t.onUncaughtError),t.onCaughtError!==void 0&&(w=t.onCaughtError),t.onRecoverableError!==void 0&&(q=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(te=t.unstable_transitionCallbacks)),t=gy(e,1,!1,null,null,r,o,h,w,q,te,null),e[un]=t.current,qf(e),new sd(t)},bu.hydrateRoot=function(e,t,r){if(!d(e))throw Error(i(299));var o=!1,h="",w=Hp,q=Kp,te=qp,Ee=null,Qe=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(w=r.onUncaughtError),r.onCaughtError!==void 0&&(q=r.onCaughtError),r.onRecoverableError!==void 0&&(te=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(Ee=r.unstable_transitionCallbacks),r.formState!==void 0&&(Qe=r.formState)),t=gy(e,1,!0,t,r??null,o,h,w,q,te,Ee,Qe),t.context=yy(null),r=t.current,o=bi(),o=Ii(o),h=Ha(o),h.callback=null,Ka(r,h,o),r=o,t.current.lanes=r,jr(t,r),ra(t),e[un]=t.current,qf(e),new Gl(t)},bu.version="19.1.0",bu}var jy;function Vb(){if(jy)return cd.exports;jy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),cd.exports=zb(),cd.exports}var Gb=Vb();const $b=Uu(Gb);var rc={exports:{}},Jb=rc.exports,Uy;function Wb(){return Uy||(Uy=1,function(a,n){(function(s,i){a.exports=i()})(Jb,function(){var s=function(f,b){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,L){A.__proto__=L}||function(A,L){for(var V in L)Object.prototype.hasOwnProperty.call(L,V)&&(A[V]=L[V])})(f,b)},i=function(){return(i=Object.assign||function(f){for(var b,A=1,L=arguments.length;A<L;A++)for(var V in b=arguments[A])Object.prototype.hasOwnProperty.call(b,V)&&(f[V]=b[V]);return f}).apply(this,arguments)};function d(f,b,A){for(var L,V=0,Z=b.length;V<Z;V++)!L&&V in b||((L=L||Array.prototype.slice.call(b,0,V))[V]=b[V]);return f.concat(L||Array.prototype.slice.call(b))}var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ub,p=Object.keys,g=Array.isArray;function E(f,b){return typeof b!="object"||p(b).forEach(function(A){f[A]=b[A]}),f}typeof Promise>"u"||y.Promise||(y.Promise=Promise);var m=Object.getPrototypeOf,_={}.hasOwnProperty;function S(f,b){return _.call(f,b)}function D(f,b){typeof b=="function"&&(b=b(m(f))),(typeof Reflect>"u"?p:Reflect.ownKeys)(b).forEach(function(A){C(f,A,b[A])})}var M=Object.defineProperty;function C(f,b,A,L){M(f,b,E(A&&S(A,"get")&&typeof A.get=="function"?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},L))}function O(f){return{from:function(b){return f.prototype=Object.create(b.prototype),C(f.prototype,"constructor",f),{extend:D.bind(null,f.prototype)}}}}var U=Object.getOwnPropertyDescriptor,F=[].slice;function P(f,b,A){return F.call(f,b,A)}function I(f,b){return b(f)}function B(f){if(!f)throw new Error("Assertion Failed")}function z(f){y.setImmediate?setImmediate(f):setTimeout(f,0)}function Y(f,b){if(typeof b=="string"&&S(f,b))return f[b];if(!b)return f;if(typeof b!="string"){for(var A=[],L=0,V=b.length;L<V;++L){var Z=Y(f,b[L]);A.push(Z)}return A}var se=b.indexOf(".");if(se!==-1){var _e=f[b.substr(0,se)];return _e==null?void 0:Y(_e,b.substr(se+1))}}function Q(f,b,A){if(f&&b!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof b!="string"&&"length"in b){B(typeof A!="string"&&"length"in A);for(var L=0,V=b.length;L<V;++L)Q(f,b[L],A[L])}else{var Z,se,_e=b.indexOf(".");_e!==-1?(Z=b.substr(0,_e),(se=b.substr(_e+1))===""?A===void 0?g(f)&&!isNaN(parseInt(Z))?f.splice(Z,1):delete f[Z]:f[Z]=A:Q(_e=!(_e=f[Z])||!S(f,Z)?f[Z]={}:_e,se,A)):A===void 0?g(f)&&!isNaN(parseInt(b))?f.splice(b,1):delete f[b]:f[b]=A}}function ve(f){var b,A={};for(b in f)S(f,b)&&(A[b]=f[b]);return A}var qe=[].concat;function J(f){return qe.apply([],f)}var Kt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(J([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(b){return b+f+"Array"})}))).filter(function(f){return y[f]}),pe=new Set(Kt.map(function(f){return y[f]})),Xe=null;function ke(f){return Xe=new WeakMap,f=function b(A){if(!A||typeof A!="object")return A;var L=Xe.get(A);if(L)return L;if(g(A)){L=[],Xe.set(A,L);for(var V=0,Z=A.length;V<Z;++V)L.push(b(A[V]))}else if(pe.has(A.constructor))L=A;else{var se,_e=m(A);for(se in L=_e===Object.prototype?{}:Object.create(_e),Xe.set(A,L),A)S(A,se)&&(L[se]=b(A[se]))}return L}(f),Xe=null,f}var wt={}.toString;function mt(f){return wt.call(f).slice(8,-1)}var Ne=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Me=typeof Ne=="symbol"?function(f){var b;return f!=null&&(b=f[Ne])&&b.apply(f)}:function(){return null};function Fe(f,b){return b=f.indexOf(b),0<=b&&f.splice(b,1),0<=b}var it={};function H(f){var b,A,L,V;if(arguments.length===1){if(g(f))return f.slice();if(this===it&&typeof f=="string")return[f];if(V=Me(f)){for(A=[];!(L=V.next()).done;)A.push(L.value);return A}if(f==null)return[f];if(typeof(b=f.length)!="number")return[f];for(A=new Array(b);b--;)A[b]=f[b];return A}for(b=arguments.length,A=new Array(b);b--;)A[b]=arguments[b];return A}var he=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},At=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Gr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(At),Re={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function be(f,b){this.name=f,this.message=b}function tt(f,b){return f+". Errors: "+Object.keys(b).map(function(A){return b[A].toString()}).filter(function(A,L,V){return V.indexOf(A)===L}).join(`
`)}function gt(f,b,A,L){this.failures=b,this.failedKeys=L,this.successCount=A,this.message=tt(f,b)}function xt(f,b){this.name="BulkError",this.failures=Object.keys(b).map(function(A){return b[A]}),this.failuresByPos=b,this.message=tt(f,this.failures)}O(be).from(Error).extend({toString:function(){return this.name+": "+this.message}}),O(gt).from(be),O(xt).from(be);var Ut=Gr.reduce(function(f,b){return f[b]=b+"Error",f},{}),Ye=be,Ue=Gr.reduce(function(f,b){var A=b+"Error";function L(V,Z){this.name=A,V?typeof V=="string"?(this.message="".concat(V).concat(Z?`
 `+Z:""),this.inner=Z||null):typeof V=="object"&&(this.message="".concat(V.name," ").concat(V.message),this.inner=V):(this.message=Re[b]||A,this.inner=null)}return O(L).from(Ye),f[b]=L,f},{});Ue.Syntax=SyntaxError,Ue.Type=TypeError,Ue.Range=RangeError;var bt=At.reduce(function(f,b){return f[b+"Error"]=Ue[b],f},{}),ue=Gr.reduce(function(f,b){return["Syntax","Type","Range"].indexOf(b)===-1&&(f[b+"Error"]=Ue[b]),f},{});function j(){}function T(f){return f}function G(f,b){return f==null||f===T?b:function(A){return b(f(A))}}function ee(f,b){return function(){f.apply(this,arguments),b.apply(this,arguments)}}function me(f,b){return f===j?b:function(){var A=f.apply(this,arguments);A!==void 0&&(arguments[0]=A);var L=this.onsuccess,V=this.onerror;this.onsuccess=null,this.onerror=null;var Z=b.apply(this,arguments);return L&&(this.onsuccess=this.onsuccess?ee(L,this.onsuccess):L),V&&(this.onerror=this.onerror?ee(V,this.onerror):V),Z!==void 0?Z:A}}function Se(f,b){return f===j?b:function(){f.apply(this,arguments);var A=this.onsuccess,L=this.onerror;this.onsuccess=this.onerror=null,b.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?ee(A,this.onsuccess):A),L&&(this.onerror=this.onerror?ee(L,this.onerror):L)}}function at(f,b){return f===j?b:function(A){var L=f.apply(this,arguments);E(A,L);var V=this.onsuccess,Z=this.onerror;return this.onsuccess=null,this.onerror=null,A=b.apply(this,arguments),V&&(this.onsuccess=this.onsuccess?ee(V,this.onsuccess):V),Z&&(this.onerror=this.onerror?ee(Z,this.onerror):Z),L===void 0?A===void 0?void 0:A:E(L,A)}}function we(f,b){return f===j?b:function(){return b.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function ot(f,b){return f===j?b:function(){var A=f.apply(this,arguments);if(A&&typeof A.then=="function"){for(var L=this,V=arguments.length,Z=new Array(V);V--;)Z[V]=arguments[V];return A.then(function(){return b.apply(L,Z)})}return b.apply(this,arguments)}}ue.ModifyError=gt,ue.DexieError=be,ue.BulkError=xt;var dt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ft(f){dt=f}var Dt={},pn=100,Kt=typeof Promise>"u"?[]:function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,m(f),f];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,m(b),f]}(),At=Kt[0],Gr=Kt[1],Kt=Kt[2],Gr=Gr&&Gr.then,$=At&&At.constructor,R=!!Kt,N=function(f,b){rn.push([f,b]),Ce&&(queueMicrotask(ae),Ce=!1)},k=!0,Ce=!0,Ge=[],Ie=[],$t=T,sn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:j,pgp:!1,env:{},finalize:j},Rt=sn,rn=[],an=0,Ir=[];function Tt(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var b=this._PSD=Rt;if(typeof f!="function"){if(f!==Dt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&In(this,this._value))}this._state=null,this._value=null,++b.ref,function A(L,V){try{V(function(Z){if(L._state===null){if(Z===L)throw new TypeError("A promise cannot be resolved with itself.");var se=L._lib&&de();Z&&typeof Z.then=="function"?A(L,function(_e,De){Z instanceof Tt?Z._then(_e,De):Z.then(_e,De)}):(L._state=!0,L._value=Z,or(L)),se&&St()}},In.bind(null,L))}catch(Z){In(L,Z)}}(this,f)}var vn={get:function(){var f=Rt,b=ui;function A(L,V){var Z=this,se=!f.global&&(f!==Rt||b!==ui),_e=se&&!Vn(),De=new Tt(function(Pe,He){nr(Z,new jr(fi(L,f,se,_e),fi(V,f,se,_e),Pe,He,f))});return this._consoleTask&&(De._consoleTask=this._consoleTask),De}return A.prototype=Dt,A},set:function(f){C(this,"then",f&&f.prototype===Dt?vn:{get:function(){return f},set:vn.set})}};function jr(f,b,A,L,V){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof b=="function"?b:null,this.resolve=A,this.reject=L,this.psd=V}function In(f,b){var A,L;Ie.push(b),f._state===null&&(A=f._lib&&de(),b=$t(b),f._state=!1,f._value=b,L=f,Ge.some(function(V){return V._value===L._value})||Ge.push(L),or(f),A&&St())}function or(f){var b=f._listeners;f._listeners=[];for(var A=0,L=b.length;A<L;++A)nr(f,b[A]);var V=f._PSD;--V.ref||V.finalize(),an===0&&(++an,N(function(){--an==0&&Et()},[]))}function nr(f,b){if(f._state!==null){var A=f._state?b.onFulfilled:b.onRejected;if(A===null)return(f._state?b.resolve:b.reject)(f._value);++b.psd.ref,++an,N(Ii,[A,f,b])}else f._listeners.push(b)}function Ii(f,b,A){try{var L,V=b._value;!b._state&&Ie.length&&(Ie=[]),L=dt&&b._consoleTask?b._consoleTask.run(function(){return f(V)}):f(V),b._state||Ie.indexOf(V)!==-1||function(Z){for(var se=Ge.length;se;)if(Ge[--se]._value===Z._value)return Ge.splice(se,1)}(b),A.resolve(L)}catch(Z){A.reject(Z)}finally{--an==0&&Et(),--A.psd.ref||A.psd.finalize()}}function ae(){ci(sn,function(){de()&&St()})}function de(){var f=k;return Ce=k=!1,f}function St(){var f,b,A;do for(;0<rn.length;)for(f=rn,rn=[],A=f.length,b=0;b<A;++b){var L=f[b];L[0].apply(null,L[1])}while(0<rn.length);Ce=k=!0}function Et(){var f=Ge;Ge=[],f.forEach(function(L){L._PSD.onunhandled.call(null,L._value,L)});for(var b=Ir.slice(0),A=b.length;A;)b[--A]()}function Ot(f){return new Tt(Dt,!1,f)}function qt(f,b){var A=Rt;return function(){var L=de(),V=Rt;try{return Vt(A,!0),f.apply(this,arguments)}catch(Z){b&&b(Z)}finally{Vt(V,!1),L&&St()}}}D(Tt.prototype,{then:vn,_then:function(f,b){nr(this,new jr(null,null,f,b,Rt))},catch:function(f){if(arguments.length===1)return this.then(null,f);var b=f,A=arguments[1];return typeof b=="function"?this.then(null,function(L){return(L instanceof b?A:Ot)(L)}):this.then(null,function(L){return(L&&L.name===b?A:Ot)(L)})},finally:function(f){return this.then(function(b){return Tt.resolve(f()).then(function(){return b})},function(b){return Tt.resolve(f()).then(function(){return Ot(b)})})},timeout:function(f,b){var A=this;return f<1/0?new Tt(function(L,V){var Z=setTimeout(function(){return V(new Ue.Timeout(b))},f);A.then(L,V).finally(clearTimeout.bind(null,Z))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(Tt.prototype,Symbol.toStringTag,"Dexie.Promise"),sn.env=pr(),D(Tt,{all:function(){var f=H.apply(null,arguments).map(xr);return new Tt(function(b,A){f.length===0&&b([]);var L=f.length;f.forEach(function(V,Z){return Tt.resolve(V).then(function(se){f[Z]=se,--L||b(f)},A)})})},resolve:function(f){return f instanceof Tt?f:f&&typeof f.then=="function"?new Tt(function(b,A){f.then(b,A)}):new Tt(Dt,!0,f)},reject:Ot,race:function(){var f=H.apply(null,arguments).map(xr);return new Tt(function(b,A){f.map(function(L){return Tt.resolve(L).then(b,A)})})},PSD:{get:function(){return Rt},set:function(f){return Rt=f}},totalEchoes:{get:function(){return ui}},newPSD:sr,usePSD:ci,scheduler:{get:function(){return N},set:function(f){N=f}},rejectionMapper:{get:function(){return $t},set:function(f){$t=f}},follow:function(f,b){return new Tt(function(A,L){return sr(function(V,Z){var se=Rt;se.unhandleds=[],se.onunhandled=Z,se.finalize=ee(function(){var _e,De=this;_e=function(){De.unhandleds.length===0?V():Z(De.unhandleds[0])},Ir.push(function Pe(){_e(),Ir.splice(Ir.indexOf(Pe),1)}),++an,N(function(){--an==0&&Et()},[])},se.finalize),f()},b,A,L)})}}),$&&($.allSettled&&C(Tt,"allSettled",function(){var f=H.apply(null,arguments).map(xr);return new Tt(function(b){f.length===0&&b([]);var A=f.length,L=new Array(A);f.forEach(function(V,Z){return Tt.resolve(V).then(function(se){return L[Z]={status:"fulfilled",value:se}},function(se){return L[Z]={status:"rejected",reason:se}}).then(function(){return--A||b(L)})})})}),$.any&&typeof AggregateError<"u"&&C(Tt,"any",function(){var f=H.apply(null,arguments).map(xr);return new Tt(function(b,A){f.length===0&&A(new AggregateError([]));var L=f.length,V=new Array(L);f.forEach(function(Z,se){return Tt.resolve(Z).then(function(_e){return b(_e)},function(_e){V[se]=_e,--L||A(new AggregateError(V))})})})}),$.withResolvers&&(Tt.withResolvers=$.withResolvers));var un={awaits:0,echoes:0,id:0},si=0,Er=[],wi=0,ui=0,li=0;function sr(f,b,A,L){var V=Rt,Z=Object.create(V);return Z.parent=V,Z.ref=0,Z.global=!1,Z.id=++li,sn.env,Z.env=R?{Promise:Tt,PromiseProp:{value:Tt,configurable:!0,writable:!0},all:Tt.all,race:Tt.race,allSettled:Tt.allSettled,any:Tt.any,resolve:Tt.resolve,reject:Tt.reject}:{},b&&E(Z,b),++V.ref,Z.finalize=function(){--this.parent.ref||this.parent.finalize()},L=ci(Z,f,A,L),Z.ref===0&&Z.finalize(),L}function ur(){return un.id||(un.id=++si),++un.awaits,un.echoes+=pn,un.id}function Vn(){return!!un.awaits&&(--un.awaits==0&&(un.id=0),un.echoes=un.awaits*pn,!0)}function xr(f){return un.echoes&&f&&f.constructor===$?(ur(),f.then(function(b){return Vn(),b},function(b){return Vn(),Ln(b)})):f}function gn(){var f=Er[Er.length-1];Er.pop(),Vt(f,!1)}function Vt(f,b){var A,L=Rt;(b?!un.echoes||wi++&&f===Rt:!wi||--wi&&f===Rt)||queueMicrotask(b?(function(V){++ui,un.echoes&&--un.echoes!=0||(un.echoes=un.awaits=un.id=0),Er.push(Rt),Vt(V,!0)}).bind(null,f):gn),f!==Rt&&(Rt=f,L===sn&&(sn.env=pr()),R&&(A=sn.env.Promise,b=f.env,(L.global||f.global)&&(Object.defineProperty(y,"Promise",b.PromiseProp),A.all=b.all,A.race=b.race,A.resolve=b.resolve,A.reject=b.reject,b.allSettled&&(A.allSettled=b.allSettled),b.any&&(A.any=b.any))))}function pr(){var f=y.Promise;return R?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(y,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function ci(f,b,A,L,V){var Z=Rt;try{return Vt(f,!0),b(A,L,V)}finally{Vt(Z,!1)}}function fi(f,b,A,L){return typeof f!="function"?f:function(){var V=Rt;A&&ur(),Vt(b,!0);try{return f.apply(this,arguments)}finally{Vt(V,!1),L&&queueMicrotask(Vn)}}}function An(f){Promise===$&&un.echoes===0?wi===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Gr).indexOf("[native code]")===-1&&(ur=Vn=j);var Ln=Tt.reject,Si="￿",Yr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Do="String expected.",di=[],ji="__dbnames",Hr="readonly",ua="readwrite";function Ei(f,b){return f?b?function(){return f.apply(this,arguments)&&b.apply(this,arguments)}:f:b}var Ui={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function l(f){return typeof f!="string"||/\./.test(f)?function(b){return b}:function(b){return b[f]===void 0&&f in b&&delete(b=ke(b))[f],b}}function u(){throw Ue.Type()}function c(f,b){try{var A=v(f),L=v(b);if(A!==L)return A==="Array"?1:L==="Array"?-1:A==="binary"?1:L==="binary"?-1:A==="string"?1:L==="string"?-1:A==="Date"?1:L!=="Date"?NaN:-1;switch(A){case"number":case"Date":case"string":return b<f?1:f<b?-1:0;case"binary":return function(V,Z){for(var se=V.length,_e=Z.length,De=se<_e?se:_e,Pe=0;Pe<De;++Pe)if(V[Pe]!==Z[Pe])return V[Pe]<Z[Pe]?-1:1;return se===_e?0:se<_e?-1:1}(x(f),x(b));case"Array":return function(V,Z){for(var se=V.length,_e=Z.length,De=se<_e?se:_e,Pe=0;Pe<De;++Pe){var He=c(V[Pe],Z[Pe]);if(He!==0)return He}return se===_e?0:se<_e?-1:1}(f,b)}}catch{}return NaN}function v(f){var b=typeof f;return b!="object"?b:ArrayBuffer.isView(f)?"binary":(f=mt(f),f==="ArrayBuffer"?"binary":f)}function x(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var K=(W.prototype._trans=function(f,b,A){var L=this._tx||Rt.trans,V=this.name,Z=dt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function se(Pe,He,xe){if(!xe.schema[V])throw new Ue.NotFound("Table "+V+" not part of transaction");return b(xe.idbtrans,xe)}var _e=de();try{var De=L&&L.db._novip===this.db._novip?L===Rt.trans?L._promise(f,se,A):sr(function(){return L._promise(f,se,A)},{trans:L,transless:Rt.transless||Rt}):function Pe(He,xe,Ve,Oe){if(He.idbdb&&(He._state.openComplete||Rt.letThrough||He._vip)){var Be=He._createTransaction(xe,Ve,He._dbSchema);try{Be.create(),He._state.PR1398_maxLoop=3}catch($e){return $e.name===Ut.InvalidState&&He.isOpen()&&0<--He._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),He.close({disableAutoOpen:!1}),He.open().then(function(){return Pe(He,xe,Ve,Oe)})):Ln($e)}return Be._promise(xe,function($e,Le){return sr(function(){return Rt.trans=Be,Oe($e,Le,Be)})}).then(function($e){if(xe==="readwrite")try{Be.idbtrans.commit()}catch{}return xe==="readonly"?$e:Be._completion.then(function(){return $e})})}if(He._state.openComplete)return Ln(new Ue.DatabaseClosed(He._state.dbOpenError));if(!He._state.isBeingOpened){if(!He._state.autoOpen)return Ln(new Ue.DatabaseClosed);He.open().catch(j)}return He._state.dbReadyPromise.then(function(){return Pe(He,xe,Ve,Oe)})}(this.db,f,[this.name],se);return Z&&(De._consoleTask=Z,De=De.catch(function(Pe){return console.trace(Pe),Ln(Pe)})),De}finally{_e&&St()}},W.prototype.get=function(f,b){var A=this;return f&&f.constructor===Object?this.where(f).first(b):f==null?Ln(new Ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(L){return A.core.get({trans:L,key:f}).then(function(V){return A.hook.reading.fire(V)})}).then(b)},W.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(g(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var b=p(f);if(b.length===1)return this.where(b[0]).equals(f[b[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(_e){if(_e.compound&&b.every(function(Pe){return 0<=_e.keyPath.indexOf(Pe)})){for(var De=0;De<b.length;++De)if(b.indexOf(_e.keyPath[De])===-1)return!1;return!0}return!1}).sort(function(_e,De){return _e.keyPath.length-De.keyPath.length})[0];if(A&&this.db._maxKey!==Si){var Z=A.keyPath.slice(0,b.length);return this.where(Z).equals(Z.map(function(De){return f[De]}))}!A&&dt&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(b.join("+"),"]"));var L=this.schema.idxByName;function V(_e,De){return c(_e,De)===0}var se=b.reduce(function(xe,De){var Pe=xe[0],He=xe[1],xe=L[De],Ve=f[De];return[Pe||xe,Pe||!xe?Ei(He,xe&&xe.multi?function(Oe){return Oe=Y(Oe,De),g(Oe)&&Oe.some(function(Be){return V(Ve,Be)})}:function(Oe){return V(Ve,Y(Oe,De))}):He]},[null,null]),Z=se[0],se=se[1];return Z?this.where(Z.name).equals(f[Z.keyPath]).filter(se):A?this.filter(se):this.where(b).equals("")},W.prototype.filter=function(f){return this.toCollection().and(f)},W.prototype.count=function(f){return this.toCollection().count(f)},W.prototype.offset=function(f){return this.toCollection().offset(f)},W.prototype.limit=function(f){return this.toCollection().limit(f)},W.prototype.each=function(f){return this.toCollection().each(f)},W.prototype.toArray=function(f){return this.toCollection().toArray(f)},W.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},W.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,g(f)?"[".concat(f.join("+"),"]"):f))},W.prototype.reverse=function(){return this.toCollection().reverse()},W.prototype.mapToClass=function(f){var b,A=this.db,L=this.name;function V(){return b!==null&&b.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof u&&(function(De,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function He(){this.constructor=De}s(De,Pe),De.prototype=Pe===null?Object.create(Pe):(He.prototype=Pe.prototype,new He)}(V,b=f),Object.defineProperty(V.prototype,"db",{get:function(){return A},enumerable:!1,configurable:!0}),V.prototype.table=function(){return L},f=V);for(var Z=new Set,se=f.prototype;se;se=m(se))Object.getOwnPropertyNames(se).forEach(function(De){return Z.add(De)});function _e(De){if(!De)return De;var Pe,He=Object.create(f.prototype);for(Pe in De)if(!Z.has(Pe))try{He[Pe]=De[Pe]}catch{}return He}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_e,this.hook("reading",_e),f},W.prototype.defineClass=function(){return this.mapToClass(function(f){E(this,f)})},W.prototype.add=function(f,b){var A=this,L=this.schema.primKey,V=L.auto,Z=L.keyPath,se=f;return Z&&V&&(se=l(Z)(f)),this._trans("readwrite",function(_e){return A.core.mutate({trans:_e,type:"add",keys:b!=null?[b]:null,values:[se]})}).then(function(_e){return _e.numFailures?Tt.reject(_e.failures[0]):_e.lastResult}).then(function(_e){if(Z)try{Q(f,Z,_e)}catch{}return _e})},W.prototype.update=function(f,b){return typeof f!="object"||g(f)?this.where(":id").equals(f).modify(b):(f=Y(f,this.schema.primKey.keyPath),f===void 0?Ln(new Ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(b))},W.prototype.put=function(f,b){var A=this,L=this.schema.primKey,V=L.auto,Z=L.keyPath,se=f;return Z&&V&&(se=l(Z)(f)),this._trans("readwrite",function(_e){return A.core.mutate({trans:_e,type:"put",values:[se],keys:b!=null?[b]:null})}).then(function(_e){return _e.numFailures?Tt.reject(_e.failures[0]):_e.lastResult}).then(function(_e){if(Z)try{Q(f,Z,_e)}catch{}return _e})},W.prototype.delete=function(f){var b=this;return this._trans("readwrite",function(A){return b.core.mutate({trans:A,type:"delete",keys:[f]})}).then(function(A){return A.numFailures?Tt.reject(A.failures[0]):void 0})},W.prototype.clear=function(){var f=this;return this._trans("readwrite",function(b){return f.core.mutate({trans:b,type:"deleteRange",range:Ui})}).then(function(b){return b.numFailures?Tt.reject(b.failures[0]):void 0})},W.prototype.bulkGet=function(f){var b=this;return this._trans("readonly",function(A){return b.core.getMany({keys:f,trans:A}).then(function(L){return L.map(function(V){return b.hook.reading.fire(V)})})})},W.prototype.bulkAdd=function(f,b,A){var L=this,V=Array.isArray(b)?b:void 0,Z=(A=A||(V?void 0:b))?A.allKeys:void 0;return this._trans("readwrite",function(se){var Pe=L.schema.primKey,_e=Pe.auto,Pe=Pe.keyPath;if(Pe&&V)throw new Ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(V&&V.length!==f.length)throw new Ue.InvalidArgument("Arguments objects and keys must have the same length");var De=f.length,Pe=Pe&&_e?f.map(l(Pe)):f;return L.core.mutate({trans:se,type:"add",keys:V,values:Pe,wantResults:Z}).then(function(Be){var xe=Be.numFailures,Ve=Be.results,Oe=Be.lastResult,Be=Be.failures;if(xe===0)return Z?Ve:Oe;throw new xt("".concat(L.name,".bulkAdd(): ").concat(xe," of ").concat(De," operations failed"),Be)})})},W.prototype.bulkPut=function(f,b,A){var L=this,V=Array.isArray(b)?b:void 0,Z=(A=A||(V?void 0:b))?A.allKeys:void 0;return this._trans("readwrite",function(se){var Pe=L.schema.primKey,_e=Pe.auto,Pe=Pe.keyPath;if(Pe&&V)throw new Ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(V&&V.length!==f.length)throw new Ue.InvalidArgument("Arguments objects and keys must have the same length");var De=f.length,Pe=Pe&&_e?f.map(l(Pe)):f;return L.core.mutate({trans:se,type:"put",keys:V,values:Pe,wantResults:Z}).then(function(Be){var xe=Be.numFailures,Ve=Be.results,Oe=Be.lastResult,Be=Be.failures;if(xe===0)return Z?Ve:Oe;throw new xt("".concat(L.name,".bulkPut(): ").concat(xe," of ").concat(De," operations failed"),Be)})})},W.prototype.bulkUpdate=function(f){var b=this,A=this.core,L=f.map(function(se){return se.key}),V=f.map(function(se){return se.changes}),Z=[];return this._trans("readwrite",function(se){return A.getMany({trans:se,keys:L,cache:"clone"}).then(function(_e){var De=[],Pe=[];f.forEach(function(xe,Ve){var Oe=xe.key,Be=xe.changes,$e=_e[Ve];if($e){for(var Le=0,et=Object.keys(Be);Le<et.length;Le++){var lt=et[Le],ct=Be[lt];if(lt===b.schema.primKey.keyPath){if(c(ct,Oe)!==0)throw new Ue.Constraint("Cannot update primary key in bulkUpdate()")}else Q($e,lt,ct)}Z.push(Ve),De.push(Oe),Pe.push($e)}});var He=De.length;return A.mutate({trans:se,type:"put",keys:De,values:Pe,updates:{keys:L,changeSpecs:V}}).then(function(xe){var Ve=xe.numFailures,Oe=xe.failures;if(Ve===0)return He;for(var Be=0,$e=Object.keys(Oe);Be<$e.length;Be++){var Le,et=$e[Be],lt=Z[Number(et)];lt!=null&&(Le=Oe[et],delete Oe[et],Oe[lt]=Le)}throw new xt("".concat(b.name,".bulkUpdate(): ").concat(Ve," of ").concat(He," operations failed"),Oe)})})})},W.prototype.bulkDelete=function(f){var b=this,A=f.length;return this._trans("readwrite",function(L){return b.core.mutate({trans:L,type:"delete",keys:f})}).then(function(se){var V=se.numFailures,Z=se.lastResult,se=se.failures;if(V===0)return Z;throw new xt("".concat(b.name,".bulkDelete(): ").concat(V," of ").concat(A," operations failed"),se)})},W);function W(){}function ie(f){function b(se,_e){if(_e){for(var De=arguments.length,Pe=new Array(De-1);--De;)Pe[De-1]=arguments[De];return A[se].subscribe.apply(null,Pe),f}if(typeof se=="string")return A[se]}var A={};b.addEventType=Z;for(var L=1,V=arguments.length;L<V;++L)Z(arguments[L]);return b;function Z(se,_e,De){if(typeof se!="object"){var Pe;_e=_e||we;var He={subscribers:[],fire:De=De||j,subscribe:function(xe){He.subscribers.indexOf(xe)===-1&&(He.subscribers.push(xe),He.fire=_e(He.fire,xe))},unsubscribe:function(xe){He.subscribers=He.subscribers.filter(function(Ve){return Ve!==xe}),He.fire=He.subscribers.reduce(_e,De)}};return A[se]=b[se]=He}p(Pe=se).forEach(function(xe){var Ve=Pe[xe];if(g(Ve))Z(xe,Pe[xe][0],Pe[xe][1]);else{if(Ve!=="asap")throw new Ue.InvalidArgument("Invalid event config");var Oe=Z(xe,T,function(){for(var Be=arguments.length,$e=new Array(Be);Be--;)$e[Be]=arguments[Be];Oe.subscribers.forEach(function(Le){z(function(){Le.apply(null,$e)})})})}})}}function ne(f,b){return O(b).from({prototype:f}),b}function re(f,b){return!(f.filter||f.algorithm||f.or)&&(b?f.justLimit:!f.replayFilter)}function fe(f,b){f.filter=Ei(f.filter,b)}function ce(f,b,A){var L=f.replayFilter;f.replayFilter=L?function(){return Ei(L(),b())}:b,f.justLimit=A&&!L}function ye(f,b){if(f.isPrimKey)return b.primaryKey;var A=b.getIndexByKeyPath(f.index);if(!A)throw new Ue.Schema("KeyPath "+f.index+" on object store "+b.name+" is not indexed");return A}function Ae(f,b,A){var L=ye(f,b.schema);return b.openCursor({trans:A,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:L,range:f.range}})}function Ke(f,b,A,L){var V=f.replayFilter?Ei(f.filter,f.replayFilter()):f.filter;if(f.or){var Z={},se=function(_e,De,Pe){var He,xe;V&&!V(De,Pe,function(Ve){return De.stop(Ve)},function(Ve){return De.fail(Ve)})||((xe=""+(He=De.primaryKey))=="[object ArrayBuffer]"&&(xe=""+new Uint8Array(He)),S(Z,xe)||(Z[xe]=!0,b(_e,De,Pe)))};return Promise.all([f.or._iterate(se,A),Ze(Ae(f,L,A),f.algorithm,se,!f.keysOnly&&f.valueMapper)])}return Ze(Ae(f,L,A),Ei(f.algorithm,V),b,!f.keysOnly&&f.valueMapper)}function Ze(f,b,A,L){var V=qt(L?function(Z,se,_e){return A(L(Z),se,_e)}:A);return f.then(function(Z){if(Z)return Z.start(function(){var se=function(){return Z.continue()};b&&!b(Z,function(_e){return se=_e},function(_e){Z.stop(_e),se=j},function(_e){Z.fail(_e),se=j})||V(Z.value,Z,function(_e){return se=_e}),se()})})}var nt=(X.prototype.execute=function(f){var b=this["@@propmod"];if(b.add!==void 0){var A=b.add;if(g(A))return d(d([],g(f)?f:[],!0),A).sort();if(typeof A=="number")return(Number(f)||0)+A;if(typeof A=="bigint")try{return BigInt(f)+A}catch{return BigInt(0)+A}throw new TypeError("Invalid term ".concat(A))}if(b.remove!==void 0){var L=b.remove;if(g(L))return g(f)?f.filter(function(V){return!L.includes(V)}).sort():[];if(typeof L=="number")return Number(f)-L;if(typeof L=="bigint")try{return BigInt(f)-L}catch{return BigInt(0)-L}throw new TypeError("Invalid subtrahend ".concat(L))}return A=(A=b.replacePrefix)===null||A===void 0?void 0:A[0],A&&typeof f=="string"&&f.startsWith(A)?b.replacePrefix[1]+f.substring(A.length):f},X);function X(f){this["@@propmod"]=f}var le=(oe.prototype._read=function(f,b){var A=this._ctx;return A.error?A.table._trans(null,Ln.bind(null,A.error)):A.table._trans("readonly",f).then(b)},oe.prototype._write=function(f){var b=this._ctx;return b.error?b.table._trans(null,Ln.bind(null,b.error)):b.table._trans("readwrite",f,"locked")},oe.prototype._addAlgorithm=function(f){var b=this._ctx;b.algorithm=Ei(b.algorithm,f)},oe.prototype._iterate=function(f,b){return Ke(this._ctx,f,b,this._ctx.table.core)},oe.prototype.clone=function(f){var b=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return f&&E(A,f),b._ctx=A,b},oe.prototype.raw=function(){return this._ctx.valueMapper=null,this},oe.prototype.each=function(f){var b=this._ctx;return this._read(function(A){return Ke(b,f,A,b.table.core)})},oe.prototype.count=function(f){var b=this;return this._read(function(A){var L=b._ctx,V=L.table.core;if(re(L,!0))return V.count({trans:A,query:{index:ye(L,V.schema),range:L.range}}).then(function(se){return Math.min(se,L.limit)});var Z=0;return Ke(L,function(){return++Z,!1},A,V).then(function(){return Z})}).then(f)},oe.prototype.sortBy=function(f,b){var A=f.split(".").reverse(),L=A[0],V=A.length-1;function Z(De,Pe){return Pe?Z(De[A[Pe]],Pe-1):De[L]}var se=this._ctx.dir==="next"?1:-1;function _e(De,Pe){return c(Z(De,V),Z(Pe,V))*se}return this.toArray(function(De){return De.sort(_e)}).then(b)},oe.prototype.toArray=function(f){var b=this;return this._read(function(A){var L=b._ctx;if(L.dir==="next"&&re(L,!0)&&0<L.limit){var V=L.valueMapper,Z=ye(L,L.table.core.schema);return L.table.core.query({trans:A,limit:L.limit,values:!0,query:{index:Z,range:L.range}}).then(function(_e){return _e=_e.result,V?_e.map(V):_e})}var se=[];return Ke(L,function(_e){return se.push(_e)},A,L.table.core).then(function(){return se})},f)},oe.prototype.offset=function(f){var b=this._ctx;return f<=0||(b.offset+=f,re(b)?ce(b,function(){var A=f;return function(L,V){return A===0||(A===1?--A:V(function(){L.advance(A),A=0}),!1)}}):ce(b,function(){var A=f;return function(){return--A<0}})),this},oe.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),ce(this._ctx,function(){var b=f;return function(A,L,V){return--b<=0&&L(V),0<=b}},!0),this},oe.prototype.until=function(f,b){return fe(this._ctx,function(A,L,V){return!f(A.value)||(L(V),b)}),this},oe.prototype.first=function(f){return this.limit(1).toArray(function(b){return b[0]}).then(f)},oe.prototype.last=function(f){return this.reverse().first(f)},oe.prototype.filter=function(f){var b;return fe(this._ctx,function(A){return f(A.value)}),(b=this._ctx).isMatch=Ei(b.isMatch,f),this},oe.prototype.and=function(f){return this.filter(f)},oe.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},oe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},oe.prototype.desc=function(){return this.reverse()},oe.prototype.eachKey=function(f){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(A,L){f(L.key,L)})},oe.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},oe.prototype.eachPrimaryKey=function(f){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(A,L){f(L.primaryKey,L)})},oe.prototype.keys=function(f){var b=this._ctx;b.keysOnly=!b.isMatch;var A=[];return this.each(function(L,V){A.push(V.key)}).then(function(){return A}).then(f)},oe.prototype.primaryKeys=function(f){var b=this._ctx;if(b.dir==="next"&&re(b,!0)&&0<b.limit)return this._read(function(L){var V=ye(b,b.table.core.schema);return b.table.core.query({trans:L,values:!1,limit:b.limit,query:{index:V,range:b.range}})}).then(function(L){return L.result}).then(f);b.keysOnly=!b.isMatch;var A=[];return this.each(function(L,V){A.push(V.primaryKey)}).then(function(){return A}).then(f)},oe.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},oe.prototype.firstKey=function(f){return this.limit(1).keys(function(b){return b[0]}).then(f)},oe.prototype.lastKey=function(f){return this.reverse().firstKey(f)},oe.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var b={};return fe(this._ctx,function(V){var L=V.primaryKey.toString(),V=S(b,L);return b[L]=!0,!V}),this},oe.prototype.modify=function(f){var b=this,A=this._ctx;return this._write(function(L){var V,Z,se;se=typeof f=="function"?f:(V=p(f),Z=V.length,function(Le){for(var et=!1,lt=0;lt<Z;++lt){var ct=V[lt],ht=f[ct],Nt=Y(Le,ct);ht instanceof nt?(Q(Le,ct,ht.execute(Nt)),et=!0):Nt!==ht&&(Q(Le,ct,ht),et=!0)}return et});var _e=A.table.core,xe=_e.schema.primaryKey,De=xe.outbound,Pe=xe.extractKey,He=200,xe=b.db._options.modifyChunkSize;xe&&(He=typeof xe=="object"?xe[_e.name]||xe["*"]||200:xe);function Ve(Le,ct){var lt=ct.failures,ct=ct.numFailures;Be+=Le-ct;for(var ht=0,Nt=p(lt);ht<Nt.length;ht++){var jt=Nt[ht];Oe.push(lt[jt])}}var Oe=[],Be=0,$e=[];return b.clone().primaryKeys().then(function(Le){function et(ct){var ht=Math.min(He,Le.length-ct);return _e.getMany({trans:L,keys:Le.slice(ct,ct+ht),cache:"immutable"}).then(function(Nt){for(var jt=[],kt=[],Ct=De?[]:null,Lt=[],Ft=0;Ft<ht;++Ft){var Mt=Nt[Ft],Gt={value:ke(Mt),primKey:Le[ct+Ft]};se.call(Gt,Gt.value,Gt)!==!1&&(Gt.value==null?Lt.push(Le[ct+Ft]):De||c(Pe(Mt),Pe(Gt.value))===0?(kt.push(Gt.value),De&&Ct.push(Le[ct+Ft])):(Lt.push(Le[ct+Ft]),jt.push(Gt.value)))}return Promise.resolve(0<jt.length&&_e.mutate({trans:L,type:"add",values:jt}).then(function(Wt){for(var on in Wt.failures)Lt.splice(parseInt(on),1);Ve(jt.length,Wt)})).then(function(){return(0<kt.length||lt&&typeof f=="object")&&_e.mutate({trans:L,type:"put",keys:Ct,values:kt,criteria:lt,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<ct}).then(function(Wt){return Ve(kt.length,Wt)})}).then(function(){return(0<Lt.length||lt&&f===ge)&&_e.mutate({trans:L,type:"delete",keys:Lt,criteria:lt,isAdditionalChunk:0<ct}).then(function(Wt){return Ve(Lt.length,Wt)})}).then(function(){return Le.length>ct+ht&&et(ct+He)})})}var lt=re(A)&&A.limit===1/0&&(typeof f!="function"||f===ge)&&{index:A.index,range:A.range};return et(0).then(function(){if(0<Oe.length)throw new gt("Error modifying one or more objects",Oe,Be,$e);return Le.length})})})},oe.prototype.delete=function(){var f=this._ctx,b=f.range;return re(f)&&(f.isPrimKey||b.type===3)?this._write(function(A){var L=f.table.core.schema.primaryKey,V=b;return f.table.core.count({trans:A,query:{index:L,range:V}}).then(function(Z){return f.table.core.mutate({trans:A,type:"deleteRange",range:V}).then(function(se){var _e=se.failures;if(se.lastResult,se.results,se=se.numFailures,se)throw new gt("Could not delete some values",Object.keys(_e).map(function(De){return _e[De]}),Z-se);return Z-se})})}):this.modify(ge)},oe);function oe(){}var ge=function(f,b){return b.value=null};function Je(f,b){return f<b?-1:f===b?0:1}function ut(f,b){return b<f?-1:f===b?0:1}function Pt(f,b,A){return f=f instanceof bn?new f.Collection(f):f,f._ctx.error=new(A||TypeError)(b),f}function _t(f){return new f.Collection(f,function(){return Ht("")}).limit(0)}function Zt(f,b,A,L){var V,Z,se,_e,De,Pe,He,xe=A.length;if(!A.every(function(Be){return typeof Be=="string"}))return Pt(f,Do);function Ve(Be){V=Be==="next"?function(Le){return Le.toUpperCase()}:function(Le){return Le.toLowerCase()},Z=Be==="next"?function(Le){return Le.toLowerCase()}:function(Le){return Le.toUpperCase()},se=Be==="next"?Je:ut;var $e=A.map(function(Le){return{lower:Z(Le),upper:V(Le)}}).sort(function(Le,et){return se(Le.lower,et.lower)});_e=$e.map(function(Le){return Le.upper}),De=$e.map(function(Le){return Le.lower}),He=(Pe=Be)==="next"?"":L}Ve("next"),f=new f.Collection(f,function(){return It(_e[0],De[xe-1]+L)}),f._ondirectionchange=function(Be){Ve(Be)};var Oe=0;return f._addAlgorithm(function(Be,$e,Le){var et=Be.key;if(typeof et!="string")return!1;var lt=Z(et);if(b(lt,De,Oe))return!0;for(var ct=null,ht=Oe;ht<xe;++ht){var Nt=function(jt,kt,Ct,Lt,Ft,Mt){for(var Gt=Math.min(jt.length,Lt.length),Wt=-1,on=0;on<Gt;++on){var Tr=kt[on];if(Tr!==Lt[on])return Ft(jt[on],Ct[on])<0?jt.substr(0,on)+Ct[on]+Ct.substr(on+1):Ft(jt[on],Lt[on])<0?jt.substr(0,on)+Lt[on]+Ct.substr(on+1):0<=Wt?jt.substr(0,Wt)+kt[Wt]+Ct.substr(Wt+1):null;Ft(jt[on],Tr)<0&&(Wt=on)}return Gt<Lt.length&&Mt==="next"?jt+Ct.substr(jt.length):Gt<jt.length&&Mt==="prev"?jt.substr(0,Ct.length):Wt<0?null:jt.substr(0,Wt)+Lt[Wt]+Ct.substr(Wt+1)}(et,lt,_e[ht],De[ht],se,Pe);Nt===null&&ct===null?Oe=ht+1:(ct===null||0<se(ct,Nt))&&(ct=Nt)}return $e(ct!==null?function(){Be.continue(ct+He)}:Le),!1}),f}function It(f,b,A,L){return{type:2,lower:f,upper:b,lowerOpen:A,upperOpen:L}}function Ht(f){return{type:1,lower:f,upper:f}}var bn=(Object.defineProperty(Qt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Qt.prototype.between=function(f,b,A,L){A=A!==!1,L=L===!0;try{return 0<this._cmp(f,b)||this._cmp(f,b)===0&&(A||L)&&(!A||!L)?_t(this):new this.Collection(this,function(){return It(f,b,!A,!L)})}catch{return Pt(this,Yr)}},Qt.prototype.equals=function(f){return f==null?Pt(this,Yr):new this.Collection(this,function(){return Ht(f)})},Qt.prototype.above=function(f){return f==null?Pt(this,Yr):new this.Collection(this,function(){return It(f,void 0,!0)})},Qt.prototype.aboveOrEqual=function(f){return f==null?Pt(this,Yr):new this.Collection(this,function(){return It(f,void 0,!1)})},Qt.prototype.below=function(f){return f==null?Pt(this,Yr):new this.Collection(this,function(){return It(void 0,f,!1,!0)})},Qt.prototype.belowOrEqual=function(f){return f==null?Pt(this,Yr):new this.Collection(this,function(){return It(void 0,f)})},Qt.prototype.startsWith=function(f){return typeof f!="string"?Pt(this,Do):this.between(f,f+Si,!0,!0)},Qt.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):Zt(this,function(b,A){return b.indexOf(A[0])===0},[f],Si)},Qt.prototype.equalsIgnoreCase=function(f){return Zt(this,function(b,A){return b===A[0]},[f],"")},Qt.prototype.anyOfIgnoreCase=function(){var f=H.apply(it,arguments);return f.length===0?_t(this):Zt(this,function(b,A){return A.indexOf(b)!==-1},f,"")},Qt.prototype.startsWithAnyOfIgnoreCase=function(){var f=H.apply(it,arguments);return f.length===0?_t(this):Zt(this,function(b,A){return A.some(function(L){return b.indexOf(L)===0})},f,Si)},Qt.prototype.anyOf=function(){var f=this,b=H.apply(it,arguments),A=this._cmp;try{b.sort(A)}catch{return Pt(this,Yr)}if(b.length===0)return _t(this);var L=new this.Collection(this,function(){return It(b[0],b[b.length-1])});L._ondirectionchange=function(Z){A=Z==="next"?f._ascending:f._descending,b.sort(A)};var V=0;return L._addAlgorithm(function(Z,se,_e){for(var De=Z.key;0<A(De,b[V]);)if(++V===b.length)return se(_e),!1;return A(De,b[V])===0||(se(function(){Z.continue(b[V])}),!1)}),L},Qt.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Qt.prototype.noneOf=function(){var f=H.apply(it,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return Pt(this,Yr)}var b=f.reduce(function(A,L){return A?A.concat([[A[A.length-1][1],L]]):[[-1/0,L]]},null);return b.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})},Qt.prototype.inAnyRange=function(et,b){var A=this,L=this._cmp,V=this._ascending,Z=this._descending,se=this._min,_e=this._max;if(et.length===0)return _t(this);if(!et.every(function(lt){return lt[0]!==void 0&&lt[1]!==void 0&&V(lt[0],lt[1])<=0}))return Pt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ue.InvalidArgument);var De=!b||b.includeLowers!==!1,Pe=b&&b.includeUppers===!0,He,xe=V;function Ve(lt,ct){return xe(lt[0],ct[0])}try{(He=et.reduce(function(lt,ct){for(var ht=0,Nt=lt.length;ht<Nt;++ht){var jt=lt[ht];if(L(ct[0],jt[1])<0&&0<L(ct[1],jt[0])){jt[0]=se(jt[0],ct[0]),jt[1]=_e(jt[1],ct[1]);break}}return ht===Nt&&lt.push(ct),lt},[])).sort(Ve)}catch{return Pt(this,Yr)}var Oe=0,Be=Pe?function(lt){return 0<V(lt,He[Oe][1])}:function(lt){return 0<=V(lt,He[Oe][1])},$e=De?function(lt){return 0<Z(lt,He[Oe][0])}:function(lt){return 0<=Z(lt,He[Oe][0])},Le=Be,et=new this.Collection(this,function(){return It(He[0][0],He[He.length-1][1],!De,!Pe)});return et._ondirectionchange=function(lt){xe=lt==="next"?(Le=Be,V):(Le=$e,Z),He.sort(Ve)},et._addAlgorithm(function(lt,ct,ht){for(var Nt,jt=lt.key;Le(jt);)if(++Oe===He.length)return ct(ht),!1;return!Be(Nt=jt)&&!$e(Nt)||(A._cmp(jt,He[Oe][1])===0||A._cmp(jt,He[Oe][0])===0||ct(function(){xe===V?lt.continue(He[Oe][0]):lt.continue(He[Oe][1])}),!1)}),et},Qt.prototype.startsWithAnyOf=function(){var f=H.apply(it,arguments);return f.every(function(b){return typeof b=="string"})?f.length===0?_t(this):this.inAnyRange(f.map(function(b){return[b,b+Si]})):Pt(this,"startsWithAnyOf() only works with strings")},Qt);function Qt(){}function fn(f){return qt(function(b){return qn(b),f(b.target.error),!1})}function qn(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var Mn="storagemutated",Bn="x-storagemutated-1",cn=ie(null,Mn),Hn=(_n.prototype._lock=function(){return B(!Rt.global),++this._reculock,this._reculock!==1||Rt.global||(Rt.lockOwnerFor=this),this},_n.prototype._unlock=function(){if(B(!Rt.global),--this._reculock==0)for(Rt.global||(Rt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{ci(f[1],f[0])}catch{}}return this},_n.prototype._locked=function(){return this._reculock&&Rt.lockOwnerFor!==this},_n.prototype.create=function(f){var b=this;if(!this.mode)return this;var A=this.db.idbdb,L=this.db._state.dbOpenError;if(B(!this.idbtrans),!f&&!A)switch(L&&L.name){case"DatabaseClosedError":throw new Ue.DatabaseClosed(L);case"MissingAPIError":throw new Ue.MissingAPI(L.message,L);default:throw new Ue.OpenFailed(L)}if(!this.active)throw new Ue.TransactionInactive;return B(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=qt(function(V){qn(V),b._reject(f.error)}),f.onabort=qt(function(V){qn(V),b.active&&b._reject(new Ue.Abort(f.error)),b.active=!1,b.on("abort").fire(V)}),f.oncomplete=qt(function(){b.active=!1,b._resolve(),"mutatedParts"in f&&cn.storagemutated.fire(f.mutatedParts)}),this},_n.prototype._promise=function(f,b,A){var L=this;if(f==="readwrite"&&this.mode!=="readwrite")return Ln(new Ue.ReadOnly("Transaction is readonly"));if(!this.active)return Ln(new Ue.TransactionInactive);if(this._locked())return new Tt(function(Z,se){L._blockedFuncs.push([function(){L._promise(f,b,A).then(Z,se)},Rt])});if(A)return sr(function(){var Z=new Tt(function(se,_e){L._lock();var De=b(se,_e,L);De&&De.then&&De.then(se,_e)});return Z.finally(function(){return L._unlock()}),Z._lib=!0,Z});var V=new Tt(function(Z,se){var _e=b(Z,se,L);_e&&_e.then&&_e.then(Z,se)});return V._lib=!0,V},_n.prototype._root=function(){return this.parent?this.parent._root():this},_n.prototype.waitFor=function(f){var b,A=this._root(),L=Tt.resolve(f);A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return L}):(A._waitingFor=L,A._waitingQueue=[],b=A.idbtrans.objectStore(A.storeNames[0]),function Z(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(b.get(-1/0).onsuccess=Z)}());var V=A._waitingFor;return new Tt(function(Z,se){L.then(function(_e){return A._waitingQueue.push(qt(Z.bind(null,_e)))},function(_e){return A._waitingQueue.push(qt(se.bind(null,_e)))}).finally(function(){A._waitingFor===V&&(A._waitingFor=null)})})},_n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ue.Abort))},_n.prototype.table=function(f){var b=this._memoizedTables||(this._memoizedTables={});if(S(b,f))return b[f];var A=this.schema[f];if(!A)throw new Ue.NotFound("Table "+f+" not part of transaction");return A=new this.db.Table(f,A,this),A.core=this.db.core.table(f),b[f]=A},_n);function _n(){}function Nn(f,b,A,L,V,Z,se){return{name:f,keyPath:b,unique:A,multi:L,auto:V,compound:Z,src:(A&&!se?"&":"")+(L?"*":"")+(V?"++":"")+xi(b)}}function xi(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Kr(f,b,A){return{name:f,primKey:b,indexes:A,mappedClass:null,idxByName:(L=function(V){return[V.name,V]},A.reduce(function(V,Z,se){return se=L(Z,se),se&&(V[se[0]]=se[1]),V},{}))};var L}var Qr=function(f){try{return f.only([[]]),Qr=function(){return[[]]},[[]]}catch{return Qr=function(){return Si},Si}};function qr(f){return f==null?function(){}:typeof f=="string"?(b=f).split(".").length===1?function(A){return A[b]}:function(A){return Y(A,b)}:function(A){return Y(A,f)};var b}function Pi(f){return[].slice.call(f)}var Wi=0;function En(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Xn(f,b,De){function L(Le){if(Le.type===3)return null;if(Le.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Oe=Le.lower,Be=Le.upper,$e=Le.lowerOpen,Le=Le.upperOpen;return Oe===void 0?Be===void 0?null:b.upperBound(Be,!!Le):Be===void 0?b.lowerBound(Oe,!!$e):b.bound(Oe,Be,!!$e,!!Le)}function V(Ve){var Oe,Be=Ve.name;return{name:Be,schema:Ve,mutate:function($e){var Le=$e.trans,et=$e.type,lt=$e.keys,ct=$e.values,ht=$e.range;return new Promise(function(Nt,jt){Nt=qt(Nt);var kt=Le.objectStore(Be),Ct=kt.keyPath==null,Lt=et==="put"||et==="add";if(!Lt&&et!=="delete"&&et!=="deleteRange")throw new Error("Invalid operation type: "+et);var Ft,Mt=(lt||ct||{length:1}).length;if(lt&&ct&&lt.length!==ct.length)throw new Error("Given keys array must have same length as given values array.");if(Mt===0)return Nt({numFailures:0,failures:{},results:[],lastResult:void 0});function Gt(mr){++Tr,qn(mr)}var Wt=[],on=[],Tr=0;if(et==="deleteRange"){if(ht.type===4)return Nt({numFailures:Tr,failures:on,results:[],lastResult:void 0});ht.type===3?Wt.push(Ft=kt.clear()):Wt.push(Ft=kt.delete(L(ht)))}else{var Ct=Lt?Ct?[ct,lt]:[ct,null]:[lt,null],en=Ct[0],rr=Ct[1];if(Lt)for(var lr=0;lr<Mt;++lr)Wt.push(Ft=rr&&rr[lr]!==void 0?kt[et](en[lr],rr[lr]):kt[et](en[lr])),Ft.onerror=Gt;else for(lr=0;lr<Mt;++lr)Wt.push(Ft=kt[et](en[lr])),Ft.onerror=Gt}function Hi(mr){mr=mr.target.result,Wt.forEach(function(Ai,Xi){return Ai.error!=null&&(on[Xi]=Ai.error)}),Nt({numFailures:Tr,failures:on,results:et==="delete"?lt:Wt.map(function(Ai){return Ai.result}),lastResult:mr})}Ft.onerror=function(mr){Gt(mr),Hi(mr)},Ft.onsuccess=Hi})},getMany:function($e){var Le=$e.trans,et=$e.keys;return new Promise(function(lt,ct){lt=qt(lt);for(var ht,Nt=Le.objectStore(Be),jt=et.length,kt=new Array(jt),Ct=0,Lt=0,Ft=function(Wt){Wt=Wt.target,kt[Wt._pos]=Wt.result,++Lt===Ct&&lt(kt)},Mt=fn(ct),Gt=0;Gt<jt;++Gt)et[Gt]!=null&&((ht=Nt.get(et[Gt]))._pos=Gt,ht.onsuccess=Ft,ht.onerror=Mt,++Ct);Ct===0&&lt(kt)})},get:function($e){var Le=$e.trans,et=$e.key;return new Promise(function(lt,ct){lt=qt(lt);var ht=Le.objectStore(Be).get(et);ht.onsuccess=function(Nt){return lt(Nt.target.result)},ht.onerror=fn(ct)})},query:(Oe=Pe,function($e){return new Promise(function(Le,et){Le=qt(Le);var lt,ct,ht,Ct=$e.trans,Nt=$e.values,jt=$e.limit,Ft=$e.query,kt=jt===1/0?void 0:jt,Lt=Ft.index,Ft=Ft.range,Ct=Ct.objectStore(Be),Lt=Lt.isPrimaryKey?Ct:Ct.index(Lt.name),Ft=L(Ft);if(jt===0)return Le({result:[]});Oe?((kt=Nt?Lt.getAll(Ft,kt):Lt.getAllKeys(Ft,kt)).onsuccess=function(Mt){return Le({result:Mt.target.result})},kt.onerror=fn(et)):(lt=0,ct=!Nt&&"openKeyCursor"in Lt?Lt.openKeyCursor(Ft):Lt.openCursor(Ft),ht=[],ct.onsuccess=function(Mt){var Gt=ct.result;return Gt?(ht.push(Nt?Gt.value:Gt.primaryKey),++lt===jt?Le({result:ht}):void Gt.continue()):Le({result:ht})},ct.onerror=fn(et))})}),openCursor:function($e){var Le=$e.trans,et=$e.values,lt=$e.query,ct=$e.reverse,ht=$e.unique;return new Promise(function(Nt,jt){Nt=qt(Nt);var Lt=lt.index,kt=lt.range,Ct=Le.objectStore(Be),Ct=Lt.isPrimaryKey?Ct:Ct.index(Lt.name),Lt=ct?ht?"prevunique":"prev":ht?"nextunique":"next",Ft=!et&&"openKeyCursor"in Ct?Ct.openKeyCursor(L(kt),Lt):Ct.openCursor(L(kt),Lt);Ft.onerror=fn(jt),Ft.onsuccess=qt(function(Mt){var Gt,Wt,on,Tr,en=Ft.result;en?(en.___id=++Wi,en.done=!1,Gt=en.continue.bind(en),Wt=(Wt=en.continuePrimaryKey)&&Wt.bind(en),on=en.advance.bind(en),Tr=function(){throw new Error("Cursor not stopped")},en.trans=Le,en.stop=en.continue=en.continuePrimaryKey=en.advance=function(){throw new Error("Cursor not started")},en.fail=qt(jt),en.next=function(){var rr=this,lr=1;return this.start(function(){return lr--?rr.continue():rr.stop()}).then(function(){return rr})},en.start=function(rr){function lr(){if(Ft.result)try{rr()}catch(mr){en.fail(mr)}else en.done=!0,en.start=function(){throw new Error("Cursor behind last entry")},en.stop()}var Hi=new Promise(function(mr,Ai){mr=qt(mr),Ft.onerror=fn(Ai),en.fail=Ai,en.stop=function(Xi){en.stop=en.continue=en.continuePrimaryKey=en.advance=Tr,mr(Xi)}});return Ft.onsuccess=qt(function(mr){Ft.onsuccess=lr,lr()}),en.continue=Gt,en.continuePrimaryKey=Wt,en.advance=on,lr(),Hi},Nt(en)):Nt(null)},jt)})},count:function($e){var Le=$e.query,et=$e.trans,lt=Le.index,ct=Le.range;return new Promise(function(ht,Nt){var jt=et.objectStore(Be),kt=lt.isPrimaryKey?jt:jt.index(lt.name),jt=L(ct),kt=jt?kt.count(jt):kt.count();kt.onsuccess=qt(function(Ct){return ht(Ct.target.result)}),kt.onerror=fn(Nt)})}}}var Z,se,_e,He=(se=De,_e=Pi((Z=f).objectStoreNames),{schema:{name:Z.name,tables:_e.map(function(Ve){return se.objectStore(Ve)}).map(function(Ve){var Oe=Ve.keyPath,Le=Ve.autoIncrement,Be=g(Oe),$e={},Le={name:Ve.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Oe==null,compound:Be,keyPath:Oe,autoIncrement:Le,unique:!0,extractKey:qr(Oe)},indexes:Pi(Ve.indexNames).map(function(et){return Ve.index(et)}).map(function(ht){var lt=ht.name,ct=ht.unique,Nt=ht.multiEntry,ht=ht.keyPath,Nt={name:lt,compound:g(ht),keyPath:ht,unique:ct,multiEntry:Nt,extractKey:qr(ht)};return $e[En(ht)]=Nt}),getIndexByKeyPath:function(et){return $e[En(et)]}};return $e[":id"]=Le.primaryKey,Oe!=null&&($e[En(Oe)]=Le.primaryKey),Le})},hasGetAll:0<_e.length&&"getAll"in se.objectStore(_e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),De=He.schema,Pe=He.hasGetAll,He=De.tables.map(V),xe={};return He.forEach(function(Ve){return xe[Ve.name]=Ve}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(Ve){if(!xe[Ve])throw new Error("Table '".concat(Ve,"' not found"));return xe[Ve]},MIN_KEY:-1/0,MAX_KEY:Qr(b),schema:De}}function Li(f,b,A,L){var V=A.IDBKeyRange;return A.indexedDB,{dbcore:(L=Xn(b,V,L),f.dbcore.reduce(function(Z,se){return se=se.create,i(i({},Z),se(Z))},L))}}function Ur(f,L){var A=L.db,L=Li(f._middlewares,A,f._deps,L);f.core=L.dbcore,f.tables.forEach(function(V){var Z=V.name;f.core.schema.tables.some(function(se){return se.name===Z})&&(V.core=f.core.table(Z),f[Z]instanceof f.Table&&(f[Z].core=V.core))})}function Mi(f,b,A,L){A.forEach(function(V){var Z=L[V];b.forEach(function(se){var _e=function De(Pe,He){return U(Pe,He)||(Pe=m(Pe))&&De(Pe,He)}(se,V);(!_e||"value"in _e&&_e.value===void 0)&&(se===f.Transaction.prototype||se instanceof f.Transaction?C(se,V,{get:function(){return this.table(V)},set:function(De){M(this,V,{value:De,writable:!0,configurable:!0,enumerable:!0})}}):se[V]=new f.Table(V,Z))})})}function hi(f,b){b.forEach(function(A){for(var L in A)A[L]instanceof f.Table&&delete A[L]})}function la(f,b){return f._cfg.version-b._cfg.version}function pi(f,b,A,L){var V=f._dbSchema;A.objectStoreNames.contains("$meta")&&!V.$meta&&(V.$meta=Kr("$meta",Da("")[0],[]),f._storeNames.push("$meta"));var Z=f._createTransaction("readwrite",f._storeNames,V);Z.create(A),Z._completion.catch(L);var se=Z._reject.bind(Z),_e=Rt.transless||Rt;sr(function(){return Rt.trans=Z,Rt.transless=_e,b!==0?(Ur(f,A),Pe=b,((De=Z).storeNames.includes("$meta")?De.table("$meta").get("version").then(function(He){return He??Pe}):Tt.resolve(Pe)).then(function(He){return Ve=He,Oe=Z,Be=A,$e=[],He=(xe=f)._versions,Le=xe._dbSchema=Vr(0,xe.idbdb,Be),(He=He.filter(function(et){return et._cfg.version>=Ve})).length!==0?(He.forEach(function(et){$e.push(function(){var lt=Le,ct=et._cfg.dbschema;Un(xe,lt,Be),Un(xe,ct,Be),Le=xe._dbSchema=ct;var ht=Xr(lt,ct);ht.add.forEach(function(Lt){zr(Be,Lt[0],Lt[1].primKey,Lt[1].indexes)}),ht.change.forEach(function(Lt){if(Lt.recreate)throw new Ue.Upgrade("Not yet support for changing primary key");var Ft=Be.objectStore(Lt.name);Lt.add.forEach(function(Mt){return Pr(Ft,Mt)}),Lt.change.forEach(function(Mt){Ft.deleteIndex(Mt.name),Pr(Ft,Mt)}),Lt.del.forEach(function(Mt){return Ft.deleteIndex(Mt)})});var Nt=et._cfg.contentUpgrade;if(Nt&&et._cfg.version>Ve){Ur(xe,Be),Oe._memoizedTables={};var jt=ve(ct);ht.del.forEach(function(Lt){jt[Lt]=lt[Lt]}),hi(xe,[xe.Transaction.prototype]),Mi(xe,[xe.Transaction.prototype],p(jt),jt),Oe.schema=jt;var kt,Ct=he(Nt);return Ct&&ur(),ht=Tt.follow(function(){var Lt;(kt=Nt(Oe))&&Ct&&(Lt=Vn.bind(null,null),kt.then(Lt,Lt))}),kt&&typeof kt.then=="function"?Tt.resolve(kt):ht.then(function(){return kt})}}),$e.push(function(lt){var ct,ht,Nt=et._cfg.dbschema;ct=Nt,ht=lt,[].slice.call(ht.db.objectStoreNames).forEach(function(jt){return ct[jt]==null&&ht.db.deleteObjectStore(jt)}),hi(xe,[xe.Transaction.prototype]),Mi(xe,[xe.Transaction.prototype],xe._storeNames,xe._dbSchema),Oe.schema=xe._dbSchema}),$e.push(function(lt){xe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(xe.idbdb.version/10)===et._cfg.version?(xe.idbdb.deleteObjectStore("$meta"),delete xe._dbSchema.$meta,xe._storeNames=xe._storeNames.filter(function(ct){return ct!=="$meta"})):lt.objectStore("$meta").put(et._cfg.version,"version"))})}),function et(){return $e.length?Tt.resolve($e.shift()(Oe.idbtrans)).then(et):Tt.resolve()}().then(function(){Rn(Le,Be)})):Tt.resolve();var xe,Ve,Oe,Be,$e,Le}).catch(se)):(p(V).forEach(function(He){zr(A,He,V[He].primKey,V[He].indexes)}),Ur(f,A),void Tt.follow(function(){return f.on.populate.fire(Z)}).catch(se));var De,Pe})}function gr(f,b){Rn(f._dbSchema,b),b.db.version%10!=0||b.objectStoreNames.contains("$meta")||b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var A=Vr(0,f.idbdb,b);Un(f,f._dbSchema,b);for(var L=0,V=Xr(A,f._dbSchema).change;L<V.length;L++){var Z=function(se){if(se.change.length||se.recreate)return console.warn("Unable to patch indexes of table ".concat(se.name," because it has changes on the type of index or primary key.")),{value:void 0};var _e=b.objectStore(se.name);se.add.forEach(function(De){dt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(se.name,".").concat(De.src)),Pr(_e,De)})}(V[L]);if(typeof Z=="object")return Z.value}}function Xr(f,b){var A,L={del:[],add:[],change:[]};for(A in f)b[A]||L.del.push(A);for(A in b){var V=f[A],Z=b[A];if(V){var se={name:A,def:Z,recreate:!1,del:[],add:[],change:[]};if(""+(V.primKey.keyPath||"")!=""+(Z.primKey.keyPath||"")||V.primKey.auto!==Z.primKey.auto)se.recreate=!0,L.change.push(se);else{var _e=V.idxByName,De=Z.idxByName,Pe=void 0;for(Pe in _e)De[Pe]||se.del.push(Pe);for(Pe in De){var He=_e[Pe],xe=De[Pe];He?He.src!==xe.src&&se.change.push(xe):se.add.push(xe)}(0<se.del.length||0<se.add.length||0<se.change.length)&&L.change.push(se)}}else L.add.push([A,Z])}return L}function zr(f,b,A,L){var V=f.db.createObjectStore(b,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});return L.forEach(function(Z){return Pr(V,Z)}),V}function Rn(f,b){p(f).forEach(function(A){b.db.objectStoreNames.contains(A)||(dt&&console.debug("Dexie: Creating missing table",A),zr(b,A,f[A].primKey,f[A].indexes))})}function Pr(f,b){f.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function Vr(f,b,A){var L={};return P(b.objectStoreNames,0).forEach(function(V){for(var Z=A.objectStore(V),se=Nn(xi(Pe=Z.keyPath),Pe||"",!0,!1,!!Z.autoIncrement,Pe&&typeof Pe!="string",!0),_e=[],De=0;De<Z.indexNames.length;++De){var He=Z.index(Z.indexNames[De]),Pe=He.keyPath,He=Nn(He.name,Pe,!!He.unique,!!He.multiEntry,!1,Pe&&typeof Pe!="string",!1);_e.push(He)}L[V]=Kr(V,se,_e)}),L}function Un(f,b,A){for(var L=A.db.objectStoreNames,V=0;V<L.length;++V){var Z=L[V],se=A.objectStore(Z);f._hasGetAll="getAll"in se;for(var _e=0;_e<se.indexNames.length;++_e){var De=se.indexNames[_e],Pe=se.index(De).keyPath,He=typeof Pe=="string"?Pe:"["+P(Pe).join("+")+"]";!b[Z]||(Pe=b[Z].idxByName[He])&&(Pe.name=De,delete b[Z].idxByName[He],b[Z].idxByName[De]=Pe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&y.WorkerGlobalScope&&y instanceof y.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Da(f){return f.split(",").map(function(b,A){var L=(b=b.trim()).replace(/([&*]|\+\+)/g,""),V=/^\[/.test(L)?L.match(/^\[(.*)\]$/)[1].split("+"):L;return Nn(L,V||null,/\&/.test(b),/\*/.test(b),/\+\+/.test(b),g(V),A===0)})}var Bi=(Zr.prototype._parseStoresSpec=function(f,b){p(f).forEach(function(A){if(f[A]!==null){var L=Da(f[A]),V=L.shift();if(V.unique=!0,V.multi)throw new Ue.Schema("Primary key cannot be multi-valued");L.forEach(function(Z){if(Z.auto)throw new Ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!Z.keyPath)throw new Ue.Schema("Index must have a name and cannot be an empty string")}),b[A]=Kr(A,V,L)}})},Zr.prototype.stores=function(A){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?E(this._cfg.storesSource,A):A;var A=b._versions,L={},V={};return A.forEach(function(Z){E(L,Z._cfg.storesSource),V=Z._cfg.dbschema={},Z._parseStoresSpec(L,V)}),b._dbSchema=V,hi(b,[b._allTables,b,b.Transaction.prototype]),Mi(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],p(V),V),b._storeNames=p(V),this},Zr.prototype.upgrade=function(f){return this._cfg.contentUpgrade=ot(this._cfg.contentUpgrade||j,f),this},Zr);function Zr(){}function co(f,b){var A=f._dbNamesDB;return A||(A=f._dbNamesDB=new Ti(ji,{addons:[],indexedDB:f,IDBKeyRange:b})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function Ia(f){return f&&typeof f.databases=="function"}function ja(f){return sr(function(){return Rt.letThrough=!0,f()})}function As(f){return!("from"in f)}var yr=function(f,b){if(!this){var A=new yr;return f&&"d"in f&&E(A,f),A}E(this,arguments.length?{d:1,from:f,to:1<arguments.length?b:f}:{d:0})};function fo(f,b,A){var L=c(b,A);if(!isNaN(L)){if(0<L)throw RangeError();if(As(f))return E(f,{from:b,to:A,d:1});var V=f.l,L=f.r;if(c(A,f.from)<0)return V?fo(V,b,A):f.l={from:b,to:A,d:1,l:null,r:null},zu(f);if(0<c(b,f.to))return L?fo(L,b,A):f.r={from:b,to:A,d:1,l:null,r:null},zu(f);c(b,f.from)<0&&(f.from=b,f.l=null,f.d=L?L.d+1:1),0<c(A,f.to)&&(f.to=A,f.r=null,f.d=f.l?f.l.d+1:1),A=!f.r,V&&!f.l&&ca(f,V),L&&A&&ca(f,L)}}function ca(f,b){As(b)||function A(L,De){var Z=De.from,se=De.to,_e=De.l,De=De.r;fo(L,Z,se),_e&&A(L,_e),De&&A(L,De)}(f,b)}function qu(f,b){var A=Io(b),L=A.next();if(L.done)return!1;for(var V=L.value,Z=Io(f),se=Z.next(V.from),_e=se.value;!L.done&&!se.done;){if(c(_e.from,V.to)<=0&&0<=c(_e.to,V.from))return!0;c(V.from,_e.from)<0?V=(L=A.next(_e.from)).value:_e=(se=Z.next(V.from)).value}return!1}function Io(f){var b=As(f)?null:{s:0,n:f};return{next:function(A){for(var L=0<arguments.length;b;)switch(b.s){case 0:if(b.s=1,L)for(;b.n.l&&c(A,b.n.from)<0;)b={up:b,n:b.n.l,s:1};else for(;b.n.l;)b={up:b,n:b.n.l,s:1};case 1:if(b.s=2,!L||c(A,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3,b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function zu(f){var b,A,L=(((b=f.r)===null||b===void 0?void 0:b.d)||0)-(((A=f.l)===null||A===void 0?void 0:A.d)||0),V=1<L?"r":L<-1?"l":"";V&&(b=V=="r"?"l":"r",A=i({},f),L=f[V],f.from=L.from,f.to=L.to,f[V]=L[V],A[V]=L[b],(f[b]=A).d=Rs(A)),f.d=Rs(f)}function Rs(A){var b=A.r,A=A.l;return(b?A?Math.max(b.d,A.d):b.d:A?A.d:0)+1}function jo(f,b){return p(b).forEach(function(A){f[A]?ca(f[A],b[A]):f[A]=function L(V){var Z,se,_e={};for(Z in V)S(V,Z)&&(se=V[Z],_e[Z]=!se||typeof se!="object"||pe.has(se.constructor)?se:L(se));return _e}(b[A])}),f}function ks(f,b){return f.all||b.all||Object.keys(f).some(function(A){return b[A]&&qu(b[A],f[A])})}D(yr.prototype,((Gr={add:function(f){return ca(this,f),this},addKey:function(f){return fo(this,f,f),this},addKeys:function(f){var b=this;return f.forEach(function(A){return fo(b,A,A)}),this},hasKey:function(f){var b=Io(this).next(f).value;return b&&c(b.from,f)<=0&&0<=c(b.to,f)}})[Ne]=function(){return Io(this)},Gr));var fa={},Fs={},Ns=!1;function Uo(f){jo(Fs,f),Ns||(Ns=!0,setTimeout(function(){Ns=!1,Cs(Fs,!(Fs={}))},0))}function Cs(f,b){b===void 0&&(b=!1);var A=new Set;if(f.all)for(var L=0,V=Object.values(fa);L<V.length;L++)Vu(se=V[L],f,A,b);else for(var Z in f){var se,_e=/^idb\:\/\/(.*)\/(.*)\//.exec(Z);_e&&(Z=_e[1],_e=_e[2],(se=fa["idb://".concat(Z,"/").concat(_e)])&&Vu(se,f,A,b))}A.forEach(function(De){return De()})}function Vu(f,b,A,L){for(var V=[],Z=0,se=Object.entries(f.queries.query);Z<se.length;Z++){for(var _e=se[Z],De=_e[0],Pe=[],He=0,xe=_e[1];He<xe.length;He++){var Ve=xe[He];ks(b,Ve.obsSet)?Ve.subscribers.forEach(function(Le){return A.add(Le)}):L&&Pe.push(Ve)}L&&V.push([De,Pe])}if(L)for(var Oe=0,Be=V;Oe<Be.length;Oe++){var $e=Be[Oe],De=$e[0],Pe=$e[1];f.queries.query[De]=Pe}}function Sc(f){var b=f._state,A=f._deps.indexedDB;if(b.isBeingOpened||f.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?Ln(b.dbOpenError):f});b.isBeingOpened=!0,b.dbOpenError=null,b.openComplete=!1;var L=b.openCanceller,V=Math.round(10*f.verno),Z=!1;function se(){if(b.openCanceller!==L)throw new Ue.DatabaseClosed("db.open() was cancelled")}function _e(){return new Tt(function(Ve,Oe){if(se(),!A)throw new Ue.MissingAPI;var Be=f.name,$e=b.autoSchema||!V?A.open(Be):A.open(Be,V);if(!$e)throw new Ue.MissingAPI;$e.onerror=fn(Oe),$e.onblocked=qt(f._fireOnBlocked),$e.onupgradeneeded=qt(function(Le){var et;He=$e.transaction,b.autoSchema&&!f._options.allowEmptyDB?($e.onerror=qn,He.abort(),$e.result.close(),(et=A.deleteDatabase(Be)).onsuccess=et.onerror=qt(function(){Oe(new Ue.NoSuchDatabase("Database ".concat(Be," doesnt exist")))})):(He.onerror=fn(Oe),Le=Le.oldVersion>Math.pow(2,62)?0:Le.oldVersion,xe=Le<1,f.idbdb=$e.result,Z&&gr(f,He),pi(f,Le/10,He,Oe))},Oe),$e.onsuccess=qt(function(){He=null;var Le,et,lt,ct,ht,Nt=f.idbdb=$e.result,jt=P(Nt.objectStoreNames);if(0<jt.length)try{var kt=Nt.transaction((ct=jt).length===1?ct[0]:ct,"readonly");if(b.autoSchema)et=Nt,lt=kt,(Le=f).verno=et.version/10,lt=Le._dbSchema=Vr(0,et,lt),Le._storeNames=P(et.objectStoreNames,0),Mi(Le,[Le._allTables],p(lt),lt);else if(Un(f,f._dbSchema,kt),((ht=Xr(Vr(0,(ht=f).idbdb,kt),ht._dbSchema)).add.length||ht.change.some(function(Ct){return Ct.add.length||Ct.change.length}))&&!Z)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Nt.close(),V=Nt.version+1,Z=!0,Ve(_e());Ur(f,kt)}catch{}di.push(f),Nt.onversionchange=qt(function(Ct){b.vcFired=!0,f.on("versionchange").fire(Ct)}),Nt.onclose=qt(function(Ct){f.on("close").fire(Ct)}),xe&&(ht=f._deps,kt=Be,Nt=ht.indexedDB,ht=ht.IDBKeyRange,Ia(Nt)||kt===ji||co(Nt,ht).put({name:kt}).catch(j)),Ve()},Oe)}).catch(function(Ve){switch(Ve?.name){case"UnknownError":if(0<b.PR1398_maxLoop)return b.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_e();break;case"VersionError":if(0<V)return V=0,_e()}return Tt.reject(Ve)})}var De,Pe=b.dbReadyResolve,He=null,xe=!1;return Tt.race([L,(typeof navigator>"u"?Tt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Ve){function Oe(){return indexedDB.databases().finally(Ve)}De=setInterval(Oe,100),Oe()}).finally(function(){return clearInterval(De)}):Promise.resolve()).then(_e)]).then(function(){return se(),b.onReadyBeingFired=[],Tt.resolve(ja(function(){return f.on.ready.fire(f.vip)})).then(function Ve(){if(0<b.onReadyBeingFired.length){var Oe=b.onReadyBeingFired.reduce(ot,j);return b.onReadyBeingFired=[],Tt.resolve(ja(function(){return Oe(f.vip)})).then(Ve)}})}).finally(function(){b.openCanceller===L&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)}).catch(function(Ve){b.dbOpenError=Ve;try{He&&He.abort()}catch{}return L===b.openCanceller&&f._close(),Ln(Ve)}).finally(function(){b.openComplete=!0,Pe()}).then(function(){var Ve;return xe&&(Ve={},f.tables.forEach(function(Oe){Oe.schema.indexes.forEach(function(Be){Be.name&&(Ve["idb://".concat(f.name,"/").concat(Oe.name,"/").concat(Be.name)]=new yr(-1/0,[[[]]]))}),Ve["idb://".concat(f.name,"/").concat(Oe.name,"/")]=Ve["idb://".concat(f.name,"/").concat(Oe.name,"/:dels")]=new yr(-1/0,[[[]]])}),cn(Mn).fire(Ve),Cs(Ve,!0)),f})}function ho(f){function b(Z){return f.next(Z)}var A=V(b),L=V(function(Z){return f.throw(Z)});function V(Z){return function(De){var _e=Z(De),De=_e.value;return _e.done?De:De&&typeof De.then=="function"?De.then(A,L):g(De)?Promise.all(De).then(A,L):A(De)}}return V(b)()}function Yi(f,b,A){for(var L=g(f)?f.slice():[f],V=0;V<A;++V)L.push(b);return L}var Ec={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return i(i({},f),{table:function(b){var A=f.table(b),L=A.schema,V={},Z=[];function se(xe,Ve,Oe){var Be=En(xe),$e=V[Be]=V[Be]||[],Le=xe==null?0:typeof xe=="string"?1:xe.length,et=0<Ve,et=i(i({},Oe),{name:et?"".concat(Be,"(virtual-from:").concat(Oe.name,")"):Oe.name,lowLevelIndex:Oe,isVirtual:et,keyTail:Ve,keyLength:Le,extractKey:qr(xe),unique:!et&&Oe.unique});return $e.push(et),et.isPrimaryKey||Z.push(et),1<Le&&se(Le===2?xe[0]:xe.slice(0,Le-1),Ve+1,Oe),$e.sort(function(lt,ct){return lt.keyTail-ct.keyTail}),et}b=se(L.primaryKey.keyPath,0,L.primaryKey),V[":id"]=[b];for(var _e=0,De=L.indexes;_e<De.length;_e++){var Pe=De[_e];se(Pe.keyPath,0,Pe)}function He(xe){var Ve,Oe=xe.query.index;return Oe.isVirtual?i(i({},xe),{query:{index:Oe.lowLevelIndex,range:(Ve=xe.query.range,Oe=Oe.keyTail,{type:Ve.type===1?2:Ve.type,lower:Yi(Ve.lower,Ve.lowerOpen?f.MAX_KEY:f.MIN_KEY,Oe),lowerOpen:!0,upper:Yi(Ve.upper,Ve.upperOpen?f.MIN_KEY:f.MAX_KEY,Oe),upperOpen:!0})}}):xe}return i(i({},A),{schema:i(i({},L),{primaryKey:b,indexes:Z,getIndexByKeyPath:function(xe){return(xe=V[En(xe)])&&xe[0]}}),count:function(xe){return A.count(He(xe))},query:function(xe){return A.query(He(xe))},openCursor:function(xe){var Ve=xe.query.index,Oe=Ve.keyTail,Be=Ve.isVirtual,$e=Ve.keyLength;return Be?A.openCursor(He(xe)).then(function(et){return et&&Le(et)}):A.openCursor(xe);function Le(et){return Object.create(et,{continue:{value:function(lt){lt!=null?et.continue(Yi(lt,xe.reverse?f.MAX_KEY:f.MIN_KEY,Oe)):xe.unique?et.continue(et.key.slice(0,$e).concat(xe.reverse?f.MIN_KEY:f.MAX_KEY,Oe)):et.continue()}},continuePrimaryKey:{value:function(lt,ct){et.continuePrimaryKey(Yi(lt,f.MAX_KEY,Oe),ct)}},primaryKey:{get:function(){return et.primaryKey}},key:{get:function(){var lt=et.key;return $e===1?lt[0]:lt.slice(0,$e)}},value:{get:function(){return et.value}}})}}})}})}};function Po(f,b,A,L){return A=A||{},L=L||"",p(f).forEach(function(V){var Z,se,_e;S(b,V)?(Z=f[V],se=b[V],typeof Z=="object"&&typeof se=="object"&&Z&&se?(_e=mt(Z))!==mt(se)?A[L+V]=b[V]:_e==="Object"?Po(Z,se,A,L+V+"."):Z!==se&&(A[L+V]=b[V]):Z!==se&&(A[L+V]=b[V])):A[L+V]=void 0}),p(b).forEach(function(V){S(f,V)||(A[L+V]=b[V])}),A}function Lo(f,b){return b.type==="delete"?b.keys:b.keys||b.values.map(f.extractKey)}var Gu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return i(i({},f),{table:function(b){var A=f.table(b),L=A.schema.primaryKey;return i(i({},A),{mutate:function(V){var Z=Rt.trans,se=Z.table(b).hook,_e=se.deleting,De=se.creating,Pe=se.updating;switch(V.type){case"add":if(De.fire===j)break;return Z._promise("readwrite",function(){return He(V)},!0);case"put":if(De.fire===j&&Pe.fire===j)break;return Z._promise("readwrite",function(){return He(V)},!0);case"delete":if(_e.fire===j)break;return Z._promise("readwrite",function(){return He(V)},!0);case"deleteRange":if(_e.fire===j)break;return Z._promise("readwrite",function(){return function xe(Ve,Oe,Be){return A.query({trans:Ve,values:!1,query:{index:L,range:Oe},limit:Be}).then(function($e){var Le=$e.result;return He({type:"delete",keys:Le,trans:Ve}).then(function(et){return 0<et.numFailures?Promise.reject(et.failures[0]):Le.length<Be?{failures:[],numFailures:0,lastResult:void 0}:xe(Ve,i(i({},Oe),{lower:Le[Le.length-1],lowerOpen:!0}),Be)})})}(V.trans,V.range,1e4)},!0)}return A.mutate(V);function He(xe){var Ve,Oe,Be,$e=Rt.trans,Le=xe.keys||Lo(L,xe);if(!Le)throw new Error("Keys missing");return(xe=xe.type==="add"||xe.type==="put"?i(i({},xe),{keys:Le}):i({},xe)).type!=="delete"&&(xe.values=d([],xe.values)),xe.keys&&(xe.keys=d([],xe.keys)),Ve=A,Be=Le,((Oe=xe).type==="add"?Promise.resolve([]):Ve.getMany({trans:Oe.trans,keys:Be,cache:"immutable"})).then(function(et){var lt=Le.map(function(ct,ht){var Nt,jt,kt,Ct=et[ht],Lt={onerror:null,onsuccess:null};return xe.type==="delete"?_e.fire.call(Lt,ct,Ct,$e):xe.type==="add"||Ct===void 0?(Nt=De.fire.call(Lt,ct,xe.values[ht],$e),ct==null&&Nt!=null&&(xe.keys[ht]=ct=Nt,L.outbound||Q(xe.values[ht],L.keyPath,ct))):(Nt=Po(Ct,xe.values[ht]),(jt=Pe.fire.call(Lt,Nt,ct,Ct,$e))&&(kt=xe.values[ht],Object.keys(jt).forEach(function(Ft){S(kt,Ft)?kt[Ft]=jt[Ft]:Q(kt,Ft,jt[Ft])}))),Lt});return A.mutate(xe).then(function(ct){for(var ht=ct.failures,Nt=ct.results,jt=ct.numFailures,ct=ct.lastResult,kt=0;kt<Le.length;++kt){var Ct=(Nt||Le)[kt],Lt=lt[kt];Ct==null?Lt.onerror&&Lt.onerror(ht[kt]):Lt.onsuccess&&Lt.onsuccess(xe.type==="put"&&et[kt]?xe.values[kt]:Ct)}return{failures:ht,results:Nt,numFailures:jt,lastResult:ct}}).catch(function(ct){return lt.forEach(function(ht){return ht.onerror&&ht.onerror(ct)}),Promise.reject(ct)})})}}})}})}};function Os(f,b,A){try{if(!b||b.keys.length<f.length)return null;for(var L=[],V=0,Z=0;V<b.keys.length&&Z<f.length;++V)c(b.keys[V],f[Z])===0&&(L.push(A?ke(b.values[V]):b.values[V]),++Z);return L.length===f.length?L:null}catch{return null}}var $u={stack:"dbcore",level:-1,create:function(f){return{table:function(b){var A=f.table(b);return i(i({},A),{getMany:function(L){if(!L.cache)return A.getMany(L);var V=Os(L.keys,L.trans._cache,L.cache==="clone");return V?Tt.resolve(V):A.getMany(L).then(function(Z){return L.trans._cache={keys:L.keys,values:L.cache==="clone"?ke(Z):Z},Z})},mutate:function(L){return L.type!=="add"&&(L.trans._cache=null),A.mutate(L)}})}}}};function da(f,b){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!b.schema.primaryKey.outbound}function Ju(f,b){switch(f){case"query":return b.values&&!b.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var xc={stack:"dbcore",level:0,name:"Observability",create:function(f){var b=f.schema.name,A=new yr(f.MIN_KEY,f.MAX_KEY);return i(i({},f),{transaction:function(L,V,Z){if(Rt.subscr&&V!=="readonly")throw new Ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Rt.querier));return f.transaction(L,V,Z)},table:function(L){var V=f.table(L),Z=V.schema,se=Z.primaryKey,xe=Z.indexes,_e=se.extractKey,De=se.outbound,Pe=se.autoIncrement&&xe.filter(function(Oe){return Oe.compound&&Oe.keyPath.includes(se.keyPath)}),He=i(i({},V),{mutate:function(Oe){function Be(Ft){return Ft="idb://".concat(b,"/").concat(L,"/").concat(Ft),ct[Ft]||(ct[Ft]=new yr)}var $e,Le,et,lt=Oe.trans,ct=Oe.mutatedParts||(Oe.mutatedParts={}),ht=Be(""),Nt=Be(":dels"),jt=Oe.type,Lt=Oe.type==="deleteRange"?[Oe.range]:Oe.type==="delete"?[Oe.keys]:Oe.values.length<50?[Lo(se,Oe).filter(function(Ft){return Ft}),Oe.values]:[],kt=Lt[0],Ct=Lt[1],Lt=Oe.trans._cache;return g(kt)?(ht.addKeys(kt),(Lt=jt==="delete"||kt.length===Ct.length?Os(kt,Lt):null)||Nt.addKeys(kt),(Lt||Ct)&&($e=Be,Le=Lt,et=Ct,Z.indexes.forEach(function(Ft){var Mt=$e(Ft.name||"");function Gt(on){return on!=null?Ft.extractKey(on):null}function Wt(on){return Ft.multiEntry&&g(on)?on.forEach(function(Tr){return Mt.addKey(Tr)}):Mt.addKey(on)}(Le||et).forEach(function(on,rr){var en=Le&&Gt(Le[rr]),rr=et&&Gt(et[rr]);c(en,rr)!==0&&(en!=null&&Wt(en),rr!=null&&Wt(rr))})}))):kt?(Ct={from:(Ct=kt.lower)!==null&&Ct!==void 0?Ct:f.MIN_KEY,to:(Ct=kt.upper)!==null&&Ct!==void 0?Ct:f.MAX_KEY},Nt.add(Ct),ht.add(Ct)):(ht.add(A),Nt.add(A),Z.indexes.forEach(function(Ft){return Be(Ft.name).add(A)})),V.mutate(Oe).then(function(Ft){return!kt||Oe.type!=="add"&&Oe.type!=="put"||(ht.addKeys(Ft.results),Pe&&Pe.forEach(function(Mt){for(var Gt=Oe.values.map(function(en){return Mt.extractKey(en)}),Wt=Mt.keyPath.findIndex(function(en){return en===se.keyPath}),on=0,Tr=Ft.results.length;on<Tr;++on)Gt[on][Wt]=Ft.results[on];Be(Mt.name).addKeys(Gt)})),lt.mutatedParts=jo(lt.mutatedParts||{},ct),Ft})}}),xe=function(Be){var $e=Be.query,Be=$e.index,$e=$e.range;return[Be,new yr((Be=$e.lower)!==null&&Be!==void 0?Be:f.MIN_KEY,($e=$e.upper)!==null&&$e!==void 0?$e:f.MAX_KEY)]},Ve={get:function(Oe){return[se,new yr(Oe.key)]},getMany:function(Oe){return[se,new yr().addKeys(Oe.keys)]},count:xe,query:xe,openCursor:xe};return p(Ve).forEach(function(Oe){He[Oe]=function(Be){var $e=Rt.subscr,Le=!!$e,et=da(Rt,V)&&Ju(Oe,Be)?Be.obsSet={}:$e;if(Le){var lt=function(Ct){return Ct="idb://".concat(b,"/").concat(L,"/").concat(Ct),et[Ct]||(et[Ct]=new yr)},ct=lt(""),ht=lt(":dels"),$e=Ve[Oe](Be),Le=$e[0],$e=$e[1];if((Oe==="query"&&Le.isPrimaryKey&&!Be.values?ht:lt(Le.name||"")).add($e),!Le.isPrimaryKey){if(Oe!=="count"){var Nt=Oe==="query"&&De&&Be.values&&V.query(i(i({},Be),{values:!1}));return V[Oe].apply(this,arguments).then(function(Ct){if(Oe==="query"){if(De&&Be.values)return Nt.then(function(Gt){return Gt=Gt.result,ct.addKeys(Gt),Ct});var Lt=Be.values?Ct.result.map(_e):Ct.result;(Be.values?ct:ht).addKeys(Lt)}else if(Oe==="openCursor"){var Ft=Ct,Mt=Be.values;return Ft&&Object.create(Ft,{key:{get:function(){return ht.addKey(Ft.primaryKey),Ft.key}},primaryKey:{get:function(){var Gt=Ft.primaryKey;return ht.addKey(Gt),Gt}},value:{get:function(){return Mt&&ct.addKey(Ft.primaryKey),Ft.value}}})}return Ct})}ht.add(A)}}return V[Oe].apply(this,arguments)}}),He}})}};function Wu(f,b,A){if(A.numFailures===0)return b;if(b.type==="deleteRange")return null;var L=b.keys?b.keys.length:"values"in b&&b.values?b.values.length:1;return A.numFailures===L?null:(b=i({},b),g(b.keys)&&(b.keys=b.keys.filter(function(V,Z){return!(Z in A.failures)})),"values"in b&&g(b.values)&&(b.values=b.values.filter(function(V,Z){return!(Z in A.failures)})),b)}function Mo(f,b){return A=f,((L=b).lower===void 0||(L.lowerOpen?0<c(A,L.lower):0<=c(A,L.lower)))&&(f=f,(b=b).upper===void 0||(b.upperOpen?c(f,b.upper)<0:c(f,b.upper)<=0));var A,L}function Ds(f,b,Ve,L,V,Z){if(!Ve||Ve.length===0)return f;var se=b.query.index,_e=se.multiEntry,De=b.query.range,Pe=L.schema.primaryKey.extractKey,He=se.extractKey,xe=(se.lowLevelIndex||se).extractKey,Ve=Ve.reduce(function(Oe,Be){var $e=Oe,Le=[];if(Be.type==="add"||Be.type==="put")for(var et=new yr,lt=Be.values.length-1;0<=lt;--lt){var ct,ht=Be.values[lt],Nt=Pe(ht);et.hasKey(Nt)||(ct=He(ht),(_e&&g(ct)?ct.some(function(Ft){return Mo(Ft,De)}):Mo(ct,De))&&(et.addKey(Nt),Le.push(ht)))}switch(Be.type){case"add":var jt=new yr().addKeys(b.values?Oe.map(function(Mt){return Pe(Mt)}):Oe),$e=Oe.concat(b.values?Le.filter(function(Mt){return Mt=Pe(Mt),!jt.hasKey(Mt)&&(jt.addKey(Mt),!0)}):Le.map(function(Mt){return Pe(Mt)}).filter(function(Mt){return!jt.hasKey(Mt)&&(jt.addKey(Mt),!0)}));break;case"put":var kt=new yr().addKeys(Be.values.map(function(Mt){return Pe(Mt)}));$e=Oe.filter(function(Mt){return!kt.hasKey(b.values?Pe(Mt):Mt)}).concat(b.values?Le:Le.map(function(Mt){return Pe(Mt)}));break;case"delete":var Ct=new yr().addKeys(Be.keys);$e=Oe.filter(function(Mt){return!Ct.hasKey(b.values?Pe(Mt):Mt)});break;case"deleteRange":var Lt=Be.range;$e=Oe.filter(function(Mt){return!Mo(Pe(Mt),Lt)})}return $e},f);return Ve===f?f:(Ve.sort(function(Oe,Be){return c(xe(Oe),xe(Be))||c(Pe(Oe),Pe(Be))}),b.limit&&b.limit<1/0&&(Ve.length>b.limit?Ve.length=b.limit:f.length===b.limit&&Ve.length<b.limit&&(V.dirty=!0)),Z?Object.freeze(Ve):Ve)}function Ua(f,b){return c(f.lower,b.lower)===0&&c(f.upper,b.upper)===0&&!!f.lowerOpen==!!b.lowerOpen&&!!f.upperOpen==!!b.upperOpen}function po(f,b){return function(A,L,V,Z){if(A===void 0)return L!==void 0?-1:0;if(L===void 0)return 1;if((L=c(A,L))===0){if(V&&Z)return 0;if(V)return 1;if(Z)return-1}return L}(f.lower,b.lower,f.lowerOpen,b.lowerOpen)<=0&&0<=function(A,L,V,Z){if(A===void 0)return L!==void 0?1:0;if(L===void 0)return-1;if((L=c(A,L))===0){if(V&&Z)return 0;if(V)return-1;if(Z)return 1}return L}(f.upper,b.upper,f.upperOpen,b.upperOpen)}function Tc(f,b,A,L){f.subscribers.add(A),L.addEventListener("abort",function(){var V,Z;f.subscribers.delete(A),f.subscribers.size===0&&(V=f,Z=b,setTimeout(function(){V.subscribers.size===0&&Fe(Z,V)},3e3))})}var Bo={stack:"dbcore",level:0,name:"Cache",create:function(f){var b=f.schema.name;return i(i({},f),{transaction:function(A,L,V){var Z,se,_e=f.transaction(A,L,V);return L==="readwrite"&&(se=(Z=new AbortController).signal,V=function(De){return function(){if(Z.abort(),L==="readwrite"){for(var Pe=new Set,He=0,xe=A;He<xe.length;He++){var Ve=xe[He],Oe=fa["idb://".concat(b,"/").concat(Ve)];if(Oe){var Be=f.table(Ve),$e=Oe.optimisticOps.filter(function(Mt){return Mt.trans===_e});if(_e._explicit&&De&&_e.mutatedParts)for(var Le=0,et=Object.values(Oe.queries.query);Le<et.length;Le++)for(var lt=0,ct=(jt=et[Le]).slice();lt<ct.length;lt++)ks((kt=ct[lt]).obsSet,_e.mutatedParts)&&(Fe(jt,kt),kt.subscribers.forEach(function(Mt){return Pe.add(Mt)}));else if(0<$e.length){Oe.optimisticOps=Oe.optimisticOps.filter(function(Mt){return Mt.trans!==_e});for(var ht=0,Nt=Object.values(Oe.queries.query);ht<Nt.length;ht++)for(var jt,kt,Ct,Lt=0,Ft=(jt=Nt[ht]).slice();Lt<Ft.length;Lt++)(kt=Ft[Lt]).res!=null&&_e.mutatedParts&&(De&&!kt.dirty?(Ct=Object.isFrozen(kt.res),Ct=Ds(kt.res,kt.req,$e,Be,kt,Ct),kt.dirty?(Fe(jt,kt),kt.subscribers.forEach(function(Mt){return Pe.add(Mt)})):Ct!==kt.res&&(kt.res=Ct,kt.promise=Tt.resolve({result:Ct}))):(kt.dirty&&Fe(jt,kt),kt.subscribers.forEach(function(Mt){return Pe.add(Mt)})))}}}Pe.forEach(function(Mt){return Mt()})}}},_e.addEventListener("abort",V(!1),{signal:se}),_e.addEventListener("error",V(!1),{signal:se}),_e.addEventListener("complete",V(!0),{signal:se})),_e},table:function(A){var L=f.table(A),V=L.schema.primaryKey;return i(i({},L),{mutate:function(Z){var se=Rt.trans;if(V.outbound||se.db._options.cache==="disabled"||se.explicit||se.idbtrans.mode!=="readwrite")return L.mutate(Z);var _e=fa["idb://".concat(b,"/").concat(A)];return _e?(se=L.mutate(Z),Z.type!=="add"&&Z.type!=="put"||!(50<=Z.values.length||Lo(V,Z).some(function(De){return De==null}))?(_e.optimisticOps.push(Z),Z.mutatedParts&&Uo(Z.mutatedParts),se.then(function(De){0<De.numFailures&&(Fe(_e.optimisticOps,Z),(De=Wu(0,Z,De))&&_e.optimisticOps.push(De),Z.mutatedParts&&Uo(Z.mutatedParts))}),se.catch(function(){Fe(_e.optimisticOps,Z),Z.mutatedParts&&Uo(Z.mutatedParts)})):se.then(function(De){var Pe=Wu(0,i(i({},Z),{values:Z.values.map(function(He,xe){var Ve;return De.failures[xe]?He:(He=(Ve=V.keyPath)!==null&&Ve!==void 0&&Ve.includes(".")?ke(He):i({},He),Q(He,V.keyPath,De.results[xe]),He)})}),De);_e.optimisticOps.push(Pe),queueMicrotask(function(){return Z.mutatedParts&&Uo(Z.mutatedParts)})}),se):L.mutate(Z)},query:function(Z){if(!da(Rt,L)||!Ju("query",Z))return L.query(Z);var se=((Pe=Rt.trans)===null||Pe===void 0?void 0:Pe.db._options.cache)==="immutable",xe=Rt,_e=xe.requery,De=xe.signal,Pe=function(Be,$e,Le,et){var lt=fa["idb://".concat(Be,"/").concat($e)];if(!lt)return[];if(!($e=lt.queries[Le]))return[null,!1,lt,null];var ct=$e[(et.query?et.query.index.name:null)||""];if(!ct)return[null,!1,lt,null];switch(Le){case"query":var ht=ct.find(function(Nt){return Nt.req.limit===et.limit&&Nt.req.values===et.values&&Ua(Nt.req.query.range,et.query.range)});return ht?[ht,!0,lt,ct]:[ct.find(function(Nt){return("limit"in Nt.req?Nt.req.limit:1/0)>=et.limit&&(!et.values||Nt.req.values)&&po(Nt.req.query.range,et.query.range)}),!1,lt,ct];case"count":return ht=ct.find(function(Nt){return Ua(Nt.req.query.range,et.query.range)}),[ht,!!ht,lt,ct]}}(b,A,"query",Z),He=Pe[0],xe=Pe[1],Ve=Pe[2],Oe=Pe[3];return He&&xe?He.obsSet=Z.obsSet:(xe=L.query(Z).then(function(Be){var $e=Be.result;if(He&&(He.res=$e),se){for(var Le=0,et=$e.length;Le<et;++Le)Object.freeze($e[Le]);Object.freeze($e)}else Be.result=ke($e);return Be}).catch(function(Be){return Oe&&He&&Fe(Oe,He),Promise.reject(Be)}),He={obsSet:Z.obsSet,promise:xe,subscribers:new Set,type:"query",req:Z,dirty:!1},Oe?Oe.push(He):(Oe=[He],(Ve=Ve||(fa["idb://".concat(b,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[Z.query.index.name||""]=Oe)),Tc(He,Oe,_e,De),He.promise.then(function(Be){return{result:Ds(Be.result,Z,Ve?.optimisticOps,L,He,se)}})}})}})}};function go(f,b){return new Proxy(f,{get:function(A,L,V){return L==="db"?b:Reflect.get(A,L,V)}})}var Ti=(Kn.prototype.version=function(f){if(isNaN(f)||f<.1)throw new Ue.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new Ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var b=this._versions,A=b.filter(function(L){return L._cfg.version===f})[0];return A||(A=new this.Version(f),b.push(A),b.sort(la),A.stores({}),this._state.autoSchema=!1,A)},Kn.prototype._whenReady=function(f){var b=this;return this.idbdb&&(this._state.openComplete||Rt.letThrough||this._vip)?f():new Tt(function(A,L){if(b._state.openComplete)return L(new Ue.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return void L(new Ue.DatabaseClosed);b.open().catch(j)}b._state.dbReadyPromise.then(A,L)}).then(f)},Kn.prototype.use=function(f){var b=f.stack,A=f.create,L=f.level,V=f.name;return V&&this.unuse({stack:b,name:V}),f=this._middlewares[b]||(this._middlewares[b]=[]),f.push({stack:b,create:A,level:L??10,name:V}),f.sort(function(Z,se){return Z.level-se.level}),this},Kn.prototype.unuse=function(f){var b=f.stack,A=f.name,L=f.create;return b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(V){return L?V.create!==L:!!A&&V.name!==A})),this},Kn.prototype.open=function(){var f=this;return ci(sn,function(){return Sc(f)})},Kn.prototype._close=function(){var f=this._state,b=di.indexOf(this);if(0<=b&&di.splice(b,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Tt(function(A){f.dbReadyResolve=A}),f.openCanceller=new Tt(function(A,L){f.cancelOpen=L}))},Kn.prototype.close=function(A){var b=(A===void 0?{disableAutoOpen:!0}:A).disableAutoOpen,A=this._state;b?(A.isBeingOpened&&A.cancelOpen(new Ue.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new Ue.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},Kn.prototype.delete=function(f){var b=this;f===void 0&&(f={disableAutoOpen:!0});var A=0<arguments.length&&typeof arguments[0]!="object",L=this._state;return new Tt(function(V,Z){function se(){b.close(f);var _e=b._deps.indexedDB.deleteDatabase(b.name);_e.onsuccess=qt(function(){var De,Pe,He;De=b._deps,Pe=b.name,He=De.indexedDB,De=De.IDBKeyRange,Ia(He)||Pe===ji||co(He,De).delete(Pe).catch(j),V()}),_e.onerror=fn(Z),_e.onblocked=b._fireOnBlocked}if(A)throw new Ue.InvalidArgument("Invalid closeOptions argument to db.delete()");L.isBeingOpened?L.dbReadyPromise.then(se):se()})},Kn.prototype.backendDB=function(){return this.idbdb},Kn.prototype.isOpen=function(){return this.idbdb!==null},Kn.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Kn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Kn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Kn.prototype,"tables",{get:function(){var f=this;return p(this._allTables).map(function(b){return f._allTables[b]})},enumerable:!1,configurable:!0}),Kn.prototype.transaction=function(){var f=(function(b,A,L){var V=arguments.length;if(V<2)throw new Ue.InvalidArgument("Too few arguments");for(var Z=new Array(V-1);--V;)Z[V-1]=arguments[V];return L=Z.pop(),[b,J(Z),L]}).apply(this,arguments);return this._transaction.apply(this,f)},Kn.prototype._transaction=function(f,b,A){var L=this,V=Rt.trans;V&&V.db===this&&f.indexOf("!")===-1||(V=null);var Z,se,_e=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(se=b.map(function(Pe){if(Pe=Pe instanceof L.Table?Pe.name:Pe,typeof Pe!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Pe}),f=="r"||f===Hr)Z=Hr;else{if(f!="rw"&&f!=ua)throw new Ue.InvalidArgument("Invalid transaction mode: "+f);Z=ua}if(V){if(V.mode===Hr&&Z===ua){if(!_e)throw new Ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");V=null}V&&se.forEach(function(Pe){if(V&&V.storeNames.indexOf(Pe)===-1){if(!_e)throw new Ue.SubTransaction("Table "+Pe+" not included in parent transaction.");V=null}}),_e&&V&&!V.active&&(V=null)}}catch(Pe){return V?V._promise(null,function(He,xe){xe(Pe)}):Ln(Pe)}var De=(function Pe(He,xe,Ve,Oe,Be){return Tt.resolve().then(function(){var $e=Rt.transless||Rt,Le=He._createTransaction(xe,Ve,He._dbSchema,Oe);if(Le.explicit=!0,$e={trans:Le,transless:$e},Oe)Le.idbtrans=Oe.idbtrans;else try{Le.create(),Le.idbtrans._explicit=!0,He._state.PR1398_maxLoop=3}catch(ct){return ct.name===Ut.InvalidState&&He.isOpen()&&0<--He._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),He.close({disableAutoOpen:!1}),He.open().then(function(){return Pe(He,xe,Ve,null,Be)})):Ln(ct)}var et,lt=he(Be);return lt&&ur(),$e=Tt.follow(function(){var ct;(et=Be.call(Le,Le))&&(lt?(ct=Vn.bind(null,null),et.then(ct,ct)):typeof et.next=="function"&&typeof et.throw=="function"&&(et=ho(et)))},$e),(et&&typeof et.then=="function"?Tt.resolve(et).then(function(ct){return Le.active?ct:Ln(new Ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):$e.then(function(){return et})).then(function(ct){return Oe&&Le._resolve(),Le._completion.then(function(){return ct})}).catch(function(ct){return Le._reject(ct),Ln(ct)})})}).bind(null,this,Z,se,V,A);return V?V._promise(Z,De,"lock"):Rt.trans?ci(Rt.transless,function(){return L._whenReady(De)}):this._whenReady(De)},Kn.prototype.table=function(f){if(!S(this._allTables,f))throw new Ue.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Kn);function Kn(f,b){var A=this;this._middlewares={},this.verno=0;var L=Kn.dependencies;this._options=b=i({addons:Kn.addons,autoOpen:!0,indexedDB:L.indexedDB,IDBKeyRange:L.IDBKeyRange,cache:"cloned"},b),this._deps={indexedDB:b.indexedDB,IDBKeyRange:b.IDBKeyRange},L=b.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var V,Z,se,_e,De,Pe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:j,dbReadyPromise:null,cancelOpen:j,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:b.autoOpen};Pe.dbReadyPromise=new Tt(function(xe){Pe.dbReadyResolve=xe}),Pe.openCanceller=new Tt(function(xe,Ve){Pe.cancelOpen=Ve}),this._state=Pe,this.name=f,this.on=ie(this,"populate","blocked","versionchange","close",{ready:[ot,j]}),this.on.ready.subscribe=I(this.on.ready.subscribe,function(xe){return function(Ve,Oe){Kn.vip(function(){var Be,$e=A._state;$e.openComplete?($e.dbOpenError||Tt.resolve().then(Ve),Oe&&xe(Ve)):$e.onReadyBeingFired?($e.onReadyBeingFired.push(Ve),Oe&&xe(Ve)):(xe(Ve),Be=A,Oe||xe(function Le(){Be.on.ready.unsubscribe(Ve),Be.on.ready.unsubscribe(Le)}))})}}),this.Collection=(V=this,ne(le.prototype,function(et,Le){this.db=V;var Oe=Ui,Be=null;if(Le)try{Oe=Le()}catch(lt){Be=lt}var $e=et._ctx,Le=$e.table,et=Le.hook.reading.fire;this._ctx={table:Le,index:$e.index,isPrimKey:!$e.index||Le.schema.primKey.keyPath&&$e.index===Le.schema.primKey.name,range:Oe,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Be,or:$e.or,valueMapper:et!==T?et:null}})),this.Table=(Z=this,ne(K.prototype,function(xe,Ve,Oe){this.db=Z,this._tx=Oe,this.name=xe,this.schema=Ve,this.hook=Z._allTables[xe]?Z._allTables[xe].hook:ie(null,{creating:[me,j],reading:[G,T],updating:[at,j],deleting:[Se,j]})})),this.Transaction=(se=this,ne(Hn.prototype,function(xe,Ve,Oe,Be,$e){var Le=this;this.db=se,this.mode=xe,this.storeNames=Ve,this.schema=Oe,this.chromeTransactionDurability=Be,this.idbtrans=null,this.on=ie(this,"complete","error","abort"),this.parent=$e||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Tt(function(et,lt){Le._resolve=et,Le._reject=lt}),this._completion.then(function(){Le.active=!1,Le.on.complete.fire()},function(et){var lt=Le.active;return Le.active=!1,Le.on.error.fire(et),Le.parent?Le.parent._reject(et):lt&&Le.idbtrans&&Le.idbtrans.abort(),Ln(et)})})),this.Version=(_e=this,ne(Bi.prototype,function(xe){this.db=_e,this._cfg={version:xe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(De=this,ne(bn.prototype,function(xe,Ve,Oe){if(this.db=De,this._ctx={table:xe,index:Ve===":id"?null:Ve,or:Oe},this._cmp=this._ascending=c,this._descending=function(Be,$e){return c($e,Be)},this._max=function(Be,$e){return 0<c(Be,$e)?Be:$e},this._min=function(Be,$e){return c(Be,$e)<0?Be:$e},this._IDBKeyRange=De._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ue.MissingAPI})),this.on("versionchange",function(xe){0<xe.newVersion?console.warn("Another connection wants to upgrade database '".concat(A.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(A.name,"'. Closing db now to resume the delete request.")),A.close({disableAutoOpen:!1})}),this.on("blocked",function(xe){!xe.newVersion||xe.newVersion<xe.oldVersion?console.warn("Dexie.delete('".concat(A.name,"') was blocked")):console.warn("Upgrade '".concat(A.name,"' blocked by other connection holding version ").concat(xe.oldVersion/10))}),this._maxKey=Qr(b.IDBKeyRange),this._createTransaction=function(xe,Ve,Oe,Be){return new A.Transaction(xe,Ve,Oe,A._options.chromeTransactionDurability,Be)},this._fireOnBlocked=function(xe){A.on("blocked").fire(xe),di.filter(function(Ve){return Ve.name===A.name&&Ve!==A&&!Ve._state.vcFired}).map(function(Ve){return Ve.on("versionchange").fire(xe)})},this.use($u),this.use(Bo),this.use(xc),this.use(Ec),this.use(Gu);var He=new Proxy(this,{get:function(xe,Ve,Oe){if(Ve==="_vip")return!0;if(Ve==="table")return function($e){return go(A.table($e),He)};var Be=Reflect.get(xe,Ve,Oe);return Be instanceof K?go(Be,He):Ve==="tables"?Be.map(function($e){return go($e,He)}):Ve==="_createTransaction"?function(){return go(Be.apply(this,arguments),He)}:Be}});this.vip=He,L.forEach(function(xe){return xe(A)})}var Pa,Gr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Yu=(Ho.prototype.subscribe=function(f,b,A){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:b,complete:A})},Ho.prototype[Gr]=function(){return this},Ho);function Ho(f){this._subscribe=f}try{Pa={indexedDB:y.indexedDB||y.mozIndexedDB||y.webkitIndexedDB||y.msIndexedDB,IDBKeyRange:y.IDBKeyRange||y.webkitIDBKeyRange}}catch{Pa={indexedDB:null,IDBKeyRange:null}}function Qu(f){var b,A=!1,L=new Yu(function(V){var Z=he(f),se,_e=!1,De={},Pe={},He={get closed(){return _e},unsubscribe:function(){_e||(_e=!0,se&&se.abort(),xe&&cn.storagemutated.unsubscribe(Oe))}};V.start&&V.start(He);var xe=!1,Ve=function(){return An(Be)},Oe=function($e){jo(De,$e),ks(Pe,De)&&Ve()},Be=function(){var $e,Le,et;!_e&&Pa.indexedDB&&(De={},$e={},se&&se.abort(),se=new AbortController,et=function(lt){var ct=de();try{Z&&ur();var ht=sr(f,lt);return ht=Z?ht.finally(Vn):ht}finally{ct&&St()}}(Le={subscr:$e,signal:se.signal,requery:Ve,querier:f,trans:null}),Promise.resolve(et).then(function(lt){A=!0,b=lt,_e||Le.signal.aborted||(De={},function(ct){for(var ht in ct)if(S(ct,ht))return;return 1}(Pe=$e)||xe||(cn(Mn,Oe),xe=!0),An(function(){return!_e&&V.next&&V.next(lt)}))},function(lt){A=!1,["DatabaseClosedError","AbortError"].includes(lt?.name)||_e||An(function(){_e||V.error&&V.error(lt)})}))};return setTimeout(Ve,0),He});return L.hasValue=function(){return A},L.getValue=function(){return b},L}var ha=Ti;function Is(f){var b=Qi;try{Qi=!0,cn.storagemutated.fire(f),Cs(f,!0)}finally{Qi=b}}D(ha,i(i({},ue),{delete:function(f){return new ha(f,{addons:[]}).delete()},exists:function(f){return new ha(f,{addons:[]}).open().then(function(b){return b.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return b=ha.dependencies,A=b.indexedDB,b=b.IDBKeyRange,(Ia(A)?Promise.resolve(A.databases()).then(function(L){return L.map(function(V){return V.name}).filter(function(V){return V!==ji})}):co(A,b).toCollection().primaryKeys()).then(f)}catch{return Ln(new Ue.MissingAPI)}var b,A},defineClass:function(){return function(f){E(this,f)}},ignoreTransaction:function(f){return Rt.trans?ci(Rt.transless,f):f()},vip:ja,async:function(f){return function(){try{var b=ho(f.apply(this,arguments));return b&&typeof b.then=="function"?b:Tt.resolve(b)}catch(A){return Ln(A)}}},spawn:function(f,b,A){try{var L=ho(f.apply(A,b||[]));return L&&typeof L.then=="function"?L:Tt.resolve(L)}catch(V){return Ln(V)}},currentTransaction:{get:function(){return Rt.trans||null}},waitFor:function(f,b){return b=Tt.resolve(typeof f=="function"?ha.ignoreTransaction(f):f).timeout(b||6e4),Rt.trans?Rt.trans.waitFor(b):b},Promise:Tt,debug:{get:function(){return dt},set:function(f){ft(f)}},derive:O,extend:E,props:D,override:I,Events:ie,on:cn,liveQuery:Qu,extendObservabilitySet:jo,getByKeyPath:Y,setByKeyPath:Q,delByKeyPath:function(f,b){typeof b=="string"?Q(f,b,void 0):"length"in b&&[].map.call(b,function(A){Q(f,A,void 0)})},shallowClone:ve,deepClone:ke,getObjectDiff:Po,cmp:c,asap:z,minKey:-1/0,addons:[],connections:di,errnames:Ut,dependencies:Pa,cache:fa,semVer:"4.0.11",version:"4.0.11".split(".").map(function(f){return parseInt(f)}).reduce(function(f,b,A){return f+b/Math.pow(10,2*A)})})),ha.maxKey=Qr(ha.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(cn(Mn,function(f){Qi||(f=new CustomEvent(Bn,{detail:f}),Qi=!0,dispatchEvent(f),Qi=!1)}),addEventListener(Bn,function(f){f=f.detail,Qi||Is(f)}));var La,Qi=!1,Lr=function(){};return typeof BroadcastChannel<"u"&&((Lr=function(){(La=new BroadcastChannel(Bn)).onmessage=function(f){return f.data&&Is(f.data)}})(),typeof La.unref=="function"&&La.unref(),cn(Mn,function(f){Qi||La.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!Ti.disableBfCache&&f.persisted){dt&&console.debug("Dexie: handling persisted pagehide"),La?.close();for(var b=0,A=di;b<A.length;b++)A[b].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!Ti.disableBfCache&&f.persisted&&(dt&&console.debug("Dexie: handling persisted pageshow"),Lr(),Is({all:new yr(-1/0,[[]])}))})),Tt.rejectionMapper=function(f,b){return!f||f instanceof be||f instanceof TypeError||f instanceof SyntaxError||!f.name||!bt[f.name]?f:(b=new bt[f.name](b||f.message,f),"stack"in f&&C(b,"stack",{get:function(){return this.inner.stack}}),b)},ft(dt),i(Ti,Object.freeze({__proto__:null,Dexie:Ti,liveQuery:Qu,Entity:u,cmp:c,PropModification:nt,replacePrefix:function(f,b){return new nt({replacePrefix:[f,b]})},add:function(f){return new nt({add:f})},remove:function(f){return new nt({remove:f})},default:Ti,RangeSet:yr,mergeRanges:ca,rangesOverlap:qu}),{default:Ti}),Ti})}(rc)),rc.exports}var Yb=Wb();const Xd=Uu(Yb),Py=Symbol.for("Dexie"),sc=globalThis[Py]||(globalThis[Py]=Xd);if(Xd.semVer!==sc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Xd.semVer} and ${sc.semVer}`);const{liveQuery:Qb,mergeRanges:ox,rangesOverlap:sx,RangeSet:ux,cmp:lx,Entity:cx,PropModification:fx,replacePrefix:dx,add:hx,remove:px}=sc;function Xb(a,n,s){var i,d;typeof a=="function"?(i=n||[],d=s):(i=[],d=n);var y=ps.useRef({hasResult:!1,result:d,error:null}),p=ps.useReducer(function(m){return m+1},0);p[0];var g=p[1],E=ps.useMemo(function(){var m=typeof a=="function"?a():a;if(!m||typeof m.subscribe!="function")throw a===m?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!y.current.hasResult&&typeof window<"u"&&(typeof m.hasValue!="function"||m.hasValue()))if(typeof m.getValue=="function")y.current.result=m.getValue(),y.current.hasResult=!0;else{var _=m.subscribe(function(S){y.current.result=S,y.current.hasResult=!0});typeof _=="function"?_():_.unsubscribe()}return m},i);if(ps.useDebugValue(y.current.result),ps.useEffect(function(){var m=E.subscribe(function(_){var S=y.current;(S.error!==null||S.result!==_)&&(S.error=null,S.result=_,S.hasResult=!0,g())},function(_){var S=y.current;S.error!==_&&(S.error=_,g())});return typeof m=="function"?m:m.unsubscribe.bind(m)},i),y.current.error)throw y.current.error;return y.current.result}function Zb(a,n,s){return Xb(function(){return Qb(a)},n||[],s)}const bs=crypto,ph=a=>a instanceof CryptoKey,sa=new TextEncoder,vs=new TextDecoder;function tm(...a){const n=a.reduce((d,{length:y})=>d+y,0),s=new Uint8Array(n);let i=0;for(const d of a)s.set(d,i),i+=d.length;return s}const e_=a=>{let n=a;typeof n=="string"&&(n=sa.encode(n));const s=32768,i=[];for(let d=0;d<n.length;d+=s)i.push(String.fromCharCode.apply(null,n.subarray(d,d+s)));return btoa(i.join(""))},ic=a=>e_(a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),t_=a=>{const n=atob(a),s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s},Co=a=>{let n=a;n instanceof Uint8Array&&(n=vs.decode(n)),n=n.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return t_(n)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Dr extends Error{constructor(n,s){super(n,s),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}Dr.code="ERR_JOSE_GENERIC";class zi extends Dr{constructor(n,s,i="unspecified",d="unspecified"){super(n,{cause:{claim:i,reason:d,payload:s}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=i,this.reason=d,this.payload=s}}zi.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class Zd extends Dr{constructor(n,s,i="unspecified",d="unspecified"){super(n,{cause:{claim:i,reason:d,payload:s}}),this.code="ERR_JWT_EXPIRED",this.claim=i,this.reason=d,this.payload=s}}Zd.code="ERR_JWT_EXPIRED";class nm extends Dr{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}nm.code="ERR_JOSE_ALG_NOT_ALLOWED";class ii extends Dr{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}ii.code="ERR_JOSE_NOT_SUPPORTED";class n_ extends Dr{constructor(n="decryption operation failed",s){super(n,s),this.code="ERR_JWE_DECRYPTION_FAILED"}}n_.code="ERR_JWE_DECRYPTION_FAILED";class r_ extends Dr{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}r_.code="ERR_JWE_INVALID";class Jn extends Dr{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}Jn.code="ERR_JWS_INVALID";class pc extends Dr{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}pc.code="ERR_JWT_INVALID";class i_ extends Dr{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}i_.code="ERR_JWK_INVALID";class gh extends Dr{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}gh.code="ERR_JWKS_INVALID";class yh extends Dr{constructor(n="no applicable key found in the JSON Web Key Set",s){super(n,s),this.code="ERR_JWKS_NO_MATCHING_KEY"}}yh.code="ERR_JWKS_NO_MATCHING_KEY";class rm extends Dr{constructor(n="multiple matching keys found in the JSON Web Key Set",s){super(n,s),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}rm.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class im extends Dr{constructor(n="request timed out",s){super(n,s),this.code="ERR_JWKS_TIMEOUT"}}im.code="ERR_JWKS_TIMEOUT";class am extends Dr{constructor(n="signature verification failed",s){super(n,s),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}am.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";function ia(a,n="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${n} must be ${a}`)}function _u(a,n){return a.name===n}function pd(a){return parseInt(a.name.slice(4),10)}function a_(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function o_(a,n){if(n.length&&!n.some(s=>a.usages.includes(s))){let s="CryptoKey does not support this operation, its usages must include ";if(n.length>2){const i=n.pop();s+=`one of ${n.join(", ")}, or ${i}.`}else n.length===2?s+=`one of ${n[0]} or ${n[1]}.`:s+=`${n[0]}.`;throw new TypeError(s)}}function s_(a,n,...s){switch(n){case"HS256":case"HS384":case"HS512":{if(!_u(a.algorithm,"HMAC"))throw ia("HMAC");const i=parseInt(n.slice(2),10);if(pd(a.algorithm.hash)!==i)throw ia(`SHA-${i}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!_u(a.algorithm,"RSASSA-PKCS1-v1_5"))throw ia("RSASSA-PKCS1-v1_5");const i=parseInt(n.slice(2),10);if(pd(a.algorithm.hash)!==i)throw ia(`SHA-${i}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!_u(a.algorithm,"RSA-PSS"))throw ia("RSA-PSS");const i=parseInt(n.slice(2),10);if(pd(a.algorithm.hash)!==i)throw ia(`SHA-${i}`,"algorithm.hash");break}case"EdDSA":{if(a.algorithm.name!=="Ed25519"&&a.algorithm.name!=="Ed448")throw ia("Ed25519 or Ed448");break}case"Ed25519":{if(!_u(a.algorithm,"Ed25519"))throw ia("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!_u(a.algorithm,"ECDSA"))throw ia("ECDSA");const i=a_(n);if(a.algorithm.namedCurve!==i)throw ia(i,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}o_(a,s)}function om(a,n,...s){if(s=s.filter(Boolean),s.length>2){const i=s.pop();a+=`one of type ${s.join(", ")}, or ${i}.`}else s.length===2?a+=`one of type ${s[0]} or ${s[1]}.`:a+=`of type ${s[0]}.`;return n==null?a+=` Received ${n}`:typeof n=="function"&&n.name?a+=` Received function ${n.name}`:typeof n=="object"&&n!=null&&n.constructor?.name&&(a+=` Received an instance of ${n.constructor.name}`),a}const eh=(a,...n)=>om("Key must be ",a,...n);function sm(a,n,...s){return om(`Key for the ${a} algorithm must be `,n,...s)}const um=a=>ph(a)?!0:a?.[Symbol.toStringTag]==="KeyObject",Du=["CryptoKey"],lm=(...a)=>{const n=a.filter(Boolean);if(n.length===0||n.length===1)return!0;let s;for(const i of n){const d=Object.keys(i);if(!s||s.size===0){s=new Set(d);continue}for(const y of d){if(s.has(y))return!1;s.add(y)}}return!0};function u_(a){return typeof a=="object"&&a!==null}function ka(a){if(!u_(a)||Object.prototype.toString.call(a)!=="[object Object]")return!1;if(Object.getPrototypeOf(a)===null)return!0;let n=a;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(a)===n}const cm=(a,n)=>{if(a.startsWith("RS")||a.startsWith("PS")){const{modulusLength:s}=n.algorithm;if(typeof s!="number"||s<2048)throw new TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}};function _s(a){return ka(a)&&typeof a.kty=="string"}function l_(a){return a.kty!=="oct"&&typeof a.d=="string"}function c_(a){return a.kty!=="oct"&&typeof a.d>"u"}function f_(a){return _s(a)&&a.kty==="oct"&&typeof a.k=="string"}function d_(a){let n,s;switch(a.kty){case"RSA":{switch(a.alg){case"PS256":case"PS384":case"PS512":n={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},s=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":n={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},s=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":n={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},s=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new ii('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(a.alg){case"ES256":n={name:"ECDSA",namedCurve:"P-256"},s=a.d?["sign"]:["verify"];break;case"ES384":n={name:"ECDSA",namedCurve:"P-384"},s=a.d?["sign"]:["verify"];break;case"ES512":n={name:"ECDSA",namedCurve:"P-521"},s=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":n={name:"ECDH",namedCurve:a.crv},s=a.d?["deriveBits"]:[];break;default:throw new ii('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(a.alg){case"Ed25519":n={name:"Ed25519"},s=a.d?["sign"]:["verify"];break;case"EdDSA":n={name:a.crv},s=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":n={name:a.crv},s=a.d?["deriveBits"]:[];break;default:throw new ii('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new ii('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:n,keyUsages:s}}const fm=async a=>{if(!a.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:n,keyUsages:s}=d_(a),i=[n,a.ext??!1,a.key_ops??s],d={...a};return delete d.alg,delete d.use,bs.subtle.importKey("jwk",d,...i)},dm=a=>Co(a);let fs,ds;const hm=a=>a?.[Symbol.toStringTag]==="KeyObject",uc=async(a,n,s,i,d=!1)=>{let y=a.get(n);if(y?.[i])return y[i];const p=await fm({...s,alg:i});return d&&Object.freeze(n),y?y[i]=p:a.set(n,{[i]:p}),p},h_=(a,n)=>{if(hm(a)){let s=a.export({format:"jwk"});return delete s.d,delete s.dp,delete s.dq,delete s.p,delete s.q,delete s.qi,s.k?dm(s.k):(ds||(ds=new WeakMap),uc(ds,a,s,n))}return _s(a)?a.k?Co(a.k):(ds||(ds=new WeakMap),uc(ds,a,a,n,!0)):a},p_=(a,n)=>{if(hm(a)){let s=a.export({format:"jwk"});return s.k?dm(s.k):(fs||(fs=new WeakMap),uc(fs,a,s,n))}return _s(a)?a.k?Co(a.k):(fs||(fs=new WeakMap),uc(fs,a,a,n,!0)):a},Ly={normalizePublicKey:h_,normalizePrivateKey:p_};async function pm(a,n){if(!ka(a))throw new TypeError("JWK must be an object");switch(n||(n=a.alg),a.kty){case"oct":if(typeof a.k!="string"||!a.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Co(a.k);case"RSA":if("oth"in a&&a.oth!==void 0)throw new ii('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return fm({...a,alg:n});default:throw new ii('Unsupported "kty" (Key Type) Parameter value')}}const gs=a=>a?.[Symbol.toStringTag],th=(a,n,s)=>{if(n.use!==void 0&&n.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(n.key_ops!==void 0&&n.key_ops.includes?.(s)!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${s}`);if(n.alg!==void 0&&n.alg!==a)throw new TypeError(`Invalid key for this operation, when present its alg must be ${a}`);return!0},g_=(a,n,s,i)=>{if(!(n instanceof Uint8Array)){if(i&&_s(n)){if(f_(n)&&th(a,n,s))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!um(n))throw new TypeError(sm(a,n,...Du,"Uint8Array",i?"JSON Web Key":null));if(n.type!=="secret")throw new TypeError(`${gs(n)} instances for symmetric algorithms must be of type "secret"`)}},y_=(a,n,s,i)=>{if(i&&_s(n))switch(s){case"sign":if(l_(n)&&th(a,n,s))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(c_(n)&&th(a,n,s))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!um(n))throw new TypeError(sm(a,n,...Du,i?"JSON Web Key":null));if(n.type==="secret")throw new TypeError(`${gs(n)} instances for asymmetric algorithms must not be of type "secret"`);if(s==="sign"&&n.type==="public")throw new TypeError(`${gs(n)} instances for asymmetric algorithm signing must be of type "private"`);if(s==="decrypt"&&n.type==="public")throw new TypeError(`${gs(n)} instances for asymmetric algorithm decryption must be of type "private"`);if(n.algorithm&&s==="verify"&&n.type==="private")throw new TypeError(`${gs(n)} instances for asymmetric algorithm verifying must be of type "public"`);if(n.algorithm&&s==="encrypt"&&n.type==="private")throw new TypeError(`${gs(n)} instances for asymmetric algorithm encryption must be of type "public"`)};function gm(a,n,s,i){n.startsWith("HS")||n==="dir"||n.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(n)?g_(n,s,i,a):y_(n,s,i,a)}gm.bind(void 0,!1);const nh=gm.bind(void 0,!0);function ym(a,n,s,i,d){if(d.crit!==void 0&&i?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||i.crit===void 0)return new Set;if(!Array.isArray(i.crit)||i.crit.length===0||i.crit.some(p=>typeof p!="string"||p.length===0))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let y;s!==void 0?y=new Map([...Object.entries(s),...n.entries()]):y=n;for(const p of i.crit){if(!y.has(p))throw new ii(`Extension Header Parameter "${p}" is not recognized`);if(d[p]===void 0)throw new a(`Extension Header Parameter "${p}" is missing`);if(y.get(p)&&i[p]===void 0)throw new a(`Extension Header Parameter "${p}" MUST be integrity protected`)}return new Set(i.crit)}const m_=(a,n)=>{if(n!==void 0&&(!Array.isArray(n)||n.some(s=>typeof s!="string")))throw new TypeError(`"${a}" option must be an array of strings`);if(n)return new Set(n)},v_=async a=>{if(a instanceof Uint8Array)return{kty:"oct",k:ic(a)};if(!ph(a))throw new TypeError(eh(a,...Du,"Uint8Array"));if(!a.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:n,key_ops:s,alg:i,use:d,...y}=await bs.subtle.exportKey("jwk",a);return y};async function b_(a){return v_(a)}function mm(a,n){const s=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:s,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:s,name:"RSA-PSS",saltLength:a.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:s,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:s,name:"ECDSA",namedCurve:n.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:n.name};default:throw new ii(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}async function vm(a,n,s){if(s==="sign"&&(n=await Ly.normalizePrivateKey(n,a)),s==="verify"&&(n=await Ly.normalizePublicKey(n,a)),ph(n))return s_(n,a,s),n;if(n instanceof Uint8Array){if(!a.startsWith("HS"))throw new TypeError(eh(n,...Du));return bs.subtle.importKey("raw",n,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[s])}throw new TypeError(eh(n,...Du,"Uint8Array","JSON Web Key"))}const __=async(a,n,s,i)=>{const d=await vm(a,n,"verify");cm(a,d);const y=mm(a,d.algorithm);try{return await bs.subtle.verify(y,d,s,i)}catch{return!1}};async function w_(a,n,s){if(!ka(a))throw new Jn("Flattened JWS must be an object");if(a.protected===void 0&&a.header===void 0)throw new Jn('Flattened JWS must have either of the "protected" or "header" members');if(a.protected!==void 0&&typeof a.protected!="string")throw new Jn("JWS Protected Header incorrect type");if(a.payload===void 0)throw new Jn("JWS Payload missing");if(typeof a.signature!="string")throw new Jn("JWS Signature missing or incorrect type");if(a.header!==void 0&&!ka(a.header))throw new Jn("JWS Unprotected Header incorrect type");let i={};if(a.protected)try{const O=Co(a.protected);i=JSON.parse(vs.decode(O))}catch{throw new Jn("JWS Protected Header is invalid")}if(!lm(i,a.header))throw new Jn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const d={...i,...a.header},y=ym(Jn,new Map([["b64",!0]]),s?.crit,i,d);let p=!0;if(y.has("b64")&&(p=i.b64,typeof p!="boolean"))throw new Jn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:g}=d;if(typeof g!="string"||!g)throw new Jn('JWS "alg" (Algorithm) Header Parameter missing or invalid');const E=s&&m_("algorithms",s.algorithms);if(E&&!E.has(g))throw new nm('"alg" (Algorithm) Header Parameter value not allowed');if(p){if(typeof a.payload!="string")throw new Jn("JWS Payload must be a string")}else if(typeof a.payload!="string"&&!(a.payload instanceof Uint8Array))throw new Jn("JWS Payload must be a string or an Uint8Array instance");let m=!1;typeof n=="function"?(n=await n(i,a),m=!0,nh(g,n,"verify"),_s(n)&&(n=await pm(n,g))):nh(g,n,"verify");const _=tm(sa.encode(a.protected??""),sa.encode("."),typeof a.payload=="string"?sa.encode(a.payload):a.payload);let S;try{S=Co(a.signature)}catch{throw new Jn("Failed to base64url decode the signature")}if(!await __(g,n,S,_))throw new am;let M;if(p)try{M=Co(a.payload)}catch{throw new Jn("Failed to base64url decode the payload")}else typeof a.payload=="string"?M=sa.encode(a.payload):M=a.payload;const C={payload:M};return a.protected!==void 0&&(C.protectedHeader=i),a.header!==void 0&&(C.unprotectedHeader=a.header),m?{...C,key:n}:C}async function S_(a,n,s){if(a instanceof Uint8Array&&(a=vs.decode(a)),typeof a!="string")throw new Jn("Compact JWS must be a string or Uint8Array");const{0:i,1:d,2:y,length:p}=a.split(".");if(p!==3)throw new Jn("Invalid Compact JWS");const g=await w_({payload:d,protected:i,signature:y},n,s),E={payload:g.payload,protectedHeader:g.protectedHeader};return typeof n=="function"?{...E,key:g.key}:E}const oo=a=>Math.floor(a.getTime()/1e3),bm=60,_m=bm*60,mh=_m*24,E_=mh*7,x_=mh*365.25,T_=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Cu=a=>{const n=T_.exec(a);if(!n||n[4]&&n[1])throw new TypeError("Invalid time period format");const s=parseFloat(n[2]),i=n[3].toLowerCase();let d;switch(i){case"sec":case"secs":case"second":case"seconds":case"s":d=Math.round(s);break;case"minute":case"minutes":case"min":case"mins":case"m":d=Math.round(s*bm);break;case"hour":case"hours":case"hr":case"hrs":case"h":d=Math.round(s*_m);break;case"day":case"days":case"d":d=Math.round(s*mh);break;case"week":case"weeks":case"w":d=Math.round(s*E_);break;default:d=Math.round(s*x_);break}return n[1]==="-"||n[4]==="ago"?-d:d},My=a=>a.toLowerCase().replace(/^application\//,""),A_=(a,n)=>typeof a=="string"?n.includes(a):Array.isArray(a)?n.some(Set.prototype.has.bind(new Set(a))):!1,R_=(a,n,s={})=>{let i;try{i=JSON.parse(vs.decode(n))}catch{}if(!ka(i))throw new pc("JWT Claims Set must be a top-level JSON object");const{typ:d}=s;if(d&&(typeof a.typ!="string"||My(a.typ)!==My(d)))throw new zi('unexpected "typ" JWT header value',i,"typ","check_failed");const{requiredClaims:y=[],issuer:p,subject:g,audience:E,maxTokenAge:m}=s,_=[...y];m!==void 0&&_.push("iat"),E!==void 0&&_.push("aud"),g!==void 0&&_.push("sub"),p!==void 0&&_.push("iss");for(const C of new Set(_.reverse()))if(!(C in i))throw new zi(`missing required "${C}" claim`,i,C,"missing");if(p&&!(Array.isArray(p)?p:[p]).includes(i.iss))throw new zi('unexpected "iss" claim value',i,"iss","check_failed");if(g&&i.sub!==g)throw new zi('unexpected "sub" claim value',i,"sub","check_failed");if(E&&!A_(i.aud,typeof E=="string"?[E]:E))throw new zi('unexpected "aud" claim value',i,"aud","check_failed");let S;switch(typeof s.clockTolerance){case"string":S=Cu(s.clockTolerance);break;case"number":S=s.clockTolerance;break;case"undefined":S=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:D}=s,M=oo(D||new Date);if((i.iat!==void 0||m)&&typeof i.iat!="number")throw new zi('"iat" claim must be a number',i,"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new zi('"nbf" claim must be a number',i,"nbf","invalid");if(i.nbf>M+S)throw new zi('"nbf" claim timestamp check failed',i,"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new zi('"exp" claim must be a number',i,"exp","invalid");if(i.exp<=M-S)throw new Zd('"exp" claim timestamp check failed',i,"exp","check_failed")}if(m){const C=M-i.iat,O=typeof m=="number"?m:Cu(m);if(C-S>O)throw new Zd('"iat" claim timestamp check failed (too far in the past)',i,"iat","check_failed");if(C<0-S)throw new zi('"iat" claim timestamp check failed (it should be in the past)',i,"iat","check_failed")}return i};async function k_(a,n,s){const i=await S_(a,n,s);if(i.protectedHeader.crit?.includes("b64")&&i.protectedHeader.b64===!1)throw new pc("JWTs MUST NOT use unencoded payload");const y={payload:R_(i.protectedHeader,i.payload,s),protectedHeader:i.protectedHeader};return typeof n=="function"?{...y,key:i.key}:y}const F_=async(a,n,s)=>{const i=await vm(a,n,"sign");cm(a,i);const d=await bs.subtle.sign(mm(a,i.algorithm),i,s);return new Uint8Array(d)};class N_{constructor(n){if(!(n instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=n}setProtectedHeader(n){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=n,this}setUnprotectedHeader(n){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=n,this}async sign(n,s){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Jn("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!lm(this._protectedHeader,this._unprotectedHeader))throw new Jn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const i={...this._protectedHeader,...this._unprotectedHeader},d=ym(Jn,new Map([["b64",!0]]),s?.crit,this._protectedHeader,i);let y=!0;if(d.has("b64")&&(y=this._protectedHeader.b64,typeof y!="boolean"))throw new Jn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:p}=i;if(typeof p!="string"||!p)throw new Jn('JWS "alg" (Algorithm) Header Parameter missing or invalid');nh(p,n,"sign");let g=this._payload;y&&(g=sa.encode(ic(g)));let E;this._protectedHeader?E=sa.encode(ic(JSON.stringify(this._protectedHeader))):E=sa.encode("");const m=tm(E,sa.encode("."),g),_=await F_(p,n,m),S={signature:ic(_),payload:""};return y&&(S.payload=vs.decode(g)),this._unprotectedHeader&&(S.header=this._unprotectedHeader),this._protectedHeader&&(S.protected=vs.decode(E)),S}}class C_{constructor(n){this._flattened=new N_(n)}setProtectedHeader(n){return this._flattened.setProtectedHeader(n),this}async sign(n,s){const i=await this._flattened.sign(n,s);if(i.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${i.protected}.${i.payload}.${i.signature}`}}function Fo(a,n){if(!Number.isFinite(n))throw new TypeError(`Invalid ${a} input`);return n}class O_{constructor(n={}){if(!ka(n))throw new TypeError("JWT Claims Set MUST be an object");this._payload=n}setIssuer(n){return this._payload={...this._payload,iss:n},this}setSubject(n){return this._payload={...this._payload,sub:n},this}setAudience(n){return this._payload={...this._payload,aud:n},this}setJti(n){return this._payload={...this._payload,jti:n},this}setNotBefore(n){return typeof n=="number"?this._payload={...this._payload,nbf:Fo("setNotBefore",n)}:n instanceof Date?this._payload={...this._payload,nbf:Fo("setNotBefore",oo(n))}:this._payload={...this._payload,nbf:oo(new Date)+Cu(n)},this}setExpirationTime(n){return typeof n=="number"?this._payload={...this._payload,exp:Fo("setExpirationTime",n)}:n instanceof Date?this._payload={...this._payload,exp:Fo("setExpirationTime",oo(n))}:this._payload={...this._payload,exp:oo(new Date)+Cu(n)},this}setIssuedAt(n){return typeof n>"u"?this._payload={...this._payload,iat:oo(new Date)}:n instanceof Date?this._payload={...this._payload,iat:Fo("setIssuedAt",oo(n))}:typeof n=="string"?this._payload={...this._payload,iat:Fo("setIssuedAt",oo(new Date)+Cu(n))}:this._payload={...this._payload,iat:Fo("setIssuedAt",n)},this}}class D_ extends O_{setProtectedHeader(n){return this._protectedHeader=n,this}async sign(n,s){const i=new C_(sa.encode(JSON.stringify(this._payload)));if(i.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new pc("JWTs MUST NOT use unencoded payload");return i.sign(n,s)}}function I_(a){switch(typeof a=="string"&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new ii('Unsupported "alg" value for a JSON Web Key Set')}}function j_(a){return a&&typeof a=="object"&&Array.isArray(a.keys)&&a.keys.every(U_)}function U_(a){return ka(a)}function wm(a){return typeof structuredClone=="function"?structuredClone(a):JSON.parse(JSON.stringify(a))}class P_{constructor(n){if(this._cached=new WeakMap,!j_(n))throw new gh("JSON Web Key Set malformed");this._jwks=wm(n)}async getKey(n,s){const{alg:i,kid:d}={...n,...s?.header},y=I_(i),p=this._jwks.keys.filter(m=>{let _=y===m.kty;if(_&&typeof d=="string"&&(_=d===m.kid),_&&typeof m.alg=="string"&&(_=i===m.alg),_&&typeof m.use=="string"&&(_=m.use==="sig"),_&&Array.isArray(m.key_ops)&&(_=m.key_ops.includes("verify")),_)switch(i){case"ES256":_=m.crv==="P-256";break;case"ES256K":_=m.crv==="secp256k1";break;case"ES384":_=m.crv==="P-384";break;case"ES512":_=m.crv==="P-521";break;case"Ed25519":_=m.crv==="Ed25519";break;case"EdDSA":_=m.crv==="Ed25519"||m.crv==="Ed448";break}return _}),{0:g,length:E}=p;if(E===0)throw new yh;if(E!==1){const m=new rm,{_cached:_}=this;throw m[Symbol.asyncIterator]=async function*(){for(const S of p)try{yield await By(_,S,i)}catch{}},m}return By(this._cached,g,i)}}async function By(a,n,s){const i=a.get(n)||a.set(n,{}).get(n);if(i[s]===void 0){const d=await pm({...n,ext:!0},s);if(d instanceof Uint8Array||d.type!=="public")throw new gh("JSON Web Key Set members must be public keys");i[s]=d}return i[s]}function Hy(a){const n=new P_(a),s=async(i,d)=>n.getKey(i,d);return Object.defineProperties(s,{jwks:{value:()=>wm(n._jwks),enumerable:!0,configurable:!1,writable:!1}}),s}const L_=async(a,n,s)=>{let i,d,y=!1;typeof AbortController=="function"&&(i=new AbortController,d=setTimeout(()=>{y=!0,i.abort()},n));const p=await fetch(a.href,{signal:i?i.signal:void 0,redirect:"manual",headers:s.headers}).catch(g=>{throw y?new im:g});if(d!==void 0&&clearTimeout(d),p.status!==200)throw new Dr("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await p.json()}catch{throw new Dr("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function M_(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let rh;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(rh="jose/v5.10.0");const gd=Symbol();function B_(a,n){return!(typeof a!="object"||a===null||!("uat"in a)||typeof a.uat!="number"||Date.now()-a.uat>=n||!("jwks"in a)||!ka(a.jwks)||!Array.isArray(a.jwks.keys)||!Array.prototype.every.call(a.jwks.keys,ka))}class H_{constructor(n,s){if(!(n instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(n.href),this._options={agent:s?.agent,headers:s?.headers},this._timeoutDuration=typeof s?.timeoutDuration=="number"?s?.timeoutDuration:5e3,this._cooldownDuration=typeof s?.cooldownDuration=="number"?s?.cooldownDuration:3e4,this._cacheMaxAge=typeof s?.cacheMaxAge=="number"?s?.cacheMaxAge:6e5,s?.[gd]!==void 0&&(this._cache=s?.[gd],B_(s?.[gd],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=Hy(this._cache.jwks)))}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(n,s){(!this._local||!this.fresh())&&await this.reload();try{return await this._local(n,s)}catch(i){if(i instanceof yh&&this.coolingDown()===!1)return await this.reload(),this._local(n,s);throw i}}async reload(){this._pendingFetch&&M_()&&(this._pendingFetch=void 0);const n=new Headers(this._options.headers);rh&&!n.has("User-Agent")&&(n.set("User-Agent",rh),this._options.headers=Object.fromEntries(n.entries())),this._pendingFetch||(this._pendingFetch=L_(this._url,this._timeoutDuration,this._options).then(s=>{this._local=Hy(s),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=s),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(s=>{throw this._pendingFetch=void 0,s})),await this._pendingFetch}}function K_(a,n){const s=new H_(a,n),i=async(d,y)=>s.getKey(d,y);return Object.defineProperties(i,{coolingDown:{get:()=>s.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>s.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>s.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!s._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>s._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),i}function yd(a){const n=a?.modulusLength??2048;if(typeof n!="number"||n<2048)throw new ii("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return n}async function q_(a,n){let s,i;switch(a){case"PS256":case"PS384":case"PS512":s={name:"RSA-PSS",hash:`SHA-${a.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:yd(n)},i=["sign","verify"];break;case"RS256":case"RS384":case"RS512":s={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:yd(n)},i=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s={name:"RSA-OAEP",hash:`SHA-${parseInt(a.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:yd(n)},i=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":s={name:"ECDSA",namedCurve:"P-256"},i=["sign","verify"];break;case"ES384":s={name:"ECDSA",namedCurve:"P-384"},i=["sign","verify"];break;case"ES512":s={name:"ECDSA",namedCurve:"P-521"},i=["sign","verify"];break;case"Ed25519":s={name:"Ed25519"},i=["sign","verify"];break;case"EdDSA":{i=["sign","verify"];const d="Ed25519";switch(d){case"Ed25519":case"Ed448":s={name:d};break;default:throw new ii("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{i=["deriveKey","deriveBits"];const d="P-256";switch(d){case"P-256":case"P-384":case"P-521":{s={name:"ECDH",namedCurve:d};break}case"X25519":case"X448":s={name:d};break;default:throw new ii("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new ii('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return bs.subtle.generateKey(s,!1,i)}async function z_(a,n){return q_(a,n)}const Fr=[];for(let a=0;a<256;++a)Fr.push((a+256).toString(16).slice(1));function V_(a,n=0){return(Fr[a[n+0]]+Fr[a[n+1]]+Fr[a[n+2]]+Fr[a[n+3]]+"-"+Fr[a[n+4]]+Fr[a[n+5]]+"-"+Fr[a[n+6]]+Fr[a[n+7]]+"-"+Fr[a[n+8]]+Fr[a[n+9]]+"-"+Fr[a[n+10]]+Fr[a[n+11]]+Fr[a[n+12]]+Fr[a[n+13]]+Fr[a[n+14]]+Fr[a[n+15]]).toLowerCase()}let md;const G_=new Uint8Array(16);function $_(){if(!md){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");md=crypto.getRandomValues.bind(crypto)}return md(G_)}const J_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ky={randomUUID:J_};function Sm(a,n,s){if(Ky.randomUUID&&!a)return Ky.randomUUID();a=a||{};const i=a.random??a.rng?.()??$_();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,V_(i)}const Em="solidClientAuthn:",lc=["ES256","RS256"],wr={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",NEW_TOKENS:"newTokens",AUTHORIZATION_REQUEST:"authorizationRequest",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},qy=5,W_="openid",Y_="offline_access",Q_="webid",zy=[W_,Y_,Q_];class X_{handleables;constructor(n){this.handleables=n,this.handleables=n}async getProperHandler(n){const s=await Promise.all(this.handleables.map(i=>i.canHandle(...n)));for(let i=0;i<s.length;i+=1)if(s[i])return this.handleables[i];return null}async canHandle(...n){return await this.getProperHandler(n)!==null}async handle(...n){const s=await this.getProperHandler(n);if(s)return s.handle(...n);throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${n.map(i=>{try{return JSON.stringify(i)}catch{return i.toString()}}).join(", ")}`)}}async function xm(a,n,s,i){let d,y;try{const{payload:p}=await k_(a,K_(new URL(n)),{issuer:s,audience:i});d=p}catch(p){throw new Error(`Token verification failed: ${p.stack}`)}if(typeof d.azp=="string"&&(y=d.azp),typeof d.webid=="string")return{webId:d.webid,clientId:y};if(typeof d.sub!="string")throw new Error(`The token ${JSON.stringify(d)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(d.sub),{webId:d.sub,clientId:y}}catch(p){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${d.sub}] is invalid as a URL - error [${p}].`)}}function Z_(a){return Array.isArray(a)?Array.from(new Set([...zy,...a.filter(n=>typeof n=="string"&&!n.includes(" "))])):zy}function Tm(a){try{const n=new URL(a),s=!n.searchParams.has("code")&&!n.searchParams.has("state"),i=n.hash==="";return s&&i}catch{return!1}}function Am(a){const n=new URL(a);return n.searchParams.delete("state"),n.searchParams.delete("code"),n.searchParams.delete("error"),n.searchParams.delete("error_description"),n.searchParams.delete("iss"),n}function ew(a,n){return typeof a=="boolean"?!!a:!!n}class tw{storageUtility;redirector;constructor(n,s){this.storageUtility=n,this.redirector=s,this.storageUtility=n,this.redirector=s}parametersGuard=n=>n.issuerConfiguration.grantTypesSupported!==void 0&&n.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1&&n.redirectUrl!==void 0;async canHandle(n){return this.parametersGuard(n)}async setupRedirectHandler({oidcLoginOptions:n,state:s,codeVerifier:i,targetUrl:d}){if(!this.parametersGuard(n))throw new Error("The authorization code grant requires a redirectUrl.");await Promise.all([this.storageUtility.setForUser(s,{sessionId:n.sessionId}),this.storageUtility.setForUser(n.sessionId,{codeVerifier:i,issuer:n.issuer.toString(),redirectUrl:n.redirectUrl,dpop:(!!n.dpop).toString(),keepAlive:ew(n.keepAlive,!0).toString()})]),this.redirector.redirect(d,{handleRedirect:n.handleRedirect})}}class nw{sessionInfoManager;constructor(n){this.sessionInfoManager=n,this.sessionInfoManager=n}async canHandle(){return!0}async handle(n){await this.sessionInfoManager.clear(n)}}class rw{redirector;constructor(n){this.redirector=n,this.redirector=n}async canHandle(n,s){return s?.logoutType==="idp"}async handle(n,s){if(s?.logoutType!=="idp")throw new Error("Attempting to call idp logout handler to perform app logout");if(s.toLogoutUrl===void 0)throw new Error("Cannot perform IDP logout. Did you log in using the OIDC authentication flow?");this.redirector.redirect(s.toLogoutUrl(s),{handleRedirect:s.handleRedirect})}}class iw{handlers;constructor(n,s){this.handlers=[new nw(n),new rw(s)]}async canHandle(){return!0}async handle(n,s){for(const i of this.handlers)await i.canHandle(n,s)&&await i.handle(n,s)}}function Rm(){return{isLoggedIn:!1,sessionId:Sm(),fetch:(...a)=>fetch(...a)}}async function km(a,n){await Promise.all([n.deleteAllUserData(a,{secure:!1}),n.deleteAllUserData(a,{secure:!0})])}class aw{storageUtility;constructor(n){this.storageUtility=n,this.storageUtility=n}update(n,s){throw new Error("Not Implemented")}set(n,s){throw new Error("Not Implemented")}get(n){throw new Error("Not implemented")}async getAll(){throw new Error("Not implemented")}async clear(n){return km(n,this.storageUtility)}async register(n){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}async setOidcContext(n,s){throw new Error("Not implemented")}}function ow({endSessionEndpoint:a,idTokenHint:n,postLogoutRedirectUri:s,state:i}){const d=new URL(a);return n!==void 0&&d.searchParams.append("id_token_hint",n),s!==void 0&&(d.searchParams.append("post_logout_redirect_uri",s),i!==void 0&&d.searchParams.append("state",i)),d.toString()}function sw({endSessionEndpoint:a,idTokenHint:n}){if(a!==void 0)return function({state:i,postLogoutUrl:d}){return ow({endSessionEndpoint:a,idTokenHint:n,state:i,postLogoutRedirectUri:d})}}function uw(a){return typeof a=="string"&&["DPoP","Bearer"].includes(a)}function Fm(a){try{return new URL(a),!0}catch{return!1}}function lw(a,n){return n.find(s=>a.includes(s))??null}function cw(a){return a.clientId!==void 0&&!Fm(a.clientId)}function fw(a,n){return n.scopesSupported.includes("webid")&&a.clientId!==void 0&&Fm(a.clientId)}function dw(a){return typeof a=="string"&&["dynamic","static","solid-oidc"].includes(a)}async function hw(a,n,s,i){let d;if(fw(a,n))d={clientId:a.clientId,clientName:a.clientName,clientType:"solid-oidc"};else if(cw(a))d={clientId:a.clientId,clientSecret:a.clientSecret,clientName:a.clientName,clientType:"static"};else return i.getClient({sessionId:a.sessionId,clientName:a.clientName,redirectUrl:a.redirectUrl},n);const y={clientId:d.clientId,clientType:d.clientType};return d.clientType==="static"&&(y.clientSecret=d.clientSecret),d.clientName&&(y.clientName=d.clientName),await s.setForUser(a.sessionId,y),d}const Vy=(a,n)=>fetch(a,n);let pw=class{loginHandler;redirectHandler;logoutHandler;sessionInfoManager;issuerConfigFetcher;boundLogout;constructor(n,s,i,d,y){this.loginHandler=n,this.redirectHandler=s,this.logoutHandler=i,this.sessionInfoManager=d,this.issuerConfigFetcher=y,this.loginHandler=n,this.redirectHandler=s,this.logoutHandler=i,this.sessionInfoManager=d,this.issuerConfigFetcher=y}fetch=Vy;logout=async(n,s)=>{await this.logoutHandler.handle(n,s?.logoutType==="idp"?{...s,toLogoutUrl:this.boundLogout}:s),this.fetch=Vy,delete this.boundLogout};getSessionInfo=async n=>this.sessionInfoManager.get(n);getAllSessionInfo=async()=>this.sessionInfoManager.getAll()};async function Nm(a,n,s){try{const[i,d,y,p,g]=await Promise.all([n.getForUser(a,"issuer",{errorIfNull:!0}),n.getForUser(a,"codeVerifier"),n.getForUser(a,"redirectUrl"),n.getForUser(a,"dpop",{errorIfNull:!0}),n.getForUser(a,"keepAlive")]);await n.deleteForUser(a,"codeVerifier");const E=await s.fetchConfig(i);return{codeVerifier:d,redirectUrl:y,issuerConfig:E,dpop:p==="true",keepAlive:typeof g=="string"?g==="true":!0}}catch(i){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${a}]: ${i}`)}}async function gw(a,n,s,i,d,y,p,g){s!==void 0&&await a.setForUser(n,{webId:s},{secure:p}),i!==void 0&&await a.setForUser(n,{clientId:i},{secure:p}),await a.setForUser(n,{isLoggedIn:d},{secure:p})}class yw{secureStorage;insecureStorage;constructor(n,s){this.secureStorage=n,this.insecureStorage=s,this.secureStorage=n,this.insecureStorage=s}getKey(n){return`solidClientAuthenticationUser:${n}`}async getUserData(n,s){const i=await(s?this.secureStorage:this.insecureStorage).get(this.getKey(n));if(i===void 0)return{};try{return JSON.parse(i)}catch{throw new Error(`Data for user [${n}] in [${s?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${i}`)}}async setUserData(n,s,i){await(i?this.secureStorage:this.insecureStorage).set(this.getKey(n),JSON.stringify(s))}async get(n,s){const i=await(s?.secure?this.secureStorage:this.insecureStorage).get(n);if(i===void 0&&s?.errorIfNull)throw new Error(`[${n}] is not stored`);return i}async set(n,s,i){return(i?.secure?this.secureStorage:this.insecureStorage).set(n,s)}async delete(n,s){return(s?.secure?this.secureStorage:this.insecureStorage).delete(n)}async getForUser(n,s,i){const d=await this.getUserData(n,i?.secure);let y;if((!d||!d[s])&&(y=void 0),y=d[s],y===void 0&&i?.errorIfNull)throw new Error(`Field [${s}] for user [${n}] is not stored`);return y||void 0}async setForUser(n,s,i){let d;try{d=await this.getUserData(n,i?.secure)}catch{d={}}await this.setUserData(n,{...d,...s},i?.secure)}async deleteForUser(n,s,i){const d=await this.getUserData(n,i?.secure);delete d[s],await this.setUserData(n,d,i?.secure)}async deleteAllUserData(n,s){await(s?.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(n))}}class mw{map={};async get(n){return this.map[n]||void 0}async set(n,s){this.map[n]=s}async delete(n){delete this.map[n]}}class ih extends Error{constructor(n){super(n)}}class ku extends Error{missingFields;constructor(n){super(`Invalid response from OIDC provider: missing fields ${n}`),this.missingFields=n}}class Cm extends Error{error;errorDescription;constructor(n,s,i){super(n),this.error=s,this.errorDescription=i}}function vw(a){const n=new URL(a);return new URL(n.pathname,n.origin).toString()}async function vh(a,n,s){return new D_({htu:vw(a),htm:n.toUpperCase(),jti:Sm()}).setProtectedHeader({alg:lc[0],jwk:s.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(s.privateKey,{})}async function bw(){const{privateKey:a,publicKey:n}=await z_(lc[0]),s={privateKey:a,publicKey:await b_(n)};return[s.publicKey.alg]=lc,s}const Om=600;function _w(a){return[401,403].includes(a)}async function ww(a,n,s,i){const d=new Headers(i?.headers);return d.set("Authorization",`DPoP ${n}`),d.set("DPoP",await vh(a,i?.method??"get",s)),{...i,headers:d}}async function Sw(a,n,s,i){if(s!==void 0)return ww(a,n,s,i);const d=new Headers(i?.headers);return d.set("Authorization",`Bearer ${n}`),{...i,headers:d}}async function Gy(a,n,s,i,d=fetch){return d(n,await Sw(n.toString(),a,i,s))}async function Ew(a,n,s){const i=await a.tokenRefresher.refresh(a.sessionId,a.refreshToken,n);return s?.emit(wr.SESSION_EXTENDED,i.expiresIn??Om),{accessToken:i.accessToken,refreshToken:i.refreshToken,expiresIn:i.expiresIn}}const vd=a=>a!==void 0?a-qy>0?a-qy:a:Om;function xw(a,n){let s=a,i;const d=n?.refreshOptions;if(d!==void 0){const y=async()=>{try{const{accessToken:p,refreshToken:g,expiresIn:E}=await Ew(d,n.dpopKey,n.eventEmitter);s=p,g!==void 0&&(d.refreshToken=g),clearTimeout(i),i=setTimeout(y,vd(E)*1e3),n.eventEmitter?.emit(wr.TIMEOUT_SET,i)}catch(p){p instanceof Cm&&(n?.eventEmitter?.emit(wr.ERROR,p.error,p.errorDescription),n?.eventEmitter?.emit(wr.SESSION_EXPIRED)),p instanceof ku&&p.missingFields.includes("access_token")&&n?.eventEmitter?.emit(wr.SESSION_EXPIRED)}};i=setTimeout(y,vd(n.expiresIn)*1e3),n.eventEmitter?.emit(wr.TIMEOUT_SET,i)}else if(n!==void 0&&n.eventEmitter!==void 0){const y=setTimeout(()=>{n.eventEmitter.emit(wr.SESSION_EXPIRED)},vd(n.expiresIn)*1e3);n.eventEmitter.emit(wr.TIMEOUT_SET,y)}return async(y,p)=>{let g=await Gy(s,y,p,n?.dpopKey,n?.fetch);const E=!g.ok&&!_w(g.status);return g.ok||E||g.url!==y&&n?.dpopKey!==void 0&&(g=await Gy(s,g.url,p,n.dpopKey,n.fetch)),g}}const Nr=[];for(let a=0;a<256;++a)Nr.push((a+256).toString(16).slice(1));function Tw(a,n=0){return(Nr[a[n+0]]+Nr[a[n+1]]+Nr[a[n+2]]+Nr[a[n+3]]+"-"+Nr[a[n+4]]+Nr[a[n+5]]+"-"+Nr[a[n+6]]+Nr[a[n+7]]+"-"+Nr[a[n+8]]+Nr[a[n+9]]+"-"+Nr[a[n+10]]+Nr[a[n+11]]+Nr[a[n+12]]+Nr[a[n+13]]+Nr[a[n+14]]+Nr[a[n+15]]).toLowerCase()}let bd;const Aw=new Uint8Array(16);function Rw(){if(!bd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bd=crypto.getRandomValues.bind(crypto)}return bd(Aw)}const kw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$y={randomUUID:kw};function Fw(a,n,s){if($y.randomUUID&&!a)return $y.randomUUID();a=a||{};const i=a.random??a.rng?.()??Rw();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Tw(i)}var Jl={exports:{}},Jy;function Pu(){if(Jy)return Jl.exports;Jy=1;var a=typeof Reflect=="object"?Reflect:null,n=a&&typeof a.apply=="function"?a.apply:function(z,Y,Q){return Function.prototype.apply.call(z,Y,Q)},s;a&&typeof a.ownKeys=="function"?s=a.ownKeys:Object.getOwnPropertySymbols?s=function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:s=function(z){return Object.getOwnPropertyNames(z)};function i(B){console&&console.warn&&console.warn(B)}var d=Number.isNaN||function(z){return z!==z};function y(){y.init.call(this)}Jl.exports=y,Jl.exports.once=F,y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var p=10;function g(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(B){if(typeof B!="number"||B<0||d(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");p=B}}),y.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||d(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this};function E(B){return B._maxListeners===void 0?y.defaultMaxListeners:B._maxListeners}y.prototype.getMaxListeners=function(){return E(this)},y.prototype.emit=function(z){for(var Y=[],Q=1;Q<arguments.length;Q++)Y.push(arguments[Q]);var ve=z==="error",qe=this._events;if(qe!==void 0)ve=ve&&qe.error===void 0;else if(!ve)return!1;if(ve){var J;if(Y.length>0&&(J=Y[0]),J instanceof Error)throw J;var pe=new Error("Unhandled error."+(J?" ("+J.message+")":""));throw pe.context=J,pe}var Xe=qe[z];if(Xe===void 0)return!1;if(typeof Xe=="function")n(Xe,this,Y);else for(var ke=Xe.length,wt=C(Xe,ke),Q=0;Q<ke;++Q)n(wt[Q],this,Y);return!0};function m(B,z,Y,Q){var ve,qe,J;if(g(Y),qe=B._events,qe===void 0?(qe=B._events=Object.create(null),B._eventsCount=0):(qe.newListener!==void 0&&(B.emit("newListener",z,Y.listener?Y.listener:Y),qe=B._events),J=qe[z]),J===void 0)J=qe[z]=Y,++B._eventsCount;else if(typeof J=="function"?J=qe[z]=Q?[Y,J]:[J,Y]:Q?J.unshift(Y):J.push(Y),ve=E(B),ve>0&&J.length>ve&&!J.warned){J.warned=!0;var pe=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(z)+" listeners added. Use emitter.setMaxListeners() to increase limit");pe.name="MaxListenersExceededWarning",pe.emitter=B,pe.type=z,pe.count=J.length,i(pe)}return B}y.prototype.addListener=function(z,Y){return m(this,z,Y,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(z,Y){return m(this,z,Y,!0)};function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(B,z,Y){var Q={fired:!1,wrapFn:void 0,target:B,type:z,listener:Y},ve=_.bind(Q);return ve.listener=Y,Q.wrapFn=ve,ve}y.prototype.once=function(z,Y){return g(Y),this.on(z,S(this,z,Y)),this},y.prototype.prependOnceListener=function(z,Y){return g(Y),this.prependListener(z,S(this,z,Y)),this},y.prototype.removeListener=function(z,Y){var Q,ve,qe,J,pe;if(g(Y),ve=this._events,ve===void 0)return this;if(Q=ve[z],Q===void 0)return this;if(Q===Y||Q.listener===Y)--this._eventsCount===0?this._events=Object.create(null):(delete ve[z],ve.removeListener&&this.emit("removeListener",z,Q.listener||Y));else if(typeof Q!="function"){for(qe=-1,J=Q.length-1;J>=0;J--)if(Q[J]===Y||Q[J].listener===Y){pe=Q[J].listener,qe=J;break}if(qe<0)return this;qe===0?Q.shift():O(Q,qe),Q.length===1&&(ve[z]=Q[0]),ve.removeListener!==void 0&&this.emit("removeListener",z,pe||Y)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(z){var Y,Q,ve;if(Q=this._events,Q===void 0)return this;if(Q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Q[z]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Q[z]),this;if(arguments.length===0){var qe=Object.keys(Q),J;for(ve=0;ve<qe.length;++ve)J=qe[ve],J!=="removeListener"&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Y=Q[z],typeof Y=="function")this.removeListener(z,Y);else if(Y!==void 0)for(ve=Y.length-1;ve>=0;ve--)this.removeListener(z,Y[ve]);return this};function D(B,z,Y){var Q=B._events;if(Q===void 0)return[];var ve=Q[z];return ve===void 0?[]:typeof ve=="function"?Y?[ve.listener||ve]:[ve]:Y?U(ve):C(ve,ve.length)}y.prototype.listeners=function(z){return D(this,z,!0)},y.prototype.rawListeners=function(z){return D(this,z,!1)},y.listenerCount=function(B,z){return typeof B.listenerCount=="function"?B.listenerCount(z):M.call(B,z)},y.prototype.listenerCount=M;function M(B){var z=this._events;if(z!==void 0){var Y=z[B];if(typeof Y=="function")return 1;if(Y!==void 0)return Y.length}return 0}y.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function C(B,z){for(var Y=new Array(z),Q=0;Q<z;++Q)Y[Q]=B[Q];return Y}function O(B,z){for(;z+1<B.length;z++)B[z]=B[z+1];B.pop()}function U(B){for(var z=new Array(B.length),Y=0;Y<z.length;++Y)z[Y]=B[Y].listener||B[Y];return z}function F(B,z){return new Promise(function(Y,Q){function ve(J){B.removeListener(z,qe),Q(J)}function qe(){typeof B.removeListener=="function"&&B.removeListener("error",ve),Y([].slice.call(arguments))}I(B,z,qe,{once:!0}),z!=="error"&&P(B,ve,{once:!0})})}function P(B,z,Y){typeof B.on=="function"&&I(B,"error",z,Y)}function I(B,z,Y,Q){if(typeof B.on=="function")Q.once?B.once(z,Y):B.on(z,Y);else if(typeof B.addEventListener=="function")B.addEventListener(z,function ve(qe){Q.once&&B.removeEventListener(z,ve),Y(qe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof B)}return Jl.exports}var Nw=Pu();const Cw=Uu(Nw);var ac={exports:{}},Ow=ac.exports,Wy;function Dw(){return Wy||(Wy=1,function(a,n){(function(i,d){a.exports=d()})(Ow,function(){return function(s){var i={};function d(y){if(i[y])return i[y].exports;var p=i[y]={i:y,l:!1,exports:{}};return s[y].call(p.exports,p,p.exports,d),p.l=!0,p.exports}return d.m=s,d.c=i,d.d=function(y,p,g){d.o(y,p)||Object.defineProperty(y,p,{enumerable:!0,get:g})},d.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},d.t=function(y,p){if(1&p&&(y=d(y)),8&p||4&p&&typeof y=="object"&&y&&y.__esModule)return y;var g=Object.create(null);if(d.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:y}),2&p&&typeof y!="string")for(var E in y)d.d(g,E,(function(m){return y[m]}).bind(null,E));return g},d.n=function(y){var p=y&&y.__esModule?function(){return y.default}:function(){return y};return d.d(p,"a",p),p},d.o=function(y,p){return Object.prototype.hasOwnProperty.call(y,p)},d.p="",d(d.s=22)}([function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0});var y=function(){function m(_,S){for(var D=0;D<S.length;D++){var M=S[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}return function(_,S,D){return S&&m(_.prototype,S),D&&m(_,D),_}}(),p={debug:function(){},info:function(){},warn:function(){},error:function(){}},g=void 0,E=void 0;(i.Log=function(){function m(){(function(S,D){if(!(S instanceof D))throw new TypeError("Cannot call a class as a function")})(this,m)}return m.reset=function(){E=3,g=p},m.debug=function(){if(E>=4){for(var S=arguments.length,D=Array(S),M=0;M<S;M++)D[M]=arguments[M];g.debug.apply(g,Array.from(D))}},m.info=function(){if(E>=3){for(var S=arguments.length,D=Array(S),M=0;M<S;M++)D[M]=arguments[M];g.info.apply(g,Array.from(D))}},m.warn=function(){if(E>=2){for(var S=arguments.length,D=Array(S),M=0;M<S;M++)D[M]=arguments[M];g.warn.apply(g,Array.from(D))}},m.error=function(){if(E>=1){for(var S=arguments.length,D=Array(S),M=0;M<S;M++)D[M]=arguments[M];g.error.apply(g,Array.from(D))}},y(m,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return E},set:function(S){if(!(0<=S&&S<=4))throw new Error("Invalid log level");E=S}},{key:"logger",get:function(){return g},set:function(S){if(!S.debug&&S.info&&(S.debug=S.info),!(S.debug&&S.info&&S.warn&&S.error))throw new Error("Invalid logger");g=S}}]),m}()).reset()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0});var y=function(){function m(_,S){for(var D=0;D<S.length;D++){var M=S[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}return function(_,S,D){return S&&m(_.prototype,S),D&&m(_,D),_}}(),p={setInterval:function(m){function _(S,D){return m.apply(this,arguments)}return _.toString=function(){return m.toString()},_}(function(m,_){return setInterval(m,_)}),clearInterval:function(m){function _(S){return m.apply(this,arguments)}return _.toString=function(){return m.toString()},_}(function(m){return clearInterval(m)})},g=!1,E=null;i.Global=function(){function m(){(function(S,D){if(!(S instanceof D))throw new TypeError("Cannot call a class as a function")})(this,m)}return m._testing=function(){g=!0},m.setXMLHttpRequest=function(S){E=S},y(m,null,[{key:"location",get:function(){if(!g)return location}},{key:"localStorage",get:function(){if(!g&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!g&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!g&&typeof window<"u")return E||XMLHttpRequest}},{key:"timer",get:function(){if(!g)return p}}]),m}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.MetadataService=void 0;var y=function(){function _(S,D){for(var M=0;M<D.length;M++){var C=D[M];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,D,M){return D&&_(S.prototype,D),M&&_(S,M),S}}(),p=d(0),g=d(7);function E(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")}var m=".well-known/openid-configuration";i.MetadataService=function(){function _(S){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.JsonService;if(E(this,_),!S)throw p.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=S,this._jsonService=new D(["application/jwk-set+json"])}return _.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},_.prototype.getMetadata=function(){var D=this;return this._settings.metadata?(p.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(p.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(M){p.Log.debug("MetadataService.getMetadata: json received");var C=D._settings.metadataSeed||{};return D._settings.metadata=Object.assign({},C,M),D._settings.metadata})):(p.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},_.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},_.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},_.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},_.prototype.getTokenEndpoint=function(){var D=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this._getMetadataProperty("token_endpoint",D)},_.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},_.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},_.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},_.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},_.prototype._getMetadataProperty=function(D){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return p.Log.debug("MetadataService.getMetadataProperty for: "+D),this.getMetadata().then(function(C){if(p.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),C[D]===void 0){if(M===!0)return void p.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+D);throw p.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+D),new Error("Metadata does not contain property "+D)}return C[D]})},_.prototype.getSigningKeys=function(){var D=this;return this._settings.signingKeys?(p.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(M){return p.Log.debug("MetadataService.getSigningKeys: jwks_uri received",M),D._jsonService.getJson(M).then(function(C){if(p.Log.debug("MetadataService.getSigningKeys: key set received",C),!C.keys)throw p.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return D._settings.signingKeys=C.keys,D._settings.signingKeys})})},y(_,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(m)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=m))),this._metadataUrl}}]),_}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.UrlUtility=void 0;var y=d(0),p=d(1);i.UrlUtility=function(){function g(){(function(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")})(this,g)}return g.addQueryParam=function(m,_,S){return m.indexOf("?")<0&&(m+="?"),m[m.length-1]!=="?"&&(m+="&"),m+=encodeURIComponent(_),m+="=",m+=encodeURIComponent(S)},g.parseUrlFragment=function(m){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#",S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.Global;typeof m!="string"&&(m=S.location.href);var D=m.lastIndexOf(_);D>=0&&(m=m.substr(D+1)),_==="?"&&(D=m.indexOf("#"))>=0&&(m=m.substr(0,D));for(var M,C={},O=/([^&=]+)=([^&]*)/g,U=0;M=O.exec(m);)if(C[decodeURIComponent(M[1])]=decodeURIComponent(M[2].replace(/\+/g," ")),U++>50)return y.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",m),{error:"Response exceeded expected number of parameters"};for(var F in C)return C;return{}},g}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.JoseUtil=void 0;var y=d(26),p=function(E){return E&&E.__esModule?E:{default:E}}(d(33));i.JoseUtil=(0,p.default)({jws:y.jws,KeyUtil:y.KeyUtil,X509:y.X509,crypto:y.crypto,hextob64u:y.hextob64u,b64tohex:y.b64tohex,AllowedSigningAlgs:y.AllowedSigningAlgs})},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.OidcClientSettings=void 0;var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},p=function(){function F(P,I){for(var B=0;B<I.length;B++){var z=I[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(P,z.key,z)}}return function(P,I,B){return I&&F(P.prototype,I),B&&F(P,B),P}}(),g=d(0),E=d(23),m=d(6),_=d(24),S=d(2);function D(F,P){if(!(F instanceof P))throw new TypeError("Cannot call a class as a function")}var M=".well-known/openid-configuration",C="id_token",O="openid",U="client_secret_post";i.OidcClientSettings=function(){function F(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=P.authority,B=P.metadataUrl,z=P.metadata,Y=P.signingKeys,Q=P.metadataSeed,ve=P.client_id,qe=P.client_secret,J=P.response_type,pe=J===void 0?C:J,Xe=P.scope,ke=Xe===void 0?O:Xe,wt=P.redirect_uri,mt=P.post_logout_redirect_uri,Ne=P.client_authentication,Me=Ne===void 0?U:Ne,Fe=P.prompt,it=P.display,H=P.max_age,he=P.ui_locales,Re=P.acr_values,be=P.resource,tt=P.response_mode,gt=P.filterProtocolClaims,xt=gt===void 0||gt,Ut=P.loadUserInfo,Ye=Ut===void 0||Ut,Ue=P.staleStateAge,bt=Ue===void 0?900:Ue,ue=P.clockSkew,j=ue===void 0?300:ue,T=P.clockService,G=T===void 0?new E.ClockService:T,ee=P.userInfoJwtIssuer,me=ee===void 0?"OP":ee,Se=P.mergeClaims,at=Se!==void 0&&Se,we=P.stateStore,ot=we===void 0?new m.WebStorageStateStore:we,dt=P.ResponseValidatorCtor,ft=dt===void 0?_.ResponseValidator:dt,Dt=P.MetadataServiceCtor,pn=Dt===void 0?S.MetadataService:Dt,At=P.extraQueryParams,Kt=At===void 0?{}:At,$=P.extraTokenParams,R=$===void 0?{}:$;D(this,F),this._authority=I,this._metadataUrl=B,this._metadata=z,this._metadataSeed=Q,this._signingKeys=Y,this._client_id=ve,this._client_secret=qe,this._response_type=pe,this._scope=ke,this._redirect_uri=wt,this._post_logout_redirect_uri=mt,this._client_authentication=Me,this._prompt=Fe,this._display=it,this._max_age=H,this._ui_locales=he,this._acr_values=Re,this._resource=be,this._response_mode=tt,this._filterProtocolClaims=!!xt,this._loadUserInfo=!!Ye,this._staleStateAge=bt,this._clockSkew=j,this._clockService=G,this._userInfoJwtIssuer=me,this._mergeClaims=!!at,this._stateStore=ot,this._validator=new ft(this),this._metadataService=new pn(this),this._extraQueryParams=(Kt===void 0?"undefined":y(Kt))==="object"?Kt:{},this._extraTokenParams=(R===void 0?"undefined":y(R))==="object"?R:{}}return F.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},p(F,[{key:"client_id",get:function(){return this._client_id},set:function(I){if(this._client_id)throw g.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=I}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(I){if(this._authority)throw g.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=I}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(M)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=M)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(I){this._metadata=I}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(I){this._metadataSeed=I}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(I){this._signingKeys=I}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(I){(I===void 0?"undefined":y(I))==="object"?this._extraQueryParams=I:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(I){(I===void 0?"undefined":y(I))==="object"?this._extraTokenParams=I:this._extraTokenParams={}}}]),F}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.WebStorageStateStore=void 0;var y=d(0),p=d(1);function g(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}i.WebStorageStateStore=function(){function E(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=m.prefix,S=_===void 0?"oidc.":_,D=m.store,M=D===void 0?p.Global.localStorage:D;g(this,E),this._store=M,this._prefix=S}return E.prototype.set=function(_,S){return y.Log.debug("WebStorageStateStore.set",_),_=this._prefix+_,this._store.setItem(_,S),Promise.resolve()},E.prototype.get=function(_){y.Log.debug("WebStorageStateStore.get",_),_=this._prefix+_;var S=this._store.getItem(_);return Promise.resolve(S)},E.prototype.remove=function(_){y.Log.debug("WebStorageStateStore.remove",_),_=this._prefix+_;var S=this._store.getItem(_);return this._store.removeItem(_),Promise.resolve(S)},E.prototype.getAllKeys=function(){y.Log.debug("WebStorageStateStore.getAllKeys");for(var _=[],S=0;S<this._store.length;S++){var D=this._store.key(S);D.indexOf(this._prefix)===0&&_.push(D.substr(this._prefix.length))}return Promise.resolve(_)},E}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.JsonService=void 0;var y=d(0),p=d(1);function g(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}i.JsonService=function(){function E(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.Global.XMLHttpRequest,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;g(this,E),m&&Array.isArray(m)?this._contentTypes=m.slice():this._contentTypes=[],this._contentTypes.push("application/json"),S&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=_,this._jwtHandler=S}return E.prototype.getJson=function(_,S){var D=this;if(!_)throw y.Log.error("JsonService.getJson: No url passed"),new Error("url");return y.Log.debug("JsonService.getJson, url: ",_),new Promise(function(M,C){var O=new D._XMLHttpRequest;O.open("GET",_);var U=D._contentTypes,F=D._jwtHandler;O.onload=function(){if(y.Log.debug("JsonService.getJson: HTTP response received, status",O.status),O.status===200){var P=O.getResponseHeader("Content-Type");if(P){var I=U.find(function(B){if(P.startsWith(B))return!0});if(I=="application/jwt")return void F(O).then(M,C);if(I)try{return void M(JSON.parse(O.responseText))}catch(B){return y.Log.error("JsonService.getJson: Error parsing JSON response",B.message),void C(B)}}C(Error("Invalid response Content-Type: "+P+", from URL: "+_))}else C(Error(O.statusText+" ("+O.status+")"))},O.onerror=function(){y.Log.error("JsonService.getJson: network error"),C(Error("Network Error"))},S&&(y.Log.debug("JsonService.getJson: token passed, setting Authorization header"),O.setRequestHeader("Authorization","Bearer "+S)),O.send()})},E.prototype.postForm=function(_,S,D){var M=this;if(!_)throw y.Log.error("JsonService.postForm: No url passed"),new Error("url");return y.Log.debug("JsonService.postForm, url: ",_),new Promise(function(C,O){var U=new M._XMLHttpRequest;U.open("POST",_);var F=M._contentTypes;U.onload=function(){if(y.Log.debug("JsonService.postForm: HTTP response received, status",U.status),U.status!==200){if(U.status===400&&(Y=U.getResponseHeader("Content-Type"))&&F.find(function(Q){if(Y.startsWith(Q))return!0}))try{var z=JSON.parse(U.responseText);if(z&&z.error)return y.Log.error("JsonService.postForm: Error from server: ",z.error),void O(new Error(z.error))}catch(Q){return y.Log.error("JsonService.postForm: Error parsing JSON response",Q.message),void O(Q)}O(Error(U.statusText+" ("+U.status+")"))}else{var Y;if((Y=U.getResponseHeader("Content-Type"))&&F.find(function(Q){if(Y.startsWith(Q))return!0}))try{return void C(JSON.parse(U.responseText))}catch(Q){return y.Log.error("JsonService.postForm: Error parsing JSON response",Q.message),void O(Q)}O(Error("Invalid response Content-Type: "+Y+", from URL: "+_))}},U.onerror=function(){y.Log.error("JsonService.postForm: network error"),O(Error("Network Error"))};var P="";for(var I in S){var B=S[I];B&&(P.length>0&&(P+="&"),P+=encodeURIComponent(I),P+="=",P+=encodeURIComponent(B))}U.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),D!==void 0&&U.setRequestHeader("Authorization","Basic "+btoa(D)),U.send(P)})},E}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.SigninRequest=void 0;var y=d(0),p=d(3),g=d(13);i.SigninRequest=function(){function E(m){var _=m.url,S=m.client_id,D=m.redirect_uri,M=m.response_type,C=m.scope,O=m.authority,U=m.data,F=m.prompt,P=m.display,I=m.max_age,B=m.ui_locales,z=m.id_token_hint,Y=m.login_hint,Q=m.acr_values,ve=m.resource,qe=m.response_mode,J=m.request,pe=m.request_uri,Xe=m.extraQueryParams,ke=m.request_type,wt=m.client_secret,mt=m.extraTokenParams,Ne=m.skipUserInfo;if(function(be,tt){if(!(be instanceof tt))throw new TypeError("Cannot call a class as a function")}(this,E),!_)throw y.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!S)throw y.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!D)throw y.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!M)throw y.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!C)throw y.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!O)throw y.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var Me=E.isOidc(M),Fe=E.isCode(M);qe||(qe=E.isCode(M)?"query":null),this.state=new g.SigninState({nonce:Me,data:U,client_id:S,authority:O,redirect_uri:D,code_verifier:Fe,request_type:ke,response_mode:qe,client_secret:wt,scope:C,extraTokenParams:mt,skipUserInfo:Ne}),_=p.UrlUtility.addQueryParam(_,"client_id",S),_=p.UrlUtility.addQueryParam(_,"redirect_uri",D),_=p.UrlUtility.addQueryParam(_,"response_type",M),_=p.UrlUtility.addQueryParam(_,"scope",C),_=p.UrlUtility.addQueryParam(_,"state",this.state.id),Me&&(_=p.UrlUtility.addQueryParam(_,"nonce",this.state.nonce)),Fe&&(_=p.UrlUtility.addQueryParam(_,"code_challenge",this.state.code_challenge),_=p.UrlUtility.addQueryParam(_,"code_challenge_method","S256"));var it={prompt:F,display:P,max_age:I,ui_locales:B,id_token_hint:z,login_hint:Y,acr_values:Q,resource:ve,request:J,request_uri:pe,response_mode:qe};for(var H in it)it[H]&&(_=p.UrlUtility.addQueryParam(_,H,it[H]));for(var he in Xe)_=p.UrlUtility.addQueryParam(_,he,Xe[he]);this.url=_}return E.isOidc=function(_){return!!_.split(/\s+/g).filter(function(S){return S==="id_token"})[0]},E.isOAuth=function(_){return!!_.split(/\s+/g).filter(function(S){return S==="token"})[0]},E.isCode=function(_){return!!_.split(/\s+/g).filter(function(S){return S==="code"})[0]},E}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.State=void 0;var y=function(){function m(_,S){for(var D=0;D<S.length;D++){var M=S[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,M.key,M)}}return function(_,S,D){return S&&m(_.prototype,S),D&&m(_,D),_}}(),p=d(0),g=function(_){return _&&_.__esModule?_:{default:_}}(d(14));function E(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}i.State=function(){function m(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=_.id,D=_.data,M=_.created,C=_.request_type;E(this,m),this._id=S||(0,g.default)(),this._data=D,this._created=typeof M=="number"&&M>0?M:parseInt(Date.now()/1e3),this._request_type=C}return m.prototype.toStorageString=function(){return p.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},m.fromStorageString=function(S){return p.Log.debug("State.fromStorageString"),new m(JSON.parse(S))},m.clearStaleState=function(S,D){var M=Date.now()/1e3-D;return S.getAllKeys().then(function(C){p.Log.debug("State.clearStaleState: got keys",C);for(var O=[],U=function(B){var z=C[B];P=S.get(z).then(function(Y){var Q=!1;if(Y)try{var ve=m.fromStorageString(Y);p.Log.debug("State.clearStaleState: got item from key: ",z,ve.created),ve.created<=M&&(Q=!0)}catch(qe){p.Log.error("State.clearStaleState: Error parsing state for key",z,qe.message),Q=!0}else p.Log.debug("State.clearStaleState: no item in storage for key: ",z),Q=!0;if(Q)return p.Log.debug("State.clearStaleState: removed item for key: ",z),S.remove(z)}),O.push(P)},F=0;F<C.length;F++){var P;U(F)}return p.Log.debug("State.clearStaleState: waiting on promise count:",O.length),Promise.all(O)})},y(m,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),m}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.OidcClient=void 0;var y=function(){function U(F,P){for(var I=0;I<P.length;I++){var B=P[I];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(F,B.key,B)}}return function(F,P,I){return P&&U(F.prototype,P),I&&U(F,I),F}}(),p=d(0),g=d(5),E=d(12),m=d(8),_=d(34),S=d(35),D=d(36),M=d(13),C=d(9);function O(U,F){if(!(U instanceof F))throw new TypeError("Cannot call a class as a function")}i.OidcClient=function(){function U(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};O(this,U),F instanceof g.OidcClientSettings?this._settings=F:this._settings=new g.OidcClientSettings(F)}return U.prototype.createSigninRequest=function(){var P=this,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=I.response_type,z=I.scope,Y=I.redirect_uri,Q=I.data,ve=I.state,qe=I.prompt,J=I.display,pe=I.max_age,Xe=I.ui_locales,ke=I.id_token_hint,wt=I.login_hint,mt=I.acr_values,Ne=I.resource,Me=I.request,Fe=I.request_uri,it=I.response_mode,H=I.extraQueryParams,he=I.extraTokenParams,Re=I.request_type,be=I.skipUserInfo,tt=arguments[1];p.Log.debug("OidcClient.createSigninRequest");var gt=this._settings.client_id;B=B||this._settings.response_type,z=z||this._settings.scope,Y=Y||this._settings.redirect_uri,qe=qe||this._settings.prompt,J=J||this._settings.display,pe=pe||this._settings.max_age,Xe=Xe||this._settings.ui_locales,mt=mt||this._settings.acr_values,Ne=Ne||this._settings.resource,it=it||this._settings.response_mode,H=H||this._settings.extraQueryParams,he=he||this._settings.extraTokenParams;var xt=this._settings.authority;return m.SigninRequest.isCode(B)&&B!=="code"?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(Ut){p.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",Ut);var Ye=new m.SigninRequest({url:Ut,client_id:gt,redirect_uri:Y,response_type:B,scope:z,data:Q||ve,authority:xt,prompt:qe,display:J,max_age:pe,ui_locales:Xe,id_token_hint:ke,login_hint:wt,acr_values:mt,resource:Ne,request:Me,request_uri:Fe,extraQueryParams:H,extraTokenParams:he,request_type:Re,response_mode:it,client_secret:P._settings.client_secret,skipUserInfo:be}),Ue=Ye.state;return(tt=tt||P._stateStore).set(Ue.id,Ue.toStorageString()).then(function(){return Ye})})},U.prototype.readSigninResponseState=function(P,I){var B=arguments.length>2&&arguments[2]!==void 0&&arguments[2];p.Log.debug("OidcClient.readSigninResponseState");var z=this._settings.response_mode==="query"||!this._settings.response_mode&&m.SigninRequest.isCode(this._settings.response_type),Y=z?"?":"#",Q=new _.SigninResponse(P,Y);if(!Q.state)return p.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));I=I||this._stateStore;var ve=B?I.remove.bind(I):I.get.bind(I);return ve(Q.state).then(function(qe){if(!qe)throw p.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:M.SigninState.fromStorageString(qe),response:Q}})},U.prototype.processSigninResponse=function(P,I){var B=this;return p.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(P,I,!0).then(function(z){var Y=z.state,Q=z.response;return p.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),B._validator.validateSigninResponse(Y,Q)})},U.prototype.createSignoutRequest=function(){var P=this,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=I.id_token_hint,z=I.data,Y=I.state,Q=I.post_logout_redirect_uri,ve=I.extraQueryParams,qe=I.request_type,J=arguments[1];return p.Log.debug("OidcClient.createSignoutRequest"),Q=Q||this._settings.post_logout_redirect_uri,ve=ve||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(pe){if(!pe)throw p.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");p.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",pe);var Xe=new S.SignoutRequest({url:pe,id_token_hint:B,post_logout_redirect_uri:Q,data:z||Y,extraQueryParams:ve,request_type:qe}),ke=Xe.state;return ke&&(p.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(J=J||P._stateStore).set(ke.id,ke.toStorageString())),Xe})},U.prototype.readSignoutResponseState=function(P,I){var B=arguments.length>2&&arguments[2]!==void 0&&arguments[2];p.Log.debug("OidcClient.readSignoutResponseState");var z=new D.SignoutResponse(P);if(!z.state)return p.Log.debug("OidcClient.readSignoutResponseState: No state in response"),z.error?(p.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",z.error),Promise.reject(new E.ErrorResponse(z))):Promise.resolve({state:void 0,response:z});var Y=z.state;I=I||this._stateStore;var Q=B?I.remove.bind(I):I.get.bind(I);return Q(Y).then(function(ve){if(!ve)throw p.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:C.State.fromStorageString(ve),response:z}})},U.prototype.processSignoutResponse=function(P,I){var B=this;return p.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(P,I,!0).then(function(z){var Y=z.state,Q=z.response;return Y?(p.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),B._validator.validateSignoutResponse(Y,Q)):(p.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),Q)})},U.prototype.clearStaleState=function(P){return p.Log.debug("OidcClient.clearStaleState"),P=P||this._stateStore,C.State.clearStaleState(P,this.settings.staleStateAge)},y(U,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),U}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.TokenClient=void 0;var y=d(7),p=d(2),g=d(0);function E(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}i.TokenClient=function(){function m(_){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.JsonService,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.MetadataService;if(E(this,m),!_)throw g.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=_,this._jsonService=new S,this._metadataService=new D(this._settings)}return m.prototype.exchangeCode=function(){var S=this,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(D=Object.assign({},D)).grant_type=D.grant_type||"authorization_code",D.client_id=D.client_id||this._settings.client_id,D.client_secret=D.client_secret||this._settings.client_secret,D.redirect_uri=D.redirect_uri||this._settings.redirect_uri;var M=void 0,C=D._client_authentication||this._settings._client_authentication;return delete D._client_authentication,D.code?D.redirect_uri?D.code_verifier?D.client_id?D.client_secret||C!="client_secret_basic"?(C=="client_secret_basic"&&(M=D.client_id+":"+D.client_secret,delete D.client_id,delete D.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(O){return g.Log.debug("TokenClient.exchangeCode: Received token endpoint"),S._jsonService.postForm(O,D,M).then(function(U){return g.Log.debug("TokenClient.exchangeCode: response received"),U})})):(g.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(g.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(g.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(g.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(g.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},m.prototype.exchangeRefreshToken=function(){var S=this,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(D=Object.assign({},D)).grant_type=D.grant_type||"refresh_token",D.client_id=D.client_id||this._settings.client_id,D.client_secret=D.client_secret||this._settings.client_secret;var M=void 0,C=D._client_authentication||this._settings._client_authentication;return delete D._client_authentication,D.refresh_token?D.client_id?(C=="client_secret_basic"&&(M=D.client_id+":"+D.client_secret,delete D.client_id,delete D.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(O){return g.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),S._jsonService.postForm(O,D,M).then(function(U){return g.Log.debug("TokenClient.exchangeRefreshToken: response received"),U})})):(g.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(g.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},m}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.ErrorResponse=void 0;var y=d(0);function p(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}function g(E,m){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?E:m}i.ErrorResponse=function(E){function m(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=_.error,D=_.error_description,M=_.error_uri,C=_.state,O=_.session_state;if(p(this,m),!S)throw y.Log.error("No error passed to ErrorResponse"),new Error("error");var U=g(this,E.call(this,D||S));return U.name="ErrorResponse",U.error=S,U.error_description=D,U.error_uri=M,U.state=C,U.session_state=O,U}return function(S,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);S.prototype=Object.create(D&&D.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(S,D):S.__proto__=D)}(m,E),m}(Error)},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.SigninState=void 0;var y=function(){function D(M,C){for(var O=0;O<C.length;O++){var U=C[O];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(M,U.key,U)}}return function(M,C,O){return C&&D(M.prototype,C),O&&D(M,O),M}}(),p=d(0),g=d(9),E=d(4),m=function(M){return M&&M.__esModule?M:{default:M}}(d(14));function _(D,M){if(!(D instanceof M))throw new TypeError("Cannot call a class as a function")}function S(D,M){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||typeof M!="object"&&typeof M!="function"?D:M}i.SigninState=function(D){function M(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=C.nonce,U=C.authority,F=C.client_id,P=C.redirect_uri,I=C.code_verifier,B=C.response_mode,z=C.client_secret,Y=C.scope,Q=C.extraTokenParams,ve=C.skipUserInfo;_(this,M);var qe=S(this,D.call(this,arguments[0]));if(O===!0?qe._nonce=(0,m.default)():O&&(qe._nonce=O),I===!0?qe._code_verifier=(0,m.default)()+(0,m.default)()+(0,m.default)():I&&(qe._code_verifier=I),qe.code_verifier){var J=E.JoseUtil.hashString(qe.code_verifier,"SHA256");qe._code_challenge=E.JoseUtil.hexToBase64Url(J)}return qe._redirect_uri=P,qe._authority=U,qe._client_id=F,qe._response_mode=B,qe._client_secret=z,qe._scope=Y,qe._extraTokenParams=Q,qe._skipUserInfo=ve,qe}return function(O,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);O.prototype=Object.create(U&&U.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(O,U):O.__proto__=U)}(M,D),M.prototype.toStorageString=function(){return p.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},M.fromStorageString=function(O){return p.Log.debug("SigninState.fromStorageString"),new M(JSON.parse(O))},y(M,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),M}(g.State)},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){return(y!="undefined"&&y!==null&&y.getRandomValues!==void 0?p:g)().replace(/-/g,"")};var y=typeof window<"u"?window.crypto||window.msCrypto:null;function p(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(E){return(E^y.getRandomValues(new Uint8Array(1))[0]&15>>E/4).toString(16)})}function g(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(E){return(E^16*Math.random()>>E/4).toString(16)})}s.exports=i.default},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.User=void 0;var y=function(){function g(E,m){for(var _=0;_<m.length;_++){var S=m[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(E,S.key,S)}}return function(E,m,_){return m&&g(E.prototype,m),_&&g(E,_),E}}(),p=d(0);i.User=function(){function g(E){var m=E.id_token,_=E.session_state,S=E.access_token,D=E.refresh_token,M=E.token_type,C=E.scope,O=E.profile,U=E.expires_at,F=E.state;(function(I,B){if(!(I instanceof B))throw new TypeError("Cannot call a class as a function")})(this,g),this.id_token=m,this.session_state=_,this.access_token=S,this.refresh_token=D,this.token_type=M,this.scope=C,this.profile=O,this.expires_at=U,this.state=F}return g.prototype.toStorageString=function(){return p.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},g.fromStorageString=function(m){return p.Log.debug("User.fromStorageString"),new g(JSON.parse(m))},y(g,[{key:"expires_in",get:function(){if(this.expires_at){var m=parseInt(Date.now()/1e3);return this.expires_at-m}},set:function(m){var _=parseInt(m);if(typeof _=="number"&&_>0){var S=parseInt(Date.now()/1e3);this.expires_at=S+_}}},{key:"expired",get:function(){var m=this.expires_in;if(m!==void 0)return m<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),g}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.AccessTokenEvents=void 0;var y=d(0),p=d(46);function g(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}i.AccessTokenEvents=function(){function E(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=m.accessTokenExpiringNotificationTime,S=_===void 0?60:_,D=m.accessTokenExpiringTimer,M=D===void 0?new p.Timer("Access token expiring"):D,C=m.accessTokenExpiredTimer,O=C===void 0?new p.Timer("Access token expired"):C;g(this,E),this._accessTokenExpiringNotificationTime=S,this._accessTokenExpiring=M,this._accessTokenExpired=O}return E.prototype.load=function(_){if(_.access_token&&_.expires_in!==void 0){var S=_.expires_in;if(y.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",S),S>0){var D=S-this._accessTokenExpiringNotificationTime;D<=0&&(D=1),y.Log.debug("AccessTokenEvents.load: registering expiring timer in:",D),this._accessTokenExpiring.init(D)}else y.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var M=S+1;y.Log.debug("AccessTokenEvents.load: registering expired timer in:",M),this._accessTokenExpired.init(M)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},E.prototype.unload=function(){y.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},E.prototype.addAccessTokenExpiring=function(_){this._accessTokenExpiring.addHandler(_)},E.prototype.removeAccessTokenExpiring=function(_){this._accessTokenExpiring.removeHandler(_)},E.prototype.addAccessTokenExpired=function(_){this._accessTokenExpired.addHandler(_)},E.prototype.removeAccessTokenExpired=function(_){this._accessTokenExpired.removeHandler(_)},E}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.Event=void 0;var y=d(0);i.Event=function(){function p(g){(function(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")})(this,p),this._name=g,this._callbacks=[]}return p.prototype.addHandler=function(E){this._callbacks.push(E)},p.prototype.removeHandler=function(E){var m=this._callbacks.findIndex(function(_){return _===E});m>=0&&this._callbacks.splice(m,1)},p.prototype.raise=function(){y.Log.debug("Event: Raising event: "+this._name);for(var E=0;E<this._callbacks.length;E++){var m;(m=this._callbacks)[E].apply(m,arguments)}},p}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.SessionMonitor=void 0;var y=function(){function _(S,D){for(var M=0;M<D.length;M++){var C=D[M];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,D,M){return D&&_(S.prototype,D),M&&_(S,M),S}}(),p=d(0),g=d(19),E=d(1);function m(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")}i.SessionMonitor=function(){function _(S){var D=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.CheckSessionIFrame,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.Global.timer;if(m(this,_),!S)throw p.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=S,this._CheckSessionIFrameCtor=M,this._timer=C,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(O){O?D._start(O):D._settings.monitorAnonymousSession&&D._userManager.querySessionStatus().then(function(U){var F={session_state:U.session_state};U.sub&&U.sid&&(F.profile={sub:U.sub,sid:U.sid}),D._start(F)}).catch(function(U){p.Log.error("SessionMonitor ctor: error from querySessionStatus:",U.message)})}).catch(function(O){p.Log.error("SessionMonitor ctor: error from getUser:",O.message)}))}return _.prototype._start=function(D){var M=this,C=D.session_state;C&&(D.profile?(this._sub=D.profile.sub,this._sid=D.profile.sid,p.Log.debug("SessionMonitor._start: session_state:",C,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,p.Log.debug("SessionMonitor._start: session_state:",C,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(C):this._metadataService.getCheckSessionIframe().then(function(O){if(O){p.Log.debug("SessionMonitor._start: Initializing check session iframe");var U=M._client_id,F=M._checkSessionInterval,P=M._stopCheckSessionOnError;M._checkSessionIFrame=new M._CheckSessionIFrameCtor(M._callback.bind(M),U,O,F,P),M._checkSessionIFrame.load().then(function(){M._checkSessionIFrame.start(C)})}else p.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(O){p.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",O.message)}))},_.prototype._stop=function(){var D=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(p.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var M=this._timer.setInterval(function(){D._timer.clearInterval(M),D._userManager.querySessionStatus().then(function(C){var O={session_state:C.session_state};C.sub&&C.sid&&(O.profile={sub:C.sub,sid:C.sid}),D._start(O)}).catch(function(C){p.Log.error("SessionMonitor: error from querySessionStatus:",C.message)})},1e3)},_.prototype._callback=function(){var D=this;this._userManager.querySessionStatus().then(function(M){var C=!0;M?M.sub===D._sub?(C=!1,D._checkSessionIFrame.start(M.session_state),M.sid===D._sid?p.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",M.session_state):(p.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",M.session_state),D._userManager.events._raiseUserSessionChanged())):p.Log.debug("SessionMonitor._callback: Different subject signed into OP:",M.sub):p.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),C&&(D._sub?(p.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),D._userManager.events._raiseUserSignedOut()):(p.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),D._userManager.events._raiseUserSignedIn()))}).catch(function(M){D._sub&&(p.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",M.message),D._userManager.events._raiseUserSignedOut())})},y(_,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),_}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.CheckSessionIFrame=void 0;var y=d(0);function p(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")}i.CheckSessionIFrame=function(){function g(E,m,_,S){var D=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];p(this,g),this._callback=E,this._client_id=m,this._url=_,this._interval=S||2e3,this._stopOnError=D;var M=_.indexOf("/",_.indexOf("//")+2);this._frame_origin=_.substr(0,M),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=_}return g.prototype.load=function(){var m=this;return new Promise(function(_){m._frame.onload=function(){_()},window.document.body.appendChild(m._frame),m._boundMessageEvent=m._message.bind(m),window.addEventListener("message",m._boundMessageEvent,!1)})},g.prototype._message=function(m){m.origin===this._frame_origin&&m.source===this._frame.contentWindow&&(m.data==="error"?(y.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):m.data==="changed"?(y.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):y.Log.debug("CheckSessionIFrame: "+m.data+" message from check session op iframe"))},g.prototype.start=function(m){var _=this;if(this._session_state!==m){y.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=m;var S=function(){_._frame.contentWindow.postMessage(_._client_id+" "+_._session_state,_._frame_origin)};S(),this._timer=window.setInterval(S,this._interval)}},g.prototype.stop=function(){this._session_state=null,this._timer&&(y.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},g}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.TokenRevocationClient=void 0;var y=d(0),p=d(2),g=d(1);function E(S,D){if(!(S instanceof D))throw new TypeError("Cannot call a class as a function")}var m="access_token",_="refresh_token";i.TokenRevocationClient=function(){function S(D){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.Global.XMLHttpRequest,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.MetadataService;if(E(this,S),!D)throw y.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=D,this._XMLHttpRequestCtor=M,this._metadataService=new C(this._settings)}return S.prototype.revoke=function(M,C){var O=this,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"access_token";if(!M)throw y.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(U!==m&&U!=_)throw y.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(F){if(F){y.Log.debug("TokenRevocationClient.revoke: Revoking "+U);var P=O._settings.client_id,I=O._settings.client_secret;return O._revoke(F,P,I,M,U)}if(C)throw y.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},S.prototype._revoke=function(M,C,O,U,F){var P=this;return new Promise(function(I,B){var z=new P._XMLHttpRequestCtor;z.open("POST",M),z.onload=function(){y.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",z.status),z.status===200?I():B(Error(z.statusText+" ("+z.status+")"))},z.onerror=function(){y.Log.debug("TokenRevocationClient.revoke: Network Error."),B("Network Error")};var Y="client_id="+encodeURIComponent(C);O&&(Y+="&client_secret="+encodeURIComponent(O)),Y+="&token_type_hint="+encodeURIComponent(F),Y+="&token="+encodeURIComponent(U),z.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),z.send(Y)})},S}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.CordovaPopupWindow=void 0;var y=function(){function g(E,m){for(var _=0;_<m.length;_++){var S=m[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(E,S.key,S)}}return function(E,m,_){return m&&g(E.prototype,m),_&&g(E,_),E}}(),p=d(0);i.CordovaPopupWindow=function(){function g(E){var m=this;(function(S,D){if(!(S instanceof D))throw new TypeError("Cannot call a class as a function")})(this,g),this._promise=new Promise(function(_,S){m._resolve=_,m._reject=S}),this.features=E.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=E.popupWindowTarget||"_blank",this.redirect_uri=E.startUrl,p.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return g.prototype._isInAppBrowserInstalled=function(m){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(_){return m.hasOwnProperty(_)})},g.prototype.navigate=function(m){if(m&&m.url){if(!window.cordova)return this._error("cordova is undefined");var _=window.cordova.require("cordova/plugin_list").metadata;if(this._isInAppBrowserInstalled(_)===!1)return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(m.url,this.target,this.features),this._popup?(p.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},g.prototype._loadStartCallback=function(m){m.url.indexOf(this.redirect_uri)===0&&this._success({url:m.url})},g.prototype._exitCallback=function(m){this._error(m)},g.prototype._success=function(m){this._cleanup(),p.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(m)},g.prototype._error=function(m){this._cleanup(),p.Log.error(m),this._reject(new Error(m))},g.prototype.close=function(){this._cleanup()},g.prototype._cleanup=function(){this._popup&&(p.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},y(g,[{key:"promise",get:function(){return this._promise}}]),g}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0});var y=d(0),p=d(10),g=d(5),E=d(6),m=d(37),_=d(38),S=d(16),D=d(2),M=d(48),C=d(49),O=d(19),U=d(20),F=d(18),P=d(1),I=d(15),B=d(50);i.default={Version:B.Version,Log:y.Log,OidcClient:p.OidcClient,OidcClientSettings:g.OidcClientSettings,WebStorageStateStore:E.WebStorageStateStore,InMemoryWebStorage:m.InMemoryWebStorage,UserManager:_.UserManager,AccessTokenEvents:S.AccessTokenEvents,MetadataService:D.MetadataService,CordovaPopupNavigator:M.CordovaPopupNavigator,CordovaIFrameNavigator:C.CordovaIFrameNavigator,CheckSessionIFrame:O.CheckSessionIFrame,TokenRevocationClient:U.TokenRevocationClient,SessionMonitor:F.SessionMonitor,Global:P.Global,User:I.User},s.exports=i.default},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.ClockService=function(){function y(){(function(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")})(this,y)}return y.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},y}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.ResponseValidator=void 0;var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},p=d(0),g=d(2),E=d(25),m=d(11),_=d(12),S=d(4);function D(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}var M=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];i.ResponseValidator=function(){function C(O){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.MetadataService,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.UserInfoService,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.JoseUtil,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:m.TokenClient;if(D(this,C),!O)throw p.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=O,this._metadataService=new U(this._settings),this._userInfoService=new F(this._settings),this._joseUtil=P,this._tokenClient=new I(this._settings)}return C.prototype.validateSigninResponse=function(U,F){var P=this;return p.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(U,F).then(function(I){return p.Log.debug("ResponseValidator.validateSigninResponse: state processed"),P._validateTokens(U,I).then(function(B){return p.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),P._processClaims(U,B).then(function(z){return p.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),z})})})},C.prototype.validateSignoutResponse=function(U,F){return U.id!==F.state?(p.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(p.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),F.state=U.data,F.error?(p.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",F.error),Promise.reject(new _.ErrorResponse(F))):Promise.resolve(F))},C.prototype._processSigninParams=function(U,F){if(U.id!==F.state)return p.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!U.client_id)return p.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!U.authority)return p.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==U.authority)return p.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=U.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==U.client_id)return p.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=U.client_id;return p.Log.debug("ResponseValidator._processSigninParams: state validated"),F.state=U.data,F.error?(p.Log.warn("ResponseValidator._processSigninParams: Response was error",F.error),Promise.reject(new _.ErrorResponse(F))):U.nonce&&!F.id_token?(p.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!U.nonce&&F.id_token?(p.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):U.code_verifier&&!F.code?(p.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!U.code_verifier&&F.code?(p.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(F.scope||(F.scope=U.scope),Promise.resolve(F))},C.prototype._processClaims=function(U,F){var P=this;if(F.isOpenIdConnect){if(p.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),F.profile=this._filterProtocolClaims(F.profile),U.skipUserInfo!==!0&&this._settings.loadUserInfo&&F.access_token)return p.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(F.access_token).then(function(I){return p.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),I.sub!==F.profile.sub?(p.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(F.profile=P._mergeClaims(F.profile,I),p.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",F.profile),F)});p.Log.debug("ResponseValidator._processClaims: not loading user info")}else p.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(F)},C.prototype._mergeClaims=function(U,F){var P=Object.assign({},U);for(var I in F){var B=F[I];Array.isArray(B)||(B=[B]);for(var z=0;z<B.length;z++){var Y=B[z];P[I]?Array.isArray(P[I])?P[I].indexOf(Y)<0&&P[I].push(Y):P[I]!==Y&&((Y===void 0?"undefined":y(Y))==="object"&&this._settings.mergeClaims?P[I]=this._mergeClaims(P[I],Y):P[I]=[P[I],Y]):P[I]=Y}}return P},C.prototype._filterProtocolClaims=function(U){p.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",U);var F=Object.assign({},U);return this._settings._filterProtocolClaims?(M.forEach(function(P){delete F[P]}),p.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",F)):p.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),F},C.prototype._validateTokens=function(U,F){return F.code?(p.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(U,F)):F.id_token?F.access_token?(p.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(U,F)):(p.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(U,F)):(p.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(F))},C.prototype._processCode=function(U,F){var P=this,I={client_id:U.client_id,client_secret:U.client_secret,code:F.code,redirect_uri:U.redirect_uri,code_verifier:U.code_verifier};return U.extraTokenParams&&y(U.extraTokenParams)==="object"&&Object.assign(I,U.extraTokenParams),this._tokenClient.exchangeCode(I).then(function(B){for(var z in B)F[z]=B[z];return F.id_token?(p.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),P._validateIdTokenAttributes(U,F)):(p.Log.debug("ResponseValidator._processCode: token response successful, returning response"),F)})},C.prototype._validateIdTokenAttributes=function(U,F){var P=this;return this._metadataService.getIssuer().then(function(I){var B=U.client_id,z=P._settings.clockSkew;return p.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",z),P._settings.getEpochTime().then(function(Y){return P._joseUtil.validateJwtAttributes(F.id_token,I,B,z,Y).then(function(Q){return U.nonce&&U.nonce!==Q.nonce?(p.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):Q.sub?(F.profile=Q,F):(p.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},C.prototype._validateIdTokenAndAccessToken=function(U,F){var P=this;return this._validateIdToken(U,F).then(function(I){return P._validateAccessToken(I)})},C.prototype._getSigningKeyForJwt=function(U){var F=this;return this._metadataService.getSigningKeys().then(function(P){var I=U.header.kid;if(!P)return p.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));p.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var B=void 0;if(I)B=P.filter(function(z){return z.kid===I})[0];else{if((P=F._filterByAlg(P,U.header.alg)).length>1)return p.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));B=P[0]}return Promise.resolve(B)})},C.prototype._getSigningKeyForJwtWithSingleRetry=function(U){var F=this;return this._getSigningKeyForJwt(U).then(function(P){return P?Promise.resolve(P):(F._metadataService.resetSigningKeys(),F._getSigningKeyForJwt(U))})},C.prototype._validateIdToken=function(U,F){var P=this;if(!U.nonce)return p.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var I=this._joseUtil.parseJwt(F.id_token);return I&&I.header&&I.payload?U.nonce!==I.payload.nonce?(p.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(B){return p.Log.debug("ResponseValidator._validateIdToken: Received issuer"),P._getSigningKeyForJwtWithSingleRetry(I).then(function(z){if(!z)return p.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var Y=U.client_id,Q=P._settings.clockSkew;return p.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",Q),P._joseUtil.validateJwt(F.id_token,z,B,Y,Q).then(function(){return p.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),I.payload.sub?(F.profile=I.payload,F):(p.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(p.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",I),Promise.reject(new Error("Failed to parse id_token")))},C.prototype._filterByAlg=function(U,F){var P=null;if(F.startsWith("RS"))P="RSA";else if(F.startsWith("PS"))P="PS";else{if(!F.startsWith("ES"))return p.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",F),[];P="EC"}return p.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",P),U=U.filter(function(I){return I.kty===P}),p.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",P,U.length),U},C.prototype._validateAccessToken=function(U){if(!U.profile)return p.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!U.profile.at_hash)return p.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!U.id_token)return p.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var F=this._joseUtil.parseJwt(U.id_token);if(!F||!F.header)return p.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",F),Promise.reject(new Error("Failed to parse id_token"));var P=F.header.alg;if(!P||P.length!==5)return p.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",P),Promise.reject(new Error("Unsupported alg: "+P));var I=P.substr(2,3);if(!I)return p.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",P,I),Promise.reject(new Error("Unsupported alg: "+P));if((I=parseInt(I))!==256&&I!==384&&I!==512)return p.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",P,I),Promise.reject(new Error("Unsupported alg: "+P));var B="sha"+I,z=this._joseUtil.hashString(U.access_token,B);if(!z)return p.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",B),Promise.reject(new Error("Failed to validate at_hash"));var Y=z.substr(0,z.length/2),Q=this._joseUtil.hexToBase64Url(Y);return Q!==U.profile.at_hash?(p.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",Q,U.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(p.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(U))},C}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.UserInfoService=void 0;var y=d(7),p=d(2),g=d(0),E=d(4);function m(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")}i.UserInfoService=function(){function _(S){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.JsonService,M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.MetadataService,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E.JoseUtil;if(m(this,_),!S)throw g.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=S,this._jsonService=new D(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new M(this._settings),this._joseUtil=C}return _.prototype.getClaims=function(D){var M=this;return D?this._metadataService.getUserInfoEndpoint().then(function(C){return g.Log.debug("UserInfoService.getClaims: received userinfo url",C),M._jsonService.getJson(C,D).then(function(O){return g.Log.debug("UserInfoService.getClaims: claims received",O),O})}):(g.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},_.prototype._getClaimsFromJwt=function(D){var M=this;try{var C=this._joseUtil.parseJwt(D.responseText);if(!C||!C.header||!C.payload)return g.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",C),Promise.reject(new Error("Failed to parse id_token"));var O=C.header.kid,U=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":U=this._metadataService.getIssuer();break;case"ANY":U=Promise.resolve(C.payload.iss);break;default:U=Promise.resolve(this._settings.userInfoJwtIssuer)}return U.then(function(F){return g.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+F),M._metadataService.getSigningKeys().then(function(P){if(!P)return g.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));g.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var I=void 0;if(O)I=P.filter(function(Y){return Y.kid===O})[0];else{if((P=M._filterByAlg(P,C.header.alg)).length>1)return g.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));I=P[0]}if(!I)return g.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var B=M._settings.client_id,z=M._settings.clockSkew;return g.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",z),M._joseUtil.validateJwt(D.responseText,I,F,B,z,void 0,!0).then(function(){return g.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),C.payload})})})}catch(F){return g.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",F.message),void reject(F)}},_.prototype._filterByAlg=function(D,M){var C=null;if(M.startsWith("RS"))C="RSA";else if(M.startsWith("PS"))C="PS";else{if(!M.startsWith("ES"))return g.Log.debug("UserInfoService._filterByAlg: alg not supported: ",M),[];C="EC"}return g.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",C),D=D.filter(function(O){return O.kty===C}),g.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",C,D.length),D},_}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.AllowedSigningAlgs=i.b64tohex=i.hextob64u=i.crypto=i.X509=i.KeyUtil=i.jws=void 0;var y=d(27);i.jws=y.jws,i.KeyUtil=y.KEYUTIL,i.X509=y.X509,i.crypto=y.crypto,i.hextob64u=y.hextob64u,i.b64tohex=y.b64tohex,i.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(s,i,d){(function(y){Object.defineProperty(i,"__esModule",{value:!0});var p,g,E,m,_,S,D,M,C,O,U,F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},P={},I={},B=B||(p=Math,E=(g={}).lib={},m=E.Base=function(){function l(){}return{extend:function(c){l.prototype=this;var v=new l;return c&&v.mixIn(c),v.hasOwnProperty("init")||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var v in c)c.hasOwnProperty(v)&&(this[v]=c[v]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),_=E.WordArray=m.extend({init:function(u,c){u=this.words=u||[],this.sigBytes=c??4*u.length},toString:function(u){return(u||D).stringify(this)},concat:function(u){var c=this.words,v=u.words,x=this.sigBytes,K=u.sigBytes;if(this.clamp(),x%4)for(var W=0;W<K;W++){var ie=v[W>>>2]>>>24-W%4*8&255;c[x+W>>>2]|=ie<<24-(x+W)%4*8}else for(W=0;W<K;W+=4)c[x+W>>>2]=v[W>>>2];return this.sigBytes+=K,this},clamp:function(){var u=this.words,c=this.sigBytes;u[c>>>2]&=4294967295<<32-c%4*8,u.length=p.ceil(c/4)},clone:function(){var u=m.clone.call(this);return u.words=this.words.slice(0),u},random:function(u){for(var c=[],v=0;v<u;v+=4)c.push(4294967296*p.random()|0);return new _.init(c,u)}}),S=g.enc={},D=S.Hex={stringify:function(u){for(var c=u.words,v=u.sigBytes,x=[],K=0;K<v;K++){var W=c[K>>>2]>>>24-K%4*8&255;x.push((W>>>4).toString(16)),x.push((15&W).toString(16))}return x.join("")},parse:function(u){for(var c=u.length,v=[],x=0;x<c;x+=2)v[x>>>3]|=parseInt(u.substr(x,2),16)<<24-x%8*4;return new _.init(v,c/2)}},M=S.Latin1={stringify:function(u){for(var c=u.words,v=u.sigBytes,x=[],K=0;K<v;K++){var W=c[K>>>2]>>>24-K%4*8&255;x.push(String.fromCharCode(W))}return x.join("")},parse:function(u){for(var c=u.length,v=[],x=0;x<c;x++)v[x>>>2]|=(255&u.charCodeAt(x))<<24-x%4*8;return new _.init(v,c)}},C=S.Utf8={stringify:function(u){try{return decodeURIComponent(escape(M.stringify(u)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(u){return M.parse(unescape(encodeURIComponent(u)))}},O=E.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new _.init,this._nDataBytes=0},_append:function(u){typeof u=="string"&&(u=C.parse(u)),this._data.concat(u),this._nDataBytes+=u.sigBytes},_process:function(u){var c=this._data,v=c.words,x=c.sigBytes,K=this.blockSize,W=x/(4*K),ie=(W=u?p.ceil(W):p.max((0|W)-this._minBufferSize,0))*K,ne=p.min(4*ie,x);if(ie){for(var re=0;re<ie;re+=K)this._doProcessBlock(v,re);var fe=v.splice(0,ie);c.sigBytes-=ne}return new _.init(fe,ne)},clone:function(){var u=m.clone.call(this);return u._data=this._data.clone(),u},_minBufferSize:0}),E.Hasher=O.extend({cfg:m.extend(),init:function(u){this.cfg=this.cfg.extend(u),this.reset()},reset:function(){O.reset.call(this),this._doReset()},update:function(u){return this._append(u),this._process(),this},finalize:function(u){return u&&this._append(u),this._doFinalize()},blockSize:16,_createHelper:function(u){return function(c,v){return new u.init(v).finalize(c)}},_createHmacHelper:function(u){return function(c,v){return new U.HMAC.init(u,v).finalize(c)}}}),U=g.algo={},g);(function(l){var u,c=(u=B).lib,v=c.Base,x=c.WordArray;(u=u.x64={}).Word=v.extend({init:function(W,ie){this.high=W,this.low=ie}}),u.WordArray=v.extend({init:function(W,ie){W=this.words=W||[],this.sigBytes=ie??8*W.length},toX32:function(){for(var W=this.words,ie=W.length,ne=[],re=0;re<ie;re++){var fe=W[re];ne.push(fe.high),ne.push(fe.low)}return x.create(ne,this.sigBytes)},clone:function(){for(var W=v.clone.call(this),ie=W.words=this.words.slice(0),ne=ie.length,re=0;re<ne;re++)ie[re]=ie[re].clone();return W}})})(),function(){var l=B,u=l.lib.WordArray;l.enc.Base64={stringify:function(v){var x=v.words,K=v.sigBytes,W=this._map;v.clamp(),v=[];for(var ie=0;ie<K;ie+=3)for(var ne=(x[ie>>>2]>>>24-ie%4*8&255)<<16|(x[ie+1>>>2]>>>24-(ie+1)%4*8&255)<<8|x[ie+2>>>2]>>>24-(ie+2)%4*8&255,re=0;4>re&&ie+.75*re<K;re++)v.push(W.charAt(ne>>>6*(3-re)&63));if(x=W.charAt(64))for(;v.length%4;)v.push(x);return v.join("")},parse:function(v){var x=v.length,K=this._map;(W=K.charAt(64))&&(W=v.indexOf(W))!=-1&&(x=W);for(var W=[],ie=0,ne=0;ne<x;ne++)if(ne%4){var re=K.indexOf(v.charAt(ne-1))<<ne%4*2,fe=K.indexOf(v.charAt(ne))>>>6-ne%4*2;W[ie>>>2]|=(re|fe)<<24-ie%4*8,ie++}return u.create(W,ie)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(l){for(var u=B,c=(x=u.lib).WordArray,v=x.Hasher,x=u.algo,K=[],W=[],ie=function(Ze){return 4294967296*(Ze-(0|Ze))|0},ne=2,re=0;64>re;){var fe;e:{fe=ne;for(var ce=l.sqrt(fe),ye=2;ye<=ce;ye++)if(!(fe%ye)){fe=!1;break e}fe=!0}fe&&(8>re&&(K[re]=ie(l.pow(ne,.5))),W[re]=ie(l.pow(ne,1/3)),re++),ne++}var Ae=[];x=x.SHA256=v.extend({_doReset:function(){this._hash=new c.init(K.slice(0))},_doProcessBlock:function(Ze,nt){for(var X=this._hash.words,le=X[0],oe=X[1],ge=X[2],Je=X[3],ut=X[4],Pt=X[5],_t=X[6],Zt=X[7],It=0;64>It;It++){if(16>It)Ae[It]=0|Ze[nt+It];else{var Ht=Ae[It-15],bn=Ae[It-2];Ae[It]=((Ht<<25|Ht>>>7)^(Ht<<14|Ht>>>18)^Ht>>>3)+Ae[It-7]+((bn<<15|bn>>>17)^(bn<<13|bn>>>19)^bn>>>10)+Ae[It-16]}Ht=Zt+((ut<<26|ut>>>6)^(ut<<21|ut>>>11)^(ut<<7|ut>>>25))+(ut&Pt^~ut&_t)+W[It]+Ae[It],bn=((le<<30|le>>>2)^(le<<19|le>>>13)^(le<<10|le>>>22))+(le&oe^le&ge^oe&ge),Zt=_t,_t=Pt,Pt=ut,ut=Je+Ht|0,Je=ge,ge=oe,oe=le,le=Ht+bn|0}X[0]=X[0]+le|0,X[1]=X[1]+oe|0,X[2]=X[2]+ge|0,X[3]=X[3]+Je|0,X[4]=X[4]+ut|0,X[5]=X[5]+Pt|0,X[6]=X[6]+_t|0,X[7]=X[7]+Zt|0},_doFinalize:function(){var Ze=this._data,nt=Ze.words,X=8*this._nDataBytes,le=8*Ze.sigBytes;return nt[le>>>5]|=128<<24-le%32,nt[14+(le+64>>>9<<4)]=l.floor(X/4294967296),nt[15+(le+64>>>9<<4)]=X,Ze.sigBytes=4*nt.length,this._process(),this._hash},clone:function(){var Ze=v.clone.call(this);return Ze._hash=this._hash.clone(),Ze}}),u.SHA256=v._createHelper(x),u.HmacSHA256=v._createHmacHelper(x)}(Math),function(){function l(){return v.create.apply(v,arguments)}for(var u=B,c=u.lib.Hasher,v=(K=u.x64).Word,x=K.WordArray,K=u.algo,W=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],ie=[],ne=0;80>ne;ne++)ie[ne]=l();K=K.SHA512=c.extend({_doReset:function(){this._hash=new x.init([new v.init(1779033703,4089235720),new v.init(3144134277,2227873595),new v.init(1013904242,4271175723),new v.init(2773480762,1595750129),new v.init(1359893119,2917565137),new v.init(2600822924,725511199),new v.init(528734635,4215389547),new v.init(1541459225,327033209)])},_doProcessBlock:function(fe,ce){for(var ye=(oe=this._hash.words)[0],Ae=oe[1],Ke=oe[2],Ze=oe[3],nt=oe[4],X=oe[5],le=oe[6],oe=oe[7],ge=ye.high,Je=ye.low,ut=Ae.high,Pt=Ae.low,_t=Ke.high,Zt=Ke.low,It=Ze.high,Ht=Ze.low,bn=nt.high,Qt=nt.low,fn=X.high,qn=X.low,Mn=le.high,Bn=le.low,cn=oe.high,Hn=oe.low,_n=ge,Nn=Je,xi=ut,Kr=Pt,Qr=_t,qr=Zt,Pi=It,Wi=Ht,En=bn,Xn=Qt,Li=fn,Ur=qn,Mi=Mn,hi=Bn,la=cn,pi=Hn,gr=0;80>gr;gr++){var Xr=ie[gr];if(16>gr)var zr=Xr.high=0|fe[ce+2*gr],Rn=Xr.low=0|fe[ce+2*gr+1];else{zr=((Rn=(zr=ie[gr-15]).high)>>>1|(Pr=zr.low)<<31)^(Rn>>>8|Pr<<24)^Rn>>>7;var Pr=(Pr>>>1|Rn<<31)^(Pr>>>8|Rn<<24)^(Pr>>>7|Rn<<25),Vr=((Rn=(Vr=ie[gr-2]).high)>>>19|(Un=Vr.low)<<13)^(Rn<<3|Un>>>29)^Rn>>>6,Un=(Un>>>19|Rn<<13)^(Un<<3|Rn>>>29)^(Un>>>6|Rn<<26),Da=(Rn=ie[gr-7]).high,Bi=(Zr=ie[gr-16]).high,Zr=Zr.low;zr=(zr=(zr=zr+Da+((Rn=Pr+Rn.low)>>>0<Pr>>>0?1:0))+Vr+((Rn=Rn+Un)>>>0<Un>>>0?1:0))+Bi+((Rn=Rn+Zr)>>>0<Zr>>>0?1:0),Xr.high=zr,Xr.low=Rn}Da=En&Li^~En&Mi,Zr=Xn&Ur^~Xn&hi,Xr=_n&xi^_n&Qr^xi&Qr;var co=Nn&Kr^Nn&qr^Kr&qr,Ia=(Pr=(_n>>>28|Nn<<4)^(_n<<30|Nn>>>2)^(_n<<25|Nn>>>7),Vr=(Nn>>>28|_n<<4)^(Nn<<30|_n>>>2)^(Nn<<25|_n>>>7),(Un=W[gr]).high),ja=Un.low;Bi=la+((En>>>14|Xn<<18)^(En>>>18|Xn<<14)^(En<<23|Xn>>>9))+((Un=pi+((Xn>>>14|En<<18)^(Xn>>>18|En<<14)^(Xn<<23|En>>>9)))>>>0<pi>>>0?1:0),la=Mi,pi=hi,Mi=Li,hi=Ur,Li=En,Ur=Xn,En=Pi+(Bi=(Bi=(Bi=Bi+Da+((Un=Un+Zr)>>>0<Zr>>>0?1:0))+Ia+((Un=Un+ja)>>>0<ja>>>0?1:0))+zr+((Un=Un+Rn)>>>0<Rn>>>0?1:0))+((Xn=Wi+Un|0)>>>0<Wi>>>0?1:0)|0,Pi=Qr,Wi=qr,Qr=xi,qr=Kr,xi=_n,Kr=Nn,_n=Bi+(Xr=Pr+Xr+((Rn=Vr+co)>>>0<Vr>>>0?1:0))+((Nn=Un+Rn|0)>>>0<Un>>>0?1:0)|0}Je=ye.low=Je+Nn,ye.high=ge+_n+(Je>>>0<Nn>>>0?1:0),Pt=Ae.low=Pt+Kr,Ae.high=ut+xi+(Pt>>>0<Kr>>>0?1:0),Zt=Ke.low=Zt+qr,Ke.high=_t+Qr+(Zt>>>0<qr>>>0?1:0),Ht=Ze.low=Ht+Wi,Ze.high=It+Pi+(Ht>>>0<Wi>>>0?1:0),Qt=nt.low=Qt+Xn,nt.high=bn+En+(Qt>>>0<Xn>>>0?1:0),qn=X.low=qn+Ur,X.high=fn+Li+(qn>>>0<Ur>>>0?1:0),Bn=le.low=Bn+hi,le.high=Mn+Mi+(Bn>>>0<hi>>>0?1:0),Hn=oe.low=Hn+pi,oe.high=cn+la+(Hn>>>0<pi>>>0?1:0)},_doFinalize:function(){var fe=this._data,ce=fe.words,ye=8*this._nDataBytes,Ae=8*fe.sigBytes;return ce[Ae>>>5]|=128<<24-Ae%32,ce[30+(Ae+128>>>10<<5)]=Math.floor(ye/4294967296),ce[31+(Ae+128>>>10<<5)]=ye,fe.sigBytes=4*ce.length,this._process(),this._hash.toX32()},clone:function(){var fe=c.clone.call(this);return fe._hash=this._hash.clone(),fe},blockSize:32}),u.SHA512=c._createHelper(K),u.HmacSHA512=c._createHmacHelper(K)}(),function(){var l=B,u=(x=l.x64).Word,c=x.WordArray,v=(x=l.algo).SHA512,x=x.SHA384=v.extend({_doReset:function(){this._hash=new c.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var W=v._doFinalize.call(this);return W.sigBytes-=16,W}});l.SHA384=v._createHelper(x),l.HmacSHA384=v._createHmacHelper(x)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var z,Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Q(l){var u,c,v="";for(u=0;u+3<=l.length;u+=3)c=parseInt(l.substring(u,u+3),16),v+=Y.charAt(c>>6)+Y.charAt(63&c);for(u+1==l.length?(c=parseInt(l.substring(u,u+1),16),v+=Y.charAt(c<<2)):u+2==l.length&&(c=parseInt(l.substring(u,u+2),16),v+=Y.charAt(c>>2)+Y.charAt((3&c)<<4)),"=";(3&v.length)>0;)v+="=";return v}function ve(l){var u,c,v,x="",K=0;for(u=0;u<l.length&&l.charAt(u)!="=";++u)(v=Y.indexOf(l.charAt(u)))<0||(K==0?(x+=mt(v>>2),c=3&v,K=1):K==1?(x+=mt(c<<2|v>>4),c=15&v,K=2):K==2?(x+=mt(c),x+=mt(v>>2),c=3&v,K=3):(x+=mt(c<<2|v>>4),x+=mt(15&v),K=0));return K==1&&(x+=mt(c<<2)),x}function qe(l){var u,c=ve(l),v=new Array;for(u=0;2*u<c.length;++u)v[u]=parseInt(c.substring(2*u,2*u+2),16);return v}function J(l,u,c){l!=null&&(typeof l=="number"?this.fromNumber(l,u,c):u==null&&typeof l!="string"?this.fromString(l,256):this.fromString(l,u))}function pe(){return new J(null)}P.appName=="Microsoft Internet Explorer"?(J.prototype.am=function(u,c,v,x,K,W){for(var ie=32767&c,ne=c>>15;--W>=0;){var re=32767&this[u],fe=this[u++]>>15,ce=ne*re+fe*ie;K=((re=ie*re+((32767&ce)<<15)+v[x]+(1073741823&K))>>>30)+(ce>>>15)+ne*fe+(K>>>30),v[x++]=1073741823&re}return K},z=30):P.appName!="Netscape"?(J.prototype.am=function(u,c,v,x,K,W){for(;--W>=0;){var ie=c*this[u++]+v[x]+K;K=Math.floor(ie/67108864),v[x++]=67108863&ie}return K},z=26):(J.prototype.am=function(u,c,v,x,K,W){for(var ie=16383&c,ne=c>>14;--W>=0;){var re=16383&this[u],fe=this[u++]>>14,ce=ne*re+fe*ie;K=((re=ie*re+((16383&ce)<<14)+v[x]+K)>>28)+(ce>>14)+ne*fe,v[x++]=268435455&re}return K},z=28),J.prototype.DB=z,J.prototype.DM=(1<<z)-1,J.prototype.DV=1<<z,J.prototype.FV=Math.pow(2,52),J.prototype.F1=52-z,J.prototype.F2=2*z-52;var Xe,ke,wt=new Array;for(Xe=48,ke=0;ke<=9;++ke)wt[Xe++]=ke;for(Xe=97,ke=10;ke<36;++ke)wt[Xe++]=ke;for(Xe=65,ke=10;ke<36;++ke)wt[Xe++]=ke;function mt(l){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(l)}function Ne(l,u){var c=wt[l.charCodeAt(u)];return c??-1}function Me(l){var u=pe();return u.fromInt(l),u}function Fe(l){var u,c=1;return(u=l>>>16)!=0&&(l=u,c+=16),(u=l>>8)!=0&&(l=u,c+=8),(u=l>>4)!=0&&(l=u,c+=4),(u=l>>2)!=0&&(l=u,c+=2),(u=l>>1)!=0&&(l=u,c+=1),c}function it(l){this.m=l}function H(l){this.m=l,this.mp=l.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<l.DB-15)-1,this.mt2=2*l.t}function he(l,u){return l&u}function Re(l,u){return l|u}function be(l,u){return l^u}function tt(l,u){return l&~u}function gt(l){if(l==0)return-1;var u=0;return(65535&l)==0&&(l>>=16,u+=16),(255&l)==0&&(l>>=8,u+=8),(15&l)==0&&(l>>=4,u+=4),(3&l)==0&&(l>>=2,u+=2),(1&l)==0&&++u,u}function xt(l){for(var u=0;l!=0;)l&=l-1,++u;return u}function Ut(){}function Ye(l){return l}function Ue(l){this.r2=pe(),this.q3=pe(),J.ONE.dlShiftTo(2*l.t,this.r2),this.mu=this.r2.divide(l),this.m=l}it.prototype.convert=function(u){return u.s<0||u.compareTo(this.m)>=0?u.mod(this.m):u},it.prototype.revert=function(u){return u},it.prototype.reduce=function(u){u.divRemTo(this.m,null,u)},it.prototype.mulTo=function(u,c,v){u.multiplyTo(c,v),this.reduce(v)},it.prototype.sqrTo=function(u,c){u.squareTo(c),this.reduce(c)},H.prototype.convert=function(u){var c=pe();return u.abs().dlShiftTo(this.m.t,c),c.divRemTo(this.m,null,c),u.s<0&&c.compareTo(J.ZERO)>0&&this.m.subTo(c,c),c},H.prototype.revert=function(u){var c=pe();return u.copyTo(c),this.reduce(c),c},H.prototype.reduce=function(u){for(;u.t<=this.mt2;)u[u.t++]=0;for(var c=0;c<this.m.t;++c){var v=32767&u[c],x=v*this.mpl+((v*this.mph+(u[c]>>15)*this.mpl&this.um)<<15)&u.DM;for(u[v=c+this.m.t]+=this.m.am(0,x,u,c,0,this.m.t);u[v]>=u.DV;)u[v]-=u.DV,u[++v]++}u.clamp(),u.drShiftTo(this.m.t,u),u.compareTo(this.m)>=0&&u.subTo(this.m,u)},H.prototype.mulTo=function(u,c,v){u.multiplyTo(c,v),this.reduce(v)},H.prototype.sqrTo=function(u,c){u.squareTo(c),this.reduce(c)},J.prototype.copyTo=function(u){for(var c=this.t-1;c>=0;--c)u[c]=this[c];u.t=this.t,u.s=this.s},J.prototype.fromInt=function(u){this.t=1,this.s=u<0?-1:0,u>0?this[0]=u:u<-1?this[0]=u+this.DV:this.t=0},J.prototype.fromString=function(u,c){var v;if(c==16)v=4;else if(c==8)v=3;else if(c==256)v=8;else if(c==2)v=1;else if(c==32)v=5;else{if(c!=4)return void this.fromRadix(u,c);v=2}this.t=0,this.s=0;for(var x=u.length,K=!1,W=0;--x>=0;){var ie=v==8?255&u[x]:Ne(u,x);ie<0?u.charAt(x)=="-"&&(K=!0):(K=!1,W==0?this[this.t++]=ie:W+v>this.DB?(this[this.t-1]|=(ie&(1<<this.DB-W)-1)<<W,this[this.t++]=ie>>this.DB-W):this[this.t-1]|=ie<<W,(W+=v)>=this.DB&&(W-=this.DB))}v==8&&(128&u[0])!=0&&(this.s=-1,W>0&&(this[this.t-1]|=(1<<this.DB-W)-1<<W)),this.clamp(),K&&J.ZERO.subTo(this,this)},J.prototype.clamp=function(){for(var u=this.s&this.DM;this.t>0&&this[this.t-1]==u;)--this.t},J.prototype.dlShiftTo=function(u,c){var v;for(v=this.t-1;v>=0;--v)c[v+u]=this[v];for(v=u-1;v>=0;--v)c[v]=0;c.t=this.t+u,c.s=this.s},J.prototype.drShiftTo=function(u,c){for(var v=u;v<this.t;++v)c[v-u]=this[v];c.t=Math.max(this.t-u,0),c.s=this.s},J.prototype.lShiftTo=function(u,c){var v,x=u%this.DB,K=this.DB-x,W=(1<<K)-1,ie=Math.floor(u/this.DB),ne=this.s<<x&this.DM;for(v=this.t-1;v>=0;--v)c[v+ie+1]=this[v]>>K|ne,ne=(this[v]&W)<<x;for(v=ie-1;v>=0;--v)c[v]=0;c[ie]=ne,c.t=this.t+ie+1,c.s=this.s,c.clamp()},J.prototype.rShiftTo=function(u,c){c.s=this.s;var v=Math.floor(u/this.DB);if(v>=this.t)c.t=0;else{var x=u%this.DB,K=this.DB-x,W=(1<<x)-1;c[0]=this[v]>>x;for(var ie=v+1;ie<this.t;++ie)c[ie-v-1]|=(this[ie]&W)<<K,c[ie-v]=this[ie]>>x;x>0&&(c[this.t-v-1]|=(this.s&W)<<K),c.t=this.t-v,c.clamp()}},J.prototype.subTo=function(u,c){for(var v=0,x=0,K=Math.min(u.t,this.t);v<K;)x+=this[v]-u[v],c[v++]=x&this.DM,x>>=this.DB;if(u.t<this.t){for(x-=u.s;v<this.t;)x+=this[v],c[v++]=x&this.DM,x>>=this.DB;x+=this.s}else{for(x+=this.s;v<u.t;)x-=u[v],c[v++]=x&this.DM,x>>=this.DB;x-=u.s}c.s=x<0?-1:0,x<-1?c[v++]=this.DV+x:x>0&&(c[v++]=x),c.t=v,c.clamp()},J.prototype.multiplyTo=function(u,c){var v=this.abs(),x=u.abs(),K=v.t;for(c.t=K+x.t;--K>=0;)c[K]=0;for(K=0;K<x.t;++K)c[K+v.t]=v.am(0,x[K],c,K,0,v.t);c.s=0,c.clamp(),this.s!=u.s&&J.ZERO.subTo(c,c)},J.prototype.squareTo=function(u){for(var c=this.abs(),v=u.t=2*c.t;--v>=0;)u[v]=0;for(v=0;v<c.t-1;++v){var x=c.am(v,c[v],u,2*v,0,1);(u[v+c.t]+=c.am(v+1,2*c[v],u,2*v+1,x,c.t-v-1))>=c.DV&&(u[v+c.t]-=c.DV,u[v+c.t+1]=1)}u.t>0&&(u[u.t-1]+=c.am(v,c[v],u,2*v,0,1)),u.s=0,u.clamp()},J.prototype.divRemTo=function(u,c,v){var x=u.abs();if(!(x.t<=0)){var K=this.abs();if(K.t<x.t)return c?.fromInt(0),void(v!=null&&this.copyTo(v));v==null&&(v=pe());var W=pe(),ie=this.s,ne=u.s,re=this.DB-Fe(x[x.t-1]);re>0?(x.lShiftTo(re,W),K.lShiftTo(re,v)):(x.copyTo(W),K.copyTo(v));var fe=W.t,ce=W[fe-1];if(ce!=0){var ye=ce*(1<<this.F1)+(fe>1?W[fe-2]>>this.F2:0),Ae=this.FV/ye,Ke=(1<<this.F1)/ye,Ze=1<<this.F2,nt=v.t,X=nt-fe,le=c??pe();for(W.dlShiftTo(X,le),v.compareTo(le)>=0&&(v[v.t++]=1,v.subTo(le,v)),J.ONE.dlShiftTo(fe,le),le.subTo(W,W);W.t<fe;)W[W.t++]=0;for(;--X>=0;){var oe=v[--nt]==ce?this.DM:Math.floor(v[nt]*Ae+(v[nt-1]+Ze)*Ke);if((v[nt]+=W.am(0,oe,v,X,0,fe))<oe)for(W.dlShiftTo(X,le),v.subTo(le,v);v[nt]<--oe;)v.subTo(le,v)}c!=null&&(v.drShiftTo(fe,c),ie!=ne&&J.ZERO.subTo(c,c)),v.t=fe,v.clamp(),re>0&&v.rShiftTo(re,v),ie<0&&J.ZERO.subTo(v,v)}}},J.prototype.invDigit=function(){if(this.t<1)return 0;var u=this[0];if((1&u)==0)return 0;var c=3&u;return(c=(c=(c=(c=c*(2-(15&u)*c)&15)*(2-(255&u)*c)&255)*(2-((65535&u)*c&65535))&65535)*(2-u*c%this.DV)%this.DV)>0?this.DV-c:-c},J.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},J.prototype.exp=function(u,c){if(u>4294967295||u<1)return J.ONE;var v=pe(),x=pe(),K=c.convert(this),W=Fe(u)-1;for(K.copyTo(v);--W>=0;)if(c.sqrTo(v,x),(u&1<<W)>0)c.mulTo(x,K,v);else{var ie=v;v=x,x=ie}return c.revert(v)},J.prototype.toString=function(u){if(this.s<0)return"-"+this.negate().toString(u);var c;if(u==16)c=4;else if(u==8)c=3;else if(u==2)c=1;else if(u==32)c=5;else{if(u!=4)return this.toRadix(u);c=2}var v,x=(1<<c)-1,K=!1,W="",ie=this.t,ne=this.DB-ie*this.DB%c;if(ie-- >0)for(ne<this.DB&&(v=this[ie]>>ne)>0&&(K=!0,W=mt(v));ie>=0;)ne<c?(v=(this[ie]&(1<<ne)-1)<<c-ne,v|=this[--ie]>>(ne+=this.DB-c)):(v=this[ie]>>(ne-=c)&x,ne<=0&&(ne+=this.DB,--ie)),v>0&&(K=!0),K&&(W+=mt(v));return K?W:"0"},J.prototype.negate=function(){var u=pe();return J.ZERO.subTo(this,u),u},J.prototype.abs=function(){return this.s<0?this.negate():this},J.prototype.compareTo=function(u){var c=this.s-u.s;if(c!=0)return c;var v=this.t;if((c=v-u.t)!=0)return this.s<0?-c:c;for(;--v>=0;)if((c=this[v]-u[v])!=0)return c;return 0},J.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Fe(this[this.t-1]^this.s&this.DM)},J.prototype.mod=function(u){var c=pe();return this.abs().divRemTo(u,null,c),this.s<0&&c.compareTo(J.ZERO)>0&&u.subTo(c,c),c},J.prototype.modPowInt=function(u,c){var v;return v=u<256||c.isEven()?new it(c):new H(c),this.exp(u,v)},J.ZERO=Me(0),J.ONE=Me(1),Ut.prototype.convert=Ye,Ut.prototype.revert=Ye,Ut.prototype.mulTo=function(u,c,v){u.multiplyTo(c,v)},Ut.prototype.sqrTo=function(u,c){u.squareTo(c)},Ue.prototype.convert=function(u){if(u.s<0||u.t>2*this.m.t)return u.mod(this.m);if(u.compareTo(this.m)<0)return u;var c=pe();return u.copyTo(c),this.reduce(c),c},Ue.prototype.revert=function(u){return u},Ue.prototype.reduce=function(u){for(u.drShiftTo(this.m.t-1,this.r2),u.t>this.m.t+1&&(u.t=this.m.t+1,u.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);u.compareTo(this.r2)<0;)u.dAddOffset(1,this.m.t+1);for(u.subTo(this.r2,u);u.compareTo(this.m)>=0;)u.subTo(this.m,u)},Ue.prototype.mulTo=function(u,c,v){u.multiplyTo(c,v),this.reduce(v)},Ue.prototype.sqrTo=function(u,c){u.squareTo(c),this.reduce(c)};var bt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ue=(1<<26)/bt[bt.length-1];/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function j(){this.i=0,this.j=0,this.S=new Array}J.prototype.chunkSize=function(u){return Math.floor(Math.LN2*this.DB/Math.log(u))},J.prototype.toRadix=function(u){if(u==null&&(u=10),this.signum()==0||u<2||u>36)return"0";var c=this.chunkSize(u),v=Math.pow(u,c),x=Me(v),K=pe(),W=pe(),ie="";for(this.divRemTo(x,K,W);K.signum()>0;)ie=(v+W.intValue()).toString(u).substr(1)+ie,K.divRemTo(x,K,W);return W.intValue().toString(u)+ie},J.prototype.fromRadix=function(u,c){this.fromInt(0),c==null&&(c=10);for(var v=this.chunkSize(c),x=Math.pow(c,v),K=!1,W=0,ie=0,ne=0;ne<u.length;++ne){var re=Ne(u,ne);re<0?u.charAt(ne)=="-"&&this.signum()==0&&(K=!0):(ie=c*ie+re,++W>=v&&(this.dMultiply(x),this.dAddOffset(ie,0),W=0,ie=0))}W>0&&(this.dMultiply(Math.pow(c,W)),this.dAddOffset(ie,0)),K&&J.ZERO.subTo(this,this)},J.prototype.fromNumber=function(u,c,v){if(typeof c=="number")if(u<2)this.fromInt(1);else for(this.fromNumber(u,v),this.testBit(u-1)||this.bitwiseTo(J.ONE.shiftLeft(u-1),Re,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(c);)this.dAddOffset(2,0),this.bitLength()>u&&this.subTo(J.ONE.shiftLeft(u-1),this);else{var x=new Array,K=7&u;x.length=1+(u>>3),c.nextBytes(x),K>0?x[0]&=(1<<K)-1:x[0]=0,this.fromString(x,256)}},J.prototype.bitwiseTo=function(u,c,v){var x,K,W=Math.min(u.t,this.t);for(x=0;x<W;++x)v[x]=c(this[x],u[x]);if(u.t<this.t){for(K=u.s&this.DM,x=W;x<this.t;++x)v[x]=c(this[x],K);v.t=this.t}else{for(K=this.s&this.DM,x=W;x<u.t;++x)v[x]=c(K,u[x]);v.t=u.t}v.s=c(this.s,u.s),v.clamp()},J.prototype.changeBit=function(u,c){var v=J.ONE.shiftLeft(u);return this.bitwiseTo(v,c,v),v},J.prototype.addTo=function(u,c){for(var v=0,x=0,K=Math.min(u.t,this.t);v<K;)x+=this[v]+u[v],c[v++]=x&this.DM,x>>=this.DB;if(u.t<this.t){for(x+=u.s;v<this.t;)x+=this[v],c[v++]=x&this.DM,x>>=this.DB;x+=this.s}else{for(x+=this.s;v<u.t;)x+=u[v],c[v++]=x&this.DM,x>>=this.DB;x+=u.s}c.s=x<0?-1:0,x>0?c[v++]=x:x<-1&&(c[v++]=this.DV+x),c.t=v,c.clamp()},J.prototype.dMultiply=function(u){this[this.t]=this.am(0,u-1,this,0,0,this.t),++this.t,this.clamp()},J.prototype.dAddOffset=function(u,c){if(u!=0){for(;this.t<=c;)this[this.t++]=0;for(this[c]+=u;this[c]>=this.DV;)this[c]-=this.DV,++c>=this.t&&(this[this.t++]=0),++this[c]}},J.prototype.multiplyLowerTo=function(u,c,v){var x,K=Math.min(this.t+u.t,c);for(v.s=0,v.t=K;K>0;)v[--K]=0;for(x=v.t-this.t;K<x;++K)v[K+this.t]=this.am(0,u[K],v,K,0,this.t);for(x=Math.min(u.t,c);K<x;++K)this.am(0,u[K],v,K,0,c-K);v.clamp()},J.prototype.multiplyUpperTo=function(u,c,v){--c;var x=v.t=this.t+u.t-c;for(v.s=0;--x>=0;)v[x]=0;for(x=Math.max(c-this.t,0);x<u.t;++x)v[this.t+x-c]=this.am(c-x,u[x],v,0,0,this.t+x-c);v.clamp(),v.drShiftTo(1,v)},J.prototype.modInt=function(u){if(u<=0)return 0;var c=this.DV%u,v=this.s<0?u-1:0;if(this.t>0)if(c==0)v=this[0]%u;else for(var x=this.t-1;x>=0;--x)v=(c*v+this[x])%u;return v},J.prototype.millerRabin=function(u){var c=this.subtract(J.ONE),v=c.getLowestSetBit();if(v<=0)return!1;var x=c.shiftRight(v);(u=u+1>>1)>bt.length&&(u=bt.length);for(var K=pe(),W=0;W<u;++W){K.fromInt(bt[Math.floor(Math.random()*bt.length)]);var ie=K.modPow(x,this);if(ie.compareTo(J.ONE)!=0&&ie.compareTo(c)!=0){for(var ne=1;ne++<v&&ie.compareTo(c)!=0;)if((ie=ie.modPowInt(2,this)).compareTo(J.ONE)==0)return!1;if(ie.compareTo(c)!=0)return!1}}return!0},J.prototype.clone=function(){var u=pe();return this.copyTo(u),u},J.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},J.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},J.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},J.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},J.prototype.toByteArray=function(){var u=this.t,c=new Array;c[0]=this.s;var v,x=this.DB-u*this.DB%8,K=0;if(u-- >0)for(x<this.DB&&(v=this[u]>>x)!=(this.s&this.DM)>>x&&(c[K++]=v|this.s<<this.DB-x);u>=0;)x<8?(v=(this[u]&(1<<x)-1)<<8-x,v|=this[--u]>>(x+=this.DB-8)):(v=this[u]>>(x-=8)&255,x<=0&&(x+=this.DB,--u)),(128&v)!=0&&(v|=-256),K==0&&(128&this.s)!=(128&v)&&++K,(K>0||v!=this.s)&&(c[K++]=v);return c},J.prototype.equals=function(u){return this.compareTo(u)==0},J.prototype.min=function(u){return this.compareTo(u)<0?this:u},J.prototype.max=function(u){return this.compareTo(u)>0?this:u},J.prototype.and=function(u){var c=pe();return this.bitwiseTo(u,he,c),c},J.prototype.or=function(u){var c=pe();return this.bitwiseTo(u,Re,c),c},J.prototype.xor=function(u){var c=pe();return this.bitwiseTo(u,be,c),c},J.prototype.andNot=function(u){var c=pe();return this.bitwiseTo(u,tt,c),c},J.prototype.not=function(){for(var u=pe(),c=0;c<this.t;++c)u[c]=this.DM&~this[c];return u.t=this.t,u.s=~this.s,u},J.prototype.shiftLeft=function(u){var c=pe();return u<0?this.rShiftTo(-u,c):this.lShiftTo(u,c),c},J.prototype.shiftRight=function(u){var c=pe();return u<0?this.lShiftTo(-u,c):this.rShiftTo(u,c),c},J.prototype.getLowestSetBit=function(){for(var u=0;u<this.t;++u)if(this[u]!=0)return u*this.DB+gt(this[u]);return this.s<0?this.t*this.DB:-1},J.prototype.bitCount=function(){for(var u=0,c=this.s&this.DM,v=0;v<this.t;++v)u+=xt(this[v]^c);return u},J.prototype.testBit=function(u){var c=Math.floor(u/this.DB);return c>=this.t?this.s!=0:(this[c]&1<<u%this.DB)!=0},J.prototype.setBit=function(u){return this.changeBit(u,Re)},J.prototype.clearBit=function(u){return this.changeBit(u,tt)},J.prototype.flipBit=function(u){return this.changeBit(u,be)},J.prototype.add=function(u){var c=pe();return this.addTo(u,c),c},J.prototype.subtract=function(u){var c=pe();return this.subTo(u,c),c},J.prototype.multiply=function(u){var c=pe();return this.multiplyTo(u,c),c},J.prototype.divide=function(u){var c=pe();return this.divRemTo(u,c,null),c},J.prototype.remainder=function(u){var c=pe();return this.divRemTo(u,null,c),c},J.prototype.divideAndRemainder=function(u){var c=pe(),v=pe();return this.divRemTo(u,c,v),new Array(c,v)},J.prototype.modPow=function(u,c){var v,x,K=u.bitLength(),W=Me(1);if(K<=0)return W;v=K<18?1:K<48?3:K<144?4:K<768?5:6,x=K<8?new it(c):c.isEven()?new Ue(c):new H(c);var ie=new Array,ne=3,re=v-1,fe=(1<<v)-1;if(ie[1]=x.convert(this),v>1){var ce=pe();for(x.sqrTo(ie[1],ce);ne<=fe;)ie[ne]=pe(),x.mulTo(ce,ie[ne-2],ie[ne]),ne+=2}var ye,Ae,Ke=u.t-1,Ze=!0,nt=pe();for(K=Fe(u[Ke])-1;Ke>=0;){for(K>=re?ye=u[Ke]>>K-re&fe:(ye=(u[Ke]&(1<<K+1)-1)<<re-K,Ke>0&&(ye|=u[Ke-1]>>this.DB+K-re)),ne=v;(1&ye)==0;)ye>>=1,--ne;if((K-=ne)<0&&(K+=this.DB,--Ke),Ze)ie[ye].copyTo(W),Ze=!1;else{for(;ne>1;)x.sqrTo(W,nt),x.sqrTo(nt,W),ne-=2;ne>0?x.sqrTo(W,nt):(Ae=W,W=nt,nt=Ae),x.mulTo(nt,ie[ye],W)}for(;Ke>=0&&(u[Ke]&1<<K)==0;)x.sqrTo(W,nt),Ae=W,W=nt,nt=Ae,--K<0&&(K=this.DB-1,--Ke)}return x.revert(W)},J.prototype.modInverse=function(u){var c=u.isEven();if(this.isEven()&&c||u.signum()==0)return J.ZERO;for(var v=u.clone(),x=this.clone(),K=Me(1),W=Me(0),ie=Me(0),ne=Me(1);v.signum()!=0;){for(;v.isEven();)v.rShiftTo(1,v),c?(K.isEven()&&W.isEven()||(K.addTo(this,K),W.subTo(u,W)),K.rShiftTo(1,K)):W.isEven()||W.subTo(u,W),W.rShiftTo(1,W);for(;x.isEven();)x.rShiftTo(1,x),c?(ie.isEven()&&ne.isEven()||(ie.addTo(this,ie),ne.subTo(u,ne)),ie.rShiftTo(1,ie)):ne.isEven()||ne.subTo(u,ne),ne.rShiftTo(1,ne);v.compareTo(x)>=0?(v.subTo(x,v),c&&K.subTo(ie,K),W.subTo(ne,W)):(x.subTo(v,x),c&&ie.subTo(K,ie),ne.subTo(W,ne))}return x.compareTo(J.ONE)!=0?J.ZERO:ne.compareTo(u)>=0?ne.subtract(u):ne.signum()<0?(ne.addTo(u,ne),ne.signum()<0?ne.add(u):ne):ne},J.prototype.pow=function(u){return this.exp(u,new Ut)},J.prototype.gcd=function(u){var c=this.s<0?this.negate():this.clone(),v=u.s<0?u.negate():u.clone();if(c.compareTo(v)<0){var x=c;c=v,v=x}var K=c.getLowestSetBit(),W=v.getLowestSetBit();if(W<0)return c;for(K<W&&(W=K),W>0&&(c.rShiftTo(W,c),v.rShiftTo(W,v));c.signum()>0;)(K=c.getLowestSetBit())>0&&c.rShiftTo(K,c),(K=v.getLowestSetBit())>0&&v.rShiftTo(K,v),c.compareTo(v)>=0?(c.subTo(v,c),c.rShiftTo(1,c)):(v.subTo(c,v),v.rShiftTo(1,v));return W>0&&v.lShiftTo(W,v),v},J.prototype.isProbablePrime=function(u){var c,v=this.abs();if(v.t==1&&v[0]<=bt[bt.length-1]){for(c=0;c<bt.length;++c)if(v[0]==bt[c])return!0;return!1}if(v.isEven())return!1;for(c=1;c<bt.length;){for(var x=bt[c],K=c+1;K<bt.length&&x<ue;)x*=bt[K++];for(x=v.modInt(x);c<K;)if(x%bt[c++]==0)return!1}return v.millerRabin(u)},J.prototype.square=function(){var u=pe();return this.squareTo(u),u},j.prototype.init=function(u){var c,v,x;for(c=0;c<256;++c)this.S[c]=c;for(v=0,c=0;c<256;++c)v=v+this.S[c]+u[c%u.length]&255,x=this.S[c],this.S[c]=this.S[v],this.S[v]=x;this.i=0,this.j=0},j.prototype.next=function(){var u;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,u=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=u,this.S[u+this.S[this.i]&255]};var T,G,ee;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function me(){(function(u){G[ee++]^=255&u,G[ee++]^=u>>8&255,G[ee++]^=u>>16&255,G[ee++]^=u>>24&255,ee>=256&&(ee-=256)})(new Date().getTime())}if(G==null){var Se;if(G=new Array,ee=0,I!==void 0&&(I.crypto!==void 0||I.msCrypto!==void 0)){var at=I.crypto||I.msCrypto;if(at.getRandomValues){var we=new Uint8Array(32);for(at.getRandomValues(we),Se=0;Se<32;++Se)G[ee++]=we[Se]}else if(P.appName=="Netscape"&&P.appVersion<"5"){var ot=I.crypto.random(32);for(Se=0;Se<ot.length;++Se)G[ee++]=255&ot.charCodeAt(Se)}}for(;ee<256;)Se=Math.floor(65536*Math.random()),G[ee++]=Se>>>8,G[ee++]=255&Se;ee=0,me()}function dt(){if(T==null){for(me(),(T=function(){return new j}()).init(G),ee=0;ee<G.length;++ee)G[ee]=0;ee=0}return T.next()}function ft(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Dt(l,u){return new J(l,u)}function pn(l,u,c){for(var v="",x=0;v.length<u;)v+=c(String.fromCharCode.apply(String,l.concat([(4278190080&x)>>24,(16711680&x)>>16,(65280&x)>>8,255&x]))),x+=1;return v}function At(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Kt(l,u){this.x=u,this.q=l}function $(l,u,c,v){this.curve=l,this.x=u,this.y=c,this.z=v??J.ONE,this.zinv=null}function R(l,u,c){this.q=l,this.a=this.fromBigInteger(u),this.b=this.fromBigInteger(c),this.infinity=new $(this,null,null)}ft.prototype.nextBytes=function(u){var c;for(c=0;c<u.length;++c)u[c]=dt()},At.prototype.doPublic=function(u){return u.modPowInt(this.e,this.n)},At.prototype.setPublic=function(u,c){if(this.isPublic=!0,this.isPrivate=!1,typeof u!="string")this.n=u,this.e=c;else{if(!(u!=null&&c!=null&&u.length>0&&c.length>0))throw"Invalid RSA public key";this.n=Dt(u,16),this.e=parseInt(c,16)}},At.prototype.encrypt=function(u){var c=function(W,ie){if(ie<W.length+11)throw"Message too long for RSA";for(var ne=new Array,re=W.length-1;re>=0&&ie>0;){var fe=W.charCodeAt(re--);fe<128?ne[--ie]=fe:fe>127&&fe<2048?(ne[--ie]=63&fe|128,ne[--ie]=fe>>6|192):(ne[--ie]=63&fe|128,ne[--ie]=fe>>6&63|128,ne[--ie]=fe>>12|224)}ne[--ie]=0;for(var ce=new ft,ye=new Array;ie>2;){for(ye[0]=0;ye[0]==0;)ce.nextBytes(ye);ne[--ie]=ye[0]}return ne[--ie]=2,ne[--ie]=0,new J(ne)}(u,this.n.bitLength()+7>>3);if(c==null)return null;var v=this.doPublic(c);if(v==null)return null;var x=v.toString(16);return(1&x.length)==0?x:"0"+x},At.prototype.encryptOAEP=function(u,c,v){var x=function(ne,re,fe,ce){var ye=k.crypto.MessageDigest,Ae=k.crypto.Util,Ke=null;if(fe||(fe="sha1"),typeof fe=="string"&&(Ke=ye.getCanonicalAlgName(fe),ce=ye.getHashLength(Ke),fe=function(_t){return or(Ae.hashHex(nr(_t),Ke))}),ne.length+2*ce+2>re)throw"Message too long for RSA";var Ze,nt="";for(Ze=0;Ze<re-ne.length-2*ce-2;Ze+=1)nt+="\0";var X=fe("")+nt+""+ne,le=new Array(ce);new ft().nextBytes(le);var oe=pn(le,X.length,fe),ge=[];for(Ze=0;Ze<X.length;Ze+=1)ge[Ze]=X.charCodeAt(Ze)^oe.charCodeAt(Ze);var Je=pn(ge,le.length,fe),ut=[0];for(Ze=0;Ze<le.length;Ze+=1)ut[Ze+1]=le[Ze]^Je.charCodeAt(Ze);return new J(ut.concat(ge))}(u,this.n.bitLength()+7>>3,c,v);if(x==null)return null;var K=this.doPublic(x);if(K==null)return null;var W=K.toString(16);return(1&W.length)==0?W:"0"+W},At.prototype.type="RSA",Kt.prototype.equals=function(u){return u==this||this.q.equals(u.q)&&this.x.equals(u.x)},Kt.prototype.toBigInteger=function(){return this.x},Kt.prototype.negate=function(){return new Kt(this.q,this.x.negate().mod(this.q))},Kt.prototype.add=function(u){return new Kt(this.q,this.x.add(u.toBigInteger()).mod(this.q))},Kt.prototype.subtract=function(u){return new Kt(this.q,this.x.subtract(u.toBigInteger()).mod(this.q))},Kt.prototype.multiply=function(u){return new Kt(this.q,this.x.multiply(u.toBigInteger()).mod(this.q))},Kt.prototype.square=function(){return new Kt(this.q,this.x.square().mod(this.q))},Kt.prototype.divide=function(u){return new Kt(this.q,this.x.multiply(u.toBigInteger().modInverse(this.q)).mod(this.q))},$.prototype.getX=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},$.prototype.getY=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},$.prototype.equals=function(u){return u==this||(this.isInfinity()?u.isInfinity():u.isInfinity()?this.isInfinity():!!u.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(u.z)).mod(this.curve.q).equals(J.ZERO)&&u.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(u.z)).mod(this.curve.q).equals(J.ZERO))},$.prototype.isInfinity=function(){return this.x==null&&this.y==null||this.z.equals(J.ZERO)&&!this.y.toBigInteger().equals(J.ZERO)},$.prototype.negate=function(){return new $(this.curve,this.x,this.y.negate(),this.z)},$.prototype.add=function(u){if(this.isInfinity())return u;if(u.isInfinity())return this;var c=u.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(u.z)).mod(this.curve.q),v=u.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(u.z)).mod(this.curve.q);if(J.ZERO.equals(v))return J.ZERO.equals(c)?this.twice():this.curve.getInfinity();var x=new J("3"),K=this.x.toBigInteger(),W=this.y.toBigInteger(),ie=(u.x.toBigInteger(),u.y.toBigInteger(),v.square()),ne=ie.multiply(v),re=K.multiply(ie),fe=c.square().multiply(this.z),ce=fe.subtract(re.shiftLeft(1)).multiply(u.z).subtract(ne).multiply(v).mod(this.curve.q),ye=re.multiply(x).multiply(c).subtract(W.multiply(ne)).subtract(fe.multiply(c)).multiply(u.z).add(c.multiply(ne)).mod(this.curve.q),Ae=ne.multiply(this.z).multiply(u.z).mod(this.curve.q);return new $(this.curve,this.curve.fromBigInteger(ce),this.curve.fromBigInteger(ye),Ae)},$.prototype.twice=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var u=new J("3"),c=this.x.toBigInteger(),v=this.y.toBigInteger(),x=v.multiply(this.z),K=x.multiply(v).mod(this.curve.q),W=this.curve.a.toBigInteger(),ie=c.square().multiply(u);J.ZERO.equals(W)||(ie=ie.add(this.z.square().multiply(W)));var ne=(ie=ie.mod(this.curve.q)).square().subtract(c.shiftLeft(3).multiply(K)).shiftLeft(1).multiply(x).mod(this.curve.q),re=ie.multiply(u).multiply(c).subtract(K.shiftLeft(1)).shiftLeft(2).multiply(K).subtract(ie.square().multiply(ie)).mod(this.curve.q),fe=x.square().multiply(x).shiftLeft(3).mod(this.curve.q);return new $(this.curve,this.curve.fromBigInteger(ne),this.curve.fromBigInteger(re),fe)},$.prototype.multiply=function(u){if(this.isInfinity())return this;if(u.signum()==0)return this.curve.getInfinity();var c,v=u,x=v.multiply(new J("3")),K=this.negate(),W=this,ie=this.curve.q.subtract(u),ne=ie.multiply(new J("3")),re=new $(this.curve,this.x,this.y),fe=re.negate();for(c=x.bitLength()-2;c>0;--c){W=W.twice();var ce=x.testBit(c);ce!=v.testBit(c)&&(W=W.add(ce?this:K))}for(c=ne.bitLength()-2;c>0;--c){re=re.twice();var ye=ne.testBit(c);ye!=ie.testBit(c)&&(re=re.add(ye?re:fe))}return W},$.prototype.multiplyTwo=function(u,c,v){var x;x=u.bitLength()>v.bitLength()?u.bitLength()-1:v.bitLength()-1;for(var K=this.curve.getInfinity(),W=this.add(c);x>=0;)K=K.twice(),u.testBit(x)?K=v.testBit(x)?K.add(W):K.add(this):v.testBit(x)&&(K=K.add(c)),--x;return K},R.prototype.getQ=function(){return this.q},R.prototype.getA=function(){return this.a},R.prototype.getB=function(){return this.b},R.prototype.equals=function(u){return u==this||this.q.equals(u.q)&&this.a.equals(u.a)&&this.b.equals(u.b)},R.prototype.getInfinity=function(){return this.infinity},R.prototype.fromBigInteger=function(u){return new Kt(this.q,u)},R.prototype.decodePointHex=function(u){switch(parseInt(u.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var c=(u.length-2)/2,v=u.substr(2,c),x=u.substr(c+2,c);return new $(this,this.fromBigInteger(new J(v,16)),this.fromBigInteger(new J(x,16)));default:return null}},Kt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},$.prototype.getEncoded=function(l){var u=function(W,ie){var ne=W.toByteArrayUnsigned();if(ie<ne.length)ne=ne.slice(ne.length-ie);else for(;ie>ne.length;)ne.unshift(0);return ne},c=this.getX().toBigInteger(),v=this.getY().toBigInteger(),x=u(c,32);return l?v.isEven()?x.unshift(2):x.unshift(3):(x.unshift(4),x=x.concat(u(v,32))),x},$.decodeFrom=function(l,u){u[0];var c=u.length-1,v=u.slice(1,1+c/2),x=u.slice(1+c/2,1+c);v.unshift(0),x.unshift(0);var K=new J(v),W=new J(x);return new $(l,l.fromBigInteger(K),l.fromBigInteger(W))},$.decodeFromHex=function(l,u){u.substr(0,2);var c=u.length-2,v=u.substr(2,c/2),x=u.substr(2+c/2,c/2),K=new J(v,16),W=new J(x,16);return new $(l,l.fromBigInteger(K),l.fromBigInteger(W))},$.prototype.add2D=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;if(this.x.equals(l.x))return this.y.equals(l.y)?this.twice():this.curve.getInfinity();var u=l.x.subtract(this.x),c=l.y.subtract(this.y).divide(u),v=c.square().subtract(this.x).subtract(l.x),x=c.multiply(this.x.subtract(v)).subtract(this.y);return new $(this.curve,v,x)},$.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var l=this.curve.fromBigInteger(J.valueOf(2)),u=this.curve.fromBigInteger(J.valueOf(3)),c=this.x.square().multiply(u).add(this.curve.a).divide(this.y.multiply(l)),v=c.square().subtract(this.x.multiply(l)),x=c.multiply(this.x.subtract(v)).subtract(this.y);return new $(this.curve,v,x)},$.prototype.multiply2D=function(l){if(this.isInfinity())return this;if(l.signum()==0)return this.curve.getInfinity();var u,c=l,v=c.multiply(new J("3")),x=this.negate(),K=this;for(u=v.bitLength()-2;u>0;--u){K=K.twice();var W=v.testBit(u);W!=c.testBit(u)&&(K=K.add2D(W?this:x))}return K},$.prototype.isOnCurve=function(){var l=this.getX().toBigInteger(),u=this.getY().toBigInteger(),c=this.curve.getA().toBigInteger(),v=this.curve.getB().toBigInteger(),x=this.curve.getQ(),K=u.multiply(u).mod(x),W=l.multiply(l).multiply(l).add(c.multiply(l)).add(v).mod(x);return K.equals(W)},$.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},$.prototype.validate=function(){var l=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var u=this.getX().toBigInteger(),c=this.getY().toBigInteger();if(u.compareTo(J.ONE)<0||u.compareTo(l.subtract(J.ONE))>0)throw new Error("x coordinate out of bounds");if(c.compareTo(J.ONE)<0||c.compareTo(l.subtract(J.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(l).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var N=function(){var l=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),u=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),c={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function v(W,ie,ne){return ie?c[ie]:String.fromCharCode(parseInt(ne,16))}var x=new String(""),K=Object.hasOwnProperty;return function(W,ie){var ne,re,fe=W.match(l),ce=fe[0],ye=!1;ce==="{"?ne={}:ce==="["?ne=[]:(ne=[],ye=!0);for(var Ae=[ne],Ke=1-ye,Ze=fe.length;Ke<Ze;++Ke){var nt;switch((ce=fe[Ke]).charCodeAt(0)){default:(nt=Ae[0])[re||nt.length]=+ce,re=void 0;break;case 34:if((ce=ce.substring(1,ce.length-1)).indexOf("\\")!==-1&&(ce=ce.replace(u,v)),nt=Ae[0],!re){if(!(nt instanceof Array)){re=ce||x;break}re=nt.length}nt[re]=ce,re=void 0;break;case 91:nt=Ae[0],Ae.unshift(nt[re||nt.length]=[]),re=void 0;break;case 93:Ae.shift();break;case 102:(nt=Ae[0])[re||nt.length]=!1,re=void 0;break;case 110:(nt=Ae[0])[re||nt.length]=null,re=void 0;break;case 116:(nt=Ae[0])[re||nt.length]=!0,re=void 0;break;case 123:nt=Ae[0],Ae.unshift(nt[re||nt.length]={}),re=void 0;break;case 125:Ae.shift()}}if(ye){if(Ae.length!==1)throw new Error;ne=ne[0]}else if(Ae.length)throw new Error;return ie&&(ne=function X(le,oe){var ge=le[oe];if(ge&&(ge===void 0?"undefined":F(ge))==="object"){var Je=null;for(var ut in ge)if(K.call(ge,ut)&&ge!==le){var Pt=X(ge,ut);Pt!==void 0?ge[ut]=Pt:(Je||(Je=[]),Je.push(ut))}if(Je)for(var _t=Je.length;--_t>=0;)delete ge[Je[_t]]}return ie.call(le,oe,ge)}({"":ne},"")),ne}}();k!==void 0&&k||(i.KJUR=k={}),k.asn1!==void 0&&k.asn1||(k.asn1={}),k.asn1.ASN1Util=new function(){this.integerToByteHex=function(l){var u=l.toString(16);return u.length%2==1&&(u="0"+u),u},this.bigIntToMinTwosComplementsHex=function(l){var u=l.toString(16);if(u.substr(0,1)!="-")u.length%2==1?u="0"+u:u.match(/^[0-7]/)||(u="00"+u);else{var c=u.substr(1).length;c%2==1?c+=1:u.match(/^[0-7]/)||(c+=2);for(var v="",x=0;x<c;x++)v+="f";u=new J(v,16).xor(l).add(J.ONE).toString(16).replace(/^-/,"")}return u},this.getPEMStringFromHex=function(l,u){return St(l,u)},this.newObject=function(l){var u=k.asn1,c=u.ASN1Object,v=u.DERBoolean,x=u.DERInteger,K=u.DERBitString,W=u.DEROctetString,ie=u.DERNull,ne=u.DERObjectIdentifier,re=u.DEREnumerated,fe=u.DERUTF8String,ce=u.DERNumericString,ye=u.DERPrintableString,Ae=u.DERTeletexString,Ke=u.DERIA5String,Ze=u.DERUTCTime,nt=u.DERGeneralizedTime,X=u.DERVisibleString,le=u.DERBMPString,oe=u.DERSequence,ge=u.DERSet,Je=u.DERTaggedObject,ut=u.ASN1Util.newObject;if(l instanceof u.ASN1Object)return l;var Pt=Object.keys(l);if(Pt.length!=1)throw new Error("key of param shall be only one.");var _t=Pt[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+_t+":")==-1)throw new Error("undefined key: "+_t);if(_t=="bool")return new v(l[_t]);if(_t=="int")return new x(l[_t]);if(_t=="bitstr")return new K(l[_t]);if(_t=="octstr")return new W(l[_t]);if(_t=="null")return new ie(l[_t]);if(_t=="oid")return new ne(l[_t]);if(_t=="enum")return new re(l[_t]);if(_t=="utf8str")return new fe(l[_t]);if(_t=="numstr")return new ce(l[_t]);if(_t=="prnstr")return new ye(l[_t]);if(_t=="telstr")return new Ae(l[_t]);if(_t=="ia5str")return new Ke(l[_t]);if(_t=="utctime")return new Ze(l[_t]);if(_t=="gentime")return new nt(l[_t]);if(_t=="visstr")return new X(l[_t]);if(_t=="bmpstr")return new le(l[_t]);if(_t=="asn1")return new c(l[_t]);if(_t=="seq"){for(var Zt=l[_t],It=[],Ht=0;Ht<Zt.length;Ht++){var bn=ut(Zt[Ht]);It.push(bn)}return new oe({array:It})}if(_t=="set"){for(Zt=l[_t],It=[],Ht=0;Ht<Zt.length;Ht++)bn=ut(Zt[Ht]),It.push(bn);return new ge({array:It})}if(_t=="tag"){var Qt=l[_t];if(Object.prototype.toString.call(Qt)==="[object Array]"&&Qt.length==3){var fn=ut(Qt[2]);return new Je({tag:Qt[0],explicit:Qt[1],obj:fn})}return new Je(Qt)}},this.jsonToASN1HEX=function(l){return this.newObject(l).getEncodedHex()}},k.asn1.ASN1Util.oidHexToInt=function(l){for(var u="",c=parseInt(l.substr(0,2),16),v=(u=Math.floor(c/40)+"."+c%40,""),x=2;x<l.length;x+=2){var K=("00000000"+parseInt(l.substr(x,2),16).toString(2)).slice(-8);v+=K.substr(1,7),K.substr(0,1)=="0"&&(u=u+"."+new J(v,2).toString(10),v="")}return u},k.asn1.ASN1Util.oidIntToHex=function(l){var u=function(ne){var re=ne.toString(16);return re.length==1&&(re="0"+re),re},c=function(ne){var re="",fe=new J(ne,10).toString(2),ce=7-fe.length%7;ce==7&&(ce=0);for(var ye="",Ae=0;Ae<ce;Ae++)ye+="0";for(fe=ye+fe,Ae=0;Ae<fe.length-1;Ae+=7){var Ke=fe.substr(Ae,7);Ae!=fe.length-7&&(Ke="1"+Ke),re+=u(parseInt(Ke,2))}return re};if(!l.match(/^[0-9.]+$/))throw"malformed oid string: "+l;var v="",x=l.split("."),K=40*parseInt(x[0])+parseInt(x[1]);v+=u(K),x.splice(0,2);for(var W=0;W<x.length;W++)v+=c(x[W]);return v},k.asn1.ASN1Object=function(l){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var u=this.hV.length/2,c=u.toString(16);if(c.length%2==1&&(c="0"+c),u<128)return c;var v=c.length/2;if(v>15)throw"ASN.1 length too long to represent by 8x: n = "+u.toString(16);return(128+v).toString(16)+c},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(u){this.params=u},l!=null&&l.tlv!=null&&(this.hTLV=l.tlv,this.isModified=!1)},k.asn1.DERAbstractString=function(l){k.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(u){this.hTLV=null,this.isModified=!0,this.s=u,this.hV=jr(this.s).toLowerCase()},this.setStringHex=function(u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=u},this.getFreshValueHex=function(){return this.hV},l!==void 0&&(typeof l=="string"?this.setString(l):l.str!==void 0?this.setString(l.str):l.hex!==void 0&&this.setStringHex(l.hex))},gn(k.asn1.DERAbstractString,k.asn1.ASN1Object),k.asn1.DERAbstractTime=function(l){k.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(u){var c=u.getTime()+6e4*u.getTimezoneOffset();return new Date(c)},this.formatDate=function(u,c,v){var x=this.zeroPadding,K=this.localDateToUTC(u),W=String(K.getFullYear());c=="utc"&&(W=W.substr(2,2));var ie=W+x(String(K.getMonth()+1),2)+x(String(K.getDate()),2)+x(String(K.getHours()),2)+x(String(K.getMinutes()),2)+x(String(K.getSeconds()),2);if(v===!0){var ne=K.getMilliseconds();if(ne!=0){var re=x(String(ne),3);ie=ie+"."+(re=re.replace(/[0]+$/,""))}}return ie+"Z"},this.zeroPadding=function(u,c){return u.length>=c?u:new Array(c-u.length+1).join("0")+u},this.getString=function(){return this.s},this.setString=function(u){this.hTLV=null,this.isModified=!0,this.s=u,this.hV=rn(u)},this.setByDateValue=function(u,c,v,x,K,W){var ie=new Date(Date.UTC(u,c-1,v,x,K,W,0));this.setByDate(ie)},this.getFreshValueHex=function(){return this.hV}},gn(k.asn1.DERAbstractTime,k.asn1.ASN1Object),k.asn1.DERAbstractStructured=function(l){k.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(u){this.hTLV=null,this.isModified=!0,this.asn1Array=u},this.appendASN1Object=function(u){this.hTLV=null,this.isModified=!0,this.asn1Array.push(u)},this.asn1Array=new Array,l!==void 0&&l.array!==void 0&&(this.asn1Array=l.array)},gn(k.asn1.DERAbstractStructured,k.asn1.ASN1Object),k.asn1.DERBoolean=function(l){k.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=l==0?"010100":"0101ff"},gn(k.asn1.DERBoolean,k.asn1.ASN1Object),k.asn1.DERInteger=function(l){k.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(u){this.hTLV=null,this.isModified=!0,this.hV=k.asn1.ASN1Util.bigIntToMinTwosComplementsHex(u)},this.setByInteger=function(u){var c=new J(String(u),10);this.setByBigInteger(c)},this.setValueHex=function(u){this.hV=u},this.getFreshValueHex=function(){return this.hV},l!==void 0&&(l.bigint!==void 0?this.setByBigInteger(l.bigint):l.int!==void 0?this.setByInteger(l.int):typeof l=="number"?this.setByInteger(l):l.hex!==void 0&&this.setValueHex(l.hex))},gn(k.asn1.DERInteger,k.asn1.ASN1Object),k.asn1.DERBitString=function(l){if(l!==void 0&&l.obj!==void 0){var u=k.asn1.ASN1Util.newObject(l.obj);l.hex="00"+u.getEncodedHex()}k.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(c){this.hTLV=null,this.isModified=!0,this.hV=c},this.setUnusedBitsAndHexValue=function(c,v){if(c<0||7<c)throw"unused bits shall be from 0 to 7: u = "+c;var x="0"+c;this.hTLV=null,this.isModified=!0,this.hV=x+v},this.setByBinaryString=function(c){var v=8-(c=c.replace(/0+$/,"")).length%8;v==8&&(v=0);for(var x=0;x<=v;x++)c+="0";var K="";for(x=0;x<c.length-1;x+=8){var W=c.substr(x,8),ie=parseInt(W,2).toString(16);ie.length==1&&(ie="0"+ie),K+=ie}this.hTLV=null,this.isModified=!0,this.hV="0"+v+K},this.setByBooleanArray=function(c){for(var v="",x=0;x<c.length;x++)c[x]==1?v+="1":v+="0";this.setByBinaryString(v)},this.newFalseArray=function(c){for(var v=new Array(c),x=0;x<c;x++)v[x]=!1;return v},this.getFreshValueHex=function(){return this.hV},l!==void 0&&(typeof l=="string"&&l.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(l):l.hex!==void 0?this.setHexValueIncludingUnusedBits(l.hex):l.bin!==void 0?this.setByBinaryString(l.bin):l.array!==void 0&&this.setByBooleanArray(l.array))},gn(k.asn1.DERBitString,k.asn1.ASN1Object),k.asn1.DEROctetString=function(l){if(l!==void 0&&l.obj!==void 0){var u=k.asn1.ASN1Util.newObject(l.obj);l.hex=u.getEncodedHex()}k.asn1.DEROctetString.superclass.constructor.call(this,l),this.hT="04"},gn(k.asn1.DEROctetString,k.asn1.DERAbstractString),k.asn1.DERNull=function(){k.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},gn(k.asn1.DERNull,k.asn1.ASN1Object),k.asn1.DERObjectIdentifier=function(l){k.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=u},this.setValueOidString=function(u){var c=function(x){var K=function(ye){var Ae=ye.toString(16);return Ae.length==1&&(Ae="0"+Ae),Ae},W=function(ye){var Ae="",Ke=parseInt(ye,10).toString(2),Ze=7-Ke.length%7;Ze==7&&(Ze=0);for(var nt="",X=0;X<Ze;X++)nt+="0";for(Ke=nt+Ke,X=0;X<Ke.length-1;X+=7){var le=Ke.substr(X,7);X!=Ke.length-7&&(le="1"+le),Ae+=K(parseInt(le,2))}return Ae};try{if(!x.match(/^[0-9.]+$/))return null;var ie="",ne=x.split("."),re=40*parseInt(ne[0],10)+parseInt(ne[1],10);ie+=K(re),ne.splice(0,2);for(var fe=0;fe<ne.length;fe++)ie+=W(ne[fe]);return ie}catch{return null}}(u);if(c==null)throw new Error("malformed oid string: "+u);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=c},this.setValueName=function(u){var c=k.asn1.x509.OID.name2oid(u);if(c==="")throw new Error("DERObjectIdentifier oidName undefined: "+u);this.setValueOidString(c)},this.setValueNameOrOid=function(u){u.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(u):this.setValueName(u)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(u){typeof u=="string"?this.setValueNameOrOid(u):u.oid!==void 0?this.setValueNameOrOid(u.oid):u.name!==void 0?this.setValueNameOrOid(u.name):u.hex!==void 0&&this.setValueHex(u.hex)},l!==void 0&&this.setByParam(l)},gn(k.asn1.DERObjectIdentifier,k.asn1.ASN1Object),k.asn1.DEREnumerated=function(l){k.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(u){this.hTLV=null,this.isModified=!0,this.hV=k.asn1.ASN1Util.bigIntToMinTwosComplementsHex(u)},this.setByInteger=function(u){var c=new J(String(u),10);this.setByBigInteger(c)},this.setValueHex=function(u){this.hV=u},this.getFreshValueHex=function(){return this.hV},l!==void 0&&(l.int!==void 0?this.setByInteger(l.int):typeof l=="number"?this.setByInteger(l):l.hex!==void 0&&this.setValueHex(l.hex))},gn(k.asn1.DEREnumerated,k.asn1.ASN1Object),k.asn1.DERUTF8String=function(l){k.asn1.DERUTF8String.superclass.constructor.call(this,l),this.hT="0c"},gn(k.asn1.DERUTF8String,k.asn1.DERAbstractString),k.asn1.DERNumericString=function(l){k.asn1.DERNumericString.superclass.constructor.call(this,l),this.hT="12"},gn(k.asn1.DERNumericString,k.asn1.DERAbstractString),k.asn1.DERPrintableString=function(l){k.asn1.DERPrintableString.superclass.constructor.call(this,l),this.hT="13"},gn(k.asn1.DERPrintableString,k.asn1.DERAbstractString),k.asn1.DERTeletexString=function(l){k.asn1.DERTeletexString.superclass.constructor.call(this,l),this.hT="14"},gn(k.asn1.DERTeletexString,k.asn1.DERAbstractString),k.asn1.DERIA5String=function(l){k.asn1.DERIA5String.superclass.constructor.call(this,l),this.hT="16"},gn(k.asn1.DERIA5String,k.asn1.DERAbstractString),k.asn1.DERVisibleString=function(l){k.asn1.DERIA5String.superclass.constructor.call(this,l),this.hT="1a"},gn(k.asn1.DERVisibleString,k.asn1.DERAbstractString),k.asn1.DERBMPString=function(l){k.asn1.DERBMPString.superclass.constructor.call(this,l),this.hT="1e"},gn(k.asn1.DERBMPString,k.asn1.DERAbstractString),k.asn1.DERUTCTime=function(l){k.asn1.DERUTCTime.superclass.constructor.call(this,l),this.hT="17",this.setByDate=function(u){this.hTLV=null,this.isModified=!0,this.date=u,this.s=this.formatDate(this.date,"utc"),this.hV=rn(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=rn(this.s)),this.hV},l!==void 0&&(l.str!==void 0?this.setString(l.str):typeof l=="string"&&l.match(/^[0-9]{12}Z$/)?this.setString(l):l.hex!==void 0?this.setStringHex(l.hex):l.date!==void 0&&this.setByDate(l.date))},gn(k.asn1.DERUTCTime,k.asn1.DERAbstractTime),k.asn1.DERGeneralizedTime=function(l){k.asn1.DERGeneralizedTime.superclass.constructor.call(this,l),this.hT="18",this.withMillis=!1,this.setByDate=function(u){this.hTLV=null,this.isModified=!0,this.date=u,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=rn(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=rn(this.s)),this.hV},l!==void 0&&(l.str!==void 0?this.setString(l.str):typeof l=="string"&&l.match(/^[0-9]{14}Z$/)?this.setString(l):l.hex!==void 0?this.setStringHex(l.hex):l.date!==void 0&&this.setByDate(l.date),l.millis===!0&&(this.withMillis=!0))},gn(k.asn1.DERGeneralizedTime,k.asn1.DERAbstractTime),k.asn1.DERSequence=function(l){k.asn1.DERSequence.superclass.constructor.call(this,l),this.hT="30",this.getFreshValueHex=function(){for(var u="",c=0;c<this.asn1Array.length;c++)u+=this.asn1Array[c].getEncodedHex();return this.hV=u,this.hV}},gn(k.asn1.DERSequence,k.asn1.DERAbstractStructured),k.asn1.DERSet=function(l){k.asn1.DERSet.superclass.constructor.call(this,l),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var u=new Array,c=0;c<this.asn1Array.length;c++){var v=this.asn1Array[c];u.push(v.getEncodedHex())}return this.sortFlag==1&&u.sort(),this.hV=u.join(""),this.hV},l!==void 0&&l.sortflag!==void 0&&l.sortflag==0&&(this.sortFlag=!1)},gn(k.asn1.DERSet,k.asn1.DERAbstractStructured),k.asn1.DERTaggedObject=function(l){k.asn1.DERTaggedObject.superclass.constructor.call(this);var u=k.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(c,v,x){this.hT=v,this.isExplicit=c,this.asn1Object=x,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=x.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,v),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(c){c.tag!=null&&(this.hT=c.tag),c.explicit!=null&&(this.isExplicit=c.explicit),c.tage!=null&&(this.hT=c.tage,this.isExplicit=!0),c.tagi!=null&&(this.hT=c.tagi,this.isExplicit=!1),c.obj!=null&&(c.obj instanceof u.ASN1Object?(this.asn1Object=c.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):F(c.obj)=="object"&&(this.asn1Object=u.ASN1Util.newObject(c.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},l!=null&&this.setByParam(l)},gn(k.asn1.DERTaggedObject,k.asn1.ASN1Object);var k,Ce,Ge,Ie=new function(){};function $t(l){for(var u=new Array,c=0;c<l.length;c++)u[c]=l.charCodeAt(c);return u}function sn(l){for(var u="",c=0;c<l.length;c++)u+=String.fromCharCode(l[c]);return u}function Rt(l){for(var u="",c=0;c<l.length;c++){var v=l[c].toString(16);v.length==1&&(v="0"+v),u+=v}return u}function rn(l){return Rt($t(l))}function an(l){return l=(l=(l=l.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Ir(l){return l.length%4==2?l+="==":l.length%4==3&&(l+="="),l=(l=l.replace(/-/g,"+")).replace(/_/g,"/")}function Tt(l){return l.length%2==1&&(l="0"+l),an(Q(l))}function vn(l){return ve(Ir(l))}function jr(l){return un(sr(l))}function In(l){return decodeURIComponent(si(l))}function or(l){for(var u="",c=0;c<l.length-1;c+=2)u+=String.fromCharCode(parseInt(l.substr(c,2),16));return u}function nr(l){for(var u="",c=0;c<l.length;c++)u+=("0"+l.charCodeAt(c).toString(16)).slice(-2);return u}function Ii(l){return Q(l)}function ae(l){var u=Ii(l).replace(/(.{64})/g,`$1\r
`);return u=u.replace(/\r\n$/,"")}function de(l){return ve(l.replace(/[^0-9A-Za-z\/+=]*/g,""))}function St(l,u){return"-----BEGIN "+u+`-----\r
`+ae(l)+`\r
-----END `+u+`-----\r
`}function Et(l,u){if(l.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+u;return de(l=u!==void 0?(l=l.replace(new RegExp("^[^]*-----BEGIN "+u+"-----"),"")).replace(new RegExp("-----END "+u+"-----[^]*$"),""):(l=l.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Ot(l){var u,c,v,x,K,W,ie,ne,re,fe,ce;if(ce=l.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return ne=ce[1],u=parseInt(ne),ne.length===2&&(50<=u&&u<100?u=1900+u:0<=u&&u<50&&(u=2e3+u)),c=parseInt(ce[2])-1,v=parseInt(ce[3]),x=parseInt(ce[4]),K=parseInt(ce[5]),W=parseInt(ce[6]),ie=0,(re=ce[7])!==""&&(fe=(re.substr(1)+"00").substr(0,3),ie=parseInt(fe)),Date.UTC(u,c,v,x,K,W,ie);throw"unsupported zulu format: "+l}function qt(l){return~~(Ot(l)/1e3)}function un(l){return l.replace(/%/g,"")}function si(l){return l.replace(/(..)/g,"%$1")}function Er(l){var u="malformed IPv6 address";if(!l.match(/^[0-9A-Fa-f:]+$/))throw u;var c=(l=l.toLowerCase()).split(":").length-1;if(c<2)throw u;var v=":".repeat(7-c+2),x=(l=l.replace("::",v)).split(":");if(x.length!=8)throw u;for(var K=0;K<8;K++)x[K]=("0000"+x[K]).slice(-4);return x.join("")}function wi(l){if(!l.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var u=(l=l.toLowerCase()).match(/.{1,4}/g),c=0;c<8;c++)u[c]=u[c].replace(/^0+/,""),u[c]==""&&(u[c]="0");var v=(l=":"+u.join(":")+":").match(/:(0:){2,}/g);if(v===null)return l.slice(1,-1);var x="";for(c=0;c<v.length;c++)v[c].length>x.length&&(x=v[c]);return(l=l.replace(x,"::")).slice(1,-1)}function ui(l){var u="malformed hex value";if(!l.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw u;if(l.length!=8)return l.length==32?wi(l):l;try{return parseInt(l.substr(0,2),16)+"."+parseInt(l.substr(2,2),16)+"."+parseInt(l.substr(4,2),16)+"."+parseInt(l.substr(6,2),16)}catch{throw u}}function li(l){return l.match(/.{4}/g).map(function(c){var v=parseInt(c.substr(0,2),16),x=parseInt(c.substr(2),16);if(v==0&x<128)return String.fromCharCode(x);if(v<8){var K=128|63&x;return In((192|(7&v)<<3|(192&x)>>6).toString(16)+K.toString(16))}K=128|(15&v)<<2|(192&x)>>6;var W=128|63&x;return In((224|(240&v)>>4).toString(16)+K.toString(16)+W.toString(16))}).join("")}function sr(l){for(var u=encodeURIComponent(l),c="",v=0;v<u.length;v++)u[v]=="%"?(c+=u.substr(v,3),v+=2):c=c+"%"+rn(u[v]);return c}function ur(l){return!(l.length%2!=0||!l.match(/^[0-9a-f]+$/)&&!l.match(/^[0-9A-F]+$/))}function Vn(l){return l.length%2==1?"0"+l:l.substr(0,1)>"7"?"00"+l:l}Ie.getLblen=function(l,u){if(l.substr(u+2,1)!="8")return 1;var c=parseInt(l.substr(u+3,1));return c==0?-1:0<c&&c<10?c+1:-2},Ie.getL=function(l,u){var c=Ie.getLblen(l,u);return c<1?"":l.substr(u+2,2*c)},Ie.getVblen=function(l,u){var c;return(c=Ie.getL(l,u))==""?-1:(c.substr(0,1)==="8"?new J(c.substr(2),16):new J(c,16)).intValue()},Ie.getVidx=function(l,u){var c=Ie.getLblen(l,u);return c<0?c:u+2*(c+1)},Ie.getV=function(l,u){var c=Ie.getVidx(l,u),v=Ie.getVblen(l,u);return l.substr(c,2*v)},Ie.getTLV=function(l,u){return l.substr(u,2)+Ie.getL(l,u)+Ie.getV(l,u)},Ie.getTLVblen=function(l,u){return 2+2*Ie.getLblen(l,u)+2*Ie.getVblen(l,u)},Ie.getNextSiblingIdx=function(l,u){return Ie.getVidx(l,u)+2*Ie.getVblen(l,u)},Ie.getChildIdx=function(l,u){var c,v,x,K=Ie,W=[];c=K.getVidx(l,u),v=2*K.getVblen(l,u),l.substr(u,2)=="03"&&(c+=2,v-=2),x=0;for(var ie=c;x<=v;){var ne=K.getTLVblen(l,ie);if((x+=ne)<=v&&W.push(ie),ie+=ne,x>=v)break}return W},Ie.getNthChildIdx=function(l,u,c){return Ie.getChildIdx(l,u)[c]},Ie.getIdxbyList=function(l,u,c,v){var x,K,W=Ie;return c.length==0?v!==void 0&&l.substr(u,2)!==v?-1:u:(x=c.shift())>=(K=W.getChildIdx(l,u)).length?-1:W.getIdxbyList(l,K[x],c,v)},Ie.getIdxbyListEx=function(l,u,c,v){var x,K,W=Ie;if(c.length==0)return v!==void 0&&l.substr(u,2)!==v?-1:u;x=c.shift(),K=W.getChildIdx(l,u);for(var ie=0,ne=0;ne<K.length;ne++){var re=l.substr(K[ne],2);if(typeof x=="number"&&!W.isContextTag(re)&&ie==x||typeof x=="string"&&W.isContextTag(re,x))return W.getIdxbyListEx(l,K[ne],c,v);W.isContextTag(re)||ie++}return-1},Ie.getTLVbyList=function(l,u,c,v){var x=Ie,K=x.getIdxbyList(l,u,c,v);return K==-1||K>=l.length?null:x.getTLV(l,K)},Ie.getTLVbyListEx=function(l,u,c,v){var x=Ie,K=x.getIdxbyListEx(l,u,c,v);return K==-1?null:x.getTLV(l,K)},Ie.getVbyList=function(l,u,c,v,x){var K,W,ie=Ie;return(K=ie.getIdxbyList(l,u,c,v))==-1||K>=l.length?null:(W=ie.getV(l,K),x===!0&&(W=W.substr(2)),W)},Ie.getVbyListEx=function(l,u,c,v,x){var K,W,ie=Ie;return(K=ie.getIdxbyListEx(l,u,c,v))==-1?null:(W=ie.getV(l,K),l.substr(K,2)=="03"&&x!==!1&&(W=W.substr(2)),W)},Ie.getInt=function(l,u,c){c==null&&(c=-1);try{var v=l.substr(u,2);if(v!="02"&&v!="03")return c;var x=Ie.getV(l,u);return v=="02"?parseInt(x,16):function(W){try{var ie=W.substr(0,2);if(ie=="00")return parseInt(W.substr(2),16);var ne=parseInt(ie,16),re=W.substr(2),fe=parseInt(re,16).toString(2);return fe=="0"&&(fe="00000000"),fe=fe.slice(0,0-ne),parseInt(fe,2)}catch{return-1}}(x)}catch{return c}},Ie.getOID=function(l,u,c){c==null&&(c=null);try{return l.substr(u,2)!="06"?c:function(x){if(!ur(x))return null;try{var K=[],W=x.substr(0,2),ie=parseInt(W,16);K[0]=new String(Math.floor(ie/40)),K[1]=new String(ie%40);for(var ne=x.substr(2),re=[],fe=0;fe<ne.length/2;fe++)re.push(parseInt(ne.substr(2*fe,2),16));var ce=[],ye="";for(fe=0;fe<re.length;fe++)128&re[fe]?ye+=xr((127&re[fe]).toString(2),7):(ye+=xr((127&re[fe]).toString(2),7),ce.push(new String(parseInt(ye,2))),ye="");var Ae=K.join(".");return ce.length>0&&(Ae=Ae+"."+ce.join(".")),Ae}catch{return null}}(Ie.getV(l,u))}catch{return c}},Ie.getOIDName=function(l,u,c){c==null&&(c=null);try{var v=Ie.getOID(l,u,c);if(v==c)return c;var x=k.asn1.x509.OID.oid2name(v);return x==""?v:x}catch{return c}},Ie.getString=function(l,u,c){c==null&&(c=null);try{return or(Ie.getV(l,u))}catch{return c}},Ie.hextooidstr=function(l){var u=function(ye,Ae){return ye.length>=Ae?ye:new Array(Ae-ye.length+1).join("0")+ye},c=[],v=l.substr(0,2),x=parseInt(v,16);c[0]=new String(Math.floor(x/40)),c[1]=new String(x%40);for(var K=l.substr(2),W=[],ie=0;ie<K.length/2;ie++)W.push(parseInt(K.substr(2*ie,2),16));var ne=[],re="";for(ie=0;ie<W.length;ie++)128&W[ie]?re+=u((127&W[ie]).toString(2),7):(re+=u((127&W[ie]).toString(2),7),ne.push(new String(parseInt(re,2))),re="");var fe=c.join(".");return ne.length>0&&(fe=fe+"."+ne.join(".")),fe},Ie.dump=function(l,u,c,v){var x=Ie,K=x.getV,W=x.dump,ie=x.getChildIdx,ne=l;l instanceof k.asn1.ASN1Object&&(ne=l.getEncodedHex());var re=function(_t,Zt){return _t.length<=2*Zt?_t:_t.substr(0,Zt)+"..(total "+_t.length/2+"bytes).."+_t.substr(_t.length-Zt,Zt)};u===void 0&&(u={ommit_long_octet:32}),c===void 0&&(c=0),v===void 0&&(v="");var fe,ce=u.ommit_long_octet;if((fe=ne.substr(c,2))=="01")return(ye=K(ne,c))=="00"?v+`BOOLEAN FALSE
`:v+`BOOLEAN TRUE
`;if(fe=="02")return v+"INTEGER "+re(ye=K(ne,c),ce)+`
`;if(fe=="03"){var ye=K(ne,c);if(x.isASN1HEX(ye.substr(2))){var Ae=v+`BITSTRING, encapsulates
`;return Ae+=W(ye.substr(2),u,0,v+"  ")}return v+"BITSTRING "+re(ye,ce)+`
`}if(fe=="04")return ye=K(ne,c),x.isASN1HEX(ye)?(Ae=v+`OCTETSTRING, encapsulates
`,Ae+=W(ye,u,0,v+"  ")):v+"OCTETSTRING "+re(ye,ce)+`
`;if(fe=="05")return v+`NULL
`;if(fe=="06"){var Ke=K(ne,c),Ze=k.asn1.ASN1Util.oidHexToInt(Ke),nt=k.asn1.x509.OID.oid2name(Ze),X=Ze.replace(/\./g," ");return nt!=""?v+"ObjectIdentifier "+nt+" ("+X+`)
`:v+"ObjectIdentifier ("+X+`)
`}if(fe=="0a")return v+"ENUMERATED "+parseInt(K(ne,c))+`
`;if(fe=="0c")return v+"UTF8String '"+In(K(ne,c))+`'
`;if(fe=="13")return v+"PrintableString '"+In(K(ne,c))+`'
`;if(fe=="14")return v+"TeletexString '"+In(K(ne,c))+`'
`;if(fe=="16")return v+"IA5String '"+In(K(ne,c))+`'
`;if(fe=="17")return v+"UTCTime "+In(K(ne,c))+`
`;if(fe=="18")return v+"GeneralizedTime "+In(K(ne,c))+`
`;if(fe=="1a")return v+"VisualString '"+In(K(ne,c))+`'
`;if(fe=="1e")return v+"BMPString '"+li(K(ne,c))+`'
`;if(fe=="30"){if(ne.substr(c,4)=="3000")return v+`SEQUENCE {}
`;Ae=v+`SEQUENCE
`;var le=u;if(((Je=ie(ne,c)).length==2||Je.length==3)&&ne.substr(Je[0],2)=="06"&&ne.substr(Je[Je.length-1],2)=="04"){nt=x.oidname(K(ne,Je[0]));var oe=JSON.parse(JSON.stringify(u));oe.x509ExtName=nt,le=oe}for(var ge=0;ge<Je.length;ge++)Ae+=W(ne,le,Je[ge],v+"  ");return Ae}if(fe=="31"){Ae=v+`SET
`;var Je=ie(ne,c);for(ge=0;ge<Je.length;ge++)Ae+=W(ne,u,Je[ge],v+"  ");return Ae}if((128&(fe=parseInt(fe,16)))!=0){var ut=31&fe;if((32&fe)!=0){for(Ae=v+"["+ut+`]
`,Je=ie(ne,c),ge=0;ge<Je.length;ge++)Ae+=W(ne,u,Je[ge],v+"  ");return Ae}if(ye=K(ne,c),Ie.isASN1HEX(ye)){var Ae=v+"["+ut+`]
`;return Ae+=W(ye,u,0,v+"  ")}return(ye.substr(0,8)=="68747470"||u.x509ExtName==="subjectAltName"&&ut==2)&&(ye=In(ye)),Ae=v+"["+ut+"] "+ye+`
`}return v+"UNKNOWN("+fe+") "+K(ne,c)+`
`},Ie.isContextTag=function(l,u){var c,v;l=l.toLowerCase();try{c=parseInt(l,16)}catch{return-1}if(u===void 0)return(192&c)==128;try{return u.match(/^\[[0-9]+\]$/)!=null&&!((v=parseInt(u.substr(1,u.length-1),10))>31)&&(192&c)==128&&(31&c)==v}catch{return!1}},Ie.isASN1HEX=function(l){var u=Ie;if(l.length%2==1)return!1;var c=u.getVblen(l,0),v=l.substr(0,2),x=u.getL(l,0);return l.length-v.length-x.length==2*c},Ie.checkStrictDER=function(l,u,c,v,x){var K=Ie;if(c===void 0){if(typeof l!="string")throw new Error("not hex string");if(l=l.toLowerCase(),!k.lang.String.isHex(l))throw new Error("not hex string");c=l.length,x=(v=l.length/2)<128?1:Math.ceil(v.toString(16))+1}if(K.getL(l,u).length>2*x)throw new Error("L of TLV too long: idx="+u);var W=K.getVblen(l,u);if(W>v)throw new Error("value of L too long than hex: idx="+u);var ie=K.getTLV(l,u),ne=ie.length-2-K.getL(l,u).length;if(ne!==2*W)throw new Error("V string length and L's value not the same:"+ne+"/"+2*W);if(u===0&&l.length!=ie.length)throw new Error("total length and TLV length unmatch:"+l.length+"!="+ie.length);var re=l.substr(u,2);if(re==="02"){var fe=K.getVidx(l,u);if(l.substr(fe,2)=="00"&&l.charCodeAt(fe+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(re,16)){for(var ce=K.getVblen(l,u),ye=0,Ae=K.getChildIdx(l,u),Ke=0;Ke<Ae.length;Ke++)ye+=K.getTLV(l,Ae[Ke]).length,K.checkStrictDER(l,Ae[Ke],c,v,x);if(2*ce!=ye)throw new Error("sum of children's TLV length and L unmatch: "+2*ce+"!="+ye)}},Ie.oidname=function(l){var u=k.asn1;k.lang.String.isHex(l)&&(l=u.ASN1Util.oidHexToInt(l));var c=u.x509.OID.oid2name(l);return c===""&&(c=l),c},k!==void 0&&k||(i.KJUR=k={}),k.lang!==void 0&&k.lang||(k.lang={}),k.lang.String=function(){},typeof y=="function"?(i.utf8tob64u=Ce=function(u){return an(y.from(u,"utf8").toString("base64"))},i.b64utoutf8=Ge=function(u){return y.from(Ir(u),"base64").toString("utf8")}):(i.utf8tob64u=Ce=function(u){return Tt(un(sr(u)))},i.b64utoutf8=Ge=function(u){return decodeURIComponent(si(vn(u)))}),k.lang.String.isInteger=function(l){return!!l.match(/^[0-9]+$/)||!!l.match(/^-[0-9]+$/)},k.lang.String.isHex=function(l){return ur(l)},k.lang.String.isBase64=function(l){return!(!(l=l.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||l.length%4!=0)},k.lang.String.isBase64URL=function(l){return!l.match(/[+/=]/)&&(l=Ir(l),k.lang.String.isBase64(l))},k.lang.String.isIntegerArray=function(l){return!!(l=l.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},k.lang.String.isPrintable=function(l){return l.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},k.lang.String.isIA5=function(l){return l.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},k.lang.String.isMail=function(l){return l.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var xr=function(u,c,v){return v==null&&(v="0"),u.length>=c?u:new Array(c-u.length+1).join(v)+u};function gn(l,u){var c=function(){};c.prototype=u.prototype,l.prototype=new c,l.prototype.constructor=l,l.superclass=u.prototype,u.prototype.constructor==Object.prototype.constructor&&(u.prototype.constructor=u)}k!==void 0&&k||(i.KJUR=k={}),k.crypto!==void 0&&k.crypto||(k.crypto={}),k.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:B.algo.MD5,sha1:B.algo.SHA1,sha224:B.algo.SHA224,sha256:B.algo.SHA256,sha384:B.algo.SHA384,sha512:B.algo.SHA512,ripemd160:B.algo.RIPEMD160},this.getDigestInfoHex=function(l,u){if(this.DIGESTINFOHEAD[u]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+u;return this.DIGESTINFOHEAD[u]+l},this.getPaddedDigestInfoHex=function(l,u,c){var v=this.getDigestInfoHex(l,u),x=c/4;if(v.length+22>x)throw"key is too short for SigAlg: keylen="+c+","+u;for(var K="0001",W="00"+v,ie="",ne=x-K.length-W.length,re=0;re<ne;re+=2)ie+="ff";return K+ie+W},this.hashString=function(l,u){return new k.crypto.MessageDigest({alg:u}).digestString(l)},this.hashHex=function(l,u){return new k.crypto.MessageDigest({alg:u}).digestHex(l)},this.sha1=function(l){return this.hashString(l,"sha1")},this.sha256=function(l){return this.hashString(l,"sha256")},this.sha256Hex=function(l){return this.hashHex(l,"sha256")},this.sha512=function(l){return this.hashString(l,"sha512")},this.sha512Hex=function(l){return this.hashHex(l,"sha512")},this.isKey=function(l){return l instanceof At||l instanceof k.crypto.DSA||l instanceof k.crypto.ECDSA}},k.crypto.Util.md5=function(l){return new k.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(l)},k.crypto.Util.ripemd160=function(l){return new k.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(l)},k.crypto.Util.SECURERANDOMGEN=new ft,k.crypto.Util.getRandomHexOfNbytes=function(l){var u=new Array(l);return k.crypto.Util.SECURERANDOMGEN.nextBytes(u),Rt(u)},k.crypto.Util.getRandomBigIntegerOfNbytes=function(l){return new J(k.crypto.Util.getRandomHexOfNbytes(l),16)},k.crypto.Util.getRandomHexOfNbits=function(l){var u=l%8,c=new Array((l-u)/8+1);return k.crypto.Util.SECURERANDOMGEN.nextBytes(c),c[0]=(255<<u&255^255)&c[0],Rt(c)},k.crypto.Util.getRandomBigIntegerOfNbits=function(l){return new J(k.crypto.Util.getRandomHexOfNbits(l),16)},k.crypto.Util.getRandomBigIntegerZeroToMax=function(l){for(var u=l.bitLength();;){var c=k.crypto.Util.getRandomBigIntegerOfNbits(u);if(l.compareTo(c)!=-1)return c}},k.crypto.Util.getRandomBigIntegerMinToMax=function(l,u){var c=l.compareTo(u);if(c==1)throw"biMin is greater than biMax";if(c==0)return l;var v=u.subtract(l);return k.crypto.Util.getRandomBigIntegerZeroToMax(v).add(l)},k.crypto.MessageDigest=function(l){this.setAlgAndProvider=function(u,c){if((u=k.crypto.MessageDigest.getCanonicalAlgName(u))!==null&&c===void 0&&(c=k.crypto.Util.DEFAULTPROVIDER[u]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(u)!=-1&&c=="cryptojs"){try{this.md=k.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[u].create()}catch(v){throw"setAlgAndProvider hash alg set fail alg="+u+"/"+v}this.updateString=function(v){this.md.update(v)},this.updateHex=function(v){var x=B.enc.Hex.parse(v);this.md.update(x)},this.digest=function(){return this.md.finalize().toString(B.enc.Hex)},this.digestString=function(v){return this.updateString(v),this.digest()},this.digestHex=function(v){return this.updateHex(v),this.digest()}}if(":sha256:".indexOf(u)!=-1&&c=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(v){throw"setAlgAndProvider hash alg set fail alg="+u+"/"+v}this.updateString=function(v){this.md.update(v)},this.updateHex=function(v){var x=sjcl.codec.hex.toBits(v);this.md.update(x)},this.digest=function(){var v=this.md.finalize();return sjcl.codec.hex.fromBits(v)},this.digestString=function(v){return this.updateString(v),this.digest()},this.digestHex=function(v){return this.updateHex(v),this.digest()}}},this.updateString=function(u){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(u){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(u){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(u){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},l!==void 0&&l.alg!==void 0&&(this.algName=l.alg,l.prov===void 0&&(this.provName=k.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},k.crypto.MessageDigest.getCanonicalAlgName=function(l){return typeof l=="string"&&(l=(l=l.toLowerCase()).replace(/-/,"")),l},k.crypto.MessageDigest.getHashLength=function(l){var u=k.crypto.MessageDigest,c=u.getCanonicalAlgName(l);if(u.HASHLENGTH[c]===void 0)throw"not supported algorithm: "+l;return u.HASHLENGTH[c]},k.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},k.crypto.Mac=function(l){this.setAlgAndProvider=function(u,c){if((u=u.toLowerCase())==null&&(u="hmacsha1"),(u=u.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+u;c===void 0&&(c=k.crypto.Util.DEFAULTPROVIDER[u]),this.algProv=u+"/"+c;var v=u.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(v)!=-1&&c=="cryptojs"){try{var x=k.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[v];this.mac=B.algo.HMAC.create(x,this.pass)}catch(K){throw"setAlgAndProvider hash alg set fail hashAlg="+v+"/"+K}this.updateString=function(K){this.mac.update(K)},this.updateHex=function(K){var W=B.enc.Hex.parse(K);this.mac.update(W)},this.doFinal=function(){return this.mac.finalize().toString(B.enc.Hex)},this.doFinalString=function(K){return this.updateString(K),this.doFinal()},this.doFinalHex=function(K){return this.updateHex(K),this.doFinal()}}},this.updateString=function(u){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(u){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(u){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(u){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(u){if(typeof u=="string"){var c=u;return u.length%2!=1&&u.match(/^[0-9A-Fa-f]+$/)||(c=nr(u)),void(this.pass=B.enc.Hex.parse(c))}if((u===void 0?"undefined":F(u))!="object")throw"KJUR.crypto.Mac unsupported password type: "+u;if(c=null,u.hex!==void 0){if(u.hex.length%2!=0||!u.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+u.hex;c=u.hex}if(u.utf8!==void 0&&(c=jr(u.utf8)),u.rstr!==void 0&&(c=nr(u.rstr)),u.b64!==void 0&&(c=ve(u.b64)),u.b64u!==void 0&&(c=vn(u.b64u)),c==null)throw"KJUR.crypto.Mac unsupported password type: "+u;this.pass=B.enc.Hex.parse(c)},l!==void 0&&(l.pass!==void 0&&this.setPassword(l.pass),l.alg!==void 0&&(this.algName=l.alg,l.prov===void 0&&(this.provName=k.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},k.crypto.Signature=function(l){var u=null;if(this._setAlgNames=function(){var c=this.algName.match(/^(.+)with(.+)$/);c&&(this.mdAlgName=c[1].toLowerCase(),this.pubkeyAlgName=c[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(c,v){for(var x="",K=v/4-c.length,W=0;W<K;W++)x+="0";return x+c},this.setAlgAndProvider=function(c,v){if(this._setAlgNames(),v!="cryptojs/jsrsa")throw new Error("provider not supported: "+v);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new k.crypto.MessageDigest({alg:this.mdAlgName})}catch(x){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+x)}this.init=function(x,K){var W=null;try{W=K===void 0?Vt.getKey(x):Vt.getKey(x,K)}catch(ie){throw"init failed:"+ie}if(W.isPrivate===!0)this.prvKey=W,this.state="SIGN";else{if(W.isPublic!==!0)throw"init failed.:"+W;this.pubKey=W,this.state="VERIFY"}},this.updateString=function(x){this.md.updateString(x)},this.updateHex=function(x){this.md.updateHex(x)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&k.crypto.ECDSA!==void 0&&(this.prvKey=new k.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof At&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof At&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof k.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof k.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(x){return this.updateString(x),this.sign()},this.signHex=function(x){return this.updateHex(x),this.sign()},this.verify=function(x){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&k.crypto.ECDSA!==void 0&&(this.pubKey=new k.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof At&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,x,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof At&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,x);if(k.crypto.ECDSA!==void 0&&this.pubKey instanceof k.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,x);if(k.crypto.DSA!==void 0&&this.pubKey instanceof k.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,x);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(c,v){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(c){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(c){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(c){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(c){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=l,l!==void 0&&(l.alg!==void 0&&(this.algName=l.alg,l.prov===void 0?this.provName=k.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=l.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),l.psssaltlen!==void 0&&(this.pssSaltLen=l.psssaltlen),l.prvkeypem!==void 0)){if(l.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{u=Vt.getKey(l.prvkeypem),this.init(u)}catch(c){throw"fatal error to load pem private key: "+c}}},k.crypto.Cipher=function(l){},k.crypto.Cipher.encrypt=function(l,u,c){if(u instanceof At&&u.isPublic){var v=k.crypto.Cipher.getAlgByKeyAndName(u,c);if(v==="RSA")return u.encrypt(l);if(v==="RSAOAEP")return u.encryptOAEP(l,"sha1");var x=v.match(/^RSAOAEP(\d+)$/);if(x!==null)return u.encryptOAEP(l,"sha"+x[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.encrypt: unsupported key or algorithm"},k.crypto.Cipher.decrypt=function(l,u,c){if(u instanceof At&&u.isPrivate){var v=k.crypto.Cipher.getAlgByKeyAndName(u,c);if(v==="RSA")return u.decrypt(l);if(v==="RSAOAEP")return u.decryptOAEP(l,"sha1");var x=v.match(/^RSAOAEP(\d+)$/);if(x!==null)return u.decryptOAEP(l,"sha"+x[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.decrypt: unsupported key or algorithm"},k.crypto.Cipher.getAlgByKeyAndName=function(l,u){if(l instanceof At){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(u)!=-1)return u;if(u==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+u}throw"getAlgByKeyAndName: not supported algorithm name: "+u},k.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},k!==void 0&&k||(i.KJUR=k={}),k.crypto!==void 0&&k.crypto||(k.crypto={}),k.crypto.ECDSA=function(l){var u=Error,c=J,v=$,x=k.crypto.ECDSA,K=k.crypto.ECParameterDB,W=x.getName,ie=Ie,ne=ie.getVbyListEx,re=ie.isASN1HEX,fe=new ft;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(ce){return new c(ce.bitLength(),fe).mod(ce.subtract(c.ONE)).add(c.ONE)},this.setNamedCurve=function(ce){this.ecparams=K.getByName(ce),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=ce},this.setPrivateKeyHex=function(ce){this.isPrivate=!0,this.prvKeyHex=ce},this.setPublicKeyHex=function(ce){this.isPublic=!0,this.pubKeyHex=ce},this.getPublicKeyXYHex=function(){var ce=this.pubKeyHex;if(ce.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var ye=this.ecparams.keylen/4;if(ce.length!==2+2*ye)throw"malformed public key hex length";var Ae={};return Ae.x=ce.substr(2,ye),Ae.y=ce.substr(2+ye),Ae},this.getShortNISTPCurveName=function(){var ce=this.curveName;return ce==="secp256r1"||ce==="NIST P-256"||ce==="P-256"||ce==="prime256v1"?"P-256":ce==="secp384r1"||ce==="NIST P-384"||ce==="P-384"?"P-384":null},this.generateKeyPairHex=function(){var ce=this.ecparams.n,ye=this.getBigRandom(ce),Ae=this.ecparams.G.multiply(ye),Ke=Ae.getX().toBigInteger(),Ze=Ae.getY().toBigInteger(),nt=this.ecparams.keylen/4,X=("0000000000"+ye.toString(16)).slice(-nt),le="04"+("0000000000"+Ke.toString(16)).slice(-nt)+("0000000000"+Ze.toString(16)).slice(-nt);return this.setPrivateKeyHex(X),this.setPublicKeyHex(le),{ecprvhex:X,ecpubhex:le}},this.signWithMessageHash=function(ce){return this.signHex(ce,this.prvKeyHex)},this.signHex=function(ce,ye){var Ae=new c(ye,16),Ke=this.ecparams.n,Ze=new c(ce.substring(0,this.ecparams.keylen/4),16);do var nt=this.getBigRandom(Ke),X=this.ecparams.G.multiply(nt).getX().toBigInteger().mod(Ke);while(X.compareTo(c.ZERO)<=0);var le=nt.modInverse(Ke).multiply(Ze.add(Ae.multiply(X))).mod(Ke);return x.biRSSigToASN1Sig(X,le)},this.sign=function(ce,ye){var Ae=ye,Ke=this.ecparams.n,Ze=c.fromByteArrayUnsigned(ce);do var nt=this.getBigRandom(Ke),X=this.ecparams.G.multiply(nt).getX().toBigInteger().mod(Ke);while(X.compareTo(J.ZERO)<=0);var le=nt.modInverse(Ke).multiply(Ze.add(Ae.multiply(X))).mod(Ke);return this.serializeSig(X,le)},this.verifyWithMessageHash=function(ce,ye){return this.verifyHex(ce,ye,this.pubKeyHex)},this.verifyHex=function(ce,ye,Ae){try{var Ke,Ze,nt=x.parseSigHex(ye);Ke=nt.r,Ze=nt.s;var X=v.decodeFromHex(this.ecparams.curve,Ae),le=new c(ce.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(le,Ke,Ze,X)}catch{return!1}},this.verify=function(ce,ye,Ae){var Ke,Ze,nt;if(Bitcoin.Util.isArray(ye)){var X=this.parseSig(ye);Ke=X.r,Ze=X.s}else{if((ye===void 0?"undefined":F(ye))!=="object"||!ye.r||!ye.s)throw"Invalid value for signature";Ke=ye.r,Ze=ye.s}if(Ae instanceof $)nt=Ae;else{if(!Bitcoin.Util.isArray(Ae))throw"Invalid format for pubkey value, must be byte array or ECPointFp";nt=v.decodeFrom(this.ecparams.curve,Ae)}var le=c.fromByteArrayUnsigned(ce);return this.verifyRaw(le,Ke,Ze,nt)},this.verifyRaw=function(ce,ye,Ae,Ke){var Ze=this.ecparams.n,nt=this.ecparams.G;if(ye.compareTo(c.ONE)<0||ye.compareTo(Ze)>=0||Ae.compareTo(c.ONE)<0||Ae.compareTo(Ze)>=0)return!1;var X=Ae.modInverse(Ze),le=ce.multiply(X).mod(Ze),oe=ye.multiply(X).mod(Ze);return nt.multiply(le).add(Ke.multiply(oe)).getX().toBigInteger().mod(Ze).equals(ye)},this.serializeSig=function(ce,ye){var Ae=ce.toByteArraySigned(),Ke=ye.toByteArraySigned(),Ze=[];return Ze.push(2),Ze.push(Ae.length),(Ze=Ze.concat(Ae)).push(2),Ze.push(Ke.length),(Ze=Ze.concat(Ke)).unshift(Ze.length),Ze.unshift(48),Ze},this.parseSig=function(ce){var ye;if(ce[0]!=48)throw new Error("Signature not a valid DERSequence");if(ce[ye=2]!=2)throw new Error("First element in signature must be a DERInteger");var Ae=ce.slice(ye+2,ye+2+ce[ye+1]);if(ce[ye+=2+ce[ye+1]]!=2)throw new Error("Second element in signature must be a DERInteger");var Ke=ce.slice(ye+2,ye+2+ce[ye+1]);return ye+=2+ce[ye+1],{r:c.fromByteArrayUnsigned(Ae),s:c.fromByteArrayUnsigned(Ke)}},this.parseSigCompact=function(ce){if(ce.length!==65)throw"Signature has the wrong length";var ye=ce[0]-27;if(ye<0||ye>7)throw"Invalid signature type";var Ae=this.ecparams.n;return{r:c.fromByteArrayUnsigned(ce.slice(1,33)).mod(Ae),s:c.fromByteArrayUnsigned(ce.slice(33,65)).mod(Ae),i:ye}},this.readPKCS5PrvKeyHex=function(ce){if(re(ce)===!1)throw new Error("not ASN.1 hex string");var ye,Ae,Ke;try{ye=ne(ce,0,["[0]",0],"06"),Ae=ne(ce,0,[1],"04");try{Ke=ne(ce,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=W(ye),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ke),this.setPrivateKeyHex(Ae),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(ce){if(re(ce)===!1)throw new u("not ASN.1 hex string");var ye,Ae,Ke;try{ne(ce,0,[1,0],"06"),ye=ne(ce,0,[1,1],"06"),Ae=ne(ce,0,[2,0,1],"04");try{Ke=ne(ce,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new u("malformed PKCS#8 plain ECC private key")}if(this.curveName=W(ye),this.curveName===void 0)throw new u("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ke),this.setPrivateKeyHex(Ae),this.isPublic=!1},this.readPKCS8PubKeyHex=function(ce){if(re(ce)===!1)throw new u("not ASN.1 hex string");var ye,Ae;try{ne(ce,0,[0,0],"06"),ye=ne(ce,0,[0,1],"06"),Ae=ne(ce,0,[1],"03")}catch{throw new u("malformed PKCS#8 ECC public key")}if(this.curveName=W(ye),this.curveName===null)throw new u("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ae)},this.readCertPubKeyHex=function(ce,ye){if(re(ce)===!1)throw new u("not ASN.1 hex string");var Ae,Ke;try{Ae=ne(ce,0,[0,5,0,1],"06"),Ke=ne(ce,0,[0,5,1],"03")}catch{throw new u("malformed X.509 certificate ECC public key")}if(this.curveName=W(Ae),this.curveName===null)throw new u("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ke)},l!==void 0&&l.curve!==void 0&&(this.curveName=l.curve),this.curveName===void 0&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),l!==void 0&&(l.prv!==void 0&&this.setPrivateKeyHex(l.prv),l.pub!==void 0&&this.setPublicKeyHex(l.pub))},k.crypto.ECDSA.parseSigHex=function(l){var u=k.crypto.ECDSA.parseSigHexInHexRS(l);return{r:new J(u.r,16),s:new J(u.s,16)}},k.crypto.ECDSA.parseSigHexInHexRS=function(l){var u=Ie,c=u.getChildIdx,v=u.getV;if(u.checkStrictDER(l,0),l.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var x=c(l,0);if(x.length!=2)throw new Error("signature shall have two elements");var K=x[0],W=x[1];if(l.substr(K,2)!="02")throw new Error("1st item not ASN.1 integer");if(l.substr(W,2)!="02")throw new Error("2nd item not ASN.1 integer");return{r:v(l,K),s:v(l,W)}},k.crypto.ECDSA.asn1SigToConcatSig=function(l){var u=k.crypto.ECDSA.parseSigHexInHexRS(l),c=u.r,v=u.s;if(c.substr(0,2)=="00"&&c.length%32==2&&(c=c.substr(2)),v.substr(0,2)=="00"&&v.length%32==2&&(v=v.substr(2)),c.length%32==30&&(c="00"+c),v.length%32==30&&(v="00"+v),c.length%32!=0)throw"unknown ECDSA sig r length error";if(v.length%32!=0)throw"unknown ECDSA sig s length error";return c+v},k.crypto.ECDSA.concatSigToASN1Sig=function(l){if(l.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var u=l.substr(0,l.length/2),c=l.substr(l.length/2);return k.crypto.ECDSA.hexRSSigToASN1Sig(u,c)},k.crypto.ECDSA.hexRSSigToASN1Sig=function(l,u){var c=new J(l,16),v=new J(u,16);return k.crypto.ECDSA.biRSSigToASN1Sig(c,v)},k.crypto.ECDSA.biRSSigToASN1Sig=function(l,u){var c=k.asn1,v=new c.DERInteger({bigint:l}),x=new c.DERInteger({bigint:u});return new c.DERSequence({array:[v,x]}).getEncodedHex()},k.crypto.ECDSA.getName=function(l){return l==="2b8104001f"?"secp192k1":l==="2a8648ce3d030107"?"secp256r1":l==="2b8104000a"?"secp256k1":l==="2b81040021"?"secp224r1":l==="2b81040022"?"secp384r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(l)!==-1?"secp256r1":"|secp256k1|".indexOf(l)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(l)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(l)!==-1?"secp384r1":null},k!==void 0&&k||(i.KJUR=k={}),k.crypto!==void 0&&k.crypto||(k.crypto={}),k.crypto.ECParameterDB=new function(){var l={},u={};function c(v){return new J(v,16)}this.getByName=function(v){var x=v;if(u[x]!==void 0&&(x=u[v]),l[x]!==void 0)return l[x];throw"unregistered EC curve name: "+x},this.regist=function(v,x,K,W,ie,ne,re,fe,ce,ye,Ae,Ke){l[v]={};var Ze=c(K),nt=c(W),X=c(ie),le=c(ne),oe=c(re),ge=new R(Ze,nt,X),Je=ge.decodePointHex("04"+fe+ce);l[v].name=v,l[v].keylen=x,l[v].curve=ge,l[v].G=Je,l[v].n=le,l[v].h=oe,l[v].oid=Ae,l[v].info=Ke;for(var ut=0;ut<ye.length;ut++)u[ye[ut]]=v}},k.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),k.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),k.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),k.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),k.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),k.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),k.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),k.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),k.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),k.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Vt=function(){var l=function(re,fe,ce){return u(B.AES,re,fe,ce)},u=function(re,fe,ce,ye){var Ae=B.enc.Hex.parse(fe),Ke=B.enc.Hex.parse(ce),Ze=B.enc.Hex.parse(ye),nt={};nt.key=Ke,nt.iv=Ze,nt.ciphertext=Ae;var X=re.decrypt(nt,Ke,{iv:Ze});return B.enc.Hex.stringify(X)},c=function(re,fe,ce){return v(B.AES,re,fe,ce)},v=function(re,fe,ce,ye){var Ae=B.enc.Hex.parse(fe),Ke=B.enc.Hex.parse(ce),Ze=B.enc.Hex.parse(ye),nt=re.encrypt(Ae,Ke,{iv:Ze}),X=B.enc.Hex.parse(nt.toString());return B.enc.Base64.stringify(X)},x={"AES-256-CBC":{proc:l,eproc:c,keylen:32,ivlen:16},"AES-192-CBC":{proc:l,eproc:c,keylen:24,ivlen:16},"AES-128-CBC":{proc:l,eproc:c,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(re,fe,ce){return u(B.TripleDES,re,fe,ce)},eproc:function(re,fe,ce){return v(B.TripleDES,re,fe,ce)},keylen:24,ivlen:8},"DES-CBC":{proc:function(re,fe,ce){return u(B.DES,re,fe,ce)},eproc:function(re,fe,ce){return v(B.DES,re,fe,ce)},keylen:8,ivlen:8}},K=function(re){var fe={},ce=re.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));ce&&(fe.cipher=ce[1],fe.ivsalt=ce[2]);var ye=re.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));ye&&(fe.type=ye[1]);var Ae=-1,Ke=0;re.indexOf(`\r
\r
`)!=-1&&(Ae=re.indexOf(`\r
\r
`),Ke=2),re.indexOf(`

`)!=-1&&(Ae=re.indexOf(`

`),Ke=1);var Ze=re.indexOf("-----END");if(Ae!=-1&&Ze!=-1){var nt=re.substring(Ae+2*Ke,Ze-Ke);nt=nt.replace(/\s+/g,""),fe.data=nt}return fe},W=function(re,fe,ce){for(var ye=ce.substring(0,16),Ae=B.enc.Hex.parse(ye),Ke=B.enc.Utf8.parse(fe),Ze=x[re].keylen+x[re].ivlen,nt="",X=null;;){var le=B.algo.MD5.create();if(X!=null&&le.update(X),le.update(Ke),le.update(Ae),X=le.finalize(),(nt+=B.enc.Hex.stringify(X)).length>=2*Ze)break}var oe={};return oe.keyhex=nt.substr(0,2*x[re].keylen),oe.ivhex=nt.substr(2*x[re].keylen,2*x[re].ivlen),oe},ie=function(re,fe,ce,ye){var Ae=B.enc.Base64.parse(re),Ke=B.enc.Hex.stringify(Ae);return(0,x[fe].proc)(Ke,ce,ye)};return{version:"1.0.0",parsePKCS5PEM:function(re){return K(re)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(re,fe,ce){return W(re,fe,ce)},decryptKeyB64:function(re,fe,ce,ye){return ie(re,fe,ce,ye)},getDecryptedKeyHex:function(re,fe){var ce=K(re),ye=(ce.type,ce.cipher),Ae=ce.ivsalt,Ke=ce.data,Ze=W(ye,fe,Ae).keyhex;return ie(Ke,ye,Ze,Ae)},getEncryptedPKCS5PEMFromPrvKeyHex:function(re,fe,ce,ye,Ae){var Ke="";if(ye!==void 0&&ye!=null||(ye="AES-256-CBC"),x[ye]===void 0)throw new Error("KEYUTIL unsupported algorithm: "+ye);Ae!==void 0&&Ae!=null||(Ae=function(X){var le=B.lib.WordArray.random(X);return B.enc.Hex.stringify(le)}(x[ye].ivlen).toUpperCase());var Ze=function(X,le,oe,ge){return(0,x[le].eproc)(X,oe,ge)}(fe,ye,W(ye,ce,Ae).keyhex,Ae);return Ke="-----BEGIN "+re+` PRIVATE KEY-----\r
`,Ke+=`Proc-Type: 4,ENCRYPTED\r
`,Ke+="DEK-Info: "+ye+","+Ae+`\r
`,Ke+=`\r
`,Ke+=Ze.replace(/(.{64})/g,`$1\r
`),Ke+=`\r
-----END `+re+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(re){var fe=Ie,ce=fe.getChildIdx,ye=fe.getV,Ae={},Ke=ce(re,0);if(Ke.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+Ke.length);Ae.ciphertext=ye(re,Ke[1]);var Ze=ce(re,Ke[0]);if(Ze.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+Ze.length);if(ye(re,Ze[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var nt=ce(re,Ze[1]);if(Ze.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+nt.length);var X=ce(re,nt[1]);if(X.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+X.length);if(ye(re,X[0])!="2a864886f70d0307")throw"this only supports TripleDES";Ae.encryptionSchemeAlg="TripleDES",Ae.encryptionSchemeIV=ye(re,X[1]);var le=ce(re,nt[0]);if(le.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+le.length);if(ye(re,le[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var oe=ce(re,le[1]);if(oe.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+oe.length);Ae.pbkdf2Salt=ye(re,oe[0]);var ge=ye(re,oe[1]);try{Ae.pbkdf2Iter=parseInt(ge,16)}catch{throw new Error("malformed format pbkdf2Iter: "+ge)}return Ae},getPBKDF2KeyHexFromParam:function(re,fe){var ce=B.enc.Hex.parse(re.pbkdf2Salt),ye=re.pbkdf2Iter,Ae=B.PBKDF2(fe,ce,{keySize:6,iterations:ye});return B.enc.Hex.stringify(Ae)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(re,fe){var ce=Et(re,"ENCRYPTED PRIVATE KEY"),ye=this.parseHexOfEncryptedPKCS8(ce),Ae=Vt.getPBKDF2KeyHexFromParam(ye,fe),Ke={};Ke.ciphertext=B.enc.Hex.parse(ye.ciphertext);var Ze=B.enc.Hex.parse(Ae),nt=B.enc.Hex.parse(ye.encryptionSchemeIV),X=B.TripleDES.decrypt(Ke,Ze,{iv:nt});return B.enc.Hex.stringify(X)},getKeyFromEncryptedPKCS8PEM:function(re,fe){var ce=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(re,fe);return this.getKeyFromPlainPrivatePKCS8Hex(ce)},parsePlainPrivatePKCS8Hex:function(re){var fe=Ie,ce=fe.getChildIdx,ye=fe.getV,Ae={algparam:null};if(re.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Ke=ce(re,0);if(Ke.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(re.substr(Ke[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Ze=ce(re,Ke[1]);if(Ze.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(re.substr(Ze[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Ae.algoid=ye(re,Ze[0]),re.substr(Ze[1],2)=="06"&&(Ae.algparam=ye(re,Ze[1])),re.substr(Ke[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Ae.keyidx=fe.getVidx(re,Ke[2]),Ae},getKeyFromPlainPrivatePKCS8PEM:function(re){var fe=Et(re,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(fe)},getKeyFromPlainPrivatePKCS8Hex:function(re){var fe,ce=this.parsePlainPrivatePKCS8Hex(re);if(ce.algoid=="2a864886f70d010101")fe=new At;else if(ce.algoid=="2a8648ce380401")fe=new k.crypto.DSA;else{if(ce.algoid!="2a8648ce3d0201")throw new Error("unsupported private key algorithm");fe=new k.crypto.ECDSA}return fe.readPKCS8PrvKeyHex(re),fe},_getKeyFromPublicPKCS8Hex:function(re){var fe,ce=Ie.getVbyList(re,0,[0,0],"06");if(ce==="2a864886f70d010101")fe=new At;else if(ce==="2a8648ce380401")fe=new k.crypto.DSA;else{if(ce!=="2a8648ce3d0201")throw new Error("unsupported PKCS#8 public key hex");fe=new k.crypto.ECDSA}return fe.readPKCS8PubKeyHex(re),fe},parsePublicRawRSAKeyHex:function(re){var fe=Ie,ce=fe.getChildIdx,ye=fe.getV,Ae={};if(re.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var Ke=ce(re,0);if(Ke.length!=2)throw new Error("malformed RSA key(code:002)");if(re.substr(Ke[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(Ae.n=ye(re,Ke[0]),re.substr(Ke[1],2)!="02")throw new Error("malformed RSA key(code:004)");return Ae.e=ye(re,Ke[1]),Ae},parsePublicPKCS8Hex:function(re){var fe=Ie,ce=fe.getChildIdx,ye=fe.getV,Ae={algparam:null},Ke=ce(re,0);if(Ke.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+Ke.length);var Ze=Ke[0];if(re.substr(Ze,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var nt=ce(re,Ze);if(nt.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(re.substr(nt[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(Ae.algoid=ye(re,nt[0]),re.substr(nt[1],2)=="06"?Ae.algparam=ye(re,nt[1]):re.substr(nt[1],2)=="30"&&(Ae.algparam={},Ae.algparam.p=fe.getVbyList(re,nt[1],[0],"02"),Ae.algparam.q=fe.getVbyList(re,nt[1],[1],"02"),Ae.algparam.g=fe.getVbyList(re,nt[1],[2],"02")),re.substr(Ke[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return Ae.key=ye(re,Ke[1]).substr(2),Ae}}}();Vt.getKey=function(l,u,c){var v=(nt=Ie).getChildIdx,x=(nt.getV,nt.getVbyList),K=k.crypto,W=K.ECDSA,ie=K.DSA,ne=At,re=Et,fe=Vt;if(ne!==void 0&&l instanceof ne||W!==void 0&&l instanceof W||ie!==void 0&&l instanceof ie)return l;if(l.curve!==void 0&&l.xy!==void 0&&l.d===void 0)return new W({pub:l.xy,curve:l.curve});if(l.curve!==void 0&&l.d!==void 0)return new W({prv:l.d,curve:l.curve});if(l.kty===void 0&&l.n!==void 0&&l.e!==void 0&&l.d===void 0)return(Ht=new ne).setPublic(l.n,l.e),Ht;if(l.kty===void 0&&l.n!==void 0&&l.e!==void 0&&l.d!==void 0&&l.p!==void 0&&l.q!==void 0&&l.dp!==void 0&&l.dq!==void 0&&l.co!==void 0&&l.qi===void 0)return(Ht=new ne).setPrivateEx(l.n,l.e,l.d,l.p,l.q,l.dp,l.dq,l.co),Ht;if(l.kty===void 0&&l.n!==void 0&&l.e!==void 0&&l.d!==void 0&&l.p===void 0)return(Ht=new ne).setPrivate(l.n,l.e,l.d),Ht;if(l.p!==void 0&&l.q!==void 0&&l.g!==void 0&&l.y!==void 0&&l.x===void 0)return(Ht=new ie).setPublic(l.p,l.q,l.g,l.y),Ht;if(l.p!==void 0&&l.q!==void 0&&l.g!==void 0&&l.y!==void 0&&l.x!==void 0)return(Ht=new ie).setPrivate(l.p,l.q,l.g,l.y,l.x),Ht;if(l.kty==="RSA"&&l.n!==void 0&&l.e!==void 0&&l.d===void 0)return(Ht=new ne).setPublic(vn(l.n),vn(l.e)),Ht;if(l.kty==="RSA"&&l.n!==void 0&&l.e!==void 0&&l.d!==void 0&&l.p!==void 0&&l.q!==void 0&&l.dp!==void 0&&l.dq!==void 0&&l.qi!==void 0)return(Ht=new ne).setPrivateEx(vn(l.n),vn(l.e),vn(l.d),vn(l.p),vn(l.q),vn(l.dp),vn(l.dq),vn(l.qi)),Ht;if(l.kty==="RSA"&&l.n!==void 0&&l.e!==void 0&&l.d!==void 0)return(Ht=new ne).setPrivate(vn(l.n),vn(l.e),vn(l.d)),Ht;if(l.kty==="EC"&&l.crv!==void 0&&l.x!==void 0&&l.y!==void 0&&l.d===void 0){var ce=(It=new W({curve:l.crv})).ecparams.keylen/4,ye="04"+("0000000000"+vn(l.x)).slice(-ce)+("0000000000"+vn(l.y)).slice(-ce);return It.setPublicKeyHex(ye),It}if(l.kty==="EC"&&l.crv!==void 0&&l.x!==void 0&&l.y!==void 0&&l.d!==void 0){ce=(It=new W({curve:l.crv})).ecparams.keylen/4,ye="04"+("0000000000"+vn(l.x)).slice(-ce)+("0000000000"+vn(l.y)).slice(-ce);var Ae=("0000000000"+vn(l.d)).slice(-ce);return It.setPublicKeyHex(ye),It.setPrivateKeyHex(Ae),It}if(c==="pkcs5prv"){var Ke,Ze=l,nt=Ie;if((Ke=v(Ze,0)).length===9)(Ht=new ne).readPKCS5PrvKeyHex(Ze);else if(Ke.length===6)(Ht=new ie).readPKCS5PrvKeyHex(Ze);else{if(!(Ke.length>2&&Ze.substr(Ke[1],2)==="04"))throw new Error("unsupported PKCS#1/5 hexadecimal key");(Ht=new W).readPKCS5PrvKeyHex(Ze)}return Ht}if(c==="pkcs8prv")return Ht=fe.getKeyFromPlainPrivatePKCS8Hex(l);if(c==="pkcs8pub")return fe._getKeyFromPublicPKCS8Hex(l);if(c==="x509pub")return An.getPublicKeyFromCertHex(l);if(l.indexOf("-END CERTIFICATE-",0)!=-1||l.indexOf("-END X509 CERTIFICATE-",0)!=-1||l.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return An.getPublicKeyFromCertPEM(l);if(l.indexOf("-END PUBLIC KEY-")!=-1){var X=Et(l,"PUBLIC KEY");return fe._getKeyFromPublicPKCS8Hex(X)}if(l.indexOf("-END RSA PRIVATE KEY-")!=-1&&l.indexOf("4,ENCRYPTED")==-1){var le=re(l,"RSA PRIVATE KEY");return fe.getKey(le,null,"pkcs5prv")}if(l.indexOf("-END DSA PRIVATE KEY-")!=-1&&l.indexOf("4,ENCRYPTED")==-1){var oe=x(fn=re(l,"DSA PRIVATE KEY"),0,[1],"02"),ge=x(fn,0,[2],"02"),Je=x(fn,0,[3],"02"),ut=x(fn,0,[4],"02"),Pt=x(fn,0,[5],"02");return(Ht=new ie).setPrivate(new J(oe,16),new J(ge,16),new J(Je,16),new J(ut,16),new J(Pt,16)),Ht}if(l.indexOf("-END EC PRIVATE KEY-")!=-1&&l.indexOf("4,ENCRYPTED")==-1)return le=re(l,"EC PRIVATE KEY"),fe.getKey(le,null,"pkcs5prv");if(l.indexOf("-END PRIVATE KEY-")!=-1)return fe.getKeyFromPlainPrivatePKCS8PEM(l);if(l.indexOf("-END RSA PRIVATE KEY-")!=-1&&l.indexOf("4,ENCRYPTED")!=-1){var _t=fe.getDecryptedKeyHex(l,u),Zt=new At;return Zt.readPKCS5PrvKeyHex(_t),Zt}if(l.indexOf("-END EC PRIVATE KEY-")!=-1&&l.indexOf("4,ENCRYPTED")!=-1){var It,Ht=x(fn=fe.getDecryptedKeyHex(l,u),0,[1],"04"),bn=x(fn,0,[2,0],"06"),Qt=x(fn,0,[3,0],"03").substr(2);if(k.crypto.OID.oidhex2name[bn]===void 0)throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+bn);return(It=new W({curve:k.crypto.OID.oidhex2name[bn]})).setPublicKeyHex(Qt),It.setPrivateKeyHex(Ht),It.isPublic=!1,It}if(l.indexOf("-END DSA PRIVATE KEY-")!=-1&&l.indexOf("4,ENCRYPTED")!=-1){var fn;return oe=x(fn=fe.getDecryptedKeyHex(l,u),0,[1],"02"),ge=x(fn,0,[2],"02"),Je=x(fn,0,[3],"02"),ut=x(fn,0,[4],"02"),Pt=x(fn,0,[5],"02"),(Ht=new ie).setPrivate(new J(oe,16),new J(ge,16),new J(Je,16),new J(ut,16),new J(Pt,16)),Ht}if(l.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return fe.getKeyFromEncryptedPKCS8PEM(l,u);throw new Error("not supported argument")},Vt.generateKeypair=function(l,u){if(l=="RSA"){var c=u;(W=new At).generate(c,"10001"),W.isPrivate=!0,W.isPublic=!0;var v=new At,x=W.n.toString(16),K=W.e.toString(16);return v.setPublic(x,K),v.isPrivate=!1,v.isPublic=!0,(ie={}).prvKeyObj=W,ie.pubKeyObj=v,ie}if(l=="EC"){var W,ie,ne=u,re=new k.crypto.ECDSA({curve:ne}).generateKeyPairHex();return(W=new k.crypto.ECDSA({curve:ne})).setPublicKeyHex(re.ecpubhex),W.setPrivateKeyHex(re.ecprvhex),W.isPrivate=!0,W.isPublic=!1,(v=new k.crypto.ECDSA({curve:ne})).setPublicKeyHex(re.ecpubhex),v.isPrivate=!1,v.isPublic=!0,(ie={}).prvKeyObj=W,ie.pubKeyObj=v,ie}throw new Error("unknown algorithm: "+l)},Vt.getPEM=function(l,u,c,v,x,K){var W=k,ie=W.asn1,ne=ie.DERObjectIdentifier,re=ie.DERInteger,fe=ie.ASN1Util.newObject,ce=ie.x509.SubjectPublicKeyInfo,ye=W.crypto,Ae=ye.DSA,Ke=ye.ECDSA,Ze=At;function nt(It){return fe({seq:[{int:0},{int:{bigint:It.n}},{int:It.e},{int:{bigint:It.d}},{int:{bigint:It.p}},{int:{bigint:It.q}},{int:{bigint:It.dmp1}},{int:{bigint:It.dmq1}},{int:{bigint:It.coeff}}]})}function X(It){return fe({seq:[{int:1},{octstr:{hex:It.prvKeyHex}},{tag:["a0",!0,{oid:{name:It.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+It.pubKeyHex}}]}]})}function le(It){return fe({seq:[{int:0},{int:{bigint:It.p}},{int:{bigint:It.q}},{int:{bigint:It.g}},{int:{bigint:It.y}},{int:{bigint:It.x}}]})}if((Ze!==void 0&&l instanceof Ze||Ae!==void 0&&l instanceof Ae||Ke!==void 0&&l instanceof Ke)&&l.isPublic==1&&(u===void 0||u=="PKCS8PUB"))return St(ut=new ce(l).getEncodedHex(),"PUBLIC KEY");if(u=="PKCS1PRV"&&Ze!==void 0&&l instanceof Ze&&(c===void 0||c==null)&&l.isPrivate==1)return St(ut=nt(l).getEncodedHex(),"RSA PRIVATE KEY");if(u=="PKCS1PRV"&&Ke!==void 0&&l instanceof Ke&&(c===void 0||c==null)&&l.isPrivate==1){var oe=new ne({name:l.curveName}).getEncodedHex(),ge=X(l).getEncodedHex(),Je="";return Je+=St(oe,"EC PARAMETERS"),Je+=St(ge,"EC PRIVATE KEY")}if(u=="PKCS1PRV"&&Ae!==void 0&&l instanceof Ae&&(c===void 0||c==null)&&l.isPrivate==1)return St(ut=le(l).getEncodedHex(),"DSA PRIVATE KEY");if(u=="PKCS5PRV"&&Ze!==void 0&&l instanceof Ze&&c!==void 0&&c!=null&&l.isPrivate==1){var ut=nt(l).getEncodedHex();return v===void 0&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",ut,c,v,K)}if(u=="PKCS5PRV"&&Ke!==void 0&&l instanceof Ke&&c!==void 0&&c!=null&&l.isPrivate==1)return ut=X(l).getEncodedHex(),v===void 0&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",ut,c,v,K);if(u=="PKCS5PRV"&&Ae!==void 0&&l instanceof Ae&&c!==void 0&&c!=null&&l.isPrivate==1)return ut=le(l).getEncodedHex(),v===void 0&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",ut,c,v,K);var Pt=function(Ht,bn){var Qt=_t(Ht,bn);return new fe({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Qt.pbkdf2Salt}},{int:Qt.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Qt.encryptionSchemeIV}}]}]}]},{octstr:{hex:Qt.ciphertext}}]}).getEncodedHex()},_t=function(Ht,bn){var Qt=B.lib.WordArray.random(8),fn=B.lib.WordArray.random(8),qn=B.PBKDF2(bn,Qt,{keySize:6,iterations:100}),Mn=B.enc.Hex.parse(Ht),Bn=B.TripleDES.encrypt(Mn,qn,{iv:fn})+"",cn={};return cn.ciphertext=Bn,cn.pbkdf2Salt=B.enc.Hex.stringify(Qt),cn.pbkdf2Iter=100,cn.encryptionSchemeAlg="DES-EDE3-CBC",cn.encryptionSchemeIV=B.enc.Hex.stringify(fn),cn};if(u=="PKCS8PRV"&&Ze!=null&&l instanceof Ze&&l.isPrivate==1){var Zt=nt(l).getEncodedHex();return ut=fe({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Zt}}]}).getEncodedHex(),c===void 0||c==null?St(ut,"PRIVATE KEY"):St(ge=Pt(ut,c),"ENCRYPTED PRIVATE KEY")}if(u=="PKCS8PRV"&&Ke!==void 0&&l instanceof Ke&&l.isPrivate==1)return Zt=new fe({seq:[{int:1},{octstr:{hex:l.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+l.pubKeyHex}}]}]}).getEncodedHex(),ut=fe({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:l.curveName}}]},{octstr:{hex:Zt}}]}).getEncodedHex(),c===void 0||c==null?St(ut,"PRIVATE KEY"):St(ge=Pt(ut,c),"ENCRYPTED PRIVATE KEY");if(u=="PKCS8PRV"&&Ae!==void 0&&l instanceof Ae&&l.isPrivate==1)return Zt=new re({bigint:l.x}).getEncodedHex(),ut=fe({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:l.p}},{int:{bigint:l.q}},{int:{bigint:l.g}}]}]},{octstr:{hex:Zt}}]}).getEncodedHex(),c===void 0||c==null?St(ut,"PRIVATE KEY"):St(ge=Pt(ut,c),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Vt.getKeyFromCSRPEM=function(l){var u=Et(l,"CERTIFICATE REQUEST");return Vt.getKeyFromCSRHex(u)},Vt.getKeyFromCSRHex=function(l){var u=Vt.parseCSRHex(l);return Vt.getKey(u.p8pubkeyhex,null,"pkcs8pub")},Vt.parseCSRHex=function(l){var u=Ie,c=u.getChildIdx,v=u.getTLV,x={},K=l;if(K.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var W=c(K,0);if(W.length<1)throw new Error("malformed CSR(code:002)");if(K.substr(W[0],2)!="30")throw new Error("malformed CSR(code:003)");var ie=c(K,W[0]);if(ie.length<3)throw new Error("malformed CSR(code:004)");return x.p8pubkeyhex=v(K,ie[2]),x},Vt.getKeyID=function(l){var u=Vt,c=Ie;typeof l=="string"&&l.indexOf("BEGIN ")!=-1&&(l=u.getKey(l));var v=Et(u.getPEM(l)),x=c.getIdxbyList(v,0,[1]),K=c.getV(v,x).substring(2);return k.crypto.Util.hashHex(K,"sha1")},Vt.getJWKFromKey=function(l){var u={};if(l instanceof At&&l.isPrivate)return u.kty="RSA",u.n=Tt(l.n.toString(16)),u.e=Tt(l.e.toString(16)),u.d=Tt(l.d.toString(16)),u.p=Tt(l.p.toString(16)),u.q=Tt(l.q.toString(16)),u.dp=Tt(l.dmp1.toString(16)),u.dq=Tt(l.dmq1.toString(16)),u.qi=Tt(l.coeff.toString(16)),u;if(l instanceof At&&l.isPublic)return u.kty="RSA",u.n=Tt(l.n.toString(16)),u.e=Tt(l.e.toString(16)),u;if(l instanceof k.crypto.ECDSA&&l.isPrivate){if((v=l.getShortNISTPCurveName())!=="P-256"&&v!=="P-384")throw new Error("unsupported curve name for JWT: "+v);var c=l.getPublicKeyXYHex();return u.kty="EC",u.crv=v,u.x=Tt(c.x),u.y=Tt(c.y),u.d=Tt(l.prvKeyHex),u}if(l instanceof k.crypto.ECDSA&&l.isPublic){var v;if((v=l.getShortNISTPCurveName())!=="P-256"&&v!=="P-384")throw new Error("unsupported curve name for JWT: "+v);return c=l.getPublicKeyXYHex(),u.kty="EC",u.crv=v,u.x=Tt(c.x),u.y=Tt(c.y),u}throw new Error("not supported key object")},At.getPosArrayOfChildrenFromHex=function(l){return Ie.getChildIdx(l,0)},At.getHexValueArrayOfChildrenFromHex=function(l){var u,c=Ie.getV,v=c(l,(u=At.getPosArrayOfChildrenFromHex(l))[0]),x=c(l,u[1]),K=c(l,u[2]),W=c(l,u[3]),ie=c(l,u[4]),ne=c(l,u[5]),re=c(l,u[6]),fe=c(l,u[7]),ce=c(l,u[8]);return(u=new Array).push(v,x,K,W,ie,ne,re,fe,ce),u},At.prototype.readPrivateKeyFromPEMString=function(l){var u=Et(l),c=At.getHexValueArrayOfChildrenFromHex(u);this.setPrivateEx(c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},At.prototype.readPKCS5PrvKeyHex=function(l){var u=At.getHexValueArrayOfChildrenFromHex(l);this.setPrivateEx(u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8])},At.prototype.readPKCS8PrvKeyHex=function(l){var u,c,v,x,K,W,ie,ne,re=Ie,fe=re.getVbyListEx;if(re.isASN1HEX(l)===!1)throw new Error("not ASN.1 hex string");try{u=fe(l,0,[2,0,1],"02"),c=fe(l,0,[2,0,2],"02"),v=fe(l,0,[2,0,3],"02"),x=fe(l,0,[2,0,4],"02"),K=fe(l,0,[2,0,5],"02"),W=fe(l,0,[2,0,6],"02"),ie=fe(l,0,[2,0,7],"02"),ne=fe(l,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(u,c,v,x,K,W,ie,ne)},At.prototype.readPKCS5PubKeyHex=function(l){var u=Ie,c=u.getV;if(u.isASN1HEX(l)===!1)throw new Error("keyHex is not ASN.1 hex string");var v=u.getChildIdx(l,0);if(v.length!==2||l.substr(v[0],2)!=="02"||l.substr(v[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var x=c(l,v[0]),K=c(l,v[1]);this.setPublic(x,K)},At.prototype.readPKCS8PubKeyHex=function(l){var u=Ie;if(u.isASN1HEX(l)===!1)throw new Error("not ASN.1 hex string");if(u.getTLVbyListEx(l,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var c=u.getTLVbyListEx(l,0,[1,0]);this.readPKCS5PubKeyHex(c)},At.prototype.readCertPubKeyHex=function(l,u){var c,v;(c=new An).readCertHex(l),v=c.getPublicKeyHex(),this.readPKCS8PubKeyHex(v)};function pr(l,u){for(var c="",v=u/4-l.length,x=0;x<v;x++)c+="0";return c+l}function ci(l,u,c){for(var v="",x=0;v.length<u;)v+=or(c(nr(l+String.fromCharCode.apply(String,[(4278190080&x)>>24,(16711680&x)>>16,(65280&x)>>8,255&x])))),x+=1;return v}function fi(l){for(var u in k.crypto.Util.DIGESTINFOHEAD){var c=k.crypto.Util.DIGESTINFOHEAD[u],v=c.length;if(l.substring(0,v)==c)return[u,l.substring(v)]}return[]}function An(l){var u,c=Ie,v=c.getChildIdx,x=c.getV,K=c.getTLV,W=c.getVbyList,ie=c.getVbyListEx,ne=c.getTLVbyList,re=c.getTLVbyListEx,fe=c.getIdxbyList,ce=c.getIdxbyListEx,ye=c.getVidx,Ae=c.getInt,Ke=c.oidname,Ze=c.hextooidstr,nt=Et;try{u=k.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var X=ne(this.hex,0,[0,0]);if(X.substr(0,2)=="a0"){var le=ne(X,0,[0]),oe=Ae(le,0);if(oe<0||2<oe)throw new Error("malformed version field");return this.version=oe+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return ie(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var X=re(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(X)},this.getAlgorithmIdentifierName=function(X){for(var le in u)if(X===u[le])return le;return Ke(ie(X,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return ne(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return ne(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var X=W(this.hex,0,[0,4+this.foffset,0]);return X=X.replace(/(..)/g,"%$1"),X=decodeURIComponent(X)},this.getNotAfter=function(){var X=W(this.hex,0,[0,4+this.foffset,1]);return X=X.replace(/(..)/g,"%$1"),X=decodeURIComponent(X)},this.getPublicKeyHex=function(){return c.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return fe(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var X=this.getPublicKeyIdx();return fe(this.hex,X,[1,0],"30")},this.getPublicKey=function(){return Vt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var X=ne(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(X)},this.getSignatureValueHex=function(){return W(this.hex,0,[2],"03",!0)},this.verifySignature=function(X){var le=this.getSignatureAlgorithmField(),oe=this.getSignatureValueHex(),ge=ne(this.hex,0,[0],"30"),Je=new k.crypto.Signature({alg:le});return Je.init(X),Je.updateHex(ge),Je.verify(oe)},this.parseExt=function(X){var le,oe,ge;if(X===void 0){if(ge=this.hex,this.version!==3)return-1;le=fe(ge,0,[0,7,0],"30"),oe=v(ge,le)}else{ge=Et(X);var Je=fe(ge,0,[0,3,0,0],"06");if(x(ge,Je)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);le=fe(ge,0,[0,3,0,1,0],"30"),oe=v(ge,le),this.hex=ge}this.aExtInfo=new Array;for(var ut=0;ut<oe.length;ut++){var Pt={critical:!1},_t=0;v(ge,oe[ut]).length===3&&(Pt.critical=!0,_t=1),Pt.oid=c.hextooidstr(W(ge,oe[ut],[0],"06"));var Zt=fe(ge,oe[ut],[1+_t]);Pt.vidx=ye(ge,Zt),this.aExtInfo.push(Pt)}},this.getExtInfo=function(X){var le=this.aExtInfo,oe=X;if(X.match(/^[0-9.]+$/)||(oe=k.asn1.x509.OID.name2oid(X)),oe!==""){for(var ge=0;ge<le.length;ge++)if(le[ge].oid===oe)return le[ge]}},this.getExtBasicConstraints=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("basicConstraints");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"basicConstraints"};if(le&&(ge.critical=!0),X==="3000")return ge;if(X==="30030101ff")return ge.cA=!0,ge;if(X.substr(0,12)==="30060101ff02"){var Je=x(X,10),ut=parseInt(Je,16);return ge.cA=!0,ge.pathLen=ut,ge}throw new Error("hExtV parse error: "+X)},this.getExtKeyUsage=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("keyUsage");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"keyUsage"};return le&&(ge.critical=!0),ge.names=this.getExtKeyUsageString(X).split(","),ge},this.getExtKeyUsageBin=function(X){if(X===void 0){var le=this.getExtInfo("keyUsage");if(le===void 0)return"";X=K(this.hex,le.vidx)}if(X.length!=8&&X.length!=10)throw new Error("malformed key usage value: "+X);var oe="000000000000000"+parseInt(X.substr(6),16).toString(2);return X.length==8&&(oe=oe.slice(-8)),X.length==10&&(oe=oe.slice(-16)),(oe=oe.replace(/0+$/,""))==""&&(oe="0"),oe},this.getExtKeyUsageString=function(X){for(var le=this.getExtKeyUsageBin(X),oe=new Array,ge=0;ge<le.length;ge++)le.substr(ge,1)=="1"&&oe.push(An.KEYUSAGE_NAME[ge]);return oe.join(",")},this.getExtSubjectKeyIdentifier=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("subjectKeyIdentifier");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"subjectKeyIdentifier"};le&&(ge.critical=!0);var Je=x(X,0);return ge.kid={hex:Je},ge},this.getExtAuthorityKeyIdentifier=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("authorityKeyIdentifier");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"authorityKeyIdentifier"};le&&(ge.critical=!0);for(var Je=v(X,0),ut=0;ut<Je.length;ut++){var Pt=X.substr(Je[ut],2);if(Pt==="80"&&(ge.kid={hex:x(X,Je[ut])}),Pt==="a1"){var _t=K(X,Je[ut]),Zt=this.getGeneralNames(_t);ge.issuer=Zt[0].dn}Pt==="82"&&(ge.sn={hex:x(X,Je[ut])})}return ge},this.getExtExtKeyUsage=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("extKeyUsage");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"extKeyUsage",array:[]};le&&(ge.critical=!0);for(var Je=v(X,0),ut=0;ut<Je.length;ut++)ge.array.push(Ke(x(X,Je[ut])));return ge},this.getExtExtKeyUsageName=function(){var X=this.getExtInfo("extKeyUsage");if(X===void 0)return X;var le=new Array,oe=K(this.hex,X.vidx);if(oe==="")return le;for(var ge=v(oe,0),Je=0;Je<ge.length;Je++)le.push(Ke(x(oe,ge[Je])));return le},this.getExtSubjectAltName=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("subjectAltName");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"subjectAltName",array:[]};return le&&(ge.critical=!0),ge.array=this.getGeneralNames(X),ge},this.getExtIssuerAltName=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("issuerAltName");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"issuerAltName",array:[]};return le&&(ge.critical=!0),ge.array=this.getGeneralNames(X),ge},this.getGeneralNames=function(X){for(var le=v(X,0),oe=[],ge=0;ge<le.length;ge++){var Je=this.getGeneralName(K(X,le[ge]));Je!==void 0&&oe.push(Je)}return oe},this.getGeneralName=function(X){var le=X.substr(0,2),oe=x(X,0),ge=or(oe);return le=="81"?{rfc822:ge}:le=="82"?{dns:ge}:le=="86"?{uri:ge}:le=="87"?{ip:ui(oe)}:le=="a4"?{dn:this.getX500Name(oe)}:void 0},this.getExtSubjectAltName2=function(){var X,le,oe,ge=this.getExtInfo("subjectAltName");if(ge===void 0)return ge;for(var Je=new Array,ut=K(this.hex,ge.vidx),Pt=v(ut,0),_t=0;_t<Pt.length;_t++)oe=ut.substr(Pt[_t],2),X=x(ut,Pt[_t]),oe==="81"&&(le=In(X),Je.push(["MAIL",le])),oe==="82"&&(le=In(X),Je.push(["DNS",le])),oe==="84"&&(le=An.hex2dn(X,0),Je.push(["DN",le])),oe==="86"&&(le=In(X),Je.push(["URI",le])),oe==="87"&&(le=ui(X),Je.push(["IP",le]));return Je},this.getExtCRLDistributionPoints=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("cRLDistributionPoints");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"cRLDistributionPoints",array:[]};le&&(ge.critical=!0);for(var Je=v(X,0),ut=0;ut<Je.length;ut++){var Pt=K(X,Je[ut]);ge.array.push(this.getDistributionPoint(Pt))}return ge},this.getDistributionPoint=function(X){for(var le={},oe=v(X,0),ge=0;ge<oe.length;ge++){var Je=X.substr(oe[ge],2),ut=K(X,oe[ge]);Je=="a0"&&(le.dpname=this.getDistributionPointName(ut))}return le},this.getDistributionPointName=function(X){for(var le={},oe=v(X,0),ge=0;ge<oe.length;ge++){var Je=X.substr(oe[ge],2),ut=K(X,oe[ge]);Je=="a0"&&(le.full=this.getGeneralNames(ut))}return le},this.getExtCRLDistributionPointsURI=function(){var X=this.getExtInfo("cRLDistributionPoints");if(X===void 0)return X;for(var le=new Array,oe=v(this.hex,X.vidx),ge=0;ge<oe.length;ge++)try{var Je=In(W(this.hex,oe[ge],[0,0,0],"86"));le.push(Je)}catch{}return le},this.getExtAIAInfo=function(){var X=this.getExtInfo("authorityInfoAccess");if(X===void 0)return X;for(var le={ocsp:[],caissuer:[]},oe=v(this.hex,X.vidx),ge=0;ge<oe.length;ge++){var Je=W(this.hex,oe[ge],[0],"06"),ut=W(this.hex,oe[ge],[1],"86");Je==="2b06010505073001"&&le.ocsp.push(In(ut)),Je==="2b06010505073002"&&le.caissuer.push(In(ut))}return le},this.getExtAuthorityInfoAccess=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("authorityInfoAccess");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"authorityInfoAccess",array:[]};le&&(ge.critical=!0);for(var Je=v(X,0),ut=0;ut<Je.length;ut++){var Pt=ie(X,Je[ut],[0],"06"),_t=In(W(X,Je[ut],[1],"86"));if(Pt=="2b06010505073001")ge.array.push({ocsp:_t});else{if(Pt!="2b06010505073002")throw new Error("unknown method: "+Pt);ge.array.push({caissuer:_t})}}return ge},this.getExtCertificatePolicies=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("certificatePolicies");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"certificatePolicies",array:[]};le&&(ge.critical=!0);for(var Je=v(X,0),ut=0;ut<Je.length;ut++){var Pt=K(X,Je[ut]),_t=this.getPolicyInformation(Pt);ge.array.push(_t)}return ge},this.getPolicyInformation=function(X){var le={},oe=W(X,0,[0],"06");le.policyoid=Ke(oe);var ge=ce(X,0,[1],"30");if(ge!=-1){le.array=[];for(var Je=v(X,ge),ut=0;ut<Je.length;ut++){var Pt=K(X,Je[ut]),_t=this.getPolicyQualifierInfo(Pt);le.array.push(_t)}}return le},this.getPolicyQualifierInfo=function(X){var le={},oe=W(X,0,[0],"06");if(oe==="2b06010505070201"){var ge=ie(X,0,[1],"16");le.cps=or(ge)}else if(oe==="2b06010505070202"){var Je=ne(X,0,[1],"30");le.unotice=this.getUserNotice(Je)}return le},this.getUserNotice=function(X){for(var le={},oe=v(X,0),ge=0;ge<oe.length;ge++){var Je=K(X,oe[ge]);Je.substr(0,2)!="30"&&(le.exptext=this.getDisplayText(Je))}return le},this.getDisplayText=function(X){var le={};return le.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[X.substr(0,2)],le.str=or(x(X,0)),le},this.getExtCRLNumber=function(X,le){var oe={extname:"cRLNumber"};if(le&&(oe.critical=!0),X.substr(0,2)=="02")return oe.num={hex:x(X,0)},oe;throw new Error("hExtV parse error: "+X)},this.getExtCRLReason=function(X,le){var oe={extname:"cRLReason"};if(le&&(oe.critical=!0),X.substr(0,2)=="0a")return oe.code=parseInt(x(X,0),16),oe;throw new Error("hExtV parse error: "+X)},this.getExtOcspNonce=function(X,le){var oe={extname:"ocspNonce"};le&&(oe.critical=!0);var ge=x(X,0);return oe.hex=ge,oe},this.getExtOcspNoCheck=function(X,le){var oe={extname:"ocspNoCheck"};return le&&(oe.critical=!0),oe},this.getExtAdobeTimeStamp=function(X,le){if(X===void 0&&le===void 0){var oe=this.getExtInfo("adobeTimeStamp");if(oe===void 0)return;X=K(this.hex,oe.vidx),le=oe.critical}var ge={extname:"adobeTimeStamp"};le&&(ge.critical=!0);var Je=v(X,0);if(Je.length>1){var ut=K(X,Je[1]),Pt=this.getGeneralName(ut);Pt.uri!=null&&(ge.uri=Pt.uri)}if(Je.length>2){var _t=K(X,Je[2]);_t=="0101ff"&&(ge.reqauth=!0),_t=="010100"&&(ge.reqauth=!1)}return ge},this.getX500NameRule=function(X){for(var le=null,oe=[],ge=0;ge<X.length;ge++)for(var Je=X[ge],ut=0;ut<Je.length;ut++)oe.push(Je[ut]);for(ge=0;ge<oe.length;ge++){var Pt=oe[ge],_t=Pt.ds,Zt=Pt.value,It=Pt.type;if(_t!="prn"&&_t!="utf8"&&_t!="ia5")return"mixed";if(_t=="ia5"){if(It!="CN")return"mixed";if(k.lang.String.isMail(Zt))continue;return"mixed"}if(It=="C"){if(_t=="prn")continue;return"mixed"}if(le==null)le=_t;else if(le!==_t)return"mixed"}return le??"prn"},this.getX500Name=function(X){var le=this.getX500NameArray(X);return{array:le,str:this.dnarraytostr(le)}},this.getX500NameArray=function(X){for(var le=[],oe=v(X,0),ge=0;ge<oe.length;ge++)le.push(this.getRDN(K(X,oe[ge])));return le},this.getRDN=function(X){for(var le=[],oe=v(X,0),ge=0;ge<oe.length;ge++)le.push(this.getAttrTypeAndValue(K(X,oe[ge])));return le},this.getAttrTypeAndValue=function(X){var le={type:null,value:null,ds:null},oe=v(X,0),ge=W(X,oe[0],[],"06"),Je=W(X,oe[1],[]),ut=k.asn1.ASN1Util.oidHexToInt(ge);return le.type=k.asn1.x509.OID.oid2atype(ut),le.ds=this.HEX2STAG[X.substr(oe[1],2)],le.ds!="bmp"?le.value=In(Je):le.value=li(Je),le},this.readCertPEM=function(X){this.readCertHex(nt(X))},this.readCertHex=function(X){this.hex=X,this.getVersion();try{fe(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var X={};return X.version=this.getVersion(),X.serial={hex:this.getSerialNumberHex()},X.sigalg=this.getSignatureAlgorithmField(),X.issuer=this.getIssuer(),X.notbefore=this.getNotBefore(),X.notafter=this.getNotAfter(),X.subject=this.getSubject(),X.sbjpubkey=St(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(X.ext=this.getExtParamArray()),X.sighex=this.getSignatureValueHex(),X},this.getExtParamArray=function(X){X==null&&ce(this.hex,0,[0,"[3]"])!=-1&&(X=re(this.hex,0,[0,"[3]",0],"30"));for(var le=[],oe=v(X,0),ge=0;ge<oe.length;ge++){var Je=K(X,oe[ge]),ut=this.getExtParam(Je);ut!=null&&le.push(ut)}return le},this.getExtParam=function(X){var le=v(X,0).length;if(le!=2&&le!=3)throw new Error("wrong number elements in Extension: "+le+" "+X);var oe=Ze(W(X,0,[0],"06")),ge=!1;le==3&&ne(X,0,[1])=="0101ff"&&(ge=!0);var Je=ne(X,0,[le-1,0]),ut=void 0;if(oe=="2.5.29.14"?ut=this.getExtSubjectKeyIdentifier(Je,ge):oe=="2.5.29.15"?ut=this.getExtKeyUsage(Je,ge):oe=="2.5.29.17"?ut=this.getExtSubjectAltName(Je,ge):oe=="2.5.29.18"?ut=this.getExtIssuerAltName(Je,ge):oe=="2.5.29.19"?ut=this.getExtBasicConstraints(Je,ge):oe=="2.5.29.31"?ut=this.getExtCRLDistributionPoints(Je,ge):oe=="2.5.29.32"?ut=this.getExtCertificatePolicies(Je,ge):oe=="2.5.29.35"?ut=this.getExtAuthorityKeyIdentifier(Je,ge):oe=="2.5.29.37"?ut=this.getExtExtKeyUsage(Je,ge):oe=="1.3.6.1.5.5.7.1.1"?ut=this.getExtAuthorityInfoAccess(Je,ge):oe=="2.5.29.20"?ut=this.getExtCRLNumber(Je,ge):oe=="2.5.29.21"?ut=this.getExtCRLReason(Je,ge):oe=="1.3.6.1.5.5.7.48.1.2"?ut=this.getExtOcspNonce(Je,ge):oe=="1.3.6.1.5.5.7.48.1.5"?ut=this.getExtOcspNoCheck(Je,ge):oe=="1.2.840.113583.1.1.9.1"&&(ut=this.getExtAdobeTimeStamp(Je,ge)),ut!=null)return ut;var Pt={extname:oe,extn:Je};return ge&&(Pt.critical=!0),Pt},this.findExt=function(X,le){for(var oe=0;oe<X.length;oe++)if(X[oe].extname==le)return X[oe];return null},this.updateExtCDPFullURI=function(X,le){var oe=this.findExt(X,"cRLDistributionPoints");if(oe!=null&&oe.array!=null){for(var ge=oe.array,Je=0;Je<ge.length;Je++)if(ge[Je].dpname!=null&&ge[Je].dpname.full!=null)for(var ut=ge[Je].dpname.full,Pt=0;Pt<ut.length;Pt++){var _t=ut[Je];_t.uri!=null&&(_t.uri=le)}}},this.updateExtAIAOCSP=function(X,le){var oe=this.findExt(X,"authorityInfoAccess");if(oe!=null&&oe.array!=null)for(var ge=oe.array,Je=0;Je<ge.length;Je++)ge[Je].ocsp!=null&&(ge[Je].ocsp=le)},this.updateExtAIACAIssuer=function(X,le){var oe=this.findExt(X,"authorityInfoAccess");if(oe!=null&&oe.array!=null)for(var ge=oe.array,Je=0;Je<ge.length;Je++)ge[Je].caissuer!=null&&(ge[Je].caissuer=le)},this.dnarraytostr=function(X){return"/"+X.map(function(le){return function(ge){return ge.map(function(Je){return function(Pt){return Pt.type+"="+Pt.value}(Je).replace(/\+/,"\\+")}).join("+")}(le).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var X,le,oe,ge=function(qn){return JSON.stringify(qn.array).replace(/[\[\]\{\}\"]/g,"")},Je=function(qn){for(var Mn="",Bn=qn.array,cn=0;cn<Bn.length;cn++){var Hn=Bn[cn];if(Mn+="    policy oid: "+Hn.policyoid+`
`,Hn.array!==void 0)for(var _n=0;_n<Hn.array.length;_n++){var Nn=Hn.array[_n];Nn.cps!==void 0&&(Mn+="    cps: "+Nn.cps+`
`)}}return Mn},ut=function(qn){for(var Mn="",Bn=qn.array,cn=0;cn<Bn.length;cn++){var Hn=Bn[cn];try{Hn.dpname.full[0].uri!==void 0&&(Mn+="    "+Hn.dpname.full[0].uri+`
`)}catch{}try{Hn.dname.full[0].dn.hex!==void 0&&(Mn+="    "+An.hex2dn(Hn.dpname.full[0].dn.hex)+`
`)}catch{}}return Mn},Pt=function(qn){for(var Mn="",Bn=qn.array,cn=0;cn<Bn.length;cn++){var Hn=Bn[cn];Hn.caissuer!==void 0&&(Mn+="    caissuer: "+Hn.caissuer+`
`),Hn.ocsp!==void 0&&(Mn+="    ocsp: "+Hn.ocsp+`
`)}return Mn};if(X=`Basic Fields
`,X+="  serial number: "+this.getSerialNumberHex()+`
`,X+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,X+="  issuer: "+this.getIssuerString()+`
`,X+="  notBefore: "+this.getNotBefore()+`
`,X+="  notAfter: "+this.getNotAfter()+`
`,X+="  subject: "+this.getSubjectString()+`
`,X+=`  subject public key info: 
`,X+="    key algorithm: "+(le=this.getPublicKey()).type+`
`,le.type==="RSA"&&(X+="    n="+Vn(le.n.toString(16)).substr(0,16)+`...
`,X+="    e="+Vn(le.e.toString(16))+`
`),(oe=this.aExtInfo)!=null){X+=`X509v3 Extensions:
`;for(var _t=0;_t<oe.length;_t++){var Zt=oe[_t],It=k.asn1.x509.OID.oid2name(Zt.oid);It===""&&(It=Zt.oid);var Ht="";if(Zt.critical===!0&&(Ht="CRITICAL"),X+="  "+It+" "+Ht+`:
`,It==="basicConstraints"){var bn=this.getExtBasicConstraints();bn.cA===void 0?X+=`    {}
`:(X+="    cA=true",bn.pathLen!==void 0&&(X+=", pathLen="+bn.pathLen),X+=`
`)}else if(It==="keyUsage")X+="    "+this.getExtKeyUsageString()+`
`;else if(It==="subjectKeyIdentifier")X+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(It==="authorityKeyIdentifier"){var Qt=this.getExtAuthorityKeyIdentifier();Qt.kid!==void 0&&(X+="    kid="+Qt.kid.hex+`
`)}else It==="extKeyUsage"?X+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:It==="subjectAltName"?X+="    "+ge(this.getExtSubjectAltName())+`
`:It==="cRLDistributionPoints"?X+=ut(this.getExtCRLDistributionPoints()):It==="authorityInfoAccess"?X+=Pt(this.getExtAuthorityInfoAccess()):It==="certificatePolicies"&&(X+=Je(this.getExtCertificatePolicies()))}}return X+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,X+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof l=="string"&&(l.indexOf("-----BEGIN")!=-1?this.readCertPEM(l):k.lang.String.isHex(l)&&this.readCertHex(l))}At.prototype.sign=function(l,u){var c=function(x){return k.crypto.Util.hashString(x,u)}(l);return this.signWithMessageHash(c,u)},At.prototype.signWithMessageHash=function(l,u){var c=Dt(k.crypto.Util.getPaddedDigestInfoHex(l,u,this.n.bitLength()),16);return pr(this.doPrivate(c).toString(16),this.n.bitLength())},At.prototype.signPSS=function(l,u,c){var v=function(K){return k.crypto.Util.hashHex(K,u)}(nr(l));return c===void 0&&(c=-1),this.signWithMessageHashPSS(v,u,c)},At.prototype.signWithMessageHashPSS=function(l,u,c){var v,x=or(l),K=x.length,W=this.n.bitLength()-1,ie=Math.ceil(W/8),ne=function(X){return k.crypto.Util.hashHex(X,u)};if(c===-1||c===void 0)c=K;else if(c===-2)c=ie-K-2;else if(c<-2)throw new Error("invalid salt length");if(ie<K+c+2)throw new Error("data too long");var re="";c>0&&(re=new Array(c),new ft().nextBytes(re),re=String.fromCharCode.apply(String,re));var fe=or(ne(nr("\0\0\0\0\0\0\0\0"+x+re))),ce=[];for(v=0;v<ie-c-K-2;v+=1)ce[v]=0;var ye=String.fromCharCode.apply(String,ce)+""+re,Ae=ci(fe,ye.length,ne),Ke=[];for(v=0;v<ye.length;v+=1)Ke[v]=ye.charCodeAt(v)^Ae.charCodeAt(v);var Ze=65280>>8*ie-W&255;for(Ke[0]&=~Ze,v=0;v<K;v++)Ke.push(fe.charCodeAt(v));return Ke.push(188),pr(this.doPrivate(new J(Ke)).toString(16),this.n.bitLength())},At.prototype.verify=function(l,u){if((u=u.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var c=Dt(u,16),v=this.n.bitLength();if(c.bitLength()>v)return!1;var x=this.doPublic(c).toString(16);if(x.length+3!=v/4)return!1;var K=fi(x.replace(/^1f+00/,""));if(K.length==0)return!1;var W=K[0];return K[1]==function(ne){return k.crypto.Util.hashString(ne,W)}(l)},At.prototype.verifyWithMessageHash=function(l,u){if(u.length!=Math.ceil(this.n.bitLength()/4))return!1;var c=Dt(u,16);if(c.bitLength()>this.n.bitLength())return 0;var v=fi(this.doPublic(c).toString(16).replace(/^1f+00/,""));return v.length==0?!1:(v[0],v[1]==l)},At.prototype.verifyPSS=function(l,u,c,v){var x=function(W){return k.crypto.Util.hashHex(W,c)}(nr(l));return v===void 0&&(v=-1),this.verifyWithMessageHashPSS(x,u,c,v)},At.prototype.verifyWithMessageHashPSS=function(l,u,c,v){if(u.length!=Math.ceil(this.n.bitLength()/4))return!1;var x,K=new J(u,16),W=function(oe){return k.crypto.Util.hashHex(oe,c)},ie=or(l),ne=ie.length,re=this.n.bitLength()-1,fe=Math.ceil(re/8);if(v===-1||v===void 0)v=ne;else if(v===-2)v=fe-ne-2;else if(v<-2)throw new Error("invalid salt length");if(fe<ne+v+2)throw new Error("data too long");var ce=this.doPublic(K).toByteArray();for(x=0;x<ce.length;x+=1)ce[x]&=255;for(;ce.length<fe;)ce.unshift(0);if(ce[fe-1]!==188)throw new Error("encoded message does not end in 0xbc");var ye=(ce=String.fromCharCode.apply(String,ce)).substr(0,fe-ne-1),Ae=ce.substr(ye.length,ne),Ke=65280>>8*fe-re&255;if((ye.charCodeAt(0)&Ke)!=0)throw new Error("bits beyond keysize not zero");var Ze=ci(Ae,ye.length,W),nt=[];for(x=0;x<ye.length;x+=1)nt[x]=ye.charCodeAt(x)^Ze.charCodeAt(x);nt[0]&=~Ke;var X=fe-ne-v-2;for(x=0;x<X;x+=1)if(nt[x]!==0)throw new Error("leftmost octets not zero");if(nt[X]!==1)throw new Error("0x01 marker not found");return Ae===or(W(nr("\0\0\0\0\0\0\0\0"+ie+String.fromCharCode.apply(String,nt.slice(-v)))))},At.SALT_LEN_HLEN=-1,At.SALT_LEN_MAX=-2,At.SALT_LEN_RECOVER=-2,An.hex2dn=function(l,u){u===void 0&&(u=0);var c=new An;return Ie.getTLV(l,u),c.getX500Name(l).str},An.hex2rdn=function(l,u){if(u===void 0&&(u=0),l.substr(u,2)!=="31")throw new Error("malformed RDN");for(var c=new Array,v=Ie.getChildIdx(l,u),x=0;x<v.length;x++)c.push(An.hex2attrTypeValue(l,v[x]));return(c=c.map(function(K){return K.replace("+","\\+")})).join("+")},An.hex2attrTypeValue=function(l,u){var c=Ie,v=c.getV;if(u===void 0&&(u=0),l.substr(u,2)!=="30")throw new Error("malformed attribute type and value");var x=c.getChildIdx(l,u);x.length!==2||l.substr(x[0],2);var K=v(l,x[0]),W=k.asn1.ASN1Util.oidHexToInt(K);return k.asn1.x509.OID.oid2atype(W)+"="+or(v(l,x[1]))},An.getPublicKeyFromCertHex=function(l){var u=new An;return u.readCertHex(l),u.getPublicKey()},An.getPublicKeyFromCertPEM=function(l){var u=new An;return u.readCertPEM(l),u.getPublicKey()},An.getPublicKeyInfoPropOfCertPEM=function(l){var u,c,v=Ie.getVbyList,x={};return x.algparam=null,(u=new An).readCertPEM(l),c=u.getPublicKeyHex(),x.keyhex=v(c,0,[1],"03").substr(2),x.algoid=v(c,0,[0,0],"06"),x.algoid==="2a8648ce3d0201"&&(x.algparam=v(c,0,[0,1],"06")),x},An.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],k!==void 0&&k||(i.KJUR=k={}),k.jws!==void 0&&k.jws||(k.jws={}),k.jws.JWS=function(){var l=k.jws.JWS.isSafeJSONString;this.parseJWS=function(u,c){if(this.parsedJWS===void 0||!c&&this.parsedJWS.sigvalH===void 0){var v=u.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(v==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var x=v[1],K=v[2],W=v[3],ie=x+"."+K;if(this.parsedJWS={},this.parsedJWS.headB64U=x,this.parsedJWS.payloadB64U=K,this.parsedJWS.sigvalB64U=W,this.parsedJWS.si=ie,!c){var ne=vn(W),re=Dt(ne,16);this.parsedJWS.sigvalH=ne,this.parsedJWS.sigvalBI=re}var fe=Ge(x),ce=Ge(K);if(this.parsedJWS.headS=fe,this.parsedJWS.payloadS=ce,!l(fe,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+fe}}},k.jws.JWS.sign=function(l,u,c,v,x){var K,W,ie,ne=k,re=ne.jws.JWS,fe=re.readSafeJSONString,ce=re.isSafeJSONString,ye=ne.crypto,Ae=(ye.ECDSA,ye.Mac),Ke=ye.Signature,Ze=JSON;if(typeof u!="string"&&(u===void 0?"undefined":F(u))!="object")throw"spHeader must be JSON string or object: "+u;if((u===void 0?"undefined":F(u))=="object"&&(W=u,K=Ze.stringify(W)),typeof u=="string"){if(!ce(K=u))throw"JWS Head is not safe JSON string: "+K;W=fe(K)}if(ie=c,(c===void 0?"undefined":F(c))=="object"&&(ie=Ze.stringify(c)),l!=""&&l!=null||W.alg===void 0||(l=W.alg),l!=""&&l!=null&&W.alg===void 0&&(W.alg=l,K=Ze.stringify(W)),l!==W.alg)throw"alg and sHeader.alg doesn't match: "+l+"!="+W.alg;var nt=null;if(re.jwsalg2sigalg[l]===void 0)throw"unsupported alg name: "+l;nt=re.jwsalg2sigalg[l];var X=Ce(K)+"."+Ce(ie),le="";if(nt.substr(0,4)=="Hmac"){if(v===void 0)throw"mac key shall be specified for HS* alg";var oe=new Ae({alg:nt,prov:"cryptojs",pass:v});oe.updateString(X),le=oe.doFinal()}else if(nt.indexOf("withECDSA")!=-1){(Je=new Ke({alg:nt})).init(v,x),Je.updateString(X);var ge=Je.sign();le=k.crypto.ECDSA.asn1SigToConcatSig(ge)}else{var Je;nt!="none"&&((Je=new Ke({alg:nt})).init(v,x),Je.updateString(X),le=Je.sign())}return X+"."+Tt(le)},k.jws.JWS.verify=function(l,u,c){var v,x=k,K=x.jws.JWS,W=K.readSafeJSONString,ie=x.crypto,ne=ie.ECDSA,re=ie.Mac,fe=ie.Signature;F(At)!==void 0&&(v=At);var ce=l.split(".");if(ce.length!==3)return!1;var ye=ce[0]+"."+ce[1],Ae=vn(ce[2]),Ke=W(Ge(ce[0])),Ze=null,nt=null;if(Ke.alg===void 0)throw"algorithm not specified in header";if(nt=(Ze=Ke.alg).substr(0,2),c!=null&&Object.prototype.toString.call(c)==="[object Array]"&&c.length>0&&(":"+c.join(":")+":").indexOf(":"+Ze+":")==-1)throw"algorithm '"+Ze+"' not accepted in the list";if(Ze!="none"&&u===null)throw"key shall be specified to verify.";if(typeof u=="string"&&u.indexOf("-----BEGIN ")!=-1&&(u=Vt.getKey(u)),!(nt!="RS"&&nt!="PS"||u instanceof v))throw"key shall be a RSAKey obj for RS* and PS* algs";if(nt=="ES"&&!(u instanceof ne))throw"key shall be a ECDSA obj for ES* algs";var X=null;if(K.jwsalg2sigalg[Ke.alg]===void 0)throw"unsupported alg name: "+Ze;if((X=K.jwsalg2sigalg[Ze])=="none")throw"not supported";if(X.substr(0,4)=="Hmac"){if(u===void 0)throw"hexadecimal key shall be specified for HMAC";var le=new re({alg:X,pass:u});return le.updateString(ye),Ae==le.doFinal()}if(X.indexOf("withECDSA")!=-1){var oe,ge=null;try{ge=ne.concatSigToASN1Sig(Ae)}catch{return!1}return(oe=new fe({alg:X})).init(u),oe.updateString(ye),oe.verify(ge)}return(oe=new fe({alg:X})).init(u),oe.updateString(ye),oe.verify(Ae)},k.jws.JWS.parse=function(l){var u,c,v,x=l.split("."),K={};if(x.length!=2&&x.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return u=x[0],c=x[1],x.length==3&&(v=x[2]),K.headerObj=k.jws.JWS.readSafeJSONString(Ge(u)),K.payloadObj=k.jws.JWS.readSafeJSONString(Ge(c)),K.headerPP=JSON.stringify(K.headerObj,null,"  "),K.payloadObj==null?K.payloadPP=Ge(c):K.payloadPP=JSON.stringify(K.payloadObj,null,"  "),v!==void 0&&(K.sigHex=vn(v)),K},k.jws.JWS.verifyJWT=function(l,u,c){var v=k.jws,x=v.JWS,K=x.readSafeJSONString,W=x.inArray,ie=x.includedArray,ne=l.split("."),re=ne[0],fe=ne[1],ce=(vn(ne[2]),K(Ge(re))),ye=K(Ge(fe));if(ce.alg===void 0)return!1;if(c.alg===void 0)throw"acceptField.alg shall be specified";if(!W(ce.alg,c.alg)||ye.iss!==void 0&&F(c.iss)==="object"&&!W(ye.iss,c.iss)||ye.sub!==void 0&&F(c.sub)==="object"&&!W(ye.sub,c.sub))return!1;if(ye.aud!==void 0&&F(c.aud)==="object"){if(typeof ye.aud=="string"){if(!W(ye.aud,c.aud))return!1}else if(F(ye.aud)=="object"&&!ie(ye.aud,c.aud))return!1}var Ae=v.IntDate.getNow();return c.verifyAt!==void 0&&typeof c.verifyAt=="number"&&(Ae=c.verifyAt),c.gracePeriod!==void 0&&typeof c.gracePeriod=="number"||(c.gracePeriod=0),!(ye.exp!==void 0&&typeof ye.exp=="number"&&ye.exp+c.gracePeriod<Ae)&&!(ye.nbf!==void 0&&typeof ye.nbf=="number"&&Ae<ye.nbf-c.gracePeriod)&&!(ye.iat!==void 0&&typeof ye.iat=="number"&&Ae<ye.iat-c.gracePeriod)&&(ye.jti===void 0||c.jti===void 0||ye.jti===c.jti)&&!!x.verify(l,u,c.alg)},k.jws.JWS.includedArray=function(l,u){var c=k.jws.JWS.inArray;if(l===null||(l===void 0?"undefined":F(l))!=="object"||typeof l.length!="number")return!1;for(var v=0;v<l.length;v++)if(!c(l[v],u))return!1;return!0},k.jws.JWS.inArray=function(l,u){if(u===null||(u===void 0?"undefined":F(u))!=="object"||typeof u.length!="number")return!1;for(var c=0;c<u.length;c++)if(u[c]==l)return!0;return!1},k.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},k.jws.JWS.isSafeJSONString=function(l,u,c){var v=null;try{return((v=N(l))===void 0?"undefined":F(v))!="object"||v.constructor===Array?0:(u&&(u[c]=v),1)}catch{return 0}},k.jws.JWS.readSafeJSONString=function(l){var u=null;try{return((u=N(l))===void 0?"undefined":F(u))!="object"||u.constructor===Array?null:u}catch{return null}},k.jws.JWS.getEncodedSignatureValueFromJWS=function(l){var u=l.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(u==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return u[1]},k.jws.JWS.getJWKthumbprint=function(l){if(l.kty!=="RSA"&&l.kty!=="EC"&&l.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var u="{";if(l.kty==="RSA"){if(typeof l.n!="string"||typeof l.e!="string")throw"wrong n and e value for RSA key";u+='"e":"'+l.e+'",',u+='"kty":"'+l.kty+'",',u+='"n":"'+l.n+'"}'}else if(l.kty==="EC"){if(typeof l.crv!="string"||typeof l.x!="string"||typeof l.y!="string")throw"wrong crv, x and y value for EC key";u+='"crv":"'+l.crv+'",',u+='"kty":"'+l.kty+'",',u+='"x":"'+l.x+'",',u+='"y":"'+l.y+'"}'}else if(l.kty==="oct"){if(typeof l.k!="string")throw"wrong k value for oct(symmetric) key";u+='"kty":"'+l.kty+'",',u+='"k":"'+l.k+'"}'}var c=nr(u);return Tt(k.crypto.Util.hashHex(c,"sha256"))},k.jws.IntDate={},k.jws.IntDate.get=function(l){var u=k.jws.IntDate,c=u.getNow,v=u.getZulu;if(l=="now")return c();if(l=="now + 1hour")return c()+3600;if(l=="now + 1day")return c()+86400;if(l=="now + 1month")return c()+2592e3;if(l=="now + 1year")return c()+31536e3;if(l.match(/Z$/))return v(l);if(l.match(/^[0-9]+$/))return parseInt(l);throw"unsupported format: "+l},k.jws.IntDate.getZulu=function(l){return qt(l)},k.jws.IntDate.getNow=function(){return~~(new Date/1e3)},k.jws.IntDate.intDate2UTCString=function(l){return new Date(1e3*l).toUTCString()},k.jws.IntDate.intDate2Zulu=function(l){var u=new Date(1e3*l);return("0000"+u.getUTCFullYear()).slice(-4)+("00"+(u.getUTCMonth()+1)).slice(-2)+("00"+u.getUTCDate()).slice(-2)+("00"+u.getUTCHours()).slice(-2)+("00"+u.getUTCMinutes()).slice(-2)+("00"+u.getUTCSeconds()).slice(-2)+"Z"},i.SecureRandom=ft,i.rng_seed_time=me,i.BigInteger=J,i.RSAKey=At;var Ln=k.crypto.EDSA;i.EDSA=Ln;var Si=k.crypto.DSA;i.DSA=Si;var Yr=k.crypto.Signature;i.Signature=Yr;var Do=k.crypto.MessageDigest;i.MessageDigest=Do;var di=k.crypto.Mac;i.Mac=di;var ji=k.crypto.Cipher;i.Cipher=ji,i.KEYUTIL=Vt,i.ASN1HEX=Ie,i.X509=An,i.CryptoJS=B,i.b64tohex=ve,i.b64toBA=qe,i.stoBA=$t,i.BAtos=sn,i.BAtohex=Rt,i.stohex=rn,i.stob64=function(u){return Q(rn(u))},i.stob64u=function(u){return an(Q(rn(u)))},i.b64utos=function(u){return sn(qe(Ir(u)))},i.b64tob64u=an,i.b64utob64=Ir,i.hex2b64=Q,i.hextob64u=Tt,i.b64utohex=vn,i.utf8tob64u=Ce,i.b64utoutf8=Ge,i.utf8tob64=function(u){return Q(un(sr(u)))},i.b64toutf8=function(u){return decodeURIComponent(si(ve(u)))},i.utf8tohex=jr,i.hextoutf8=In,i.hextorstr=or,i.rstrtohex=nr,i.hextob64=Ii,i.hextob64nl=ae,i.b64nltohex=de,i.hextopem=St,i.pemtohex=Et,i.hextoArrayBuffer=function(u){if(u.length%2!=0)throw"input is not even length";if(u.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var c=new ArrayBuffer(u.length/2),v=new DataView(c),x=0;x<u.length/2;x++)v.setUint8(x,parseInt(u.substr(2*x,2),16));return c},i.ArrayBuffertohex=function(u){for(var c="",v=new DataView(u),x=0;x<u.byteLength;x++)c+=("00"+v.getUint8(x).toString(16)).slice(-2);return c},i.zulutomsec=Ot,i.zulutosec=qt,i.zulutodate=function(u){return new Date(Ot(u))},i.datetozulu=function(u,c,v){var x,K=u.getUTCFullYear();if(c){if(K<1950||2049<K)throw"not proper year for UTCTime: "+K;x=(""+K).slice(-2)}else x=("000"+K).slice(-4);if(x+=("0"+(u.getUTCMonth()+1)).slice(-2),x+=("0"+u.getUTCDate()).slice(-2),x+=("0"+u.getUTCHours()).slice(-2),x+=("0"+u.getUTCMinutes()).slice(-2),x+=("0"+u.getUTCSeconds()).slice(-2),v){var W=u.getUTCMilliseconds();W!==0&&(x+="."+(W=(W=("00"+W).slice(-3)).replace(/0+$/g,"")))}return x+="Z"},i.uricmptohex=un,i.hextouricmp=si,i.ipv6tohex=Er,i.hextoipv6=wi,i.hextoip=ui,i.iptohex=function(u){var c="malformed IP address";if(!(u=u.toLowerCase(u)).match(/^[0-9.]+$/)){if(u.match(/^[0-9a-f:]+$/)&&u.indexOf(":")!==-1)return Er(u);throw c}var v=u.split(".");if(v.length!==4)throw c;var x="";try{for(var K=0;K<4;K++)x+=("0"+parseInt(v[K]).toString(16)).slice(-2);return x}catch{throw c}},i.encodeURIComponentAll=sr,i.newline_toUnix=function(u){return u=u.replace(/\r\n/gm,`
`)},i.newline_toDos=function(u){return u=(u=u.replace(/\r\n/gm,`
`)).replace(/\n/gm,`\r
`)},i.hextoposhex=Vn,i.intarystrtohex=function(u){u=(u=(u=u.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return u.split(/,/).map(function(c,v,x){var K=parseInt(c);if(K<0||255<K)throw"integer not in range 0-255";return("00"+K.toString(16)).slice(-2)}).join("")}catch(c){throw"malformed integer array string: "+c}},i.strdiffidx=function(u,c){var v=u.length;u.length>c.length&&(v=c.length);for(var x=0;x<v;x++)if(u.charCodeAt(x)!=c.charCodeAt(x))return x;return u.length!=c.length?v:-1},i.KJUR=k;var Hr=k.crypto;i.crypto=Hr;var ua=k.asn1;i.asn1=ua;var Ei=k.jws;i.jws=Ei;var Ui=k.lang;i.lang=Ui}).call(this,d(28).Buffer)},function(s,i,d){(function(y){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var p=d(30),g=d(31),E=d(32);function m(){return S.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _(ue,j){if(m()<j)throw new RangeError("Invalid typed array length");return S.TYPED_ARRAY_SUPPORT?(ue=new Uint8Array(j)).__proto__=S.prototype:(ue===null&&(ue=new S(j)),ue.length=j),ue}function S(ue,j,T){if(!(S.TYPED_ARRAY_SUPPORT||this instanceof S))return new S(ue,j,T);if(typeof ue=="number"){if(typeof j=="string")throw new Error("If encoding is specified then the first argument must be a string");return C(this,ue)}return D(this,ue,j,T)}function D(ue,j,T,G){if(typeof j=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&j instanceof ArrayBuffer?function(me,Se,at,we){if(Se.byteLength,at<0||Se.byteLength<at)throw new RangeError("'offset' is out of bounds");if(Se.byteLength<at+(we||0))throw new RangeError("'length' is out of bounds");return Se=at===void 0&&we===void 0?new Uint8Array(Se):we===void 0?new Uint8Array(Se,at):new Uint8Array(Se,at,we),S.TYPED_ARRAY_SUPPORT?(me=Se).__proto__=S.prototype:me=O(me,Se),me}(ue,j,T,G):typeof j=="string"?function(me,Se,at){if(typeof at=="string"&&at!==""||(at="utf8"),!S.isEncoding(at))throw new TypeError('"encoding" must be a valid string encoding');var we=0|F(Se,at),ot=(me=_(me,we)).write(Se,at);return ot!==we&&(me=me.slice(0,ot)),me}(ue,j,T):function(me,Se){if(S.isBuffer(Se)){var at=0|U(Se.length);return(me=_(me,at)).length===0||Se.copy(me,0,0,at),me}if(Se){if(typeof ArrayBuffer<"u"&&Se.buffer instanceof ArrayBuffer||"length"in Se)return typeof Se.length!="number"||function(ot){return ot!=ot}(Se.length)?_(me,0):O(me,Se);if(Se.type==="Buffer"&&E(Se.data))return O(me,Se.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(ue,j)}function M(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be a number');if(ue<0)throw new RangeError('"size" argument must not be negative')}function C(ue,j){if(M(j),ue=_(ue,j<0?0:0|U(j)),!S.TYPED_ARRAY_SUPPORT)for(var T=0;T<j;++T)ue[T]=0;return ue}function O(ue,j){var T=j.length<0?0:0|U(j.length);ue=_(ue,T);for(var G=0;G<T;G+=1)ue[G]=255&j[G];return ue}function U(ue){if(ue>=m())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m().toString(16)+" bytes");return 0|ue}function F(ue,j){if(S.isBuffer(ue))return ue.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(ue)||ue instanceof ArrayBuffer))return ue.byteLength;typeof ue!="string"&&(ue=""+ue);var T=ue.length;if(T===0)return 0;for(var G=!1;;)switch(j){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":case void 0:return Ye(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*T;case"hex":return T>>>1;case"base64":return Ue(ue).length;default:if(G)return Ye(ue).length;j=(""+j).toLowerCase(),G=!0}}function P(ue,j,T){var G=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0)<=(j>>>=0))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return Me(this,j,T);case"utf8":case"utf-8":return ke(this,j,T);case"ascii":return mt(this,j,T);case"latin1":case"binary":return Ne(this,j,T);case"base64":return Xe(this,j,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,j,T);default:if(G)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),G=!0}}function I(ue,j,T){var G=ue[j];ue[j]=ue[T],ue[T]=G}function B(ue,j,T,G,ee){if(ue.length===0)return-1;if(typeof T=="string"?(G=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,isNaN(T)&&(T=ee?0:ue.length-1),T<0&&(T=ue.length+T),T>=ue.length){if(ee)return-1;T=ue.length-1}else if(T<0){if(!ee)return-1;T=0}if(typeof j=="string"&&(j=S.from(j,G)),S.isBuffer(j))return j.length===0?-1:z(ue,j,T,G,ee);if(typeof j=="number")return j&=255,S.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(ue,j,T):Uint8Array.prototype.lastIndexOf.call(ue,j,T):z(ue,[j],T,G,ee);throw new TypeError("val must be string, number or Buffer")}function z(ue,j,T,G,ee){var me,Se=1,at=ue.length,we=j.length;if(G!==void 0&&((G=String(G).toLowerCase())==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(ue.length<2||j.length<2)return-1;Se=2,at/=2,we/=2,T/=2}function ot(pn,At){return Se===1?pn[At]:pn.readUInt16BE(At*Se)}if(ee){var dt=-1;for(me=T;me<at;me++)if(ot(ue,me)===ot(j,dt===-1?0:me-dt)){if(dt===-1&&(dt=me),me-dt+1===we)return dt*Se}else dt!==-1&&(me-=me-dt),dt=-1}else for(T+we>at&&(T=at-we),me=T;me>=0;me--){for(var ft=!0,Dt=0;Dt<we;Dt++)if(ot(ue,me+Dt)!==ot(j,Dt)){ft=!1;break}if(ft)return me}return-1}function Y(ue,j,T,G){T=Number(T)||0;var ee=ue.length-T;G?(G=Number(G))>ee&&(G=ee):G=ee;var me=j.length;if(me%2!=0)throw new TypeError("Invalid hex string");G>me/2&&(G=me/2);for(var Se=0;Se<G;++Se){var at=parseInt(j.substr(2*Se,2),16);if(isNaN(at))return Se;ue[T+Se]=at}return Se}function Q(ue,j,T,G){return bt(Ye(j,ue.length-T),ue,T,G)}function ve(ue,j,T,G){return bt(function(me){for(var Se=[],at=0;at<me.length;++at)Se.push(255&me.charCodeAt(at));return Se}(j),ue,T,G)}function qe(ue,j,T,G){return ve(ue,j,T,G)}function J(ue,j,T,G){return bt(Ue(j),ue,T,G)}function pe(ue,j,T,G){return bt(function(me,Se){for(var at,we,ot,dt=[],ft=0;ft<me.length&&!((Se-=2)<0);++ft)we=(at=me.charCodeAt(ft))>>8,ot=at%256,dt.push(ot),dt.push(we);return dt}(j,ue.length-T),ue,T,G)}function Xe(ue,j,T){return j===0&&T===ue.length?p.fromByteArray(ue):p.fromByteArray(ue.slice(j,T))}function ke(ue,j,T){T=Math.min(ue.length,T);for(var G=[],ee=j;ee<T;){var me,Se,at,we,ot=ue[ee],dt=null,ft=ot>239?4:ot>223?3:ot>191?2:1;if(ee+ft<=T)switch(ft){case 1:ot<128&&(dt=ot);break;case 2:(192&(me=ue[ee+1]))==128&&(we=(31&ot)<<6|63&me)>127&&(dt=we);break;case 3:me=ue[ee+1],Se=ue[ee+2],(192&me)==128&&(192&Se)==128&&(we=(15&ot)<<12|(63&me)<<6|63&Se)>2047&&(we<55296||we>57343)&&(dt=we);break;case 4:me=ue[ee+1],Se=ue[ee+2],at=ue[ee+3],(192&me)==128&&(192&Se)==128&&(192&at)==128&&(we=(15&ot)<<18|(63&me)<<12|(63&Se)<<6|63&at)>65535&&we<1114112&&(dt=we)}dt===null?(dt=65533,ft=1):dt>65535&&(dt-=65536,G.push(dt>>>10&1023|55296),dt=56320|1023&dt),G.push(dt),ee+=ft}return function(pn){var At=pn.length;if(At<=wt)return String.fromCharCode.apply(String,pn);for(var Kt="",$=0;$<At;)Kt+=String.fromCharCode.apply(String,pn.slice($,$+=wt));return Kt}(G)}i.Buffer=S,i.SlowBuffer=function(j){return+j!=j&&(j=0),S.alloc(+j)},i.INSPECT_MAX_BYTES=50,S.TYPED_ARRAY_SUPPORT=y.TYPED_ARRAY_SUPPORT!==void 0?y.TYPED_ARRAY_SUPPORT:function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},j.foo()===42&&typeof j.subarray=="function"&&j.subarray(1,1).byteLength===0}catch{return!1}}(),i.kMaxLength=m(),S.poolSize=8192,S._augment=function(ue){return ue.__proto__=S.prototype,ue},S.from=function(ue,j,T){return D(null,ue,j,T)},S.TYPED_ARRAY_SUPPORT&&(S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&S[Symbol.species]===S&&Object.defineProperty(S,Symbol.species,{value:null,configurable:!0})),S.alloc=function(ue,j,T){return function(ee,me,Se,at){return M(me),me<=0?_(ee,me):Se!==void 0?typeof at=="string"?_(ee,me).fill(Se,at):_(ee,me).fill(Se):_(ee,me)}(null,ue,j,T)},S.allocUnsafe=function(ue){return C(null,ue)},S.allocUnsafeSlow=function(ue){return C(null,ue)},S.isBuffer=function(j){return!(j==null||!j._isBuffer)},S.compare=function(j,T){if(!S.isBuffer(j)||!S.isBuffer(T))throw new TypeError("Arguments must be Buffers");if(j===T)return 0;for(var G=j.length,ee=T.length,me=0,Se=Math.min(G,ee);me<Se;++me)if(j[me]!==T[me]){G=j[me],ee=T[me];break}return G<ee?-1:ee<G?1:0},S.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(j,T){if(!E(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return S.alloc(0);var G;if(T===void 0)for(T=0,G=0;G<j.length;++G)T+=j[G].length;var ee=S.allocUnsafe(T),me=0;for(G=0;G<j.length;++G){var Se=j[G];if(!S.isBuffer(Se))throw new TypeError('"list" argument must be an Array of Buffers');Se.copy(ee,me),me+=Se.length}return ee},S.byteLength=F,S.prototype._isBuffer=!0,S.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var T=0;T<j;T+=2)I(this,T,T+1);return this},S.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var T=0;T<j;T+=4)I(this,T,T+3),I(this,T+1,T+2);return this},S.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var T=0;T<j;T+=8)I(this,T,T+7),I(this,T+1,T+6),I(this,T+2,T+5),I(this,T+3,T+4);return this},S.prototype.toString=function(){var j=0|this.length;return j===0?"":arguments.length===0?ke(this,0,j):P.apply(this,arguments)},S.prototype.equals=function(j){if(!S.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||S.compare(this,j)===0},S.prototype.inspect=function(){var j="",T=i.INSPECT_MAX_BYTES;return this.length>0&&(j=this.toString("hex",0,T).match(/.{2}/g).join(" "),this.length>T&&(j+=" ... ")),"<Buffer "+j+">"},S.prototype.compare=function(j,T,G,ee,me){if(!S.isBuffer(j))throw new TypeError("Argument must be a Buffer");if(T===void 0&&(T=0),G===void 0&&(G=j?j.length:0),ee===void 0&&(ee=0),me===void 0&&(me=this.length),T<0||G>j.length||ee<0||me>this.length)throw new RangeError("out of range index");if(ee>=me&&T>=G)return 0;if(ee>=me)return-1;if(T>=G)return 1;if(this===j)return 0;for(var Se=(me>>>=0)-(ee>>>=0),at=(G>>>=0)-(T>>>=0),we=Math.min(Se,at),ot=this.slice(ee,me),dt=j.slice(T,G),ft=0;ft<we;++ft)if(ot[ft]!==dt[ft]){Se=ot[ft],at=dt[ft];break}return Se<at?-1:at<Se?1:0},S.prototype.includes=function(j,T,G){return this.indexOf(j,T,G)!==-1},S.prototype.indexOf=function(j,T,G){return B(this,j,T,G,!0)},S.prototype.lastIndexOf=function(j,T,G){return B(this,j,T,G,!1)},S.prototype.write=function(j,T,G,ee){if(T===void 0)ee="utf8",G=this.length,T=0;else if(G===void 0&&typeof T=="string")ee=T,G=this.length,T=0;else{if(!isFinite(T))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");T|=0,isFinite(G)?(G|=0,ee===void 0&&(ee="utf8")):(ee=G,G=void 0)}var me=this.length-T;if((G===void 0||G>me)&&(G=me),j.length>0&&(G<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var Se=!1;;)switch(ee){case"hex":return Y(this,j,T,G);case"utf8":case"utf-8":return Q(this,j,T,G);case"ascii":return ve(this,j,T,G);case"latin1":case"binary":return qe(this,j,T,G);case"base64":return J(this,j,T,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,j,T,G);default:if(Se)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),Se=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var wt=4096;function mt(ue,j,T){var G="";T=Math.min(ue.length,T);for(var ee=j;ee<T;++ee)G+=String.fromCharCode(127&ue[ee]);return G}function Ne(ue,j,T){var G="";T=Math.min(ue.length,T);for(var ee=j;ee<T;++ee)G+=String.fromCharCode(ue[ee]);return G}function Me(ue,j,T){var G=ue.length;(!j||j<0)&&(j=0),(!T||T<0||T>G)&&(T=G);for(var ee="",me=j;me<T;++me)ee+=Ut(ue[me]);return ee}function Fe(ue,j,T){for(var G=ue.slice(j,T),ee="",me=0;me<G.length;me+=2)ee+=String.fromCharCode(G[me]+256*G[me+1]);return ee}function it(ue,j,T){if(ue%1!=0||ue<0)throw new RangeError("offset is not uint");if(ue+j>T)throw new RangeError("Trying to access beyond buffer length")}function H(ue,j,T,G,ee,me){if(!S.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>ee||j<me)throw new RangeError('"value" argument is out of bounds');if(T+G>ue.length)throw new RangeError("Index out of range")}function he(ue,j,T,G){j<0&&(j=65535+j+1);for(var ee=0,me=Math.min(ue.length-T,2);ee<me;++ee)ue[T+ee]=(j&255<<8*(G?ee:1-ee))>>>8*(G?ee:1-ee)}function Re(ue,j,T,G){j<0&&(j=4294967295+j+1);for(var ee=0,me=Math.min(ue.length-T,4);ee<me;++ee)ue[T+ee]=j>>>8*(G?ee:3-ee)&255}function be(ue,j,T,G,ee,me){if(T+G>ue.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function tt(ue,j,T,G,ee){return ee||be(ue,0,T,4),g.write(ue,j,T,G,23,4),T+4}function gt(ue,j,T,G,ee){return ee||be(ue,0,T,8),g.write(ue,j,T,G,52,8),T+8}S.prototype.slice=function(j,T){var G,ee=this.length;if((j=~~j)<0?(j+=ee)<0&&(j=0):j>ee&&(j=ee),(T=T===void 0?ee:~~T)<0?(T+=ee)<0&&(T=0):T>ee&&(T=ee),T<j&&(T=j),S.TYPED_ARRAY_SUPPORT)(G=this.subarray(j,T)).__proto__=S.prototype;else{var me=T-j;G=new S(me,void 0);for(var Se=0;Se<me;++Se)G[Se]=this[Se+j]}return G},S.prototype.readUIntLE=function(j,T,G){j|=0,T|=0,G||it(j,T,this.length);for(var ee=this[j],me=1,Se=0;++Se<T&&(me*=256);)ee+=this[j+Se]*me;return ee},S.prototype.readUIntBE=function(j,T,G){j|=0,T|=0,G||it(j,T,this.length);for(var ee=this[j+--T],me=1;T>0&&(me*=256);)ee+=this[j+--T]*me;return ee},S.prototype.readUInt8=function(j,T){return T||it(j,1,this.length),this[j]},S.prototype.readUInt16LE=function(j,T){return T||it(j,2,this.length),this[j]|this[j+1]<<8},S.prototype.readUInt16BE=function(j,T){return T||it(j,2,this.length),this[j]<<8|this[j+1]},S.prototype.readUInt32LE=function(j,T){return T||it(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},S.prototype.readUInt32BE=function(j,T){return T||it(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},S.prototype.readIntLE=function(j,T,G){j|=0,T|=0,G||it(j,T,this.length);for(var ee=this[j],me=1,Se=0;++Se<T&&(me*=256);)ee+=this[j+Se]*me;return ee>=(me*=128)&&(ee-=Math.pow(2,8*T)),ee},S.prototype.readIntBE=function(j,T,G){j|=0,T|=0,G||it(j,T,this.length);for(var ee=T,me=1,Se=this[j+--ee];ee>0&&(me*=256);)Se+=this[j+--ee]*me;return Se>=(me*=128)&&(Se-=Math.pow(2,8*T)),Se},S.prototype.readInt8=function(j,T){return T||it(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},S.prototype.readInt16LE=function(j,T){T||it(j,2,this.length);var G=this[j]|this[j+1]<<8;return 32768&G?4294901760|G:G},S.prototype.readInt16BE=function(j,T){T||it(j,2,this.length);var G=this[j+1]|this[j]<<8;return 32768&G?4294901760|G:G},S.prototype.readInt32LE=function(j,T){return T||it(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},S.prototype.readInt32BE=function(j,T){return T||it(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},S.prototype.readFloatLE=function(j,T){return T||it(j,4,this.length),g.read(this,j,!0,23,4)},S.prototype.readFloatBE=function(j,T){return T||it(j,4,this.length),g.read(this,j,!1,23,4)},S.prototype.readDoubleLE=function(j,T){return T||it(j,8,this.length),g.read(this,j,!0,52,8)},S.prototype.readDoubleBE=function(j,T){return T||it(j,8,this.length),g.read(this,j,!1,52,8)},S.prototype.writeUIntLE=function(j,T,G,ee){j=+j,T|=0,G|=0,ee||H(this,j,T,G,Math.pow(2,8*G)-1,0);var me=1,Se=0;for(this[T]=255&j;++Se<G&&(me*=256);)this[T+Se]=j/me&255;return T+G},S.prototype.writeUIntBE=function(j,T,G,ee){j=+j,T|=0,G|=0,ee||H(this,j,T,G,Math.pow(2,8*G)-1,0);var me=G-1,Se=1;for(this[T+me]=255&j;--me>=0&&(Se*=256);)this[T+me]=j/Se&255;return T+G},S.prototype.writeUInt8=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,1,255,0),S.TYPED_ARRAY_SUPPORT||(j=Math.floor(j)),this[T]=255&j,T+1},S.prototype.writeUInt16LE=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[T]=255&j,this[T+1]=j>>>8):he(this,j,T,!0),T+2},S.prototype.writeUInt16BE=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[T]=j>>>8,this[T+1]=255&j):he(this,j,T,!1),T+2},S.prototype.writeUInt32LE=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[T+3]=j>>>24,this[T+2]=j>>>16,this[T+1]=j>>>8,this[T]=255&j):Re(this,j,T,!0),T+4},S.prototype.writeUInt32BE=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[T]=j>>>24,this[T+1]=j>>>16,this[T+2]=j>>>8,this[T+3]=255&j):Re(this,j,T,!1),T+4},S.prototype.writeIntLE=function(j,T,G,ee){if(j=+j,T|=0,!ee){var me=Math.pow(2,8*G-1);H(this,j,T,G,me-1,-me)}var Se=0,at=1,we=0;for(this[T]=255&j;++Se<G&&(at*=256);)j<0&&we===0&&this[T+Se-1]!==0&&(we=1),this[T+Se]=(j/at>>0)-we&255;return T+G},S.prototype.writeIntBE=function(j,T,G,ee){if(j=+j,T|=0,!ee){var me=Math.pow(2,8*G-1);H(this,j,T,G,me-1,-me)}var Se=G-1,at=1,we=0;for(this[T+Se]=255&j;--Se>=0&&(at*=256);)j<0&&we===0&&this[T+Se+1]!==0&&(we=1),this[T+Se]=(j/at>>0)-we&255;return T+G},S.prototype.writeInt8=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,1,127,-128),S.TYPED_ARRAY_SUPPORT||(j=Math.floor(j)),j<0&&(j=255+j+1),this[T]=255&j,T+1},S.prototype.writeInt16LE=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[T]=255&j,this[T+1]=j>>>8):he(this,j,T,!0),T+2},S.prototype.writeInt16BE=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[T]=j>>>8,this[T+1]=255&j):he(this,j,T,!1),T+2},S.prototype.writeInt32LE=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,4,2147483647,-2147483648),S.TYPED_ARRAY_SUPPORT?(this[T]=255&j,this[T+1]=j>>>8,this[T+2]=j>>>16,this[T+3]=j>>>24):Re(this,j,T,!0),T+4},S.prototype.writeInt32BE=function(j,T,G){return j=+j,T|=0,G||H(this,j,T,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),S.TYPED_ARRAY_SUPPORT?(this[T]=j>>>24,this[T+1]=j>>>16,this[T+2]=j>>>8,this[T+3]=255&j):Re(this,j,T,!1),T+4},S.prototype.writeFloatLE=function(j,T,G){return tt(this,j,T,!0,G)},S.prototype.writeFloatBE=function(j,T,G){return tt(this,j,T,!1,G)},S.prototype.writeDoubleLE=function(j,T,G){return gt(this,j,T,!0,G)},S.prototype.writeDoubleBE=function(j,T,G){return gt(this,j,T,!1,G)},S.prototype.copy=function(j,T,G,ee){if(G||(G=0),ee||ee===0||(ee=this.length),T>=j.length&&(T=j.length),T||(T=0),ee>0&&ee<G&&(ee=G),ee===G||j.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("sourceStart out of bounds");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),j.length-T<ee-G&&(ee=j.length-T+G);var me,Se=ee-G;if(this===j&&G<T&&T<ee)for(me=Se-1;me>=0;--me)j[me+T]=this[me+G];else if(Se<1e3||!S.TYPED_ARRAY_SUPPORT)for(me=0;me<Se;++me)j[me+T]=this[me+G];else Uint8Array.prototype.set.call(j,this.subarray(G,G+Se),T);return Se},S.prototype.fill=function(j,T,G,ee){if(typeof j=="string"){if(typeof T=="string"?(ee=T,T=0,G=this.length):typeof G=="string"&&(ee=G,G=this.length),j.length===1){var me=j.charCodeAt(0);me<256&&(j=me)}if(ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!S.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee)}else typeof j=="number"&&(j&=255);if(T<0||this.length<T||this.length<G)throw new RangeError("Out of range index");if(G<=T)return this;var Se;if(T>>>=0,G=G===void 0?this.length:G>>>0,j||(j=0),typeof j=="number")for(Se=T;Se<G;++Se)this[Se]=j;else{var at=S.isBuffer(j)?j:Ye(new S(j,ee).toString()),we=at.length;for(Se=0;Se<G-T;++Se)this[Se+T]=at[Se%we]}return this};var xt=/[^+\/0-9A-Za-z-_]/g;function Ut(ue){return ue<16?"0"+ue.toString(16):ue.toString(16)}function Ye(ue,j){var T;j=j||1/0;for(var G=ue.length,ee=null,me=[],Se=0;Se<G;++Se){if((T=ue.charCodeAt(Se))>55295&&T<57344){if(!ee){if(T>56319){(j-=3)>-1&&me.push(239,191,189);continue}if(Se+1===G){(j-=3)>-1&&me.push(239,191,189);continue}ee=T;continue}if(T<56320){(j-=3)>-1&&me.push(239,191,189),ee=T;continue}T=65536+(ee-55296<<10|T-56320)}else ee&&(j-=3)>-1&&me.push(239,191,189);if(ee=null,T<128){if((j-=1)<0)break;me.push(T)}else if(T<2048){if((j-=2)<0)break;me.push(T>>6|192,63&T|128)}else if(T<65536){if((j-=3)<0)break;me.push(T>>12|224,T>>6&63|128,63&T|128)}else{if(!(T<1114112))throw new Error("Invalid code point");if((j-=4)<0)break;me.push(T>>18|240,T>>12&63|128,T>>6&63|128,63&T|128)}}return me}function Ue(ue){return p.toByteArray(function(T){if((T=function(ee){return ee.trim?ee.trim():ee.replace(/^\s+|\s+$/g,"")}(T).replace(xt,"")).length<2)return"";for(;T.length%4!=0;)T+="=";return T}(ue))}function bt(ue,j,T,G){for(var ee=0;ee<G&&!(ee+T>=j.length||ee>=ue.length);++ee)j[ee+T]=ue[ee];return ee}}).call(this,d(29))},function(s,i){var d;d=function(){return this}();try{d=d||new Function("return this")()}catch{typeof window=="object"&&(d=window)}s.exports=d},function(s,i,d){i.byteLength=function(C){var O=S(C),U=O[0],F=O[1];return 3*(U+F)/4-F},i.toByteArray=function(C){var O,U,F=S(C),P=F[0],I=F[1],B=new g(function(ve,qe,J){return 3*(qe+J)/4-J}(0,P,I)),z=0,Y=I>0?P-4:P;for(U=0;U<Y;U+=4)O=p[C.charCodeAt(U)]<<18|p[C.charCodeAt(U+1)]<<12|p[C.charCodeAt(U+2)]<<6|p[C.charCodeAt(U+3)],B[z++]=O>>16&255,B[z++]=O>>8&255,B[z++]=255&O;return I===2&&(O=p[C.charCodeAt(U)]<<2|p[C.charCodeAt(U+1)]>>4,B[z++]=255&O),I===1&&(O=p[C.charCodeAt(U)]<<10|p[C.charCodeAt(U+1)]<<4|p[C.charCodeAt(U+2)]>>2,B[z++]=O>>8&255,B[z++]=255&O),B},i.fromByteArray=function(C){for(var O,U=C.length,F=U%3,P=[],I=16383,B=0,z=U-F;B<z;B+=I)P.push(D(C,B,B+I>z?z:B+I));return F===1?(O=C[U-1],P.push(y[O>>2]+y[O<<4&63]+"==")):F===2&&(O=(C[U-2]<<8)+C[U-1],P.push(y[O>>10]+y[O>>4&63]+y[O<<2&63]+"=")),P.join("")};for(var y=[],p=[],g=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0,_=E.length;m<_;++m)y[m]=E[m],p[E.charCodeAt(m)]=m;function S(M){var C=M.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=M.indexOf("=");return O===-1&&(O=C),[O,O===C?0:4-O%4]}function D(M,C,O){for(var U,F,P=[],I=C;I<O;I+=3)U=(M[I]<<16&16711680)+(M[I+1]<<8&65280)+(255&M[I+2]),P.push(y[(F=U)>>18&63]+y[F>>12&63]+y[F>>6&63]+y[63&F]);return P.join("")}p[45]=62,p[95]=63},function(s,i){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */i.read=function(d,y,p,g,E){var m,_,S=8*E-g-1,D=(1<<S)-1,M=D>>1,C=-7,O=p?E-1:0,U=p?-1:1,F=d[y+O];for(O+=U,m=F&(1<<-C)-1,F>>=-C,C+=S;C>0;m=256*m+d[y+O],O+=U,C-=8);for(_=m&(1<<-C)-1,m>>=-C,C+=g;C>0;_=256*_+d[y+O],O+=U,C-=8);if(m===0)m=1-M;else{if(m===D)return _?NaN:1/0*(F?-1:1);_+=Math.pow(2,g),m-=M}return(F?-1:1)*_*Math.pow(2,m-g)},i.write=function(d,y,p,g,E,m){var _,S,D,M=8*m-E-1,C=(1<<M)-1,O=C>>1,U=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=g?0:m-1,P=g?1:-1,I=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(S=isNaN(y)?1:0,_=C):(_=Math.floor(Math.log(y)/Math.LN2),y*(D=Math.pow(2,-_))<1&&(_--,D*=2),(y+=_+O>=1?U/D:U*Math.pow(2,1-O))*D>=2&&(_++,D/=2),_+O>=C?(S=0,_=C):_+O>=1?(S=(y*D-1)*Math.pow(2,E),_+=O):(S=y*Math.pow(2,O-1)*Math.pow(2,E),_=0));E>=8;d[p+F]=255&S,F+=P,S/=256,E-=8);for(_=_<<E|S,M+=E;M>0;d[p+F]=255&_,F+=P,_/=256,M-=8);d[p+F-P]|=128*I}},function(s,i){var d={}.toString;s.exports=Array.isArray||function(y){return d.call(y)=="[object Array]"}},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(g){var E=g.jws,m=g.KeyUtil,_=g.X509,S=g.crypto,D=g.hextob64u,M=g.b64tohex,C=g.AllowedSigningAlgs;return function(){function O(){(function(F,P){if(!(F instanceof P))throw new TypeError("Cannot call a class as a function")})(this,O)}return O.parseJwt=function(F){y.Log.debug("JoseUtil.parseJwt");try{var P=E.JWS.parse(F);return{header:P.headerObj,payload:P.payloadObj}}catch(I){y.Log.error(I)}},O.validateJwt=function(F,P,I,B,z,Y,Q){y.Log.debug("JoseUtil.validateJwt");try{if(P.kty==="RSA")if(P.e&&P.n)P=m.getKey(P);else{if(!P.x5c||!P.x5c.length)return y.Log.error("JoseUtil.validateJwt: RSA key missing key material",P),Promise.reject(new Error("RSA key missing key material"));var ve=M(P.x5c[0]);P=_.getPublicKeyFromCertHex(ve)}else{if(P.kty!=="EC")return y.Log.error("JoseUtil.validateJwt: Unsupported key type",P&&P.kty),Promise.reject(new Error(P.kty));if(!(P.crv&&P.x&&P.y))return y.Log.error("JoseUtil.validateJwt: EC key missing key material",P),Promise.reject(new Error("EC key missing key material"));P=m.getKey(P)}return O._validateJwt(F,P,I,B,z,Y,Q)}catch(qe){return y.Log.error(qe&&qe.message||qe),Promise.reject("JWT validation failed")}},O.validateJwtAttributes=function(F,P,I,B,z,Y){B||(B=0),z||(z=parseInt(Date.now()/1e3));var Q=O.parseJwt(F).payload;if(!Q.iss)return y.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(Q.iss!==P)return y.Log.error("JoseUtil._validateJwt: Invalid issuer in token",Q.iss),Promise.reject(new Error("Invalid issuer in token: "+Q.iss));if(!Q.aud)return y.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(Q.aud===I||Array.isArray(Q.aud)&&Q.aud.indexOf(I)>=0))return y.Log.error("JoseUtil._validateJwt: Invalid audience in token",Q.aud),Promise.reject(new Error("Invalid audience in token: "+Q.aud));if(Q.azp&&Q.azp!==I)return y.Log.error("JoseUtil._validateJwt: Invalid azp in token",Q.azp),Promise.reject(new Error("Invalid azp in token: "+Q.azp));if(!Y){var ve=z+B,qe=z-B;if(!Q.iat)return y.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(ve<Q.iat)return y.Log.error("JoseUtil._validateJwt: iat is in the future",Q.iat),Promise.reject(new Error("iat is in the future: "+Q.iat));if(Q.nbf&&ve<Q.nbf)return y.Log.error("JoseUtil._validateJwt: nbf is in the future",Q.nbf),Promise.reject(new Error("nbf is in the future: "+Q.nbf));if(!Q.exp)return y.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(Q.exp<qe)return y.Log.error("JoseUtil._validateJwt: exp is in the past",Q.exp),Promise.reject(new Error("exp is in the past:"+Q.exp))}return Promise.resolve(Q)},O._validateJwt=function(F,P,I,B,z,Y,Q){return O.validateJwtAttributes(F,I,B,z,Y,Q).then(function(ve){try{return E.JWS.verify(F,P,C)?ve:(y.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(qe){return y.Log.error(qe&&qe.message||qe),Promise.reject(new Error("signature validation failed"))}})},O.hashString=function(F,P){try{return S.Util.hashString(F,P)}catch(I){y.Log.error(I)}},O.hexToBase64Url=function(F){try{return D(F)}catch(P){y.Log.error(P)}},O}()};var y=d(0);s.exports=i.default},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.SigninResponse=void 0;var y=function(){function E(m,_){for(var S=0;S<_.length;S++){var D=_[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(m,D.key,D)}}return function(m,_,S){return _&&E(m.prototype,_),S&&E(m,S),m}}(),p=d(3);function g(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}i.SigninResponse=function(){function E(m){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#";g(this,E);var S=p.UrlUtility.parseUrlFragment(m,_);this.error=S.error,this.error_description=S.error_description,this.error_uri=S.error_uri,this.code=S.code,this.state=S.state,this.id_token=S.id_token,this.session_state=S.session_state,this.access_token=S.access_token,this.token_type=S.token_type,this.scope=S.scope,this.profile=void 0,this.expires_in=S.expires_in}return y(E,[{key:"expires_in",get:function(){if(this.expires_at){var _=parseInt(Date.now()/1e3);return this.expires_at-_}},set:function(_){var S=parseInt(_);if(typeof S=="number"&&S>0){var D=parseInt(Date.now()/1e3);this.expires_at=D+S}}},{key:"expired",get:function(){var _=this.expires_in;if(_!==void 0)return _<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),E}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.SignoutRequest=void 0;var y=d(0),p=d(3),g=d(9);i.SignoutRequest=function E(m){var _=m.url,S=m.id_token_hint,D=m.post_logout_redirect_uri,M=m.data,C=m.extraQueryParams,O=m.request_type;if(function(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}(this,E),!_)throw y.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var U in S&&(_=p.UrlUtility.addQueryParam(_,"id_token_hint",S)),D&&(_=p.UrlUtility.addQueryParam(_,"post_logout_redirect_uri",D),M&&(this.state=new g.State({data:M,request_type:O}),_=p.UrlUtility.addQueryParam(_,"state",this.state.id))),C)_=p.UrlUtility.addQueryParam(_,U,C[U]);this.url=_}},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.SignoutResponse=void 0;var y=d(3);i.SignoutResponse=function p(g){(function(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")})(this,p);var E=y.UrlUtility.parseUrlFragment(g,"?");this.error=E.error,this.error_description=E.error_description,this.error_uri=E.error_uri,this.state=E.state}},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.InMemoryWebStorage=void 0;var y=function(){function g(E,m){for(var _=0;_<m.length;_++){var S=m[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(E,S.key,S)}}return function(E,m,_){return m&&g(E.prototype,m),_&&g(E,_),E}}(),p=d(0);i.InMemoryWebStorage=function(){function g(){(function(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")})(this,g),this._data={}}return g.prototype.getItem=function(m){return p.Log.debug("InMemoryWebStorage.getItem",m),this._data[m]},g.prototype.setItem=function(m,_){p.Log.debug("InMemoryWebStorage.setItem",m),this._data[m]=_},g.prototype.removeItem=function(m){p.Log.debug("InMemoryWebStorage.removeItem",m),delete this._data[m]},g.prototype.key=function(m){return Object.getOwnPropertyNames(this._data)[m]},y(g,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),g}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.UserManager=void 0;var y=function(){function I(B,z){for(var Y=0;Y<z.length;Y++){var Q=z[Y];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(B,Q.key,Q)}}return function(B,z,Y){return z&&I(B.prototype,z),Y&&I(B,Y),B}}(),p=d(0),g=d(10),E=d(39),m=d(15),_=d(45),S=d(47),D=d(18),M=d(8),C=d(20),O=d(11),U=d(4);function F(I,B){if(!(I instanceof B))throw new TypeError("Cannot call a class as a function")}function P(I,B){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!B||typeof B!="object"&&typeof B!="function"?I:B}i.UserManager=function(I){function B(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.SilentRenewService,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:D.SessionMonitor,ve=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C.TokenRevocationClient,qe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:O.TokenClient,J=arguments.length>5&&arguments[5]!==void 0?arguments[5]:U.JoseUtil;F(this,B),z instanceof E.UserManagerSettings||(z=new E.UserManagerSettings(z));var pe=P(this,I.call(this,z));return pe._events=new _.UserManagerEvents(z),pe._silentRenewService=new Y(pe),pe.settings.automaticSilentRenew&&(p.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),pe.startSilentRenew()),pe.settings.monitorSession&&(p.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),pe._sessionMonitor=new Q(pe)),pe._tokenRevocationClient=new ve(pe._settings),pe._tokenClient=new qe(pe._settings),pe._joseUtil=J,pe}return function(Y,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Q);Y.prototype=Object.create(Q&&Q.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,Q):Y.__proto__=Q)}(B,I),B.prototype.getUser=function(){var Y=this;return this._loadUser().then(function(Q){return Q?(p.Log.info("UserManager.getUser: user loaded"),Y._events.load(Q,!1),Q):(p.Log.info("UserManager.getUser: user not found in storage"),null)})},B.prototype.removeUser=function(){var Y=this;return this.storeUser(null).then(function(){p.Log.info("UserManager.removeUser: user removed from storage"),Y._events.unload()})},B.prototype.signinRedirect=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(Y=Object.assign({},Y)).request_type="si:r";var Q={useReplaceToNavigate:Y.useReplaceToNavigate};return this._signinStart(Y,this._redirectNavigator,Q).then(function(){p.Log.info("UserManager.signinRedirect: successful")})},B.prototype.signinRedirectCallback=function(Y){return this._signinEnd(Y||this._redirectNavigator.url).then(function(Q){return Q.profile&&Q.profile.sub?p.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",Q.profile.sub):p.Log.info("UserManager.signinRedirectCallback: no sub"),Q})},B.prototype.signinPopup=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(Y=Object.assign({},Y)).request_type="si:p";var Q=Y.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return Q?(Y.redirect_uri=Q,Y.display="popup",this._signin(Y,this._popupNavigator,{startUrl:Q,popupWindowFeatures:Y.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:Y.popupWindowTarget||this.settings.popupWindowTarget}).then(function(ve){return ve&&(ve.profile&&ve.profile.sub?p.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",ve.profile.sub):p.Log.info("UserManager.signinPopup: no sub")),ve})):(p.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},B.prototype.signinPopupCallback=function(Y){return this._signinCallback(Y,this._popupNavigator).then(function(Q){return Q&&(Q.profile&&Q.profile.sub?p.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",Q.profile.sub):p.Log.info("UserManager.signinPopupCallback: no sub")),Q}).catch(function(Q){p.Log.error(Q.message)})},B.prototype.signinSilent=function(){var Y=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q=Object.assign({},Q),this._loadUser().then(function(ve){return ve&&ve.refresh_token?(Q.refresh_token=ve.refresh_token,Y._useRefreshToken(Q)):(Q.request_type="si:s",Q.id_token_hint=Q.id_token_hint||Y.settings.includeIdTokenInSilentRenew&&ve&&ve.id_token,ve&&Y._settings.validateSubOnSilentRenew&&(p.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",ve.profile.sub),Q.current_sub=ve.profile.sub),Y._signinSilentIframe(Q))})},B.prototype._useRefreshToken=function(){var Y=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(Q).then(function(ve){return ve?ve.access_token?Y._loadUser().then(function(qe){if(qe){var J=Promise.resolve();return ve.id_token&&(J=Y._validateIdTokenFromTokenRefreshToken(qe.profile,ve.id_token)),J.then(function(){return p.Log.debug("UserManager._useRefreshToken: refresh token response success"),qe.id_token=ve.id_token||qe.id_token,qe.access_token=ve.access_token,qe.refresh_token=ve.refresh_token||qe.refresh_token,qe.expires_in=ve.expires_in,Y.storeUser(qe).then(function(){return Y._events.load(qe),qe})})}return null}):(p.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(p.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},B.prototype._validateIdTokenFromTokenRefreshToken=function(Y,Q){var ve=this;return this._metadataService.getIssuer().then(function(qe){return ve.settings.getEpochTime().then(function(J){return ve._joseUtil.validateJwtAttributes(Q,qe,ve._settings.client_id,ve._settings.clockSkew,J).then(function(pe){return pe?pe.sub!==Y.sub?(p.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):pe.auth_time&&pe.auth_time!==Y.auth_time?(p.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):pe.azp&&pe.azp!==Y.azp?(p.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!pe.azp&&Y.azp?(p.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(p.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},B.prototype._signinSilentIframe=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=Y.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return Q?(Y.redirect_uri=Q,Y.prompt=Y.prompt||"none",this._signin(Y,this._iframeNavigator,{startUrl:Q,silentRequestTimeout:Y.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ve){return ve&&(ve.profile&&ve.profile.sub?p.Log.info("UserManager.signinSilent: successful, signed in sub: ",ve.profile.sub):p.Log.info("UserManager.signinSilent: no sub")),ve})):(p.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},B.prototype.signinSilentCallback=function(Y){return this._signinCallback(Y,this._iframeNavigator).then(function(Q){return Q&&(Q.profile&&Q.profile.sub?p.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",Q.profile.sub):p.Log.info("UserManager.signinSilentCallback: no sub")),Q})},B.prototype.signinCallback=function(Y){var Q=this;return this.readSigninResponseState(Y).then(function(ve){var qe=ve.state;return ve.response,qe.request_type==="si:r"?Q.signinRedirectCallback(Y):qe.request_type==="si:p"?Q.signinPopupCallback(Y):qe.request_type==="si:s"?Q.signinSilentCallback(Y):Promise.reject(new Error("invalid response_type in state"))})},B.prototype.signoutCallback=function(Y,Q){var ve=this;return this.readSignoutResponseState(Y).then(function(qe){var J=qe.state,pe=qe.response;return J?J.request_type==="so:r"?ve.signoutRedirectCallback(Y):J.request_type==="so:p"?ve.signoutPopupCallback(Y,Q):Promise.reject(new Error("invalid response_type in state")):pe})},B.prototype.querySessionStatus=function(){var Y=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(Q=Object.assign({},Q)).request_type="si:s";var ve=Q.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ve?(Q.redirect_uri=ve,Q.prompt="none",Q.response_type=Q.response_type||this.settings.query_status_response_type,Q.scope=Q.scope||"openid",Q.skipUserInfo=!0,this._signinStart(Q,this._iframeNavigator,{startUrl:ve,silentRequestTimeout:Q.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(qe){return Y.processSigninResponse(qe.url).then(function(J){if(p.Log.debug("UserManager.querySessionStatus: got signin response"),J.session_state&&J.profile.sub)return p.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",J.profile.sub),{session_state:J.session_state,sub:J.profile.sub,sid:J.profile.sid};p.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(J){if(J.session_state&&Y.settings.monitorAnonymousSession&&(J.message=="login_required"||J.message=="consent_required"||J.message=="interaction_required"||J.message=="account_selection_required"))return p.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:J.session_state};throw J})})):(p.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},B.prototype._signin=function(Y,Q){var ve=this,qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signinStart(Y,Q,qe).then(function(J){return ve._signinEnd(J.url,Y)})},B.prototype._signinStart=function(Y,Q){var ve=this,qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Q.prepare(qe).then(function(J){return p.Log.debug("UserManager._signinStart: got navigator window handle"),ve.createSigninRequest(Y).then(function(pe){return p.Log.debug("UserManager._signinStart: got signin request"),qe.url=pe.url,qe.id=pe.state.id,J.navigate(qe)}).catch(function(pe){throw J.close&&(p.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),J.close()),pe})})},B.prototype._signinEnd=function(Y){var Q=this,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.processSigninResponse(Y).then(function(qe){p.Log.debug("UserManager._signinEnd: got signin response");var J=new m.User(qe);if(ve.current_sub){if(ve.current_sub!==J.profile.sub)return p.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",J.profile.sub),Promise.reject(new Error("login_required"));p.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return Q.storeUser(J).then(function(){return p.Log.debug("UserManager._signinEnd: user stored"),Q._events.load(J),J})})},B.prototype._signinCallback=function(Y,Q){p.Log.debug("UserManager._signinCallback");var ve=this._settings.response_mode==="query"||!this._settings.response_mode&&M.SigninRequest.isCode(this._settings.response_type)?"?":"#";return Q.callback(Y,void 0,ve)},B.prototype.signoutRedirect=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(Y=Object.assign({},Y)).request_type="so:r";var Q=Y.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;Q&&(Y.post_logout_redirect_uri=Q);var ve={useReplaceToNavigate:Y.useReplaceToNavigate};return this._signoutStart(Y,this._redirectNavigator,ve).then(function(){p.Log.info("UserManager.signoutRedirect: successful")})},B.prototype.signoutRedirectCallback=function(Y){return this._signoutEnd(Y||this._redirectNavigator.url).then(function(Q){return p.Log.info("UserManager.signoutRedirectCallback: successful"),Q})},B.prototype.signoutPopup=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(Y=Object.assign({},Y)).request_type="so:p";var Q=Y.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return Y.post_logout_redirect_uri=Q,Y.display="popup",Y.post_logout_redirect_uri&&(Y.state=Y.state||{}),this._signout(Y,this._popupNavigator,{startUrl:Q,popupWindowFeatures:Y.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:Y.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){p.Log.info("UserManager.signoutPopup: successful")})},B.prototype.signoutPopupCallback=function(Y,Q){return Q===void 0&&typeof Y=="boolean"&&(Q=Y,Y=null),this._popupNavigator.callback(Y,Q,"?").then(function(){p.Log.info("UserManager.signoutPopupCallback: successful")})},B.prototype._signout=function(Y,Q){var ve=this,qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signoutStart(Y,Q,qe).then(function(J){return ve._signoutEnd(J.url)})},B.prototype._signoutStart=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=this,ve=arguments[1],qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ve.prepare(qe).then(function(J){return p.Log.debug("UserManager._signoutStart: got navigator window handle"),Q._loadUser().then(function(pe){return p.Log.debug("UserManager._signoutStart: loaded current user from storage"),(Q._settings.revokeAccessTokenOnSignout?Q._revokeInternal(pe):Promise.resolve()).then(function(){var Xe=Y.id_token_hint||pe&&pe.id_token;return Xe&&(p.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),Y.id_token_hint=Xe),Q.removeUser().then(function(){return p.Log.debug("UserManager._signoutStart: user removed, creating signout request"),Q.createSignoutRequest(Y).then(function(ke){return p.Log.debug("UserManager._signoutStart: got signout request"),qe.url=ke.url,ke.state&&(qe.id=ke.state.id),J.navigate(qe)})})})}).catch(function(pe){throw J.close&&(p.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),J.close()),pe})})},B.prototype._signoutEnd=function(Y){return this.processSignoutResponse(Y).then(function(Q){return p.Log.debug("UserManager._signoutEnd: got signout response"),Q})},B.prototype.revokeAccessToken=function(){var Y=this;return this._loadUser().then(function(Q){return Y._revokeInternal(Q,!0).then(function(ve){if(ve)return p.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),Q.access_token=null,Q.refresh_token=null,Q.expires_at=null,Q.token_type=null,Y.storeUser(Q).then(function(){p.Log.debug("UserManager.revokeAccessToken: user stored"),Y._events.load(Q)})})}).then(function(){p.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},B.prototype._revokeInternal=function(Y,Q){var ve=this;if(Y){var qe=Y.access_token,J=Y.refresh_token;return this._revokeAccessTokenInternal(qe,Q).then(function(pe){return ve._revokeRefreshTokenInternal(J,Q).then(function(Xe){return pe||Xe||p.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),pe||Xe})})}return Promise.resolve(!1)},B.prototype._revokeAccessTokenInternal=function(Y,Q){return!Y||Y.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(Y,Q).then(function(){return!0})},B.prototype._revokeRefreshTokenInternal=function(Y,Q){return Y?this._tokenRevocationClient.revoke(Y,Q,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},B.prototype.startSilentRenew=function(){this._silentRenewService.start()},B.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},B.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(Y){return Y?(p.Log.debug("UserManager._loadUser: user storageString loaded"),m.User.fromStorageString(Y)):(p.Log.debug("UserManager._loadUser: no user storageString"),null)})},B.prototype.storeUser=function(Y){if(Y){p.Log.debug("UserManager.storeUser: storing user");var Q=Y.toStorageString();return this._userStore.set(this._userStoreKey,Q)}return p.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},y(B,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),B}(g.OidcClient)},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.UserManagerSettings=void 0;var y=function(){function O(U,F){for(var P=0;P<F.length;P++){var I=F[P];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(U,I.key,I)}}return function(U,F,P){return F&&O(U.prototype,F),P&&O(U,P),U}}(),p=(d(0),d(5)),g=d(40),E=d(41),m=d(43),_=d(6),S=d(1),D=d(8);function M(O,U){if(!(O instanceof U))throw new TypeError("Cannot call a class as a function")}function C(O,U){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!U||typeof U!="object"&&typeof U!="function"?O:U}i.UserManagerSettings=function(O){function U(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=F.popup_redirect_uri,I=F.popup_post_logout_redirect_uri,B=F.popupWindowFeatures,z=F.popupWindowTarget,Y=F.silent_redirect_uri,Q=F.silentRequestTimeout,ve=F.automaticSilentRenew,qe=ve!==void 0&&ve,J=F.validateSubOnSilentRenew,pe=J!==void 0&&J,Xe=F.includeIdTokenInSilentRenew,ke=Xe===void 0||Xe,wt=F.monitorSession,mt=wt===void 0||wt,Ne=F.monitorAnonymousSession,Me=Ne!==void 0&&Ne,Fe=F.checkSessionInterval,it=Fe===void 0?2e3:Fe,H=F.stopCheckSessionOnError,he=H===void 0||H,Re=F.query_status_response_type,be=F.revokeAccessTokenOnSignout,tt=be!==void 0&&be,gt=F.accessTokenExpiringNotificationTime,xt=gt===void 0?60:gt,Ut=F.redirectNavigator,Ye=Ut===void 0?new g.RedirectNavigator:Ut,Ue=F.popupNavigator,bt=Ue===void 0?new E.PopupNavigator:Ue,ue=F.iframeNavigator,j=ue===void 0?new m.IFrameNavigator:ue,T=F.userStore,G=T===void 0?new _.WebStorageStateStore({store:S.Global.sessionStorage}):T;M(this,U);var ee=C(this,O.call(this,arguments[0]));return ee._popup_redirect_uri=P,ee._popup_post_logout_redirect_uri=I,ee._popupWindowFeatures=B,ee._popupWindowTarget=z,ee._silent_redirect_uri=Y,ee._silentRequestTimeout=Q,ee._automaticSilentRenew=qe,ee._validateSubOnSilentRenew=pe,ee._includeIdTokenInSilentRenew=ke,ee._accessTokenExpiringNotificationTime=xt,ee._monitorSession=mt,ee._monitorAnonymousSession=Me,ee._checkSessionInterval=it,ee._stopCheckSessionOnError=he,Re?ee._query_status_response_type=Re:arguments[0]&&arguments[0].response_type?ee._query_status_response_type=D.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":ee._query_status_response_type="id_token",ee._revokeAccessTokenOnSignout=tt,ee._redirectNavigator=Ye,ee._popupNavigator=bt,ee._iframeNavigator=j,ee._userStore=G,ee}return function(P,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);P.prototype=Object.create(I&&I.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(P,I):P.__proto__=I)}(U,O),y(U,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),U}(p.OidcClientSettings)},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.RedirectNavigator=void 0;var y=function(){function g(E,m){for(var _=0;_<m.length;_++){var S=m[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(E,S.key,S)}}return function(E,m,_){return m&&g(E.prototype,m),_&&g(E,_),E}}(),p=d(0);i.RedirectNavigator=function(){function g(){(function(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")})(this,g)}return g.prototype.prepare=function(){return Promise.resolve(this)},g.prototype.navigate=function(m){return m&&m.url?(m.useReplaceToNavigate?window.location.replace(m.url):window.location=m.url,Promise.resolve()):(p.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},y(g,[{key:"url",get:function(){return window.location.href}}]),g}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.PopupNavigator=void 0;var y=d(0),p=d(42);i.PopupNavigator=function(){function g(){(function(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")})(this,g)}return g.prototype.prepare=function(m){var _=new p.PopupWindow(m);return Promise.resolve(_)},g.prototype.callback=function(m,_,S){y.Log.debug("PopupNavigator.callback");try{return p.PopupWindow.notifyOpener(m,_,S),Promise.resolve()}catch(D){return Promise.reject(D)}},g}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.PopupWindow=void 0;var y=function(){function E(m,_){for(var S=0;S<_.length;S++){var D=_[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(m,D.key,D)}}return function(m,_,S){return _&&E(m.prototype,_),S&&E(m,S),m}}(),p=d(0),g=d(3);i.PopupWindow=function(){function E(m){var _=this;(function(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")})(this,E),this._promise=new Promise(function(M,C){_._resolve=M,_._reject=C});var S=m.popupWindowTarget||"_blank",D=m.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",S,D),this._popup&&(p.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return E.prototype.navigate=function(_){return this._popup?_&&_.url?(p.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=_.id,this._id&&(window["popupCallback_"+_.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=_.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},E.prototype._success=function(_){p.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(_)},E.prototype._error=function(_){p.Log.error("PopupWindow.error: ",_),this._cleanup(),this._reject(new Error(_))},E.prototype.close=function(){this._cleanup(!1)},E.prototype._cleanup=function(_){p.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!_&&this._popup.close(),this._popup=null},E.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},E.prototype._callback=function(_,S){this._cleanup(S),_?(p.Log.debug("PopupWindow.callback success"),this._success({url:_})):(p.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},E.notifyOpener=function(_,S,D){if(window.opener){if(_=_||window.location.href){var M=g.UrlUtility.parseUrlFragment(_,D);if(M.state){var C="popupCallback_"+M.state,O=window.opener[C];O?(p.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),O(_,S)):p.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else p.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else p.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},y(E,[{key:"promise",get:function(){return this._promise}}]),E}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.IFrameNavigator=void 0;var y=d(0),p=d(44);i.IFrameNavigator=function(){function g(){(function(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")})(this,g)}return g.prototype.prepare=function(m){var _=new p.IFrameWindow(m);return Promise.resolve(_)},g.prototype.callback=function(m){y.Log.debug("IFrameNavigator.callback");try{return p.IFrameWindow.notifyParent(m),Promise.resolve()}catch(_){return Promise.reject(_)}},g}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.IFrameWindow=void 0;var y=function(){function g(E,m){for(var _=0;_<m.length;_++){var S=m[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(E,S.key,S)}}return function(E,m,_){return m&&g(E.prototype,m),_&&g(E,_),E}}(),p=d(0);i.IFrameWindow=function(){function g(E){var m=this;(function(S,D){if(!(S instanceof D))throw new TypeError("Cannot call a class as a function")})(this,g),this._promise=new Promise(function(_,S){m._resolve=_,m._reject=S}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return g.prototype.navigate=function(m){if(m&&m.url){var _=m.silentRequestTimeout||1e4;p.Log.debug("IFrameWindow.navigate: Using timeout of:",_),this._timer=window.setTimeout(this._timeout.bind(this),_),this._frame.src=m.url}else this._error("No url provided");return this.promise},g.prototype._success=function(m){this._cleanup(),p.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(m)},g.prototype._error=function(m){this._cleanup(),p.Log.error(m),this._reject(new Error(m))},g.prototype.close=function(){this._cleanup()},g.prototype._cleanup=function(){this._frame&&(p.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},g.prototype._timeout=function(){p.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},g.prototype._message=function(m){if(p.Log.debug("IFrameWindow.message"),this._timer&&m.origin===this._origin&&m.source===this._frame.contentWindow&&typeof m.data=="string"&&(m.data.startsWith("http://")||m.data.startsWith("https://"))){var _=m.data;_?this._success({url:_}):this._error("Invalid response from frame")}},g.notifyParent=function(m){p.Log.debug("IFrameWindow.notifyParent"),(m=m||window.location.href)&&(p.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(m,location.protocol+"//"+location.host))},y(g,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),g}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.UserManagerEvents=void 0;var y=d(0),p=d(16),g=d(17);i.UserManagerEvents=function(E){function m(_){(function(M,C){if(!(M instanceof C))throw new TypeError("Cannot call a class as a function")})(this,m);var S=function(M,C){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?M:C}(this,E.call(this,_));return S._userLoaded=new g.Event("User loaded"),S._userUnloaded=new g.Event("User unloaded"),S._silentRenewError=new g.Event("Silent renew error"),S._userSignedIn=new g.Event("User signed in"),S._userSignedOut=new g.Event("User signed out"),S._userSessionChanged=new g.Event("User session changed"),S}return function(S,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);S.prototype=Object.create(D&&D.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(S,D):S.__proto__=D)}(m,E),m.prototype.load=function(S){var D=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];y.Log.debug("UserManagerEvents.load"),E.prototype.load.call(this,S),D&&this._userLoaded.raise(S)},m.prototype.unload=function(){y.Log.debug("UserManagerEvents.unload"),E.prototype.unload.call(this),this._userUnloaded.raise()},m.prototype.addUserLoaded=function(S){this._userLoaded.addHandler(S)},m.prototype.removeUserLoaded=function(S){this._userLoaded.removeHandler(S)},m.prototype.addUserUnloaded=function(S){this._userUnloaded.addHandler(S)},m.prototype.removeUserUnloaded=function(S){this._userUnloaded.removeHandler(S)},m.prototype.addSilentRenewError=function(S){this._silentRenewError.addHandler(S)},m.prototype.removeSilentRenewError=function(S){this._silentRenewError.removeHandler(S)},m.prototype._raiseSilentRenewError=function(S){y.Log.debug("UserManagerEvents._raiseSilentRenewError",S.message),this._silentRenewError.raise(S)},m.prototype.addUserSignedIn=function(S){this._userSignedIn.addHandler(S)},m.prototype.removeUserSignedIn=function(S){this._userSignedIn.removeHandler(S)},m.prototype._raiseUserSignedIn=function(){y.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},m.prototype.addUserSignedOut=function(S){this._userSignedOut.addHandler(S)},m.prototype.removeUserSignedOut=function(S){this._userSignedOut.removeHandler(S)},m.prototype._raiseUserSignedOut=function(){y.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},m.prototype.addUserSessionChanged=function(S){this._userSessionChanged.addHandler(S)},m.prototype.removeUserSessionChanged=function(S){this._userSessionChanged.removeHandler(S)},m.prototype._raiseUserSessionChanged=function(){y.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},m}(p.AccessTokenEvents)},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.Timer=void 0;var y=function(){function S(D,M){for(var C=0;C<M.length;C++){var O=M[C];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(D,O.key,O)}}return function(D,M,C){return M&&S(D.prototype,M),C&&S(D,C),D}}(),p=d(0),g=d(1),E=d(17);function m(S,D){if(!(S instanceof D))throw new TypeError("Cannot call a class as a function")}function _(S,D){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||typeof D!="object"&&typeof D!="function"?S:D}i.Timer=function(S){function D(M){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.Global.timer,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;m(this,D);var U=_(this,S.call(this,M));return U._timer=C,U._nowFunc=O||function(){return Date.now()/1e3},U}return function(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);C.prototype=Object.create(O&&O.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(C,O):C.__proto__=O)}(D,S),D.prototype.init=function(C){C<=0&&(C=1),C=parseInt(C);var O=this.now+C;if(this.expiration===O&&this._timerHandle)p.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),p.Log.debug("Timer.init timer "+this._name+" for duration:",C),this._expiration=O;var U=5;C<U&&(U=C),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*U)}},D.prototype.cancel=function(){this._timerHandle&&(p.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},D.prototype._callback=function(){var C=this._expiration-this.now;p.Log.debug("Timer.callback; "+this._name+" timer expires in:",C),this._expiration<=this.now&&(this.cancel(),S.prototype.raise.call(this))},y(D,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),D}(E.Event)},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.SilentRenewService=void 0;var y=d(0);i.SilentRenewService=function(){function p(g){(function(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")})(this,p),this._userManager=g}return p.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(E){}).catch(function(E){y.Log.error("SilentRenewService.start: Error from getUser:",E.message)}))},p.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},p.prototype._tokenExpiring=function(){var E=this;this._userManager.signinSilent().then(function(m){y.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(m){y.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",m.message),E._userManager.events._raiseSilentRenewError(m)})},p}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.CordovaPopupNavigator=void 0;var y=d(21);i.CordovaPopupNavigator=function(){function p(){(function(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p)}return p.prototype.prepare=function(E){var m=new y.CordovaPopupWindow(E);return Promise.resolve(m)},p}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.CordovaIFrameNavigator=void 0;var y=d(21);i.CordovaIFrameNavigator=function(){function p(){(function(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p)}return p.prototype.prepare=function(E){E.popupWindowFeatures="hidden=yes";var m=new y.CordovaPopupWindow(E);return Promise.resolve(m)},p}()},function(s,i,d){Object.defineProperty(i,"__esModule",{value:!0}),i.Version="1.11.6"}])})}(ac)),ac.exports}var ah=Dw();function Iw(a,n){throw a.error==="invalid_redirect_uri"?new Error(`Dynamic client registration failed: the provided redirect uri [${n.redirectUrl?.toString()}] is invalid - ${a.error_description??""}`):a.error==="invalid_client_metadata"?new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(n)} is invalid - ${a.error_description??""}`):new Error(`Dynamic client registration failed: ${a.error} - ${a.error_description??""}`)}function jw(a){return typeof a.client_id=="string"}function Uw(a){return Array.isArray(a.redirect_uris)&&a.redirect_uris.every(n=>typeof n=="string")}function Pw(a,n){if(!jw(a))throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(a)}`);if(n.redirectUrl&&Uw(a)&&a.redirect_uris[0]!==n.redirectUrl.toString())throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(a.redirect_uris)} don't match the provided ${JSON.stringify([n.redirectUrl.toString()])}`);return!0}async function Lw(a,n){if(!n.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(n.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const s=lw(n.idTokenSigningAlgValuesSupported,lc),i={client_name:a.clientName,application_type:"web",redirect_uris:[a.redirectUrl?.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:s,grant_types:["authorization_code","refresh_token"]},d={"Content-Type":"application/json"},y=await fetch(n.registrationEndpoint.toString(),{method:"POST",headers:d,body:JSON.stringify(i)});if(y.ok){const p=await y.json();return Pw(p,a),{clientId:p.client_id,clientSecret:p.client_secret,expiresAt:p.client_secret_expires_at,idTokenSignedResponseAlg:p.id_token_signed_response_alg,clientType:"dynamic"}}throw y.status===400&&Iw(await y.json(),a),new Error(`Dynamic client registration failed: the server returned ${y.status} ${y.statusText} - ${await y.text()}`)}function Mw(a){return a.error!==void 0&&typeof a.error=="string"}function Yy(a){return a.error_description!==void 0&&typeof a.error_description=="string"}function Bw(a){return a.error_uri!==void 0&&typeof a.error_uri=="string"}function Hw(a){return a.access_token!==void 0&&typeof a.access_token=="string"}function Kw(a){return a.id_token!==void 0&&typeof a.id_token=="string"}function qw(a){return a.refresh_token!==void 0&&typeof a.refresh_token=="string"}function zw(a){return a.token_type!==void 0&&typeof a.token_type=="string"}function Vw(a){return a.expires_in===void 0||typeof a.expires_in=="number"}function Gw(a,n){if(n.grantType&&(!a.grantTypesSupported||!a.grantTypesSupported.includes(n.grantType)))throw new Error(`The issuer [${a.issuer}] does not support the [${n.grantType}] grant`);if(!a.tokenEndpoint)throw new Error(`This issuer [${a.issuer}] does not have a token endpoint`)}function Dm(a,n){if(Mw(a))throw new Cm(`Token endpoint returned error [${a.error}]${Yy(a)?`: ${a.error_description}`:""}${Bw(a)?` (see ${a.error_uri})`:""}`,a.error,Yy(a)?a.error_description:void 0);if(!Hw(a))throw new ku(["access_token"]);if(!Kw(a))throw new ku(["id_token"]);if(!zw(a))throw new ku(["token_type"]);if(!Vw(a))throw new ku(["expires_in"]);if(!n&&a.token_type.toLowerCase()!=="bearer")throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${a.token_type}].`);return a}async function $w(a,n,s,i){Gw(a,s);const d={"content-type":"application/x-www-form-urlencoded"};let y;i&&(y=await bw(),d.DPoP=await vh(a.tokenEndpoint,"POST",y)),n.clientSecret&&(d.Authorization=`Basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`);const p={grant_type:s.grantType,redirect_uri:s.redirectUrl,code:s.code,code_verifier:s.codeVerifier,client_id:n.clientId},g={method:"POST",headers:d,body:new URLSearchParams(p).toString()},m=await(await fetch(a.tokenEndpoint,g)).json(),_=Dm(m,i),{webId:S,clientId:D}=await xm(_.id_token,a.jwksUri,a.issuer,n.clientId);return{accessToken:_.access_token,idToken:_.id_token,refreshToken:qw(_)?_.refresh_token:void 0,webId:S,clientId:D,dpopKey:y,expiresIn:_.expires_in}}const Jw=a=>{try{return new URL(a),!0}catch{return!1}};async function Ww(a,n,s,i){if(s.clientId===void 0)throw new Error("No client ID available when trying to refresh the access token.");const d={grant_type:"refresh_token",refresh_token:a};let y={};i!==void 0&&(y={DPoP:await vh(n.tokenEndpoint,"POST",i)});let p={};s.clientSecret!==void 0?p={Authorization:`Basic ${btoa(`${s.clientId}:${s.clientSecret}`)}`}:Jw(s.clientId)&&(d.client_id=s.clientId);const g=await fetch(n.tokenEndpoint,{method:"POST",body:new URLSearchParams(d).toString(),headers:{...y,...p,"Content-Type":"application/x-www-form-urlencoded"}});let E;try{E=await g.json()}catch{throw new Error(`The token endpoint of issuer ${n.issuer} returned a malformed response.`)}const m=Dm(E,i!==void 0),{webId:_}=await xm(m.id_token,n.jwksUri,n.issuer,s.clientId);return{accessToken:m.access_token,idToken:m.id_token,refreshToken:typeof m.refresh_token=="string"?m.refresh_token:void 0,webId:_,dpopKey:i,expiresIn:m.expires_in}}function Yw(a){const n=Am(a);return n.hash="",a.includes(`${n.origin}/`)?n.href:`${n.origin}${n.href.substring(n.origin.length+1)}`}async function Qw(){await new ah.OidcClient({response_mode:"query"}).clearStaleState(new ah.WebStorageStateStore({}));const n=window.localStorage,s=[];for(let i=0;i<=n.length;i+=1){const d=n.key(i);d&&(d.match(/^oidc\..+$/)||d.match(/^solidClientAuthenticationUser:.+$/))&&s.push(d)}s.forEach(i=>n.removeItem(i))}class Xw extends yw{constructor(n,s){super(n,s)}}class Zw extends pw{login=async(n,s)=>{n.prompt!=="none"&&await this.sessionInfoManager.clear(n.sessionId);const i=n.redirectUrl??Yw(window.location.href);if(!Tm(i))throw new Error(`${i} is not a valid redirect URL, it is either a malformed IRI, includes a hash fragment, or reserved query parameters ('code' or 'state').`);await this.loginHandler.handle({...n,redirectUrl:i,clientName:n.clientName??n.clientId,eventEmitter:s})};validateCurrentSession=async n=>{const s=await this.sessionInfoManager.get(n);return s===void 0||s.clientAppId===void 0||s.issuer===void 0?null:s};handleIncomingRedirect=async(n,s)=>{try{const i=await this.redirectHandler.handle(n,s,void 0);return this.fetch=i.fetch.bind(window),this.boundLogout=i.getLogoutUrl,await this.cleanUrlAfterRedirect(n),{isLoggedIn:i.isLoggedIn,webId:i.webId,sessionId:i.sessionId,expirationDate:i.expirationDate,clientAppId:i.clientAppId}}catch(i){await this.cleanUrlAfterRedirect(n),s.emit(wr.ERROR,"redirect",i);return}};async cleanUrlAfterRedirect(n){const s=Am(n).href;for(window.history.replaceState(null,"",s);window.location.href!==s;)await new Promise(i=>{setTimeout(()=>i(),1)})}}function Qy(a){return typeof a.oidcIssuer=="string"}function Xy(a){return typeof a.redirectUrl=="string"}class e1{storageUtility;oidcHandler;issuerConfigFetcher;clientRegistrar;constructor(n,s,i,d){this.storageUtility=n,this.oidcHandler=s,this.issuerConfigFetcher=i,this.clientRegistrar=d,this.storageUtility=n,this.oidcHandler=s,this.issuerConfigFetcher=i,this.clientRegistrar=d}async canHandle(n){return Qy(n)&&Xy(n)}async handle(n){if(!Qy(n))throw new ih(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(n)}`);if(!Xy(n))throw new ih(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(n)}`);const s=await this.issuerConfigFetcher.fetchConfig(n.oidcIssuer),i=await hw(n,s,this.storageUtility,this.clientRegistrar),d={issuer:s.issuer,dpop:n.tokenType.toLowerCase()==="dpop",...n,issuerConfiguration:s,client:i,scopes:Z_(n.customScopes)};return this.oidcHandler.handle(d)}}class t1 extends tw{async handle(n){const s={authority:n.issuer.toString(),client_id:n.client.clientId,client_secret:n.client.clientSecret,redirect_uri:n.redirectUrl,response_type:"code",scope:n.scopes.join(" "),filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:n.prompt??"consent"},i=new ah.OidcClient(s);try{const d=await i.createSigninRequest();return await this.setupRedirectHandler({oidcLoginOptions:n,state:d.state._id,codeVerifier:d.state._code_verifier,targetUrl:d.url.toString()})}catch(d){console.error(d)}}}const n1=".well-known/openid-configuration",Zy={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},end_session_endpoint:{toKey:"endSessionEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};function r1(a){const n={};return Object.keys(a).forEach(s=>{Zy[s]&&(n[Zy[s].toKey]=a[s])}),Array.isArray(n.scopesSupported)||(n.scopesSupported=["openid"]),n}class bh{storageUtility;constructor(n){this.storageUtility=n,this.storageUtility=n}static getLocalStorageKey(n){return`issuerConfig:${n}`}async fetchConfig(n){let s;const i=new URL(n1,n.endsWith("/")?n:`${n}/`).href,d=await fetch(i);try{s=r1(await d.json())}catch(y){throw new ih(`[${n.toString()}] has an invalid configuration: ${y.message}`)}return await this.storageUtility.set(bh.getLocalStorageKey(n),JSON.stringify(s)),s}}async function i1(a,n){await km(a,n),await Qw()}class a1 extends aw{async get(n){const[s,i,d,y,p,g,E,m]=await Promise.all([this.storageUtility.getForUser(n,"isLoggedIn",{secure:!0}),this.storageUtility.getForUser(n,"webId",{secure:!0}),this.storageUtility.getForUser(n,"clientId",{secure:!1}),this.storageUtility.getForUser(n,"clientSecret",{secure:!1}),this.storageUtility.getForUser(n,"redirectUrl",{secure:!1}),this.storageUtility.getForUser(n,"refreshToken",{secure:!0}),this.storageUtility.getForUser(n,"issuer",{secure:!1}),this.storageUtility.getForUser(n,"tokenType",{secure:!1})]);if(typeof p=="string"&&!Tm(p)){await Promise.all([this.storageUtility.deleteAllUserData(n,{secure:!1}),this.storageUtility.deleteAllUserData(n,{secure:!0})]);return}if(m!==void 0&&!uw(m))throw new Error(`Tokens of type [${m}] are not supported.`);if(!(d===void 0&&s===void 0&&i===void 0&&g===void 0))return{sessionId:n,webId:i,isLoggedIn:s==="true",redirectUrl:p,refreshToken:g,issuer:E,clientAppId:d,clientAppSecret:y,tokenType:m??"DPoP"}}async clear(n){return i1(n,this.storageUtility)}}class o1{async canHandle(n){try{return new URL(n),!0}catch(s){throw new Error(`[${n}] is not a valid URL, and cannot be used as a redirect URL: ${s}`)}}async handle(n){return Rm()}}class s1{storageUtility;sessionInfoManager;issuerConfigFetcher;clientRegistrar;tokerRefresher;constructor(n,s,i,d,y){this.storageUtility=n,this.sessionInfoManager=s,this.issuerConfigFetcher=i,this.clientRegistrar=d,this.tokerRefresher=y,this.storageUtility=n,this.sessionInfoManager=s,this.issuerConfigFetcher=i,this.clientRegistrar=d,this.tokerRefresher=y}async canHandle(n){try{const s=new URL(n);return s.searchParams.get("code")!==null&&s.searchParams.get("state")!==null}catch(s){throw new Error(`[${n}] is not a valid URL, and cannot be used as a redirect URL: ${s}`)}}async handle(n,s){if(!await this.canHandle(n))throw new Error(`AuthCodeRedirectHandler cannot handle [${n}]: it is missing one of [code, state].`);const i=new URL(n),d=i.searchParams.get("state"),y=await this.storageUtility.getForUser(d,"sessionId",{errorIfNull:!0}),{issuerConfig:p,codeVerifier:g,redirectUrl:E,dpop:m}=await Nm(y,this.storageUtility,this.issuerConfigFetcher),_=i.searchParams.get("iss");if(typeof _=="string"&&_!==p.issuer)throw new Error(`The value of the iss parameter (${_}) does not match the issuer identifier of the authorization server (${p.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(g===void 0)throw new Error(`The code verifier for session ${y} is missing from storage.`);if(E===void 0)throw new Error(`The redirect URL for session ${y} is missing from storage.`);const S=await this.clientRegistrar.getClient({sessionId:y},p),D=Date.now(),M=await $w(p,S,{grantType:"authorization_code",code:i.searchParams.get("code"),codeVerifier:g,redirectUrl:E},m);window.localStorage.removeItem(`oidc.${d}`);let C;M.refreshToken!==void 0&&(C={sessionId:y,refreshToken:M.refreshToken,tokenRefresher:this.tokerRefresher});const O=xw(M.accessToken,{dpopKey:M.dpopKey,refreshOptions:C,eventEmitter:s,expiresIn:M.expiresIn});await gw(this.storageUtility,y,M.webId,M.clientId,"true",void 0,!0);const U=await this.sessionInfoManager.get(y);if(!U)throw new Error(`Could not retrieve session: [${y}].`);return Object.assign(U,{fetch:O,getLogoutUrl:sw({idTokenHint:M.idToken,endSessionEndpoint:p.endSessionEndpoint}),expirationDate:typeof M.expiresIn=="number"?D+M.expiresIn*1e3:void 0})}}class u1 extends X_{constructor(n){super(n)}}class l1{get storage(){return window.localStorage}async get(n){return this.storage.getItem(n)||void 0}async set(n,s){this.storage.setItem(n,s)}async delete(n){this.storage.removeItem(n)}}class c1{redirect(n,s){s&&s.handleRedirect?s.handleRedirect(n):s&&s.redirectByReplacingState?window.history.replaceState({},"",n):window.location.href=n}}class f1{storageUtility;constructor(n){this.storageUtility=n,this.storageUtility=n}async getClient(n,s){const[i,d,y,p,g]=await Promise.all([this.storageUtility.getForUser(n.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(n.sessionId,"clientSecret",{secure:!1}),this.storageUtility.getForUser(n.sessionId,"expiresAt",{secure:!1}),this.storageUtility.getForUser(n.sessionId,"clientName",{secure:!1}),this.storageUtility.getForUser(n.sessionId,"clientType",{secure:!1})]),E=y!==void 0?Number.parseInt(y,10):-1,m=d!==void 0&&E!==0&&Math.floor(Date.now()/1e3)>E;if(i&&dw(g)&&!m)return d!==void 0?{clientId:i,clientSecret:d,clientName:p,clientType:"dynamic",expiresAt:E}:{clientId:i,clientName:p,clientType:g};try{const _=await Lw(n,s),S={clientId:_.clientId,clientType:"dynamic"};return _.clientSecret!==void 0&&(S.clientSecret=_.clientSecret,S.expiresAt=String(_.expiresAt)),_.idTokenSignedResponseAlg&&(S.idTokenSignedResponseAlg=_.idTokenSignedResponseAlg),await this.storageUtility.setForUser(n.sessionId,S,{secure:!1}),_}catch(_){throw new Error("Client registration failed.",{cause:_})}}}class d1{async canHandle(n){try{return new URL(n).searchParams.has("error")}catch(s){throw new Error(`[${n}] is not a valid URL, and cannot be used as a redirect URL: ${s}`)}}async handle(n,s){if(s!==void 0){const i=new URL(n),d=i.searchParams.get("error"),y=i.searchParams.get("error_description");s.emit(wr.ERROR,d,y)}return Rm()}}class h1{storageUtility;issuerConfigFetcher;clientRegistrar;constructor(n,s,i){this.storageUtility=n,this.issuerConfigFetcher=s,this.clientRegistrar=i,this.storageUtility=n,this.issuerConfigFetcher=s,this.clientRegistrar=i}async refresh(n,s,i,d){const y=await Nm(n,this.storageUtility,this.issuerConfigFetcher),p=await this.clientRegistrar.getClient({sessionId:n},y.issuerConfig);if(s===void 0)throw new Error(`Session [${n}] has no refresh token to allow it to refresh its access token.`);if(y.dpop&&i===void 0)throw new Error(`For session [${n}], the key bound to the DPoP access token must be provided to refresh said access token.`);const g=await Ww(s,y.issuerConfig,p,i);return g.refreshToken!==void 0&&d?.emit(wr.NEW_REFRESH_TOKEN,g.refreshToken),g}}function e0(a){const n=new mw,s=a.secureStorage||n,i=a.insecureStorage||new l1,d=new Xw(s,i),y=new bh(d),p=new f1(d),g=new a1(d),E=new h1(d,y,p),m=new c1,_=new e1(d,new t1(d,m),y,p),S=new u1([new d1,new s1(d,g,y,p,E),new o1]);return new Zw(_,S,new iw(g,m),g,y)}const _d=`${Em}currentSession`,oh=`${Em}currentUrl`;async function p1(a,n,s){const i=await n.validateCurrentSession(a);return i!==null?(window.localStorage.setItem(oh,window.location.href),await n.login({sessionId:a,prompt:"none",oidcIssuer:i.issuer,redirectUrl:i.redirectUrl,clientId:i.clientAppId,clientSecret:i.clientAppSecret,tokenType:i.tokenType??"DPoP"},s.events),!0):!1}function g1(a){return!!a?.isLoggedIn}class y1{info;events;clientAuthentication;tokenRequestInProgress=!1;constructor(n={},s=void 0){this.events=new Cw,n.clientAuthentication?this.clientAuthentication=n.clientAuthentication:n.secureStorage&&n.insecureStorage?this.clientAuthentication=e0({secureStorage:n.secureStorage,insecureStorage:n.insecureStorage}):this.clientAuthentication=e0({}),n.sessionInfo?this.info={sessionId:n.sessionInfo.sessionId,isLoggedIn:!1,webId:n.sessionInfo.webId,clientAppId:n.sessionInfo.clientAppId}:this.info={sessionId:s??Fw(),isLoggedIn:!1},this.events.on(wr.LOGIN,()=>window.localStorage.setItem(_d,this.info.sessionId)),this.events.on(wr.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.events.on(wr.ERROR,()=>this.internalLogout(!1))}login=async n=>(await this.clientAuthentication.login({sessionId:this.info.sessionId,...n,tokenType:n.tokenType??"DPoP"},this.events),new Promise(()=>{}));fetch=(n,s)=>this.clientAuthentication.fetch(n,s);internalLogout=async(n,s)=>{window.localStorage.removeItem(_d),await this.clientAuthentication.logout(this.info.sessionId,s),this.info.isLoggedIn=!1,n&&this.events.emit(wr.LOGOUT)};logout=async n=>this.internalLogout(!0,n);handleIncomingRedirect=async(n={})=>{if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const s=typeof n=="string"?{url:n}:n,i=s.url??window.location.href;this.tokenRequestInProgress=!0;const d=await this.clientAuthentication.handleIncomingRedirect(i,this.events);if(g1(d)){this.setSessionInfo(d);const y=window.localStorage.getItem(oh);y===null?this.events.emit(wr.LOGIN):(window.localStorage.removeItem(oh),this.events.emit(wr.SESSION_RESTORED,y))}else if(s.restorePreviousSession===!0){const y=window.localStorage.getItem(_d);if(y!==null&&await p1(y,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,d};setSessionInfo(n){this.info.isLoggedIn=n.isLoggedIn,this.info.webId=n.webId,this.info.sessionId=n.sessionId,this.info.clientAppId=n.clientAppId,this.info.expirationDate=n.expirationDate,this.events.on(wr.SESSION_EXTENDED,s=>{this.info.expirationDate=Date.now()+s*1e3})}}let wd;function Fa(){return typeof wd>"u"&&(wd=new y1),wd}const m1=(...a)=>Fa().login(...a),v1=(...a)=>Fa().logout(...a),b1=(...a)=>Fa().handleIncomingRedirect(...a);var Sd={},wu={},t0;function _1(){if(t0)return wu;t0=1,wu.byteLength=g,wu.toByteArray=m,wu.fromByteArray=D;for(var a=[],n=[],s=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,y=i.length;d<y;++d)a[d]=i[d],n[i.charCodeAt(d)]=d;n[45]=62,n[95]=63;function p(M){var C=M.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=M.indexOf("=");O===-1&&(O=C);var U=O===C?0:4-O%4;return[O,U]}function g(M){var C=p(M),O=C[0],U=C[1];return(O+U)*3/4-U}function E(M,C,O){return(C+O)*3/4-O}function m(M){var C,O=p(M),U=O[0],F=O[1],P=new s(E(M,U,F)),I=0,B=F>0?U-4:U,z;for(z=0;z<B;z+=4)C=n[M.charCodeAt(z)]<<18|n[M.charCodeAt(z+1)]<<12|n[M.charCodeAt(z+2)]<<6|n[M.charCodeAt(z+3)],P[I++]=C>>16&255,P[I++]=C>>8&255,P[I++]=C&255;return F===2&&(C=n[M.charCodeAt(z)]<<2|n[M.charCodeAt(z+1)]>>4,P[I++]=C&255),F===1&&(C=n[M.charCodeAt(z)]<<10|n[M.charCodeAt(z+1)]<<4|n[M.charCodeAt(z+2)]>>2,P[I++]=C>>8&255,P[I++]=C&255),P}function _(M){return a[M>>18&63]+a[M>>12&63]+a[M>>6&63]+a[M&63]}function S(M,C,O){for(var U,F=[],P=C;P<O;P+=3)U=(M[P]<<16&16711680)+(M[P+1]<<8&65280)+(M[P+2]&255),F.push(_(U));return F.join("")}function D(M){for(var C,O=M.length,U=O%3,F=[],P=16383,I=0,B=O-U;I<B;I+=P)F.push(S(M,I,I+P>B?B:I+P));return U===1?(C=M[O-1],F.push(a[C>>2]+a[C<<4&63]+"==")):U===2&&(C=(M[O-2]<<8)+M[O-1],F.push(a[C>>10]+a[C>>4&63]+a[C<<2&63]+"=")),F.join("")}return wu}var Wl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var n0;function w1(){return n0||(n0=1,Wl.read=function(a,n,s,i,d){var y,p,g=d*8-i-1,E=(1<<g)-1,m=E>>1,_=-7,S=s?d-1:0,D=s?-1:1,M=a[n+S];for(S+=D,y=M&(1<<-_)-1,M>>=-_,_+=g;_>0;y=y*256+a[n+S],S+=D,_-=8);for(p=y&(1<<-_)-1,y>>=-_,_+=i;_>0;p=p*256+a[n+S],S+=D,_-=8);if(y===0)y=1-m;else{if(y===E)return p?NaN:(M?-1:1)*(1/0);p=p+Math.pow(2,i),y=y-m}return(M?-1:1)*p*Math.pow(2,y-i)},Wl.write=function(a,n,s,i,d,y){var p,g,E,m=y*8-d-1,_=(1<<m)-1,S=_>>1,D=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=i?0:y-1,C=i?1:-1,O=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(g=isNaN(n)?1:0,p=_):(p=Math.floor(Math.log(n)/Math.LN2),n*(E=Math.pow(2,-p))<1&&(p--,E*=2),p+S>=1?n+=D/E:n+=D*Math.pow(2,1-S),n*E>=2&&(p++,E/=2),p+S>=_?(g=0,p=_):p+S>=1?(g=(n*E-1)*Math.pow(2,d),p=p+S):(g=n*Math.pow(2,S-1)*Math.pow(2,d),p=0));d>=8;a[s+M]=g&255,M+=C,g/=256,d-=8);for(p=p<<d|g,m+=d;m>0;a[s+M]=p&255,M+=C,p/=256,m-=8);a[s+M-C]|=O*128}),Wl}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r0;function Ca(){return r0||(r0=1,function(a){const n=_1(),s=w1(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=g,a.SlowBuffer=P,a.INSPECT_MAX_BYTES=50;const d=2147483647;a.kMaxLength=d,g.TYPED_ARRAY_SUPPORT=y(),!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function y(){try{const $=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf($,R),$.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}});function p($){if($>d)throw new RangeError('The value "'+$+'" is invalid for option "size"');const R=new Uint8Array($);return Object.setPrototypeOf(R,g.prototype),R}function g($,R,N){if(typeof $=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S($)}return E($,R,N)}g.poolSize=8192;function E($,R,N){if(typeof $=="string")return D($,R);if(ArrayBuffer.isView($))return C($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(ft($,ArrayBuffer)||$&&ft($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ft($,SharedArrayBuffer)||$&&ft($.buffer,SharedArrayBuffer)))return O($,R,N);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=$.valueOf&&$.valueOf();if(k!=null&&k!==$)return g.from(k,R,N);const Ce=U($);if(Ce)return Ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return g.from($[Symbol.toPrimitive]("string"),R,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}g.from=function($,R,N){return E($,R,N)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array);function m($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function _($,R,N){return m($),$<=0?p($):R!==void 0?typeof N=="string"?p($).fill(R,N):p($).fill(R):p($)}g.alloc=function($,R,N){return _($,R,N)};function S($){return m($),p($<0?0:F($)|0)}g.allocUnsafe=function($){return S($)},g.allocUnsafeSlow=function($){return S($)};function D($,R){if((typeof R!="string"||R==="")&&(R="utf8"),!g.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const N=I($,R)|0;let k=p(N);const Ce=k.write($,R);return Ce!==N&&(k=k.slice(0,Ce)),k}function M($){const R=$.length<0?0:F($.length)|0,N=p(R);for(let k=0;k<R;k+=1)N[k]=$[k]&255;return N}function C($){if(ft($,Uint8Array)){const R=new Uint8Array($);return O(R.buffer,R.byteOffset,R.byteLength)}return M($)}function O($,R,N){if(R<0||$.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<R+(N||0))throw new RangeError('"length" is outside of buffer bounds');let k;return R===void 0&&N===void 0?k=new Uint8Array($):N===void 0?k=new Uint8Array($,R):k=new Uint8Array($,R,N),Object.setPrototypeOf(k,g.prototype),k}function U($){if(g.isBuffer($)){const R=F($.length)|0,N=p(R);return N.length===0||$.copy(N,0,0,R),N}if($.length!==void 0)return typeof $.length!="number"||Dt($.length)?p(0):M($);if($.type==="Buffer"&&Array.isArray($.data))return M($.data)}function F($){if($>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return $|0}function P($){return+$!=$&&($=0),g.alloc(+$)}g.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==g.prototype},g.compare=function(R,N){if(ft(R,Uint8Array)&&(R=g.from(R,R.offset,R.byteLength)),ft(N,Uint8Array)&&(N=g.from(N,N.offset,N.byteLength)),!g.isBuffer(R)||!g.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===N)return 0;let k=R.length,Ce=N.length;for(let Ge=0,Ie=Math.min(k,Ce);Ge<Ie;++Ge)if(R[Ge]!==N[Ge]){k=R[Ge],Ce=N[Ge];break}return k<Ce?-1:Ce<k?1:0},g.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(R,N){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return g.alloc(0);let k;if(N===void 0)for(N=0,k=0;k<R.length;++k)N+=R[k].length;const Ce=g.allocUnsafe(N);let Ge=0;for(k=0;k<R.length;++k){let Ie=R[k];if(ft(Ie,Uint8Array))Ge+Ie.length>Ce.length?(g.isBuffer(Ie)||(Ie=g.from(Ie)),Ie.copy(Ce,Ge)):Uint8Array.prototype.set.call(Ce,Ie,Ge);else if(g.isBuffer(Ie))Ie.copy(Ce,Ge);else throw new TypeError('"list" argument must be an Array of Buffers');Ge+=Ie.length}return Ce};function I($,R){if(g.isBuffer($))return $.length;if(ArrayBuffer.isView($)||ft($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);const N=$.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&N===0)return 0;let Ce=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return Se($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return ot($).length;default:if(Ce)return k?-1:Se($).length;R=(""+R).toLowerCase(),Ce=!0}}g.byteLength=I;function B($,R,N){let k=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,R>>>=0,N<=R))return"";for($||($="utf8");;)switch($){case"hex":return it(this,R,N);case"utf8":case"utf-8":return wt(this,R,N);case"ascii":return Me(this,R,N);case"latin1":case"binary":return Fe(this,R,N);case"base64":return ke(this,R,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,R,N);default:if(k)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),k=!0}}g.prototype._isBuffer=!0;function z($,R,N){const k=$[R];$[R]=$[N],$[N]=k}g.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<R;N+=2)z(this,N,N+1);return this},g.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<R;N+=4)z(this,N,N+3),z(this,N+1,N+2);return this},g.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<R;N+=8)z(this,N,N+7),z(this,N+1,N+6),z(this,N+2,N+5),z(this,N+3,N+4);return this},g.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?wt(this,0,R):B.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(R){if(!g.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:g.compare(this,R)===0},g.prototype.inspect=function(){let R="";const N=a.INSPECT_MAX_BYTES;return R=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(R+=" ... "),"<Buffer "+R+">"},i&&(g.prototype[i]=g.prototype.inspect),g.prototype.compare=function(R,N,k,Ce,Ge){if(ft(R,Uint8Array)&&(R=g.from(R,R.offset,R.byteLength)),!g.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(N===void 0&&(N=0),k===void 0&&(k=R?R.length:0),Ce===void 0&&(Ce=0),Ge===void 0&&(Ge=this.length),N<0||k>R.length||Ce<0||Ge>this.length)throw new RangeError("out of range index");if(Ce>=Ge&&N>=k)return 0;if(Ce>=Ge)return-1;if(N>=k)return 1;if(N>>>=0,k>>>=0,Ce>>>=0,Ge>>>=0,this===R)return 0;let Ie=Ge-Ce,$t=k-N;const sn=Math.min(Ie,$t),Rt=this.slice(Ce,Ge),rn=R.slice(N,k);for(let an=0;an<sn;++an)if(Rt[an]!==rn[an]){Ie=Rt[an],$t=rn[an];break}return Ie<$t?-1:$t<Ie?1:0};function Y($,R,N,k,Ce){if($.length===0)return-1;if(typeof N=="string"?(k=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,Dt(N)&&(N=Ce?0:$.length-1),N<0&&(N=$.length+N),N>=$.length){if(Ce)return-1;N=$.length-1}else if(N<0)if(Ce)N=0;else return-1;if(typeof R=="string"&&(R=g.from(R,k)),g.isBuffer(R))return R.length===0?-1:Q($,R,N,k,Ce);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?Ce?Uint8Array.prototype.indexOf.call($,R,N):Uint8Array.prototype.lastIndexOf.call($,R,N):Q($,[R],N,k,Ce);throw new TypeError("val must be string, number or Buffer")}function Q($,R,N,k,Ce){let Ge=1,Ie=$.length,$t=R.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if($.length<2||R.length<2)return-1;Ge=2,Ie/=2,$t/=2,N/=2}function sn(rn,an){return Ge===1?rn[an]:rn.readUInt16BE(an*Ge)}let Rt;if(Ce){let rn=-1;for(Rt=N;Rt<Ie;Rt++)if(sn($,Rt)===sn(R,rn===-1?0:Rt-rn)){if(rn===-1&&(rn=Rt),Rt-rn+1===$t)return rn*Ge}else rn!==-1&&(Rt-=Rt-rn),rn=-1}else for(N+$t>Ie&&(N=Ie-$t),Rt=N;Rt>=0;Rt--){let rn=!0;for(let an=0;an<$t;an++)if(sn($,Rt+an)!==sn(R,an)){rn=!1;break}if(rn)return Rt}return-1}g.prototype.includes=function(R,N,k){return this.indexOf(R,N,k)!==-1},g.prototype.indexOf=function(R,N,k){return Y(this,R,N,k,!0)},g.prototype.lastIndexOf=function(R,N,k){return Y(this,R,N,k,!1)};function ve($,R,N,k){N=Number(N)||0;const Ce=$.length-N;k?(k=Number(k),k>Ce&&(k=Ce)):k=Ce;const Ge=R.length;k>Ge/2&&(k=Ge/2);let Ie;for(Ie=0;Ie<k;++Ie){const $t=parseInt(R.substr(Ie*2,2),16);if(Dt($t))return Ie;$[N+Ie]=$t}return Ie}function qe($,R,N,k){return dt(Se(R,$.length-N),$,N,k)}function J($,R,N,k){return dt(at(R),$,N,k)}function pe($,R,N,k){return dt(ot(R),$,N,k)}function Xe($,R,N,k){return dt(we(R,$.length-N),$,N,k)}g.prototype.write=function(R,N,k,Ce){if(N===void 0)Ce="utf8",k=this.length,N=0;else if(k===void 0&&typeof N=="string")Ce=N,k=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(k)?(k=k>>>0,Ce===void 0&&(Ce="utf8")):(Ce=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ge=this.length-N;if((k===void 0||k>Ge)&&(k=Ge),R.length>0&&(k<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ce||(Ce="utf8");let Ie=!1;for(;;)switch(Ce){case"hex":return ve(this,R,N,k);case"utf8":case"utf-8":return qe(this,R,N,k);case"ascii":case"latin1":case"binary":return J(this,R,N,k);case"base64":return pe(this,R,N,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xe(this,R,N,k);default:if(Ie)throw new TypeError("Unknown encoding: "+Ce);Ce=(""+Ce).toLowerCase(),Ie=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ke($,R,N){return R===0&&N===$.length?n.fromByteArray($):n.fromByteArray($.slice(R,N))}function wt($,R,N){N=Math.min($.length,N);const k=[];let Ce=R;for(;Ce<N;){const Ge=$[Ce];let Ie=null,$t=Ge>239?4:Ge>223?3:Ge>191?2:1;if(Ce+$t<=N){let sn,Rt,rn,an;switch($t){case 1:Ge<128&&(Ie=Ge);break;case 2:sn=$[Ce+1],(sn&192)===128&&(an=(Ge&31)<<6|sn&63,an>127&&(Ie=an));break;case 3:sn=$[Ce+1],Rt=$[Ce+2],(sn&192)===128&&(Rt&192)===128&&(an=(Ge&15)<<12|(sn&63)<<6|Rt&63,an>2047&&(an<55296||an>57343)&&(Ie=an));break;case 4:sn=$[Ce+1],Rt=$[Ce+2],rn=$[Ce+3],(sn&192)===128&&(Rt&192)===128&&(rn&192)===128&&(an=(Ge&15)<<18|(sn&63)<<12|(Rt&63)<<6|rn&63,an>65535&&an<1114112&&(Ie=an))}}Ie===null?(Ie=65533,$t=1):Ie>65535&&(Ie-=65536,k.push(Ie>>>10&1023|55296),Ie=56320|Ie&1023),k.push(Ie),Ce+=$t}return Ne(k)}const mt=4096;function Ne($){const R=$.length;if(R<=mt)return String.fromCharCode.apply(String,$);let N="",k=0;for(;k<R;)N+=String.fromCharCode.apply(String,$.slice(k,k+=mt));return N}function Me($,R,N){let k="";N=Math.min($.length,N);for(let Ce=R;Ce<N;++Ce)k+=String.fromCharCode($[Ce]&127);return k}function Fe($,R,N){let k="";N=Math.min($.length,N);for(let Ce=R;Ce<N;++Ce)k+=String.fromCharCode($[Ce]);return k}function it($,R,N){const k=$.length;(!R||R<0)&&(R=0),(!N||N<0||N>k)&&(N=k);let Ce="";for(let Ge=R;Ge<N;++Ge)Ce+=pn[$[Ge]];return Ce}function H($,R,N){const k=$.slice(R,N);let Ce="";for(let Ge=0;Ge<k.length-1;Ge+=2)Ce+=String.fromCharCode(k[Ge]+k[Ge+1]*256);return Ce}g.prototype.slice=function(R,N){const k=this.length;R=~~R,N=N===void 0?k:~~N,R<0?(R+=k,R<0&&(R=0)):R>k&&(R=k),N<0?(N+=k,N<0&&(N=0)):N>k&&(N=k),N<R&&(N=R);const Ce=this.subarray(R,N);return Object.setPrototypeOf(Ce,g.prototype),Ce};function he($,R,N){if($%1!==0||$<0)throw new RangeError("offset is not uint");if($+R>N)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(R,N,k){R=R>>>0,N=N>>>0,k||he(R,N,this.length);let Ce=this[R],Ge=1,Ie=0;for(;++Ie<N&&(Ge*=256);)Ce+=this[R+Ie]*Ge;return Ce},g.prototype.readUintBE=g.prototype.readUIntBE=function(R,N,k){R=R>>>0,N=N>>>0,k||he(R,N,this.length);let Ce=this[R+--N],Ge=1;for(;N>0&&(Ge*=256);)Ce+=this[R+--N]*Ge;return Ce},g.prototype.readUint8=g.prototype.readUInt8=function(R,N){return R=R>>>0,N||he(R,1,this.length),this[R]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(R,N){return R=R>>>0,N||he(R,2,this.length),this[R]|this[R+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(R,N){return R=R>>>0,N||he(R,2,this.length),this[R]<<8|this[R+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(R,N){return R=R>>>0,N||he(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(R,N){return R=R>>>0,N||he(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},g.prototype.readBigUInt64LE=At(function(R){R=R>>>0,T(R,"offset");const N=this[R],k=this[R+7];(N===void 0||k===void 0)&&G(R,this.length-8);const Ce=N+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,Ge=this[++R]+this[++R]*2**8+this[++R]*2**16+k*2**24;return BigInt(Ce)+(BigInt(Ge)<<BigInt(32))}),g.prototype.readBigUInt64BE=At(function(R){R=R>>>0,T(R,"offset");const N=this[R],k=this[R+7];(N===void 0||k===void 0)&&G(R,this.length-8);const Ce=N*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],Ge=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+k;return(BigInt(Ce)<<BigInt(32))+BigInt(Ge)}),g.prototype.readIntLE=function(R,N,k){R=R>>>0,N=N>>>0,k||he(R,N,this.length);let Ce=this[R],Ge=1,Ie=0;for(;++Ie<N&&(Ge*=256);)Ce+=this[R+Ie]*Ge;return Ge*=128,Ce>=Ge&&(Ce-=Math.pow(2,8*N)),Ce},g.prototype.readIntBE=function(R,N,k){R=R>>>0,N=N>>>0,k||he(R,N,this.length);let Ce=N,Ge=1,Ie=this[R+--Ce];for(;Ce>0&&(Ge*=256);)Ie+=this[R+--Ce]*Ge;return Ge*=128,Ie>=Ge&&(Ie-=Math.pow(2,8*N)),Ie},g.prototype.readInt8=function(R,N){return R=R>>>0,N||he(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},g.prototype.readInt16LE=function(R,N){R=R>>>0,N||he(R,2,this.length);const k=this[R]|this[R+1]<<8;return k&32768?k|4294901760:k},g.prototype.readInt16BE=function(R,N){R=R>>>0,N||he(R,2,this.length);const k=this[R+1]|this[R]<<8;return k&32768?k|4294901760:k},g.prototype.readInt32LE=function(R,N){return R=R>>>0,N||he(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},g.prototype.readInt32BE=function(R,N){return R=R>>>0,N||he(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},g.prototype.readBigInt64LE=At(function(R){R=R>>>0,T(R,"offset");const N=this[R],k=this[R+7];(N===void 0||k===void 0)&&G(R,this.length-8);const Ce=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(k<<24);return(BigInt(Ce)<<BigInt(32))+BigInt(N+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),g.prototype.readBigInt64BE=At(function(R){R=R>>>0,T(R,"offset");const N=this[R],k=this[R+7];(N===void 0||k===void 0)&&G(R,this.length-8);const Ce=(N<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(Ce)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+k)}),g.prototype.readFloatLE=function(R,N){return R=R>>>0,N||he(R,4,this.length),s.read(this,R,!0,23,4)},g.prototype.readFloatBE=function(R,N){return R=R>>>0,N||he(R,4,this.length),s.read(this,R,!1,23,4)},g.prototype.readDoubleLE=function(R,N){return R=R>>>0,N||he(R,8,this.length),s.read(this,R,!0,52,8)},g.prototype.readDoubleBE=function(R,N){return R=R>>>0,N||he(R,8,this.length),s.read(this,R,!1,52,8)};function Re($,R,N,k,Ce,Ge){if(!g.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Ce||R<Ge)throw new RangeError('"value" argument is out of bounds');if(N+k>$.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(R,N,k,Ce){if(R=+R,N=N>>>0,k=k>>>0,!Ce){const $t=Math.pow(2,8*k)-1;Re(this,R,N,k,$t,0)}let Ge=1,Ie=0;for(this[N]=R&255;++Ie<k&&(Ge*=256);)this[N+Ie]=R/Ge&255;return N+k},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(R,N,k,Ce){if(R=+R,N=N>>>0,k=k>>>0,!Ce){const $t=Math.pow(2,8*k)-1;Re(this,R,N,k,$t,0)}let Ge=k-1,Ie=1;for(this[N+Ge]=R&255;--Ge>=0&&(Ie*=256);)this[N+Ge]=R/Ie&255;return N+k},g.prototype.writeUint8=g.prototype.writeUInt8=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,1,255,0),this[N]=R&255,N+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,2,65535,0),this[N]=R&255,this[N+1]=R>>>8,N+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,2,65535,0),this[N]=R>>>8,this[N+1]=R&255,N+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,4,4294967295,0),this[N+3]=R>>>24,this[N+2]=R>>>16,this[N+1]=R>>>8,this[N]=R&255,N+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,4,4294967295,0),this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=R&255,N+4};function be($,R,N,k,Ce){j(R,k,Ce,$,N,7);let Ge=Number(R&BigInt(4294967295));$[N++]=Ge,Ge=Ge>>8,$[N++]=Ge,Ge=Ge>>8,$[N++]=Ge,Ge=Ge>>8,$[N++]=Ge;let Ie=Number(R>>BigInt(32)&BigInt(4294967295));return $[N++]=Ie,Ie=Ie>>8,$[N++]=Ie,Ie=Ie>>8,$[N++]=Ie,Ie=Ie>>8,$[N++]=Ie,N}function tt($,R,N,k,Ce){j(R,k,Ce,$,N,7);let Ge=Number(R&BigInt(4294967295));$[N+7]=Ge,Ge=Ge>>8,$[N+6]=Ge,Ge=Ge>>8,$[N+5]=Ge,Ge=Ge>>8,$[N+4]=Ge;let Ie=Number(R>>BigInt(32)&BigInt(4294967295));return $[N+3]=Ie,Ie=Ie>>8,$[N+2]=Ie,Ie=Ie>>8,$[N+1]=Ie,Ie=Ie>>8,$[N]=Ie,N+8}g.prototype.writeBigUInt64LE=At(function(R,N=0){return be(this,R,N,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=At(function(R,N=0){return tt(this,R,N,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(R,N,k,Ce){if(R=+R,N=N>>>0,!Ce){const sn=Math.pow(2,8*k-1);Re(this,R,N,k,sn-1,-sn)}let Ge=0,Ie=1,$t=0;for(this[N]=R&255;++Ge<k&&(Ie*=256);)R<0&&$t===0&&this[N+Ge-1]!==0&&($t=1),this[N+Ge]=(R/Ie>>0)-$t&255;return N+k},g.prototype.writeIntBE=function(R,N,k,Ce){if(R=+R,N=N>>>0,!Ce){const sn=Math.pow(2,8*k-1);Re(this,R,N,k,sn-1,-sn)}let Ge=k-1,Ie=1,$t=0;for(this[N+Ge]=R&255;--Ge>=0&&(Ie*=256);)R<0&&$t===0&&this[N+Ge+1]!==0&&($t=1),this[N+Ge]=(R/Ie>>0)-$t&255;return N+k},g.prototype.writeInt8=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,1,127,-128),R<0&&(R=255+R+1),this[N]=R&255,N+1},g.prototype.writeInt16LE=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,2,32767,-32768),this[N]=R&255,this[N+1]=R>>>8,N+2},g.prototype.writeInt16BE=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,2,32767,-32768),this[N]=R>>>8,this[N+1]=R&255,N+2},g.prototype.writeInt32LE=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,4,2147483647,-2147483648),this[N]=R&255,this[N+1]=R>>>8,this[N+2]=R>>>16,this[N+3]=R>>>24,N+4},g.prototype.writeInt32BE=function(R,N,k){return R=+R,N=N>>>0,k||Re(this,R,N,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=R&255,N+4},g.prototype.writeBigInt64LE=At(function(R,N=0){return be(this,R,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=At(function(R,N=0){return tt(this,R,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gt($,R,N,k,Ce,Ge){if(N+k>$.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function xt($,R,N,k,Ce){return R=+R,N=N>>>0,Ce||gt($,R,N,4),s.write($,R,N,k,23,4),N+4}g.prototype.writeFloatLE=function(R,N,k){return xt(this,R,N,!0,k)},g.prototype.writeFloatBE=function(R,N,k){return xt(this,R,N,!1,k)};function Ut($,R,N,k,Ce){return R=+R,N=N>>>0,Ce||gt($,R,N,8),s.write($,R,N,k,52,8),N+8}g.prototype.writeDoubleLE=function(R,N,k){return Ut(this,R,N,!0,k)},g.prototype.writeDoubleBE=function(R,N,k){return Ut(this,R,N,!1,k)},g.prototype.copy=function(R,N,k,Ce){if(!g.isBuffer(R))throw new TypeError("argument should be a Buffer");if(k||(k=0),!Ce&&Ce!==0&&(Ce=this.length),N>=R.length&&(N=R.length),N||(N=0),Ce>0&&Ce<k&&(Ce=k),Ce===k||R.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(Ce<0)throw new RangeError("sourceEnd out of bounds");Ce>this.length&&(Ce=this.length),R.length-N<Ce-k&&(Ce=R.length-N+k);const Ge=Ce-k;return this===R&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,k,Ce):Uint8Array.prototype.set.call(R,this.subarray(k,Ce),N),Ge},g.prototype.fill=function(R,N,k,Ce){if(typeof R=="string"){if(typeof N=="string"?(Ce=N,N=0,k=this.length):typeof k=="string"&&(Ce=k,k=this.length),Ce!==void 0&&typeof Ce!="string")throw new TypeError("encoding must be a string");if(typeof Ce=="string"&&!g.isEncoding(Ce))throw new TypeError("Unknown encoding: "+Ce);if(R.length===1){const Ie=R.charCodeAt(0);(Ce==="utf8"&&Ie<128||Ce==="latin1")&&(R=Ie)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(N<0||this.length<N||this.length<k)throw new RangeError("Out of range index");if(k<=N)return this;N=N>>>0,k=k===void 0?this.length:k>>>0,R||(R=0);let Ge;if(typeof R=="number")for(Ge=N;Ge<k;++Ge)this[Ge]=R;else{const Ie=g.isBuffer(R)?R:g.from(R,Ce),$t=Ie.length;if($t===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(Ge=0;Ge<k-N;++Ge)this[Ge+N]=Ie[Ge%$t]}return this};const Ye={};function Ue($,R,N){Ye[$]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$}]`,this.stack,delete this.name}get code(){return $}set code(Ce){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ce,writable:!0})}toString(){return`${this.name} [${$}]: ${this.message}`}}}Ue("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?`${$} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ue("ERR_INVALID_ARG_TYPE",function($,R){return`The "${$}" argument must be of type number. Received type ${typeof R}`},TypeError),Ue("ERR_OUT_OF_RANGE",function($,R,N){let k=`The value of "${$}" is out of range.`,Ce=N;return Number.isInteger(N)&&Math.abs(N)>2**32?Ce=bt(String(N)):typeof N=="bigint"&&(Ce=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(Ce=bt(Ce)),Ce+="n"),k+=` It must be ${R}. Received ${Ce}`,k},RangeError);function bt($){let R="",N=$.length;const k=$[0]==="-"?1:0;for(;N>=k+4;N-=3)R=`_${$.slice(N-3,N)}${R}`;return`${$.slice(0,N)}${R}`}function ue($,R,N){T(R,"offset"),($[R]===void 0||$[R+N]===void 0)&&G(R,$.length-(N+1))}function j($,R,N,k,Ce,Ge){if($>N||$<R){const Ie=typeof R=="bigint"?"n":"";let $t;throw R===0||R===BigInt(0)?$t=`>= 0${Ie} and < 2${Ie} ** ${(Ge+1)*8}${Ie}`:$t=`>= -(2${Ie} ** ${(Ge+1)*8-1}${Ie}) and < 2 ** ${(Ge+1)*8-1}${Ie}`,new Ye.ERR_OUT_OF_RANGE("value",$t,$)}ue(k,Ce,Ge)}function T($,R){if(typeof $!="number")throw new Ye.ERR_INVALID_ARG_TYPE(R,"number",$)}function G($,R,N){throw Math.floor($)!==$?(T($,N),new Ye.ERR_OUT_OF_RANGE("offset","an integer",$)):R<0?new Ye.ERR_BUFFER_OUT_OF_BOUNDS:new Ye.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${R}`,$)}const ee=/[^+/0-9A-Za-z-_]/g;function me($){if($=$.split("=")[0],$=$.trim().replace(ee,""),$.length<2)return"";for(;$.length%4!==0;)$=$+"=";return $}function Se($,R){R=R||1/0;let N;const k=$.length;let Ce=null;const Ge=[];for(let Ie=0;Ie<k;++Ie){if(N=$.charCodeAt(Ie),N>55295&&N<57344){if(!Ce){if(N>56319){(R-=3)>-1&&Ge.push(239,191,189);continue}else if(Ie+1===k){(R-=3)>-1&&Ge.push(239,191,189);continue}Ce=N;continue}if(N<56320){(R-=3)>-1&&Ge.push(239,191,189),Ce=N;continue}N=(Ce-55296<<10|N-56320)+65536}else Ce&&(R-=3)>-1&&Ge.push(239,191,189);if(Ce=null,N<128){if((R-=1)<0)break;Ge.push(N)}else if(N<2048){if((R-=2)<0)break;Ge.push(N>>6|192,N&63|128)}else if(N<65536){if((R-=3)<0)break;Ge.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((R-=4)<0)break;Ge.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return Ge}function at($){const R=[];for(let N=0;N<$.length;++N)R.push($.charCodeAt(N)&255);return R}function we($,R){let N,k,Ce;const Ge=[];for(let Ie=0;Ie<$.length&&!((R-=2)<0);++Ie)N=$.charCodeAt(Ie),k=N>>8,Ce=N%256,Ge.push(Ce),Ge.push(k);return Ge}function ot($){return n.toByteArray(me($))}function dt($,R,N,k){let Ce;for(Ce=0;Ce<k&&!(Ce+N>=R.length||Ce>=$.length);++Ce)R[Ce+N]=$[Ce];return Ce}function ft($,R){return $ instanceof R||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===R.name}function Dt($){return $!==$}const pn=function(){const $="0123456789abcdef",R=new Array(256);for(let N=0;N<16;++N){const k=N*16;for(let Ce=0;Ce<16;++Ce)R[k+Ce]=$[N]+$[Ce]}return R}();function At($){return typeof BigInt>"u"?Kt:$}function Kt(){throw new Error("BigInt not supported")}}(Sd)),Sd}var Ed,i0;function S1(){if(i0)return Ed;i0=1;var a=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,s=/\s|\uFEFF|\xA0/,i=/\r?\n[\x20\x09]+/g,d=/[;,"]/,y=/[;,"]|\s/,p=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,g={IDLE:1,URI:2,ATTR:4};function E(C){return C.replace(n,"")}function m(C){return s.test(C)}function _(C,O){for(;m(C[O]);)O++;return O}function S(C){return y.test(C)||!p.test(C)}function D(C,O){return Object.keys(C).length===Object.keys(O).length&&Object.keys(C).every(U=>U in O&&C[U]===O[U])}class M{constructor(O){this.refs=[],O&&this.parse(O)}rel(O){for(var U=[],F=O.toLowerCase(),P=0;P<this.refs.length;P++)typeof this.refs[P].rel=="string"&&this.refs[P].rel.toLowerCase()===F&&U.push(this.refs[P]);return U}get(O,U){O=O.toLowerCase(),U=U.toLowerCase();for(var F=[],P=0;P<this.refs.length;P++)typeof this.refs[P][O]=="string"&&this.refs[P][O].toLowerCase()===U&&F.push(this.refs[P]);return F}set(O){return this.refs.push(O),this}setUnique(O){return this.refs.some(U=>D(U,O))||this.refs.push(O),this}has(O,U){O=O.toLowerCase(),U=U.toLowerCase();for(var F=0;F<this.refs.length;F++)if(typeof this.refs[F][O]=="string"&&this.refs[F][O].toLowerCase()===U)return!0;return!1}parse(O,I){I=I||0,O=I?O.slice(I):O,O=E(O).replace(i,"");for(var F=g.IDLE,P=O.length,I=0,B=null;I<P;)if(F===g.IDLE){if(m(O[I])){I++;continue}else if(O[I]==="<"){B!=null&&(B.rel!=null?this.refs.push(...M.expandRelations(B)):this.refs.push(B));var z=O.indexOf(">",I);if(z===-1)throw new Error("Expected end of URI delimiter at offset "+I);B={uri:O.slice(I+1,z)},I=z,F=g.URI}else throw new Error('Unexpected character "'+O[I]+'" at offset '+I);I++}else if(F===g.URI)if(m(O[I])){I++;continue}else if(O[I]===";")F=g.ATTR,I++;else if(O[I]===",")F=g.IDLE,I++;else throw new Error('Unexpected character "'+O[I]+'" at offset '+I);else if(F===g.ATTR){if(O[I]===";"||m(O[I])){I++;continue}var z=O.indexOf("=",I);z===-1&&(z=O.indexOf(";",I)),z===-1&&(z=O.length);var Y=E(O.slice(I,z)).toLowerCase(),Q="";if(I=z+1,I=_(O,I),O[I]==='"')for(I++;I<P;){if(O[I]==='"'){I++;break}O[I]==="\\"&&I++,Q+=O[I],I++}else{for(var z=I+1;!d.test(O[z])&&z<P;)z++;Q=O.slice(I,z),I=z}switch(B[Y]&&M.isSingleOccurenceAttr(Y)||(Y[Y.length-1]==="*"?B[Y]=M.parseExtendedValue(Q):(Q=Y==="type"?Q.toLowerCase():Q,B[Y]!=null?Array.isArray(B[Y])?B[Y].push(Q):B[Y]=[B[Y],Q]:B[Y]=Q)),O[I]){case",":F=g.IDLE;break;case";":F=g.ATTR;break}I++}else throw new Error('Unknown parser state "'+F+'"');return B!=null&&(B.rel!=null?this.refs.push(...M.expandRelations(B)):this.refs.push(B)),B=null,this}toString(){for(var O=[],U="",F=null,P=0;P<this.refs.length;P++)F=this.refs[P],U=Object.keys(this.refs[P]).reduce(function(I,B){return B==="uri"?I:I+"; "+M.formatAttribute(B,F[B])},"<"+F.uri+">"),O.push(U);return O.join(", ")}}return M.isCompatibleEncoding=function(C){return a.test(C)},M.parse=function(C,O){return new M().parse(C,O)},M.isSingleOccurenceAttr=function(C){return C==="rel"||C==="type"||C==="media"||C==="title"||C==="title*"},M.isTokenAttr=function(C){return C==="rel"||C==="type"||C==="anchor"},M.escapeQuotes=function(C){return C.replace(/"/g,'\\"')},M.expandRelations=function(C){var O=C.rel.split(" ");return O.map(function(U){var F=Object.assign({},C);return F.rel=U,F})},M.parseExtendedValue=function(C){var O=/([^']+)?(?:'([^']*)')?(.+)/.exec(C);return{language:O[2].toLowerCase(),encoding:M.isCompatibleEncoding(O[1])?null:O[1].toLowerCase(),value:M.isCompatibleEncoding(O[1])?decodeURIComponent(O[3]):O[3]}},M.formatExtendedAttribute=function(C,O){var U=(O.encoding||"utf-8").toUpperCase(),F=O.language||"en",P="";return Buffer.isBuffer(O.value)&&M.isCompatibleEncoding(U)?P=O.value.toString(U):Buffer.isBuffer(O.value)?P=O.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):P=encodeURIComponent(O.value),C+"="+U+"'"+F+"'"+P},M.formatAttribute=function(C,O){return Array.isArray(O)?O.map(U=>M.formatAttribute(C,U)).join("; "):C[C.length-1]==="*"||typeof O!="string"?M.formatExtendedAttribute(C,O):(M.isTokenAttr(C)?O=S(O)?'"'+M.escapeQuotes(O)+'"':M.escapeQuotes(O):S(O)&&(O=encodeURIComponent(O),O=O.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),O='"'+O+'"'),C+"="+O)},Ed=M,Ed}var xd={exports:{}},Td={exports:{}},Ad,a0;function Wn(){if(a0)return Ad;a0=1;class a extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let i="";for(let d=0;d<s.length;d++)i+=`    ${s[d].stack}
`;super(i),this.name="AggregateError",this.errors=s}}return Ad={AggregateError:a,ArrayIsArray(n){return Array.isArray(n)},ArrayPrototypeIncludes(n,s){return n.includes(s)},ArrayPrototypeIndexOf(n,s){return n.indexOf(s)},ArrayPrototypeJoin(n,s){return n.join(s)},ArrayPrototypeMap(n,s){return n.map(s)},ArrayPrototypePop(n,s){return n.pop(s)},ArrayPrototypePush(n,s){return n.push(s)},ArrayPrototypeSlice(n,s,i){return n.slice(s,i)},Error,FunctionPrototypeCall(n,s,...i){return n.call(s,...i)},FunctionPrototypeSymbolHasInstance(n,s){return Function.prototype[Symbol.hasInstance].call(n,s)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(n,s){return Object.defineProperties(n,s)},ObjectDefineProperty(n,s,i){return Object.defineProperty(n,s,i)},ObjectGetOwnPropertyDescriptor(n,s){return Object.getOwnPropertyDescriptor(n,s)},ObjectKeys(n){return Object.keys(n)},ObjectSetPrototypeOf(n,s){return Object.setPrototypeOf(n,s)},Promise,PromisePrototypeCatch(n,s){return n.catch(s)},PromisePrototypeThen(n,s,i){return n.then(s,i)},PromiseReject(n){return Promise.reject(n)},PromiseResolve(n){return Promise.resolve(n)},ReflectApply:Reflect.apply,RegExpPrototypeTest(n,s){return n.test(s)},SafeSet:Set,String,StringPrototypeSlice(n,s,i){return n.slice(s,i)},StringPrototypeToLowerCase(n){return n.toLowerCase()},StringPrototypeToUpperCase(n){return n.toUpperCase()},StringPrototypeTrim(n){return n.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(n,s,i){return n.set(s,i)},Boolean,Uint8Array},Ad}var Rd={exports:{}},kd,o0;function Im(){return o0||(o0=1,kd={format(a,...n){return a.replace(/%([sdifj])/g,function(...[s,i]){const d=n.shift();return i==="f"?d.toFixed(6):i==="j"?JSON.stringify(d):i==="s"&&typeof d=="object"?`${d.constructor!==Object?d.constructor.name:""} {}`.trim():d.toString()})},inspect(a){switch(typeof a){case"string":if(a.includes("'"))if(a.includes('"')){if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}else return`"${a}"`;return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}}}),kd}var Fd,s0;function Wr(){if(s0)return Fd;s0=1;const{format:a,inspect:n}=Im(),{AggregateError:s}=Wn(),i=globalThis.AggregateError||s,d=Symbol("kIsNodeError"),y=["string","function","number","object","Function","Object","boolean","bigint","symbol"],p=/^([A-Z][a-z0-9]*)+$/,g="__node_internal_",E={};function m(U,F){if(!U)throw new E.ERR_INTERNAL_ASSERTION(F)}function _(U){let F="",P=U.length;const I=U[0]==="-"?1:0;for(;P>=I+4;P-=3)F=`_${U.slice(P-3,P)}${F}`;return`${U.slice(0,P)}${F}`}function S(U,F,P){if(typeof F=="function")return m(F.length<=P.length,`Code: ${U}; The provided arguments length (${P.length}) does not match the required ones (${F.length}).`),F(...P);const I=(F.match(/%[dfijoOs]/g)||[]).length;return m(I===P.length,`Code: ${U}; The provided arguments length (${P.length}) does not match the required ones (${I}).`),P.length===0?F:a(F,...P)}function D(U,F,P){P||(P=Error);class I extends P{constructor(...z){super(S(U,F,z))}toString(){return`${this.name} [${U}]: ${this.message}`}}Object.defineProperties(I.prototype,{name:{value:P.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${U}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),I.prototype.code=U,I.prototype[d]=!0,E[U]=I}function M(U){const F=g+U.name;return Object.defineProperty(U,"name",{value:F}),U}function C(U,F){if(U&&F&&U!==F){if(Array.isArray(F.errors))return F.errors.push(U),F;const P=new i([F,U],F.message);return P.code=F.code,P}return U||F}class O extends Error{constructor(F="The operation was aborted",P=void 0){if(P!==void 0&&typeof P!="object")throw new E.ERR_INVALID_ARG_TYPE("options","Object",P);super(F,P),this.code="ABORT_ERR",this.name="AbortError"}}return D("ERR_ASSERTION","%s",Error),D("ERR_INVALID_ARG_TYPE",(U,F,P)=>{m(typeof U=="string","'name' must be a string"),Array.isArray(F)||(F=[F]);let I="The ";U.endsWith(" argument")?I+=`${U} `:I+=`"${U}" ${U.includes(".")?"property":"argument"} `,I+="must be ";const B=[],z=[],Y=[];for(const ve of F)m(typeof ve=="string","All expected entries have to be of type string"),y.includes(ve)?B.push(ve.toLowerCase()):p.test(ve)?z.push(ve):(m(ve!=="object",'The value "object" should be written as "Object"'),Y.push(ve));if(z.length>0){const ve=B.indexOf("object");ve!==-1&&(B.splice(B,ve,1),z.push("Object"))}if(B.length>0){switch(B.length){case 1:I+=`of type ${B[0]}`;break;case 2:I+=`one of type ${B[0]} or ${B[1]}`;break;default:{const ve=B.pop();I+=`one of type ${B.join(", ")}, or ${ve}`}}(z.length>0||Y.length>0)&&(I+=" or ")}if(z.length>0){switch(z.length){case 1:I+=`an instance of ${z[0]}`;break;case 2:I+=`an instance of ${z[0]} or ${z[1]}`;break;default:{const ve=z.pop();I+=`an instance of ${z.join(", ")}, or ${ve}`}}Y.length>0&&(I+=" or ")}switch(Y.length){case 0:break;case 1:Y[0].toLowerCase()!==Y[0]&&(I+="an "),I+=`${Y[0]}`;break;case 2:I+=`one of ${Y[0]} or ${Y[1]}`;break;default:{const ve=Y.pop();I+=`one of ${Y.join(", ")}, or ${ve}`}}if(P==null)I+=`. Received ${P}`;else if(typeof P=="function"&&P.name)I+=`. Received function ${P.name}`;else if(typeof P=="object"){var Q;if((Q=P.constructor)!==null&&Q!==void 0&&Q.name)I+=`. Received an instance of ${P.constructor.name}`;else{const ve=n(P,{depth:-1});I+=`. Received ${ve}`}}else{let ve=n(P,{colors:!1});ve.length>25&&(ve=`${ve.slice(0,25)}...`),I+=`. Received type ${typeof P} (${ve})`}return I},TypeError),D("ERR_INVALID_ARG_VALUE",(U,F,P="is invalid")=>{let I=n(F);return I.length>128&&(I=I.slice(0,128)+"..."),`The ${U.includes(".")?"property":"argument"} '${U}' ${P}. Received ${I}`},TypeError),D("ERR_INVALID_RETURN_VALUE",(U,F,P)=>{var I;const B=P!=null&&(I=P.constructor)!==null&&I!==void 0&&I.name?`instance of ${P.constructor.name}`:`type ${typeof P}`;return`Expected ${U} to be returned from the "${F}" function but got ${B}.`},TypeError),D("ERR_MISSING_ARGS",(...U)=>{m(U.length>0,"At least one arg needs to be specified");let F;const P=U.length;switch(U=(Array.isArray(U)?U:[U]).map(I=>`"${I}"`).join(" or "),P){case 1:F+=`The ${U[0]} argument`;break;case 2:F+=`The ${U[0]} and ${U[1]} arguments`;break;default:{const I=U.pop();F+=`The ${U.join(", ")}, and ${I} arguments`}break}return`${F} must be specified`},TypeError),D("ERR_OUT_OF_RANGE",(U,F,P)=>{m(F,'Missing "range" argument');let I;if(Number.isInteger(P)&&Math.abs(P)>2**32)I=_(String(P));else if(typeof P=="bigint"){I=String(P);const B=BigInt(2)**BigInt(32);(P>B||P<-B)&&(I=_(I)),I+="n"}else I=n(P);return`The value of "${U}" is out of range. It must be ${F}. Received ${I}`},RangeError),D("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),D("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),D("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),D("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),D("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),D("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),D("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),D("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),D("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),D("ERR_STREAM_WRITE_AFTER_END","write after end",Error),D("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Fd={AbortError:O,aggregateTwoErrors:M(C),hideStackFrames:M,codes:E},Fd}var Su={exports:{}},u0;function Iu(){if(u0)return Su.exports;u0=1;const{AbortController:a,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Su.exports=a,Su.exports.AbortSignal=n,Su.exports.default=a,Su.exports}var l0;function oi(){return l0||(l0=1,function(a){const n=Ca(),{format:s,inspect:i}=Im(),{codes:{ERR_INVALID_ARG_TYPE:d}}=Wr(),{kResistStopPropagation:y,AggregateError:p,SymbolDispose:g}=Wn(),E=globalThis.AbortSignal||Iu().AbortSignal,m=globalThis.AbortController||Iu().AbortController,_=Object.getPrototypeOf(async function(){}).constructor,S=globalThis.Blob||n.Blob,D=typeof S<"u"?function(U){return U instanceof S}:function(U){return!1},M=(O,U)=>{if(O!==void 0&&(O===null||typeof O!="object"||!("aborted"in O)))throw new d(U,"AbortSignal",O)},C=(O,U)=>{if(typeof O!="function")throw new d(U,"Function",O)};a.exports={AggregateError:p,kEmptyObject:Object.freeze({}),once(O){let U=!1;return function(...F){U||(U=!0,O.apply(this,F))}},createDeferredPromise:function(){let O,U;return{promise:new Promise((P,I)=>{O=P,U=I}),resolve:O,reject:U}},promisify(O){return new Promise((U,F)=>{O((P,...I)=>P?F(P):U(...I))})},debuglog(){return function(){}},format:s,inspect:i,types:{isAsyncFunction(O){return O instanceof _},isArrayBufferView(O){return ArrayBuffer.isView(O)}},isBlob:D,deprecate(O,U){return O},addAbortListener:Pu().addAbortListener||function(U,F){if(U===void 0)throw new d("signal","AbortSignal",U);M(U,"signal"),C(F,"listener");let P;return U.aborted?queueMicrotask(()=>F()):(U.addEventListener("abort",F,{__proto__:null,once:!0,[y]:!0}),P=()=>{U.removeEventListener("abort",F)}),{__proto__:null,[g](){var I;(I=P)===null||I===void 0||I()}}},AbortSignalAny:E.any||function(U){if(U.length===1)return U[0];const F=new m,P=()=>F.abort();return U.forEach(I=>{M(I,"signals"),I.addEventListener("abort",P,{once:!0})}),F.signal.addEventListener("abort",()=>{U.forEach(I=>I.removeEventListener("abort",P))},{once:!0}),F.signal}},a.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Rd)),Rd.exports}var Yl={},Nd,c0;function Lu(){if(c0)return Nd;c0=1;const{ArrayIsArray:a,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:s,ArrayPrototypeMap:i,NumberIsInteger:d,NumberIsNaN:y,NumberMAX_SAFE_INTEGER:p,NumberMIN_SAFE_INTEGER:g,NumberParseInt:E,ObjectPrototypeHasOwnProperty:m,RegExpPrototypeExec:_,String:S,StringPrototypeToUpperCase:D,StringPrototypeTrim:M}=Wn(),{hideStackFrames:C,codes:{ERR_SOCKET_BAD_PORT:O,ERR_INVALID_ARG_TYPE:U,ERR_INVALID_ARG_VALUE:F,ERR_OUT_OF_RANGE:P,ERR_UNKNOWN_SIGNAL:I}}=Wr(),{normalizeEncoding:B}=oi(),{isAsyncFunction:z,isArrayBufferView:Y}=oi().types,Q={};function ve(we){return we===(we|0)}function qe(we){return we===we>>>0}const J=/^[0-7]+$/,pe="must be a 32-bit unsigned integer or an octal string";function Xe(we,ot,dt){if(typeof we>"u"&&(we=dt),typeof we=="string"){if(_(J,we)===null)throw new F(ot,we,pe);we=E(we,8)}return mt(we,ot),we}const ke=C((we,ot,dt=g,ft=p)=>{if(typeof we!="number")throw new U(ot,"number",we);if(!d(we))throw new P(ot,"an integer",we);if(we<dt||we>ft)throw new P(ot,`>= ${dt} && <= ${ft}`,we)}),wt=C((we,ot,dt=-2147483648,ft=2147483647)=>{if(typeof we!="number")throw new U(ot,"number",we);if(!d(we))throw new P(ot,"an integer",we);if(we<dt||we>ft)throw new P(ot,`>= ${dt} && <= ${ft}`,we)}),mt=C((we,ot,dt=!1)=>{if(typeof we!="number")throw new U(ot,"number",we);if(!d(we))throw new P(ot,"an integer",we);const ft=dt?1:0,Dt=4294967295;if(we<ft||we>Dt)throw new P(ot,`>= ${ft} && <= ${Dt}`,we)});function Ne(we,ot){if(typeof we!="string")throw new U(ot,"string",we)}function Me(we,ot,dt=void 0,ft){if(typeof we!="number")throw new U(ot,"number",we);if(dt!=null&&we<dt||ft!=null&&we>ft||(dt!=null||ft!=null)&&y(we))throw new P(ot,`${dt!=null?`>= ${dt}`:""}${dt!=null&&ft!=null?" && ":""}${ft!=null?`<= ${ft}`:""}`,we)}const Fe=C((we,ot,dt)=>{if(!n(dt,we)){const Dt="must be one of: "+s(i(dt,pn=>typeof pn=="string"?`'${pn}'`:S(pn)),", ");throw new F(ot,we,Dt)}});function it(we,ot){if(typeof we!="boolean")throw new U(ot,"boolean",we)}function H(we,ot,dt){return we==null||!m(we,ot)?dt:we[ot]}const he=C((we,ot,dt=null)=>{const ft=H(dt,"allowArray",!1),Dt=H(dt,"allowFunction",!1);if(!H(dt,"nullable",!1)&&we===null||!ft&&a(we)||typeof we!="object"&&(!Dt||typeof we!="function"))throw new U(ot,"Object",we)}),Re=C((we,ot)=>{if(we!=null&&typeof we!="object"&&typeof we!="function")throw new U(ot,"a dictionary",we)}),be=C((we,ot,dt=0)=>{if(!a(we))throw new U(ot,"Array",we);if(we.length<dt){const ft=`must be longer than ${dt}`;throw new F(ot,we,ft)}});function tt(we,ot){be(we,ot);for(let dt=0;dt<we.length;dt++)Ne(we[dt],`${ot}[${dt}]`)}function gt(we,ot){be(we,ot);for(let dt=0;dt<we.length;dt++)it(we[dt],`${ot}[${dt}]`)}function xt(we,ot){be(we,ot);for(let dt=0;dt<we.length;dt++){const ft=we[dt],Dt=`${ot}[${dt}]`;if(ft==null)throw new U(Dt,"AbortSignal",ft);ue(ft,Dt)}}function Ut(we,ot="signal"){if(Ne(we,ot),Q[we]===void 0)throw Q[D(we)]!==void 0?new I(we+" (signals must use all capital letters)"):new I(we)}const Ye=C((we,ot="buffer")=>{if(!Y(we))throw new U(ot,["Buffer","TypedArray","DataView"],we)});function Ue(we,ot){const dt=B(ot),ft=we.length;if(dt==="hex"&&ft%2!==0)throw new F("encoding",ot,`is invalid for data of length ${ft}`)}function bt(we,ot="Port",dt=!0){if(typeof we!="number"&&typeof we!="string"||typeof we=="string"&&M(we).length===0||+we!==+we>>>0||we>65535||we===0&&!dt)throw new O(ot,we,dt);return we|0}const ue=C((we,ot)=>{if(we!==void 0&&(we===null||typeof we!="object"||!("aborted"in we)))throw new U(ot,"AbortSignal",we)}),j=C((we,ot)=>{if(typeof we!="function")throw new U(ot,"Function",we)}),T=C((we,ot)=>{if(typeof we!="function"||z(we))throw new U(ot,"Function",we)}),G=C((we,ot)=>{if(we!==void 0)throw new U(ot,"undefined",we)});function ee(we,ot,dt){if(!n(dt,we))throw new U(ot,`('${s(dt,"|")}')`,we)}const me=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Se(we,ot){if(typeof we>"u"||!_(me,we))throw new F(ot,we,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function at(we){if(typeof we=="string")return Se(we,"hints"),we;if(a(we)){const ot=we.length;let dt="";if(ot===0)return dt;for(let ft=0;ft<ot;ft++){const Dt=we[ft];Se(Dt,"hints"),dt+=Dt,ft!==ot-1&&(dt+=", ")}return dt}throw new F("hints",we,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Nd={isInt32:ve,isUint32:qe,parseFileMode:Xe,validateArray:be,validateStringArray:tt,validateBooleanArray:gt,validateAbortSignalArray:xt,validateBoolean:it,validateBuffer:Ye,validateDictionary:Re,validateEncoding:Ue,validateFunction:j,validateInt32:wt,validateInteger:ke,validateNumber:Me,validateObject:he,validateOneOf:Fe,validatePlainFunction:T,validatePort:bt,validateSignalName:Ut,validateString:Ne,validateUint32:mt,validateUndefined:G,validateUnion:ee,validateAbortSignal:ue,validateLinkHeaderValue:at},Nd}var Ql={exports:{}},Cd={exports:{}},f0;function Oo(){if(f0)return Cd.exports;f0=1;var a=Cd.exports={},n,s;function i(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=i}catch{n=i}try{typeof clearTimeout=="function"?s=clearTimeout:s=d}catch{s=d}})();function y(O){if(n===setTimeout)return setTimeout(O,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(O,0);try{return n(O,0)}catch{try{return n.call(null,O,0)}catch{return n.call(this,O,0)}}}function p(O){if(s===clearTimeout)return clearTimeout(O);if((s===d||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(O);try{return s(O)}catch{try{return s.call(null,O)}catch{return s.call(this,O)}}}var g=[],E=!1,m,_=-1;function S(){!E||!m||(E=!1,m.length?g=m.concat(g):_=-1,g.length&&D())}function D(){if(!E){var O=y(S);E=!0;for(var U=g.length;U;){for(m=g,g=[];++_<U;)m&&m[_].run();_=-1,U=g.length}m=null,E=!1,p(O)}}a.nextTick=function(O){var U=new Array(arguments.length-1);if(arguments.length>1)for(var F=1;F<arguments.length;F++)U[F-1]=arguments[F];g.push(new M(O,U)),g.length===1&&!E&&y(D)};function M(O,U){this.fun=O,this.array=U}M.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={};function C(){}return a.on=C,a.addListener=C,a.once=C,a.off=C,a.removeListener=C,a.removeAllListeners=C,a.emit=C,a.prependListener=C,a.prependOnceListener=C,a.listeners=function(O){return[]},a.binding=function(O){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(O){throw new Error("process.chdir is not supported")},a.umask=function(){return 0},Cd.exports}var Od,d0;function Oa(){if(d0)return Od;d0=1;const{SymbolAsyncIterator:a,SymbolIterator:n,SymbolFor:s}=Wn(),i=s("nodejs.stream.destroyed"),d=s("nodejs.stream.errored"),y=s("nodejs.stream.readable"),p=s("nodejs.stream.writable"),g=s("nodejs.stream.disturbed"),E=s("nodejs.webstream.isClosedPromise"),m=s("nodejs.webstream.controllerErrorFunction");function _(H,he=!1){var Re;return!!(H&&typeof H.pipe=="function"&&typeof H.on=="function"&&(!he||typeof H.pause=="function"&&typeof H.resume=="function")&&(!H._writableState||((Re=H._readableState)===null||Re===void 0?void 0:Re.readable)!==!1)&&(!H._writableState||H._readableState))}function S(H){var he;return!!(H&&typeof H.write=="function"&&typeof H.on=="function"&&(!H._readableState||((he=H._writableState)===null||he===void 0?void 0:he.writable)!==!1))}function D(H){return!!(H&&typeof H.pipe=="function"&&H._readableState&&typeof H.on=="function"&&typeof H.write=="function")}function M(H){return H&&(H._readableState||H._writableState||typeof H.write=="function"&&typeof H.on=="function"||typeof H.pipe=="function"&&typeof H.on=="function")}function C(H){return!!(H&&!M(H)&&typeof H.pipeThrough=="function"&&typeof H.getReader=="function"&&typeof H.cancel=="function")}function O(H){return!!(H&&!M(H)&&typeof H.getWriter=="function"&&typeof H.abort=="function")}function U(H){return!!(H&&!M(H)&&typeof H.readable=="object"&&typeof H.writable=="object")}function F(H){return C(H)||O(H)||U(H)}function P(H,he){return H==null?!1:he===!0?typeof H[a]=="function":he===!1?typeof H[n]=="function":typeof H[a]=="function"||typeof H[n]=="function"}function I(H){if(!M(H))return null;const he=H._writableState,Re=H._readableState,be=he||Re;return!!(H.destroyed||H[i]||be!=null&&be.destroyed)}function B(H){if(!S(H))return null;if(H.writableEnded===!0)return!0;const he=H._writableState;return he!=null&&he.errored?!1:typeof he?.ended!="boolean"?null:he.ended}function z(H,he){if(!S(H))return null;if(H.writableFinished===!0)return!0;const Re=H._writableState;return Re!=null&&Re.errored?!1:typeof Re?.finished!="boolean"?null:!!(Re.finished||he===!1&&Re.ended===!0&&Re.length===0)}function Y(H){if(!_(H))return null;if(H.readableEnded===!0)return!0;const he=H._readableState;return!he||he.errored?!1:typeof he?.ended!="boolean"?null:he.ended}function Q(H,he){if(!_(H))return null;const Re=H._readableState;return Re!=null&&Re.errored?!1:typeof Re?.endEmitted!="boolean"?null:!!(Re.endEmitted||he===!1&&Re.ended===!0&&Re.length===0)}function ve(H){return H&&H[y]!=null?H[y]:typeof H?.readable!="boolean"?null:I(H)?!1:_(H)&&H.readable&&!Q(H)}function qe(H){return H&&H[p]!=null?H[p]:typeof H?.writable!="boolean"?null:I(H)?!1:S(H)&&H.writable&&!B(H)}function J(H,he){return M(H)?I(H)?!0:!(he?.readable!==!1&&ve(H)||he?.writable!==!1&&qe(H)):null}function pe(H){var he,Re;return M(H)?H.writableErrored?H.writableErrored:(he=(Re=H._writableState)===null||Re===void 0?void 0:Re.errored)!==null&&he!==void 0?he:null:null}function Xe(H){var he,Re;return M(H)?H.readableErrored?H.readableErrored:(he=(Re=H._readableState)===null||Re===void 0?void 0:Re.errored)!==null&&he!==void 0?he:null:null}function ke(H){if(!M(H))return null;if(typeof H.closed=="boolean")return H.closed;const he=H._writableState,Re=H._readableState;return typeof he?.closed=="boolean"||typeof Re?.closed=="boolean"?he?.closed||Re?.closed:typeof H._closed=="boolean"&&wt(H)?H._closed:null}function wt(H){return typeof H._closed=="boolean"&&typeof H._defaultKeepAlive=="boolean"&&typeof H._removedConnection=="boolean"&&typeof H._removedContLen=="boolean"}function mt(H){return typeof H._sent100=="boolean"&&wt(H)}function Ne(H){var he;return typeof H._consuming=="boolean"&&typeof H._dumped=="boolean"&&((he=H.req)===null||he===void 0?void 0:he.upgradeOrConnect)===void 0}function Me(H){if(!M(H))return null;const he=H._writableState,Re=H._readableState,be=he||Re;return!be&&mt(H)||!!(be&&be.autoDestroy&&be.emitClose&&be.closed===!1)}function Fe(H){var he;return!!(H&&((he=H[g])!==null&&he!==void 0?he:H.readableDidRead||H.readableAborted))}function it(H){var he,Re,be,tt,gt,xt,Ut,Ye,Ue,bt;return!!(H&&((he=(Re=(be=(tt=(gt=(xt=H[d])!==null&&xt!==void 0?xt:H.readableErrored)!==null&&gt!==void 0?gt:H.writableErrored)!==null&&tt!==void 0?tt:(Ut=H._readableState)===null||Ut===void 0?void 0:Ut.errorEmitted)!==null&&be!==void 0?be:(Ye=H._writableState)===null||Ye===void 0?void 0:Ye.errorEmitted)!==null&&Re!==void 0?Re:(Ue=H._readableState)===null||Ue===void 0?void 0:Ue.errored)!==null&&he!==void 0?he:!((bt=H._writableState)===null||bt===void 0)&&bt.errored))}return Od={isDestroyed:I,kIsDestroyed:i,isDisturbed:Fe,kIsDisturbed:g,isErrored:it,kIsErrored:d,isReadable:ve,kIsReadable:y,kIsClosedPromise:E,kControllerErrorFunction:m,kIsWritable:p,isClosed:ke,isDuplexNodeStream:D,isFinished:J,isIterable:P,isReadableNodeStream:_,isReadableStream:C,isReadableEnded:Y,isReadableFinished:Q,isReadableErrored:Xe,isNodeStream:M,isWebStream:F,isWritable:qe,isWritableNodeStream:S,isWritableStream:O,isWritableEnded:B,isWritableFinished:z,isWritableErrored:pe,isServerRequest:Ne,isServerResponse:mt,willEmitClose:Me,isTransformStream:U},Od}var h0;function uo(){if(h0)return Ql.exports;h0=1;const a=Oo(),{AbortError:n,codes:s}=Wr(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:d}=s,{kEmptyObject:y,once:p}=oi(),{validateAbortSignal:g,validateFunction:E,validateObject:m,validateBoolean:_}=Lu(),{Promise:S,PromisePrototypeThen:D,SymbolDispose:M}=Wn(),{isClosed:C,isReadable:O,isReadableNodeStream:U,isReadableStream:F,isReadableFinished:P,isReadableErrored:I,isWritable:B,isWritableNodeStream:z,isWritableStream:Y,isWritableFinished:Q,isWritableErrored:ve,isNodeStream:qe,willEmitClose:J,kIsClosedPromise:pe}=Oa();let Xe;function ke(Fe){return Fe.setHeader&&typeof Fe.abort=="function"}const wt=()=>{};function mt(Fe,it,H){var he,Re;if(arguments.length===2?(H=it,it=y):it==null?it=y:m(it,"options"),E(H,"callback"),g(it.signal,"options.signal"),H=p(H),F(Fe)||Y(Fe))return Ne(Fe,it,H);if(!qe(Fe))throw new i("stream",["ReadableStream","WritableStream","Stream"],Fe);const be=(he=it.readable)!==null&&he!==void 0?he:U(Fe),tt=(Re=it.writable)!==null&&Re!==void 0?Re:z(Fe),gt=Fe._writableState,xt=Fe._readableState,Ut=()=>{Fe.writable||bt()};let Ye=J(Fe)&&U(Fe)===be&&z(Fe)===tt,Ue=Q(Fe,!1);const bt=()=>{Ue=!0,Fe.destroyed&&(Ye=!1),!(Ye&&(!Fe.readable||be))&&(!be||ue)&&H.call(Fe)};let ue=P(Fe,!1);const j=()=>{ue=!0,Fe.destroyed&&(Ye=!1),!(Ye&&(!Fe.writable||tt))&&(!tt||Ue)&&H.call(Fe)},T=we=>{H.call(Fe,we)};let G=C(Fe);const ee=()=>{G=!0;const we=ve(Fe)||I(Fe);if(we&&typeof we!="boolean")return H.call(Fe,we);if(be&&!ue&&U(Fe,!0)&&!P(Fe,!1))return H.call(Fe,new d);if(tt&&!Ue&&!Q(Fe,!1))return H.call(Fe,new d);H.call(Fe)},me=()=>{G=!0;const we=ve(Fe)||I(Fe);if(we&&typeof we!="boolean")return H.call(Fe,we);H.call(Fe)},Se=()=>{Fe.req.on("finish",bt)};ke(Fe)?(Fe.on("complete",bt),Ye||Fe.on("abort",ee),Fe.req?Se():Fe.on("request",Se)):tt&&!gt&&(Fe.on("end",Ut),Fe.on("close",Ut)),!Ye&&typeof Fe.aborted=="boolean"&&Fe.on("aborted",ee),Fe.on("end",j),Fe.on("finish",bt),it.error!==!1&&Fe.on("error",T),Fe.on("close",ee),G?a.nextTick(ee):gt!=null&&gt.errorEmitted||xt!=null&&xt.errorEmitted?Ye||a.nextTick(me):(!be&&(!Ye||O(Fe))&&(Ue||B(Fe)===!1)||!tt&&(!Ye||B(Fe))&&(ue||O(Fe)===!1)||xt&&Fe.req&&Fe.aborted)&&a.nextTick(me);const at=()=>{H=wt,Fe.removeListener("aborted",ee),Fe.removeListener("complete",bt),Fe.removeListener("abort",ee),Fe.removeListener("request",Se),Fe.req&&Fe.req.removeListener("finish",bt),Fe.removeListener("end",Ut),Fe.removeListener("close",Ut),Fe.removeListener("finish",bt),Fe.removeListener("end",j),Fe.removeListener("error",T),Fe.removeListener("close",ee)};if(it.signal&&!G){const we=()=>{const ot=H;at(),ot.call(Fe,new n(void 0,{cause:it.signal.reason}))};if(it.signal.aborted)a.nextTick(we);else{Xe=Xe||oi().addAbortListener;const ot=Xe(it.signal,we),dt=H;H=p((...ft)=>{ot[M](),dt.apply(Fe,ft)})}}return at}function Ne(Fe,it,H){let he=!1,Re=wt;if(it.signal)if(Re=()=>{he=!0,H.call(Fe,new n(void 0,{cause:it.signal.reason}))},it.signal.aborted)a.nextTick(Re);else{Xe=Xe||oi().addAbortListener;const tt=Xe(it.signal,Re),gt=H;H=p((...xt)=>{tt[M](),gt.apply(Fe,xt)})}const be=(...tt)=>{he||a.nextTick(()=>H.apply(Fe,tt))};return D(Fe[pe].promise,be,be),wt}function Me(Fe,it){var H;let he=!1;return it===null&&(it=y),(H=it)!==null&&H!==void 0&&H.cleanup&&(_(it.cleanup,"cleanup"),he=it.cleanup),new S((Re,be)=>{const tt=mt(Fe,it,gt=>{he&&tt(),gt?be(gt):Re()})})}return Ql.exports=mt,Ql.exports.finished=Me,Ql.exports}var Dd,p0;function ws(){if(p0)return Dd;p0=1;const a=Oo(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:s},AbortError:i}=Wr(),{Symbol:d}=Wn(),{kIsDestroyed:y,isDestroyed:p,isFinished:g,isServerRequest:E}=Oa(),m=d("kDestroy"),_=d("kConstruct");function S(J,pe,Xe){J&&(J.stack,pe&&!pe.errored&&(pe.errored=J),Xe&&!Xe.errored&&(Xe.errored=J))}function D(J,pe){const Xe=this._readableState,ke=this._writableState,wt=ke||Xe;return ke!=null&&ke.destroyed||Xe!=null&&Xe.destroyed?(typeof pe=="function"&&pe(),this):(S(J,ke,Xe),ke&&(ke.destroyed=!0),Xe&&(Xe.destroyed=!0),wt.constructed?M(this,J,pe):this.once(m,function(mt){M(this,n(mt,J),pe)}),this)}function M(J,pe,Xe){let ke=!1;function wt(mt){if(ke)return;ke=!0;const Ne=J._readableState,Me=J._writableState;S(mt,Me,Ne),Me&&(Me.closed=!0),Ne&&(Ne.closed=!0),typeof Xe=="function"&&Xe(mt),mt?a.nextTick(C,J,mt):a.nextTick(O,J)}try{J._destroy(pe||null,wt)}catch(mt){wt(mt)}}function C(J,pe){U(J,pe),O(J)}function O(J){const pe=J._readableState,Xe=J._writableState;Xe&&(Xe.closeEmitted=!0),pe&&(pe.closeEmitted=!0),(Xe!=null&&Xe.emitClose||pe!=null&&pe.emitClose)&&J.emit("close")}function U(J,pe){const Xe=J._readableState,ke=J._writableState;ke!=null&&ke.errorEmitted||Xe!=null&&Xe.errorEmitted||(ke&&(ke.errorEmitted=!0),Xe&&(Xe.errorEmitted=!0),J.emit("error",pe))}function F(){const J=this._readableState,pe=this._writableState;J&&(J.constructed=!0,J.closed=!1,J.closeEmitted=!1,J.destroyed=!1,J.errored=null,J.errorEmitted=!1,J.reading=!1,J.ended=J.readable===!1,J.endEmitted=J.readable===!1),pe&&(pe.constructed=!0,pe.destroyed=!1,pe.closed=!1,pe.closeEmitted=!1,pe.errored=null,pe.errorEmitted=!1,pe.finalCalled=!1,pe.prefinished=!1,pe.ended=pe.writable===!1,pe.ending=pe.writable===!1,pe.finished=pe.writable===!1)}function P(J,pe,Xe){const ke=J._readableState,wt=J._writableState;if(wt!=null&&wt.destroyed||ke!=null&&ke.destroyed)return this;ke!=null&&ke.autoDestroy||wt!=null&&wt.autoDestroy?J.destroy(pe):pe&&(pe.stack,wt&&!wt.errored&&(wt.errored=pe),ke&&!ke.errored&&(ke.errored=pe),Xe?a.nextTick(U,J,pe):U(J,pe))}function I(J,pe){if(typeof J._construct!="function")return;const Xe=J._readableState,ke=J._writableState;Xe&&(Xe.constructed=!1),ke&&(ke.constructed=!1),J.once(_,pe),!(J.listenerCount(_)>1)&&a.nextTick(B,J)}function B(J){let pe=!1;function Xe(ke){if(pe){P(J,ke??new s);return}pe=!0;const wt=J._readableState,mt=J._writableState,Ne=mt||wt;wt&&(wt.constructed=!0),mt&&(mt.constructed=!0),Ne.destroyed?J.emit(m,ke):ke?P(J,ke,!0):a.nextTick(z,J)}try{J._construct(ke=>{a.nextTick(Xe,ke)})}catch(ke){a.nextTick(Xe,ke)}}function z(J){J.emit(_)}function Y(J){return J?.setHeader&&typeof J.abort=="function"}function Q(J){J.emit("close")}function ve(J,pe){J.emit("error",pe),a.nextTick(Q,J)}function qe(J,pe){!J||p(J)||(!pe&&!g(J)&&(pe=new i),E(J)?(J.socket=null,J.destroy(pe)):Y(J)?J.abort():Y(J.req)?J.req.abort():typeof J.destroy=="function"?J.destroy(pe):typeof J.close=="function"?J.close():pe?a.nextTick(ve,J,pe):a.nextTick(Q,J),J.destroyed||(J[y]=!0))}return Dd={construct:I,destroyer:qe,destroy:D,undestroy:F,errorOrDestroy:P},Dd}var Id,g0;function _h(){if(g0)return Id;g0=1;const{ArrayIsArray:a,ObjectSetPrototypeOf:n}=Wn(),{EventEmitter:s}=Pu();function i(y){s.call(this,y)}n(i.prototype,s.prototype),n(i,s),i.prototype.pipe=function(y,p){const g=this;function E(O){y.writable&&y.write(O)===!1&&g.pause&&g.pause()}g.on("data",E);function m(){g.readable&&g.resume&&g.resume()}y.on("drain",m),!y._isStdio&&(!p||p.end!==!1)&&(g.on("end",S),g.on("close",D));let _=!1;function S(){_||(_=!0,y.end())}function D(){_||(_=!0,typeof y.destroy=="function"&&y.destroy())}function M(O){C(),s.listenerCount(this,"error")===0&&this.emit("error",O)}d(g,"error",M),d(y,"error",M);function C(){g.removeListener("data",E),y.removeListener("drain",m),g.removeListener("end",S),g.removeListener("close",D),g.removeListener("error",M),y.removeListener("error",M),g.removeListener("end",C),g.removeListener("close",C),y.removeListener("close",C)}return g.on("end",C),g.on("close",C),y.on("close",C),y.emit("pipe",g),y};function d(y,p,g){if(typeof y.prependListener=="function")return y.prependListener(p,g);!y._events||!y._events[p]?y.on(p,g):a(y._events[p])?y._events[p].unshift(g):y._events[p]=[g,y._events[p]]}return Id={Stream:i,prependListener:d},Id}var jd={exports:{}},y0;function gc(){return y0||(y0=1,function(a){const{SymbolDispose:n}=Wn(),{AbortError:s,codes:i}=Wr(),{isNodeStream:d,isWebStream:y,kControllerErrorFunction:p}=Oa(),g=uo(),{ERR_INVALID_ARG_TYPE:E}=i;let m;const _=(S,D)=>{if(typeof S!="object"||!("aborted"in S))throw new E(D,"AbortSignal",S)};a.exports.addAbortSignal=function(D,M){if(_(D,"signal"),!d(M)&&!y(M))throw new E("stream",["ReadableStream","WritableStream","Stream"],M);return a.exports.addAbortSignalNoValidate(D,M)},a.exports.addAbortSignalNoValidate=function(S,D){if(typeof S!="object"||!("aborted"in S))return D;const M=d(D)?()=>{D.destroy(new s(void 0,{cause:S.reason}))}:()=>{D[p](new s(void 0,{cause:S.reason}))};if(S.aborted)M();else{m=m||oi().addAbortListener;const C=m(S,M);g(D,C[n])}return D}}(jd)),jd.exports}var Ud,m0;function E1(){if(m0)return Ud;m0=1;const{StringPrototypeSlice:a,SymbolIterator:n,TypedArrayPrototypeSet:s,Uint8Array:i}=Wn(),{Buffer:d}=Ca(),{inspect:y}=oi();return Ud=class{constructor(){this.head=null,this.tail=null,this.length=0}push(g){const E={data:g,next:null};this.length>0?this.tail.next=E:this.head=E,this.tail=E,++this.length}unshift(g){const E={data:g,next:this.head};this.length===0&&(this.tail=E),this.head=E,++this.length}shift(){if(this.length===0)return;const g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}clear(){this.head=this.tail=null,this.length=0}join(g){if(this.length===0)return"";let E=this.head,m=""+E.data;for(;(E=E.next)!==null;)m+=g+E.data;return m}concat(g){if(this.length===0)return d.alloc(0);const E=d.allocUnsafe(g>>>0);let m=this.head,_=0;for(;m;)s(E,m.data,_),_+=m.data.length,m=m.next;return E}consume(g,E){const m=this.head.data;if(g<m.length){const _=m.slice(0,g);return this.head.data=m.slice(g),_}return g===m.length?this.shift():E?this._getString(g):this._getBuffer(g)}first(){return this.head.data}*[n](){for(let g=this.head;g;g=g.next)yield g.data}_getString(g){let E="",m=this.head,_=0;do{const S=m.data;if(g>S.length)E+=S,g-=S.length;else{g===S.length?(E+=S,++_,m.next?this.head=m.next:this.head=this.tail=null):(E+=a(S,0,g),this.head=m,m.data=a(S,g));break}++_}while((m=m.next)!==null);return this.length-=_,E}_getBuffer(g){const E=d.allocUnsafe(g),m=g;let _=this.head,S=0;do{const D=_.data;if(g>D.length)s(E,D,m-g),g-=D.length;else{g===D.length?(s(E,D,m-g),++S,_.next?this.head=_.next:this.head=this.tail=null):(s(E,new i(D.buffer,D.byteOffset,g),m-g),this.head=_,_.data=D.slice(g));break}++S}while((_=_.next)!==null);return this.length-=S,E}[Symbol.for("nodejs.util.inspect.custom")](g,E){return y(this,{...E,depth:0,customInspect:!1})}},Ud}var Pd,v0;function yc(){if(v0)return Pd;v0=1;const{MathFloor:a,NumberIsInteger:n}=Wn(),{validateInteger:s}=Lu(),{ERR_INVALID_ARG_VALUE:i}=Wr().codes;let d=16*1024,y=16;function p(_,S,D){return _.highWaterMark!=null?_.highWaterMark:S?_[D]:null}function g(_){return _?y:d}function E(_,S){s(S,"value",0),_?y=S:d=S}function m(_,S,D,M){const C=p(S,M,D);if(C!=null){if(!n(C)||C<0){const O=M?`options.${D}`:"options.highWaterMark";throw new i(O,C)}return a(C)}return g(_.objectMode)}return Pd={getHighWaterMark:m,getDefaultHighWaterMark:g,setDefaultHighWaterMark:E},Pd}var Ld={},Xl={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var b0;function x1(){return b0||(b0=1,function(a,n){var s=Ca(),i=s.Buffer;function d(p,g){for(var E in p)g[E]=p[E]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?a.exports=s:(d(s,n),n.Buffer=y);function y(p,g,E){return i(p,g,E)}y.prototype=Object.create(i.prototype),d(i,y),y.from=function(p,g,E){if(typeof p=="number")throw new TypeError("Argument must not be a number");return i(p,g,E)},y.alloc=function(p,g,E){if(typeof p!="number")throw new TypeError("Argument must be a number");var m=i(p);return g!==void 0?typeof E=="string"?m.fill(g,E):m.fill(g):m.fill(0),m},y.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return i(p)},y.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(p)}}(Xl,Xl.exports)),Xl.exports}var _0;function T1(){if(_0)return Ld;_0=1;var a=x1().Buffer,n=a.isEncoding||function(F){switch(F=""+F,F&&F.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(F){if(!F)return"utf8";for(var P;;)switch(F){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return F;default:if(P)return;F=(""+F).toLowerCase(),P=!0}}function i(F){var P=s(F);if(typeof P!="string"&&(a.isEncoding===n||!n(F)))throw new Error("Unknown encoding: "+F);return P||F}Ld.StringDecoder=d;function d(F){this.encoding=i(F);var P;switch(this.encoding){case"utf16le":this.text=S,this.end=D,P=4;break;case"utf8":this.fillLast=E,P=4;break;case"base64":this.text=M,this.end=C,P=3;break;default:this.write=O,this.end=U;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(P)}d.prototype.write=function(F){if(F.length===0)return"";var P,I;if(this.lastNeed){if(P=this.fillLast(F),P===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<F.length?P?P+this.text(F,I):this.text(F,I):P||""},d.prototype.end=_,d.prototype.text=m,d.prototype.fillLast=function(F){if(this.lastNeed<=F.length)return F.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);F.copy(this.lastChar,this.lastTotal-this.lastNeed,0,F.length),this.lastNeed-=F.length};function y(F){return F<=127?0:F>>5===6?2:F>>4===14?3:F>>3===30?4:F>>6===2?-1:-2}function p(F,P,I){var B=P.length-1;if(B<I)return 0;var z=y(P[B]);return z>=0?(z>0&&(F.lastNeed=z-1),z):--B<I||z===-2?0:(z=y(P[B]),z>=0?(z>0&&(F.lastNeed=z-2),z):--B<I||z===-2?0:(z=y(P[B]),z>=0?(z>0&&(z===2?z=0:F.lastNeed=z-3),z):0))}function g(F,P,I){if((P[0]&192)!==128)return F.lastNeed=0,"�";if(F.lastNeed>1&&P.length>1){if((P[1]&192)!==128)return F.lastNeed=1,"�";if(F.lastNeed>2&&P.length>2&&(P[2]&192)!==128)return F.lastNeed=2,"�"}}function E(F){var P=this.lastTotal-this.lastNeed,I=g(this,F);if(I!==void 0)return I;if(this.lastNeed<=F.length)return F.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);F.copy(this.lastChar,P,0,F.length),this.lastNeed-=F.length}function m(F,P){var I=p(this,F,P);if(!this.lastNeed)return F.toString("utf8",P);this.lastTotal=I;var B=F.length-(I-this.lastNeed);return F.copy(this.lastChar,0,B),F.toString("utf8",P,B)}function _(F){var P=F&&F.length?this.write(F):"";return this.lastNeed?P+"�":P}function S(F,P){if((F.length-P)%2===0){var I=F.toString("utf16le",P);if(I){var B=I.charCodeAt(I.length-1);if(B>=55296&&B<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=F[F.length-2],this.lastChar[1]=F[F.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=F[F.length-1],F.toString("utf16le",P,F.length-1)}function D(F){var P=F&&F.length?this.write(F):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return P+this.lastChar.toString("utf16le",0,I)}return P}function M(F,P){var I=(F.length-P)%3;return I===0?F.toString("base64",P):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=F[F.length-1]:(this.lastChar[0]=F[F.length-2],this.lastChar[1]=F[F.length-1]),F.toString("base64",P,F.length-I))}function C(F){var P=F&&F.length?this.write(F):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function O(F){return F.toString(this.encoding)}function U(F){return F&&F.length?this.write(F):""}return Ld}var Md,w0;function jm(){if(w0)return Md;w0=1;const a=Oo(),{PromisePrototypeThen:n,SymbolAsyncIterator:s,SymbolIterator:i}=Wn(),{Buffer:d}=Ca(),{ERR_INVALID_ARG_TYPE:y,ERR_STREAM_NULL_VALUES:p}=Wr().codes;function g(E,m,_){let S;if(typeof m=="string"||m instanceof d)return new E({objectMode:!0,..._,read(){this.push(m),this.push(null)}});let D;if(m&&m[s])D=!0,S=m[s]();else if(m&&m[i])D=!1,S=m[i]();else throw new y("iterable",["Iterable"],m);const M=new E({objectMode:!0,highWaterMark:1,..._});let C=!1;M._read=function(){C||(C=!0,U())},M._destroy=function(F,P){n(O(F),()=>a.nextTick(P,F),I=>a.nextTick(P,I||F))};async function O(F){const P=F!=null,I=typeof S.throw=="function";if(P&&I){const{value:B,done:z}=await S.throw(F);if(await B,z)return}if(typeof S.return=="function"){const{value:B}=await S.return();await B}}async function U(){for(;;){try{const{value:F,done:P}=D?await S.next():S.next();if(P)M.push(null);else{const I=F&&typeof F.then=="function"?await F:F;if(I===null)throw C=!1,new p;if(M.push(I))continue;C=!1}}catch(F){M.destroy(F)}break}}return M}return Md=g,Md}var Bd,S0;function mc(){if(S0)return Bd;S0=1;const a=Oo(),{ArrayPrototypeIndexOf:n,NumberIsInteger:s,NumberIsNaN:i,NumberParseInt:d,ObjectDefineProperties:y,ObjectKeys:p,ObjectSetPrototypeOf:g,Promise:E,SafeSet:m,SymbolAsyncDispose:_,SymbolAsyncIterator:S,Symbol:D}=Wn();Bd=ft,ft.ReadableState=dt;const{EventEmitter:M}=Pu(),{Stream:C,prependListener:O}=_h(),{Buffer:U}=Ca(),{addAbortSignal:F}=gc(),P=uo();let I=oi().debuglog("stream",ae=>{I=ae});const B=E1(),z=ws(),{getHighWaterMark:Y,getDefaultHighWaterMark:Q}=yc(),{aggregateTwoErrors:ve,codes:{ERR_INVALID_ARG_TYPE:qe,ERR_METHOD_NOT_IMPLEMENTED:J,ERR_OUT_OF_RANGE:pe,ERR_STREAM_PUSH_AFTER_EOF:Xe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:ke},AbortError:wt}=Wr(),{validateObject:mt}=Lu(),Ne=D("kPaused"),{StringDecoder:Me}=T1(),Fe=jm();g(ft.prototype,C.prototype),g(ft,C);const it=()=>{},{errorOrDestroy:H}=z,he=1,Re=2,be=4,tt=8,gt=16,xt=32,Ut=64,Ye=128,Ue=256,bt=512,ue=1024,j=2048,T=4096,G=8192,ee=16384,me=32768,Se=65536,at=1<<17,we=1<<18;function ot(ae){return{enumerable:!1,get(){return(this.state&ae)!==0},set(de){de?this.state|=ae:this.state&=~ae}}}y(dt.prototype,{objectMode:ot(he),ended:ot(Re),endEmitted:ot(be),reading:ot(tt),constructed:ot(gt),sync:ot(xt),needReadable:ot(Ut),emittedReadable:ot(Ye),readableListening:ot(Ue),resumeScheduled:ot(bt),errorEmitted:ot(ue),emitClose:ot(j),autoDestroy:ot(T),destroyed:ot(G),closed:ot(ee),closeEmitted:ot(me),multiAwaitDrain:ot(Se),readingMore:ot(at),dataEmitted:ot(we)});function dt(ae,de,St){typeof St!="boolean"&&(St=de instanceof Na()),this.state=j|T|gt|xt,ae&&ae.objectMode&&(this.state|=he),St&&ae&&ae.readableObjectMode&&(this.state|=he),this.highWaterMark=ae?Y(this,ae,"readableHighWaterMark",St):Q(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this[Ne]=null,ae&&ae.emitClose===!1&&(this.state&=~j),ae&&ae.autoDestroy===!1&&(this.state&=~T),this.errored=null,this.defaultEncoding=ae&&ae.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ae&&ae.encoding&&(this.decoder=new Me(ae.encoding),this.encoding=ae.encoding)}function ft(ae){if(!(this instanceof ft))return new ft(ae);const de=this instanceof Na();this._readableState=new dt(ae,this,de),ae&&(typeof ae.read=="function"&&(this._read=ae.read),typeof ae.destroy=="function"&&(this._destroy=ae.destroy),typeof ae.construct=="function"&&(this._construct=ae.construct),ae.signal&&!de&&F(ae.signal,this)),C.call(this,ae),z.construct(this,()=>{this._readableState.needReadable&&Ce(this,this._readableState)})}ft.prototype.destroy=z.destroy,ft.prototype._undestroy=z.undestroy,ft.prototype._destroy=function(ae,de){de(ae)},ft.prototype[M.captureRejectionSymbol]=function(ae){this.destroy(ae)},ft.prototype[_]=function(){let ae;return this.destroyed||(ae=this.readableEnded?null:new wt,this.destroy(ae)),new E((de,St)=>P(this,Et=>Et&&Et!==ae?St(Et):de(null)))},ft.prototype.push=function(ae,de){return Dt(this,ae,de,!1)},ft.prototype.unshift=function(ae,de){return Dt(this,ae,de,!0)};function Dt(ae,de,St,Et){I("readableAddChunk",de);const Ot=ae._readableState;let qt;if((Ot.state&he)===0&&(typeof de=="string"?(St=St||Ot.defaultEncoding,Ot.encoding!==St&&(Et&&Ot.encoding?de=U.from(de,St).toString(Ot.encoding):(de=U.from(de,St),St=""))):de instanceof U?St="":C._isUint8Array(de)?(de=C._uint8ArrayToBuffer(de),St=""):de!=null&&(qt=new qe("chunk",["string","Buffer","Uint8Array"],de))),qt)H(ae,qt);else if(de===null)Ot.state&=~tt,R(ae,Ot);else if((Ot.state&he)!==0||de&&de.length>0)if(Et)if((Ot.state&be)!==0)H(ae,new ke);else{if(Ot.destroyed||Ot.errored)return!1;pn(ae,Ot,de,!0)}else if(Ot.ended)H(ae,new Xe);else{if(Ot.destroyed||Ot.errored)return!1;Ot.state&=~tt,Ot.decoder&&!St?(de=Ot.decoder.write(de),Ot.objectMode||de.length!==0?pn(ae,Ot,de,!1):Ce(ae,Ot)):pn(ae,Ot,de,!1)}else Et||(Ot.state&=~tt,Ce(ae,Ot));return!Ot.ended&&(Ot.length<Ot.highWaterMark||Ot.length===0)}function pn(ae,de,St,Et){de.flowing&&de.length===0&&!de.sync&&ae.listenerCount("data")>0?((de.state&Se)!==0?de.awaitDrainWriters.clear():de.awaitDrainWriters=null,de.dataEmitted=!0,ae.emit("data",St)):(de.length+=de.objectMode?1:St.length,Et?de.buffer.unshift(St):de.buffer.push(St),(de.state&Ut)!==0&&N(ae)),Ce(ae,de)}ft.prototype.isPaused=function(){const ae=this._readableState;return ae[Ne]===!0||ae.flowing===!1},ft.prototype.setEncoding=function(ae){const de=new Me(ae);this._readableState.decoder=de,this._readableState.encoding=this._readableState.decoder.encoding;const St=this._readableState.buffer;let Et="";for(const Ot of St)Et+=de.write(Ot);return St.clear(),Et!==""&&St.push(Et),this._readableState.length=Et.length,this};const At=1073741824;function Kt(ae){if(ae>At)throw new pe("size","<= 1GiB",ae);return ae--,ae|=ae>>>1,ae|=ae>>>2,ae|=ae>>>4,ae|=ae>>>8,ae|=ae>>>16,ae++,ae}function $(ae,de){return ae<=0||de.length===0&&de.ended?0:(de.state&he)!==0?1:i(ae)?de.flowing&&de.length?de.buffer.first().length:de.length:ae<=de.length?ae:de.ended?de.length:0}ft.prototype.read=function(ae){I("read",ae),ae===void 0?ae=NaN:s(ae)||(ae=d(ae,10));const de=this._readableState,St=ae;if(ae>de.highWaterMark&&(de.highWaterMark=Kt(ae)),ae!==0&&(de.state&=~Ye),ae===0&&de.needReadable&&((de.highWaterMark!==0?de.length>=de.highWaterMark:de.length>0)||de.ended))return I("read: emitReadable",de.length,de.ended),de.length===0&&de.ended?jr(this):N(this),null;if(ae=$(ae,de),ae===0&&de.ended)return de.length===0&&jr(this),null;let Et=(de.state&Ut)!==0;if(I("need readable",Et),(de.length===0||de.length-ae<de.highWaterMark)&&(Et=!0,I("length less than watermark",Et)),de.ended||de.reading||de.destroyed||de.errored||!de.constructed)Et=!1,I("reading, ended or constructing",Et);else if(Et){I("do read"),de.state|=tt|xt,de.length===0&&(de.state|=Ut);try{this._read(de.highWaterMark)}catch(qt){H(this,qt)}de.state&=~xt,de.reading||(ae=$(St,de))}let Ot;return ae>0?Ot=vn(ae,de):Ot=null,Ot===null?(de.needReadable=de.length<=de.highWaterMark,ae=0):(de.length-=ae,de.multiAwaitDrain?de.awaitDrainWriters.clear():de.awaitDrainWriters=null),de.length===0&&(de.ended||(de.needReadable=!0),St!==ae&&de.ended&&jr(this)),Ot!==null&&!de.errorEmitted&&!de.closeEmitted&&(de.dataEmitted=!0,this.emit("data",Ot)),Ot};function R(ae,de){if(I("onEofChunk"),!de.ended){if(de.decoder){const St=de.decoder.end();St&&St.length&&(de.buffer.push(St),de.length+=de.objectMode?1:St.length)}de.ended=!0,de.sync?N(ae):(de.needReadable=!1,de.emittedReadable=!0,k(ae))}}function N(ae){const de=ae._readableState;I("emitReadable",de.needReadable,de.emittedReadable),de.needReadable=!1,de.emittedReadable||(I("emitReadable",de.flowing),de.emittedReadable=!0,a.nextTick(k,ae))}function k(ae){const de=ae._readableState;I("emitReadable_",de.destroyed,de.length,de.ended),!de.destroyed&&!de.errored&&(de.length||de.ended)&&(ae.emit("readable"),de.emittedReadable=!1),de.needReadable=!de.flowing&&!de.ended&&de.length<=de.highWaterMark,an(ae)}function Ce(ae,de){!de.readingMore&&de.constructed&&(de.readingMore=!0,a.nextTick(Ge,ae,de))}function Ge(ae,de){for(;!de.reading&&!de.ended&&(de.length<de.highWaterMark||de.flowing&&de.length===0);){const St=de.length;if(I("maybeReadMore read 0"),ae.read(0),St===de.length)break}de.readingMore=!1}ft.prototype._read=function(ae){throw new J("_read()")},ft.prototype.pipe=function(ae,de){const St=this,Et=this._readableState;Et.pipes.length===1&&(Et.multiAwaitDrain||(Et.multiAwaitDrain=!0,Et.awaitDrainWriters=new m(Et.awaitDrainWriters?[Et.awaitDrainWriters]:[]))),Et.pipes.push(ae),I("pipe count=%d opts=%j",Et.pipes.length,de);const qt=(!de||de.end!==!1)&&ae!==a.stdout&&ae!==a.stderr?si:gn;Et.endEmitted?a.nextTick(qt):St.once("end",qt),ae.on("unpipe",un);function un(Vt,pr){I("onunpipe"),Vt===St&&pr&&pr.hasUnpiped===!1&&(pr.hasUnpiped=!0,ui())}function si(){I("onend"),ae.end()}let Er,wi=!1;function ui(){I("cleanup"),ae.removeListener("close",Vn),ae.removeListener("finish",xr),Er&&ae.removeListener("drain",Er),ae.removeListener("error",ur),ae.removeListener("unpipe",un),St.removeListener("end",si),St.removeListener("end",gn),St.removeListener("data",sr),wi=!0,Er&&Et.awaitDrainWriters&&(!ae._writableState||ae._writableState.needDrain)&&Er()}function li(){wi||(Et.pipes.length===1&&Et.pipes[0]===ae?(I("false write response, pause",0),Et.awaitDrainWriters=ae,Et.multiAwaitDrain=!1):Et.pipes.length>1&&Et.pipes.includes(ae)&&(I("false write response, pause",Et.awaitDrainWriters.size),Et.awaitDrainWriters.add(ae)),St.pause()),Er||(Er=Ie(St,ae),ae.on("drain",Er))}St.on("data",sr);function sr(Vt){I("ondata");const pr=ae.write(Vt);I("dest.write",pr),pr===!1&&li()}function ur(Vt){if(I("onerror",Vt),gn(),ae.removeListener("error",ur),ae.listenerCount("error")===0){const pr=ae._writableState||ae._readableState;pr&&!pr.errorEmitted?H(ae,Vt):ae.emit("error",Vt)}}O(ae,"error",ur);function Vn(){ae.removeListener("finish",xr),gn()}ae.once("close",Vn);function xr(){I("onfinish"),ae.removeListener("close",Vn),gn()}ae.once("finish",xr);function gn(){I("unpipe"),St.unpipe(ae)}return ae.emit("pipe",St),ae.writableNeedDrain===!0?li():Et.flowing||(I("pipe resume"),St.resume()),ae};function Ie(ae,de){return function(){const Et=ae._readableState;Et.awaitDrainWriters===de?(I("pipeOnDrain",1),Et.awaitDrainWriters=null):Et.multiAwaitDrain&&(I("pipeOnDrain",Et.awaitDrainWriters.size),Et.awaitDrainWriters.delete(de)),(!Et.awaitDrainWriters||Et.awaitDrainWriters.size===0)&&ae.listenerCount("data")&&ae.resume()}}ft.prototype.unpipe=function(ae){const de=this._readableState,St={hasUnpiped:!1};if(de.pipes.length===0)return this;if(!ae){const Ot=de.pipes;de.pipes=[],this.pause();for(let qt=0;qt<Ot.length;qt++)Ot[qt].emit("unpipe",this,{hasUnpiped:!1});return this}const Et=n(de.pipes,ae);return Et===-1?this:(de.pipes.splice(Et,1),de.pipes.length===0&&this.pause(),ae.emit("unpipe",this,St),this)},ft.prototype.on=function(ae,de){const St=C.prototype.on.call(this,ae,de),Et=this._readableState;return ae==="data"?(Et.readableListening=this.listenerCount("readable")>0,Et.flowing!==!1&&this.resume()):ae==="readable"&&!Et.endEmitted&&!Et.readableListening&&(Et.readableListening=Et.needReadable=!0,Et.flowing=!1,Et.emittedReadable=!1,I("on readable",Et.length,Et.reading),Et.length?N(this):Et.reading||a.nextTick(sn,this)),St},ft.prototype.addListener=ft.prototype.on,ft.prototype.removeListener=function(ae,de){const St=C.prototype.removeListener.call(this,ae,de);return ae==="readable"&&a.nextTick($t,this),St},ft.prototype.off=ft.prototype.removeListener,ft.prototype.removeAllListeners=function(ae){const de=C.prototype.removeAllListeners.apply(this,arguments);return(ae==="readable"||ae===void 0)&&a.nextTick($t,this),de};function $t(ae){const de=ae._readableState;de.readableListening=ae.listenerCount("readable")>0,de.resumeScheduled&&de[Ne]===!1?de.flowing=!0:ae.listenerCount("data")>0?ae.resume():de.readableListening||(de.flowing=null)}function sn(ae){I("readable nexttick read 0"),ae.read(0)}ft.prototype.resume=function(){const ae=this._readableState;return ae.flowing||(I("resume"),ae.flowing=!ae.readableListening,Rt(this,ae)),ae[Ne]=!1,this};function Rt(ae,de){de.resumeScheduled||(de.resumeScheduled=!0,a.nextTick(rn,ae,de))}function rn(ae,de){I("resume",de.reading),de.reading||ae.read(0),de.resumeScheduled=!1,ae.emit("resume"),an(ae),de.flowing&&!de.reading&&ae.read(0)}ft.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ne]=!0,this};function an(ae){const de=ae._readableState;for(I("flow",de.flowing);de.flowing&&ae.read()!==null;);}ft.prototype.wrap=function(ae){let de=!1;ae.on("data",Et=>{!this.push(Et)&&ae.pause&&(de=!0,ae.pause())}),ae.on("end",()=>{this.push(null)}),ae.on("error",Et=>{H(this,Et)}),ae.on("close",()=>{this.destroy()}),ae.on("destroy",()=>{this.destroy()}),this._read=()=>{de&&ae.resume&&(de=!1,ae.resume())};const St=p(ae);for(let Et=1;Et<St.length;Et++){const Ot=St[Et];this[Ot]===void 0&&typeof ae[Ot]=="function"&&(this[Ot]=ae[Ot].bind(ae))}return this},ft.prototype[S]=function(){return Ir(this)},ft.prototype.iterator=function(ae){return ae!==void 0&&mt(ae,"options"),Ir(this,ae)};function Ir(ae,de){typeof ae.read!="function"&&(ae=ft.wrap(ae,{objectMode:!0}));const St=Tt(ae,de);return St.stream=ae,St}async function*Tt(ae,de){let St=it;function Et(un){this===ae?(St(),St=it):St=un}ae.on("readable",Et);let Ot;const qt=P(ae,{writable:!1},un=>{Ot=un?ve(Ot,un):null,St(),St=it});try{for(;;){const un=ae.destroyed?null:ae.read();if(un!==null)yield un;else{if(Ot)throw Ot;if(Ot===null)return;await new E(Et)}}}catch(un){throw Ot=ve(Ot,un),Ot}finally{(Ot||de?.destroyOnReturn!==!1)&&(Ot===void 0||ae._readableState.autoDestroy)?z.destroyer(ae,null):(ae.off("readable",Et),qt())}}y(ft.prototype,{readable:{__proto__:null,get(){const ae=this._readableState;return!!ae&&ae.readable!==!1&&!ae.destroyed&&!ae.errorEmitted&&!ae.endEmitted},set(ae){this._readableState&&(this._readableState.readable=!!ae)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ae){this._readableState&&(this._readableState.flowing=ae)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ae){this._readableState&&(this._readableState.destroyed=ae)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),y(dt.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ne]!==!1},set(ae){this[Ne]=!!ae}}}),ft._fromList=vn;function vn(ae,de){if(de.length===0)return null;let St;return de.objectMode?St=de.buffer.shift():!ae||ae>=de.length?(de.decoder?St=de.buffer.join(""):de.buffer.length===1?St=de.buffer.first():St=de.buffer.concat(de.length),de.buffer.clear()):St=de.buffer.consume(ae,de.decoder),St}function jr(ae){const de=ae._readableState;I("endReadable",de.endEmitted),de.endEmitted||(de.ended=!0,a.nextTick(In,de,ae))}function In(ae,de){if(I("endReadableNT",ae.endEmitted,ae.length),!ae.errored&&!ae.closeEmitted&&!ae.endEmitted&&ae.length===0){if(ae.endEmitted=!0,de.emit("end"),de.writable&&de.allowHalfOpen===!1)a.nextTick(or,de);else if(ae.autoDestroy){const St=de._writableState;(!St||St.autoDestroy&&(St.finished||St.writable===!1))&&de.destroy()}}}function or(ae){ae.writable&&!ae.writableEnded&&!ae.destroyed&&ae.end()}ft.from=function(ae,de){return Fe(ft,ae,de)};let nr;function Ii(){return nr===void 0&&(nr={}),nr}return ft.fromWeb=function(ae,de){return Ii().newStreamReadableFromReadableStream(ae,de)},ft.toWeb=function(ae,de){return Ii().newReadableStreamFromStreamReadable(ae,de)},ft.wrap=function(ae,de){var St,Et;return new ft({objectMode:(St=(Et=ae.readableObjectMode)!==null&&Et!==void 0?Et:ae.objectMode)!==null&&St!==void 0?St:!0,...de,destroy(Ot,qt){z.destroyer(ae,Ot),qt(Ot)}}).wrap(ae)},Bd}var Hd,E0;function wh(){if(E0)return Hd;E0=1;const a=Oo(),{ArrayPrototypeSlice:n,Error:s,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:d,ObjectDefineProperties:y,ObjectSetPrototypeOf:p,StringPrototypeToLowerCase:g,Symbol:E,SymbolHasInstance:m}=Wn();Hd=mt,mt.WritableState=ke;const{EventEmitter:_}=Pu(),S=_h().Stream,{Buffer:D}=Ca(),M=ws(),{addAbortSignal:C}=gc(),{getHighWaterMark:O,getDefaultHighWaterMark:U}=yc(),{ERR_INVALID_ARG_TYPE:F,ERR_METHOD_NOT_IMPLEMENTED:P,ERR_MULTIPLE_CALLBACK:I,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:z,ERR_STREAM_ALREADY_FINISHED:Y,ERR_STREAM_NULL_VALUES:Q,ERR_STREAM_WRITE_AFTER_END:ve,ERR_UNKNOWN_ENCODING:qe}=Wr().codes,{errorOrDestroy:J}=M;p(mt.prototype,S.prototype),p(mt,S);function pe(){}const Xe=E("kOnFinished");function ke(T,G,ee){typeof ee!="boolean"&&(ee=G instanceof Na()),this.objectMode=!!(T&&T.objectMode),ee&&(this.objectMode=this.objectMode||!!(T&&T.writableObjectMode)),this.highWaterMark=T?O(this,T,"writableHighWaterMark",ee):U(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const me=!!(T&&T.decodeStrings===!1);this.decodeStrings=!me,this.defaultEncoding=T&&T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=H.bind(void 0,G),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,wt(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!T||T.emitClose!==!1,this.autoDestroy=!T||T.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Xe]=[]}function wt(T){T.buffered=[],T.bufferedIndex=0,T.allBuffers=!0,T.allNoop=!0}ke.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},d(ke.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function mt(T){const G=this instanceof Na();if(!G&&!i(mt,this))return new mt(T);this._writableState=new ke(T,this,G),T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final),typeof T.construct=="function"&&(this._construct=T.construct),T.signal&&C(T.signal,this)),S.call(this,T),M.construct(this,()=>{const ee=this._writableState;ee.writing||tt(this,ee),Ye(this,ee)})}d(mt,m,{__proto__:null,value:function(T){return i(this,T)?!0:this!==mt?!1:T&&T._writableState instanceof ke}}),mt.prototype.pipe=function(){J(this,new B)};function Ne(T,G,ee,me){const Se=T._writableState;if(typeof ee=="function")me=ee,ee=Se.defaultEncoding;else{if(!ee)ee=Se.defaultEncoding;else if(ee!=="buffer"&&!D.isEncoding(ee))throw new qe(ee);typeof me!="function"&&(me=pe)}if(G===null)throw new Q;if(!Se.objectMode)if(typeof G=="string")Se.decodeStrings!==!1&&(G=D.from(G,ee),ee="buffer");else if(G instanceof D)ee="buffer";else if(S._isUint8Array(G))G=S._uint8ArrayToBuffer(G),ee="buffer";else throw new F("chunk",["string","Buffer","Uint8Array"],G);let at;return Se.ending?at=new ve:Se.destroyed&&(at=new z("write")),at?(a.nextTick(me,at),J(T,at,!0),at):(Se.pendingcb++,Me(T,Se,G,ee,me))}mt.prototype.write=function(T,G,ee){return Ne(this,T,G,ee)===!0},mt.prototype.cork=function(){this._writableState.corked++},mt.prototype.uncork=function(){const T=this._writableState;T.corked&&(T.corked--,T.writing||tt(this,T))},mt.prototype.setDefaultEncoding=function(G){if(typeof G=="string"&&(G=g(G)),!D.isEncoding(G))throw new qe(G);return this._writableState.defaultEncoding=G,this};function Me(T,G,ee,me,Se){const at=G.objectMode?1:ee.length;G.length+=at;const we=G.length<G.highWaterMark;return we||(G.needDrain=!0),G.writing||G.corked||G.errored||!G.constructed?(G.buffered.push({chunk:ee,encoding:me,callback:Se}),G.allBuffers&&me!=="buffer"&&(G.allBuffers=!1),G.allNoop&&Se!==pe&&(G.allNoop=!1)):(G.writelen=at,G.writecb=Se,G.writing=!0,G.sync=!0,T._write(ee,me,G.onwrite),G.sync=!1),we&&!G.errored&&!G.destroyed}function Fe(T,G,ee,me,Se,at,we){G.writelen=me,G.writecb=we,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new z("write")):ee?T._writev(Se,G.onwrite):T._write(Se,at,G.onwrite),G.sync=!1}function it(T,G,ee,me){--G.pendingcb,me(ee),be(G),J(T,ee)}function H(T,G){const ee=T._writableState,me=ee.sync,Se=ee.writecb;if(typeof Se!="function"){J(T,new I);return}ee.writing=!1,ee.writecb=null,ee.length-=ee.writelen,ee.writelen=0,G?(G.stack,ee.errored||(ee.errored=G),T._readableState&&!T._readableState.errored&&(T._readableState.errored=G),me?a.nextTick(it,T,ee,G,Se):it(T,ee,G,Se)):(ee.buffered.length>ee.bufferedIndex&&tt(T,ee),me?ee.afterWriteTickInfo!==null&&ee.afterWriteTickInfo.cb===Se?ee.afterWriteTickInfo.count++:(ee.afterWriteTickInfo={count:1,cb:Se,stream:T,state:ee},a.nextTick(he,ee.afterWriteTickInfo)):Re(T,ee,1,Se))}function he({stream:T,state:G,count:ee,cb:me}){return G.afterWriteTickInfo=null,Re(T,G,ee,me)}function Re(T,G,ee,me){for(!G.ending&&!T.destroyed&&G.length===0&&G.needDrain&&(G.needDrain=!1,T.emit("drain"));ee-- >0;)G.pendingcb--,me();G.destroyed&&be(G),Ye(T,G)}function be(T){if(T.writing)return;for(let Se=T.bufferedIndex;Se<T.buffered.length;++Se){var G;const{chunk:at,callback:we}=T.buffered[Se],ot=T.objectMode?1:at.length;T.length-=ot,we((G=T.errored)!==null&&G!==void 0?G:new z("write"))}const ee=T[Xe].splice(0);for(let Se=0;Se<ee.length;Se++){var me;ee[Se]((me=T.errored)!==null&&me!==void 0?me:new z("end"))}wt(T)}function tt(T,G){if(G.corked||G.bufferProcessing||G.destroyed||!G.constructed)return;const{buffered:ee,bufferedIndex:me,objectMode:Se}=G,at=ee.length-me;if(!at)return;let we=me;if(G.bufferProcessing=!0,at>1&&T._writev){G.pendingcb-=at-1;const ot=G.allNoop?pe:ft=>{for(let Dt=we;Dt<ee.length;++Dt)ee[Dt].callback(ft)},dt=G.allNoop&&we===0?ee:n(ee,we);dt.allBuffers=G.allBuffers,Fe(T,G,!0,G.length,dt,"",ot),wt(G)}else{do{const{chunk:ot,encoding:dt,callback:ft}=ee[we];ee[we++]=null;const Dt=Se?1:ot.length;Fe(T,G,!1,Dt,ot,dt,ft)}while(we<ee.length&&!G.writing);we===ee.length?wt(G):we>256?(ee.splice(0,we),G.bufferedIndex=0):G.bufferedIndex=we}G.bufferProcessing=!1}mt.prototype._write=function(T,G,ee){if(this._writev)this._writev([{chunk:T,encoding:G}],ee);else throw new P("_write()")},mt.prototype._writev=null,mt.prototype.end=function(T,G,ee){const me=this._writableState;typeof T=="function"?(ee=T,T=null,G=null):typeof G=="function"&&(ee=G,G=null);let Se;if(T!=null){const at=Ne(this,T,G);at instanceof s&&(Se=at)}return me.corked&&(me.corked=1,this.uncork()),Se||(!me.errored&&!me.ending?(me.ending=!0,Ye(this,me,!0),me.ended=!0):me.finished?Se=new Y("end"):me.destroyed&&(Se=new z("end"))),typeof ee=="function"&&(Se||me.finished?a.nextTick(ee,Se):me[Xe].push(ee)),this};function gt(T){return T.ending&&!T.destroyed&&T.constructed&&T.length===0&&!T.errored&&T.buffered.length===0&&!T.finished&&!T.writing&&!T.errorEmitted&&!T.closeEmitted}function xt(T,G){let ee=!1;function me(Se){if(ee){J(T,Se??I());return}if(ee=!0,G.pendingcb--,Se){const at=G[Xe].splice(0);for(let we=0;we<at.length;we++)at[we](Se);J(T,Se,G.sync)}else gt(G)&&(G.prefinished=!0,T.emit("prefinish"),G.pendingcb++,a.nextTick(Ue,T,G))}G.sync=!0,G.pendingcb++;try{T._final(me)}catch(Se){me(Se)}G.sync=!1}function Ut(T,G){!G.prefinished&&!G.finalCalled&&(typeof T._final=="function"&&!G.destroyed?(G.finalCalled=!0,xt(T,G)):(G.prefinished=!0,T.emit("prefinish")))}function Ye(T,G,ee){gt(G)&&(Ut(T,G),G.pendingcb===0&&(ee?(G.pendingcb++,a.nextTick((me,Se)=>{gt(Se)?Ue(me,Se):Se.pendingcb--},T,G)):gt(G)&&(G.pendingcb++,Ue(T,G))))}function Ue(T,G){G.pendingcb--,G.finished=!0;const ee=G[Xe].splice(0);for(let me=0;me<ee.length;me++)ee[me]();if(T.emit("finish"),G.autoDestroy){const me=T._readableState;(!me||me.autoDestroy&&(me.endEmitted||me.readable===!1))&&T.destroy()}}y(mt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(T){this._writableState&&(this._writableState.destroyed=T)}},writable:{__proto__:null,get(){const T=this._writableState;return!!T&&T.writable!==!1&&!T.destroyed&&!T.errored&&!T.ending&&!T.ended},set(T){this._writableState&&(this._writableState.writable=!!T)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const T=this._writableState;return T?!T.destroyed&&!T.ending&&T.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const bt=M.destroy;mt.prototype.destroy=function(T,G){const ee=this._writableState;return!ee.destroyed&&(ee.bufferedIndex<ee.buffered.length||ee[Xe].length)&&a.nextTick(be,ee),bt.call(this,T,G),this},mt.prototype._undestroy=M.undestroy,mt.prototype._destroy=function(T,G){G(T)},mt.prototype[_.captureRejectionSymbol]=function(T){this.destroy(T)};let ue;function j(){return ue===void 0&&(ue={}),ue}return mt.fromWeb=function(T,G){return j().newStreamWritableFromWritableStream(T,G)},mt.toWeb=function(T){return j().newWritableStreamFromStreamWritable(T)},Hd}var Kd,x0;function A1(){if(x0)return Kd;x0=1;const a=Oo(),n=Ca(),{isReadable:s,isWritable:i,isIterable:d,isNodeStream:y,isReadableNodeStream:p,isWritableNodeStream:g,isDuplexNodeStream:E,isReadableStream:m,isWritableStream:_}=Oa(),S=uo(),{AbortError:D,codes:{ERR_INVALID_ARG_TYPE:M,ERR_INVALID_RETURN_VALUE:C}}=Wr(),{destroyer:O}=ws(),U=Na(),F=mc(),P=wh(),{createDeferredPromise:I}=oi(),B=jm(),z=globalThis.Blob||n.Blob,Y=typeof z<"u"?function(ke){return ke instanceof z}:function(ke){return!1},Q=globalThis.AbortController||Iu().AbortController,{FunctionPrototypeCall:ve}=Wn();class qe extends U{constructor(ke){super(ke),ke?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),ke?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Kd=function Xe(ke,wt){if(E(ke))return ke;if(p(ke))return pe({readable:ke});if(g(ke))return pe({writable:ke});if(y(ke))return pe({writable:!1,readable:!1});if(m(ke))return pe({readable:F.fromWeb(ke)});if(_(ke))return pe({writable:P.fromWeb(ke)});if(typeof ke=="function"){const{value:Ne,write:Me,final:Fe,destroy:it}=J(ke);if(d(Ne))return B(qe,Ne,{objectMode:!0,write:Me,final:Fe,destroy:it});const H=Ne?.then;if(typeof H=="function"){let he;const Re=ve(H,Ne,be=>{if(be!=null)throw new C("nully","body",be)},be=>{O(he,be)});return he=new qe({objectMode:!0,readable:!1,write:Me,final(be){Fe(async()=>{try{await Re,a.nextTick(be,null)}catch(tt){a.nextTick(be,tt)}})},destroy:it})}throw new C("Iterable, AsyncIterable or AsyncFunction",wt,Ne)}if(Y(ke))return Xe(ke.arrayBuffer());if(d(ke))return B(qe,ke,{objectMode:!0,writable:!1});if(m(ke?.readable)&&_(ke?.writable))return qe.fromWeb(ke);if(typeof ke?.writable=="object"||typeof ke?.readable=="object"){const Ne=ke!=null&&ke.readable?p(ke?.readable)?ke?.readable:Xe(ke.readable):void 0,Me=ke!=null&&ke.writable?g(ke?.writable)?ke?.writable:Xe(ke.writable):void 0;return pe({readable:Ne,writable:Me})}const mt=ke?.then;if(typeof mt=="function"){let Ne;return ve(mt,ke,Me=>{Me!=null&&Ne.push(Me),Ne.push(null)},Me=>{O(Ne,Me)}),Ne=new qe({objectMode:!0,writable:!1,read(){}})}throw new M(wt,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],ke)};function J(Xe){let{promise:ke,resolve:wt}=I();const mt=new Q,Ne=mt.signal;return{value:Xe(async function*(){for(;;){const Fe=ke;ke=null;const{chunk:it,done:H,cb:he}=await Fe;if(a.nextTick(he),H)return;if(Ne.aborted)throw new D(void 0,{cause:Ne.reason});({promise:ke,resolve:wt}=I()),yield it}}(),{signal:Ne}),write(Fe,it,H){const he=wt;wt=null,he({chunk:Fe,done:!1,cb:H})},final(Fe){const it=wt;wt=null,it({done:!0,cb:Fe})},destroy(Fe,it){mt.abort(),it(Fe)}}}function pe(Xe){const ke=Xe.readable&&typeof Xe.readable.read!="function"?F.wrap(Xe.readable):Xe.readable,wt=Xe.writable;let mt=!!s(ke),Ne=!!i(wt),Me,Fe,it,H,he;function Re(be){const tt=H;H=null,tt?tt(be):be&&he.destroy(be)}return he=new qe({readableObjectMode:!!(ke!=null&&ke.readableObjectMode),writableObjectMode:!!(wt!=null&&wt.writableObjectMode),readable:mt,writable:Ne}),Ne&&(S(wt,be=>{Ne=!1,be&&O(ke,be),Re(be)}),he._write=function(be,tt,gt){wt.write(be,tt)?gt():Me=gt},he._final=function(be){wt.end(),Fe=be},wt.on("drain",function(){if(Me){const be=Me;Me=null,be()}}),wt.on("finish",function(){if(Fe){const be=Fe;Fe=null,be()}})),mt&&(S(ke,be=>{mt=!1,be&&O(ke,be),Re(be)}),ke.on("readable",function(){if(it){const be=it;it=null,be()}}),ke.on("end",function(){he.push(null)}),he._read=function(){for(;;){const be=ke.read();if(be===null){it=he._read;return}if(!he.push(be))return}}),he._destroy=function(be,tt){!be&&H!==null&&(be=new D),it=null,Me=null,Fe=null,H===null?tt(be):(H=tt,O(wt,be),O(ke,be))},he}return Kd}var qd,T0;function Na(){if(T0)return qd;T0=1;const{ObjectDefineProperties:a,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:s,ObjectSetPrototypeOf:i}=Wn();qd=p;const d=mc(),y=wh();i(p.prototype,d.prototype),i(p,d);{const _=s(y.prototype);for(let S=0;S<_.length;S++){const D=_[S];p.prototype[D]||(p.prototype[D]=y.prototype[D])}}function p(_){if(!(this instanceof p))return new p(_);d.call(this,_),y.call(this,_),_?(this.allowHalfOpen=_.allowHalfOpen!==!1,_.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),_.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}a(p.prototype,{writable:{__proto__:null,...n(y.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(y.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(y.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(y.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(y.prototype,"writableLength")},writableFinished:{__proto__:null,...n(y.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(y.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(y.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(y.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(_){this._readableState&&this._writableState&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}}});let g;function E(){return g===void 0&&(g={}),g}p.fromWeb=function(_,S){return E().newStreamDuplexFromReadableWritablePair(_,S)},p.toWeb=function(_){return E().newReadableWritablePairFromDuplex(_)};let m;return p.from=function(_){return m||(m=A1()),m(_,"body")},qd}var zd,A0;function Um(){if(A0)return zd;A0=1;const{ObjectSetPrototypeOf:a,Symbol:n}=Wn();zd=p;const{ERR_METHOD_NOT_IMPLEMENTED:s}=Wr().codes,i=Na(),{getHighWaterMark:d}=yc();a(p.prototype,i.prototype),a(p,i);const y=n("kCallback");function p(m){if(!(this instanceof p))return new p(m);const _=m?d(this,m,"readableHighWaterMark",!0):null;_===0&&(m={...m,highWaterMark:null,readableHighWaterMark:_,writableHighWaterMark:m.writableHighWaterMark||0}),i.call(this,m),this._readableState.sync=!1,this[y]=null,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",E)}function g(m){typeof this._flush=="function"&&!this.destroyed?this._flush((_,S)=>{if(_){m?m(_):this.destroy(_);return}S!=null&&this.push(S),this.push(null),m&&m()}):(this.push(null),m&&m())}function E(){this._final!==g&&g.call(this)}return p.prototype._final=g,p.prototype._transform=function(m,_,S){throw new s("_transform()")},p.prototype._write=function(m,_,S){const D=this._readableState,M=this._writableState,C=D.length;this._transform(m,_,(O,U)=>{if(O){S(O);return}U!=null&&this.push(U),M.ended||C===D.length||D.length<D.highWaterMark?S():this[y]=S})},p.prototype._read=function(){if(this[y]){const m=this[y];this[y]=null,m()}},zd}var Vd,R0;function Pm(){if(R0)return Vd;R0=1;const{ObjectSetPrototypeOf:a}=Wn();Vd=s;const n=Um();a(s.prototype,n.prototype),a(s,n);function s(i){if(!(this instanceof s))return new s(i);n.call(this,i)}return s.prototype._transform=function(i,d,y){y(null,i)},Vd}var Gd,k0;function Sh(){if(k0)return Gd;k0=1;const a=Oo(),{ArrayIsArray:n,Promise:s,SymbolAsyncIterator:i,SymbolDispose:d}=Wn(),y=uo(),{once:p}=oi(),g=ws(),E=Na(),{aggregateTwoErrors:m,codes:{ERR_INVALID_ARG_TYPE:_,ERR_INVALID_RETURN_VALUE:S,ERR_MISSING_ARGS:D,ERR_STREAM_DESTROYED:M,ERR_STREAM_PREMATURE_CLOSE:C},AbortError:O}=Wr(),{validateFunction:U,validateAbortSignal:F}=Lu(),{isIterable:P,isReadable:I,isReadableNodeStream:B,isNodeStream:z,isTransformStream:Y,isWebStream:Q,isReadableStream:ve,isReadableFinished:qe}=Oa(),J=globalThis.AbortController||Iu().AbortController;let pe,Xe,ke;function wt(be,tt,gt){let xt=!1;be.on("close",()=>{xt=!0});const Ut=y(be,{readable:tt,writable:gt},Ye=>{xt=!Ye});return{destroy:Ye=>{xt||(xt=!0,g.destroyer(be,Ye||new M("pipe")))},cleanup:Ut}}function mt(be){return U(be[be.length-1],"streams[stream.length - 1]"),be.pop()}function Ne(be){if(P(be))return be;if(B(be))return Me(be);throw new _("val",["Readable","Iterable","AsyncIterable"],be)}async function*Me(be){Xe||(Xe=mc()),yield*Xe.prototype[i].call(be)}async function Fe(be,tt,gt,{end:xt}){let Ut,Ye=null;const Ue=j=>{if(j&&(Ut=j),Ye){const T=Ye;Ye=null,T()}},bt=()=>new s((j,T)=>{Ut?T(Ut):Ye=()=>{Ut?T(Ut):j()}});tt.on("drain",Ue);const ue=y(tt,{readable:!1},Ue);try{tt.writableNeedDrain&&await bt();for await(const j of be)tt.write(j)||await bt();xt&&(tt.end(),await bt()),gt()}catch(j){gt(Ut!==j?m(Ut,j):j)}finally{ue(),tt.off("drain",Ue)}}async function it(be,tt,gt,{end:xt}){Y(tt)&&(tt=tt.writable);const Ut=tt.getWriter();try{for await(const Ye of be)await Ut.ready,Ut.write(Ye).catch(()=>{});await Ut.ready,xt&&await Ut.close(),gt()}catch(Ye){try{await Ut.abort(Ye),gt(Ye)}catch(Ue){gt(Ue)}}}function H(...be){return he(be,p(mt(be)))}function he(be,tt,gt){if(be.length===1&&n(be[0])&&(be=be[0]),be.length<2)throw new D("streams");const xt=new J,Ut=xt.signal,Ye=gt?.signal,Ue=[];F(Ye,"options.signal");function bt(){Se(new O)}ke=ke||oi().addAbortListener;let ue;Ye&&(ue=ke(Ye,bt));let j,T;const G=[];let ee=0;function me(ft){Se(ft,--ee===0)}function Se(ft,Dt){var pn;if(ft&&(!j||j.code==="ERR_STREAM_PREMATURE_CLOSE")&&(j=ft),!(!j&&!Dt)){for(;G.length;)G.shift()(j);(pn=ue)===null||pn===void 0||pn[d](),xt.abort(),Dt&&(j||Ue.forEach(At=>At()),a.nextTick(tt,j,T))}}let at;for(let ft=0;ft<be.length;ft++){const Dt=be[ft],pn=ft<be.length-1,At=ft>0,Kt=pn||gt?.end!==!1,$=ft===be.length-1;if(z(Dt)){let R=function(N){N&&N.name!=="AbortError"&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"&&me(N)};var dt=R;if(Kt){const{destroy:N,cleanup:k}=wt(Dt,pn,At);G.push(N),I(Dt)&&$&&Ue.push(k)}Dt.on("error",R),I(Dt)&&$&&Ue.push(()=>{Dt.removeListener("error",R)})}if(ft===0)if(typeof Dt=="function"){if(at=Dt({signal:Ut}),!P(at))throw new S("Iterable, AsyncIterable or Stream","source",at)}else P(Dt)||B(Dt)||Y(Dt)?at=Dt:at=E.from(Dt);else if(typeof Dt=="function"){if(Y(at)){var we;at=Ne((we=at)===null||we===void 0?void 0:we.readable)}else at=Ne(at);if(at=Dt(at,{signal:Ut}),pn){if(!P(at,!0))throw new S("AsyncIterable",`transform[${ft-1}]`,at)}else{var ot;pe||(pe=Pm());const R=new pe({objectMode:!0}),N=(ot=at)===null||ot===void 0?void 0:ot.then;if(typeof N=="function")ee++,N.call(at,Ge=>{T=Ge,Ge!=null&&R.write(Ge),Kt&&R.end(),a.nextTick(me)},Ge=>{R.destroy(Ge),a.nextTick(me,Ge)});else if(P(at,!0))ee++,Fe(at,R,me,{end:Kt});else if(ve(at)||Y(at)){const Ge=at.readable||at;ee++,Fe(Ge,R,me,{end:Kt})}else throw new S("AsyncIterable or Promise","destination",at);at=R;const{destroy:k,cleanup:Ce}=wt(at,!1,!0);G.push(k),$&&Ue.push(Ce)}}else if(z(Dt)){if(B(at)){ee+=2;const R=Re(at,Dt,me,{end:Kt});I(Dt)&&$&&Ue.push(R)}else if(Y(at)||ve(at)){const R=at.readable||at;ee++,Fe(R,Dt,me,{end:Kt})}else if(P(at))ee++,Fe(at,Dt,me,{end:Kt});else throw new _("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],at);at=Dt}else if(Q(Dt)){if(B(at))ee++,it(Ne(at),Dt,me,{end:Kt});else if(ve(at)||P(at))ee++,it(at,Dt,me,{end:Kt});else if(Y(at))ee++,it(at.readable,Dt,me,{end:Kt});else throw new _("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],at);at=Dt}else at=E.from(Dt)}return(Ut!=null&&Ut.aborted||Ye!=null&&Ye.aborted)&&a.nextTick(bt),at}function Re(be,tt,gt,{end:xt}){let Ut=!1;if(tt.on("close",()=>{Ut||gt(new C)}),be.pipe(tt,{end:!1}),xt){let Ue=function(){Ut=!0,tt.end()};var Ye=Ue;qe(be)?a.nextTick(Ue):be.once("end",Ue)}else gt();return y(be,{readable:!0,writable:!1},Ue=>{const bt=be._readableState;Ue&&Ue.code==="ERR_STREAM_PREMATURE_CLOSE"&&bt&&bt.ended&&!bt.errored&&!bt.errorEmitted?be.once("end",gt).once("error",gt):gt(Ue)}),y(tt,{readable:!1,writable:!0},gt)}return Gd={pipelineImpl:he,pipeline:H},Gd}var $d,F0;function Lm(){if(F0)return $d;F0=1;const{pipeline:a}=Sh(),n=Na(),{destroyer:s}=ws(),{isNodeStream:i,isReadable:d,isWritable:y,isWebStream:p,isTransformStream:g,isWritableStream:E,isReadableStream:m}=Oa(),{AbortError:_,codes:{ERR_INVALID_ARG_VALUE:S,ERR_MISSING_ARGS:D}}=Wr(),M=uo();return $d=function(...O){if(O.length===0)throw new D("streams");if(O.length===1)return n.from(O[0]);const U=[...O];if(typeof O[0]=="function"&&(O[0]=n.from(O[0])),typeof O[O.length-1]=="function"){const pe=O.length-1;O[pe]=n.from(O[pe])}for(let pe=0;pe<O.length;++pe)if(!(!i(O[pe])&&!p(O[pe]))){if(pe<O.length-1&&!(d(O[pe])||m(O[pe])||g(O[pe])))throw new S(`streams[${pe}]`,U[pe],"must be readable");if(pe>0&&!(y(O[pe])||E(O[pe])||g(O[pe])))throw new S(`streams[${pe}]`,U[pe],"must be writable")}let F,P,I,B,z;function Y(pe){const Xe=B;B=null,Xe?Xe(pe):pe?z.destroy(pe):!J&&!qe&&z.destroy()}const Q=O[0],ve=a(O,Y),qe=!!(y(Q)||E(Q)||g(Q)),J=!!(d(ve)||m(ve)||g(ve));if(z=new n({writableObjectMode:!!(Q!=null&&Q.writableObjectMode),readableObjectMode:!!(ve!=null&&ve.readableObjectMode),writable:qe,readable:J}),qe){if(i(Q))z._write=function(Xe,ke,wt){Q.write(Xe,ke)?wt():F=wt},z._final=function(Xe){Q.end(),P=Xe},Q.on("drain",function(){if(F){const Xe=F;F=null,Xe()}});else if(p(Q)){const ke=(g(Q)?Q.writable:Q).getWriter();z._write=async function(wt,mt,Ne){try{await ke.ready,ke.write(wt).catch(()=>{}),Ne()}catch(Me){Ne(Me)}},z._final=async function(wt){try{await ke.ready,ke.close().catch(()=>{}),P=wt}catch(mt){wt(mt)}}}const pe=g(ve)?ve.readable:ve;M(pe,()=>{if(P){const Xe=P;P=null,Xe()}})}if(J){if(i(ve))ve.on("readable",function(){if(I){const pe=I;I=null,pe()}}),ve.on("end",function(){z.push(null)}),z._read=function(){for(;;){const pe=ve.read();if(pe===null){I=z._read;return}if(!z.push(pe))return}};else if(p(ve)){const Xe=(g(ve)?ve.readable:ve).getReader();z._read=async function(){for(;;)try{const{value:ke,done:wt}=await Xe.read();if(!z.push(ke))return;if(wt){z.push(null);return}}catch{return}}}}return z._destroy=function(pe,Xe){!pe&&B!==null&&(pe=new _),I=null,F=null,P=null,B===null?Xe(pe):(B=Xe,i(ve)&&s(ve,pe))},z},$d}var N0;function R1(){if(N0)return Yl;N0=1;const a=globalThis.AbortController||Iu().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:s,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:d},AbortError:y}=Wr(),{validateAbortSignal:p,validateInteger:g,validateObject:E}=Lu(),m=Wn().Symbol("kWeak"),_=Wn().Symbol("kResistStopPropagation"),{finished:S}=uo(),D=Lm(),{addAbortSignalNoValidate:M}=gc(),{isWritable:C,isNodeStream:O}=Oa(),{deprecate:U}=oi(),{ArrayPrototypePush:F,Boolean:P,MathFloor:I,Number:B,NumberIsNaN:z,Promise:Y,PromiseReject:Q,PromiseResolve:ve,PromisePrototypeThen:qe,Symbol:J}=Wn(),pe=J("kEmpty"),Xe=J("kEof");function ke(Ye,Ue){if(Ue!=null&&E(Ue,"options"),Ue?.signal!=null&&p(Ue.signal,"options.signal"),O(Ye)&&!C(Ye))throw new n("stream",Ye,"must be writable");const bt=D(this,Ye);return Ue!=null&&Ue.signal&&M(Ue.signal,bt),bt}function wt(Ye,Ue){if(typeof Ye!="function")throw new s("fn",["Function","AsyncFunction"],Ye);Ue!=null&&E(Ue,"options"),Ue?.signal!=null&&p(Ue.signal,"options.signal");let bt=1;Ue?.concurrency!=null&&(bt=I(Ue.concurrency));let ue=bt-1;return Ue?.highWaterMark!=null&&(ue=I(Ue.highWaterMark)),g(bt,"options.concurrency",1),g(ue,"options.highWaterMark",0),ue+=bt,(async function*(){const T=oi().AbortSignalAny([Ue?.signal].filter(P)),G=this,ee=[],me={signal:T};let Se,at,we=!1,ot=0;function dt(){we=!0,ft()}function ft(){ot-=1,Dt()}function Dt(){at&&!we&&ot<bt&&ee.length<ue&&(at(),at=null)}async function pn(){try{for await(let At of G){if(we)return;if(T.aborted)throw new y;try{if(At=Ye(At,me),At===pe)continue;At=ve(At)}catch(Kt){At=Q(Kt)}ot+=1,qe(At,ft,dt),ee.push(At),Se&&(Se(),Se=null),!we&&(ee.length>=ue||ot>=bt)&&await new Y(Kt=>{at=Kt})}ee.push(Xe)}catch(At){const Kt=Q(At);qe(Kt,ft,dt),ee.push(Kt)}finally{we=!0,Se&&(Se(),Se=null)}}pn();try{for(;;){for(;ee.length>0;){const At=await ee[0];if(At===Xe)return;if(T.aborted)throw new y;At!==pe&&(yield At),ee.shift(),Dt()}await new Y(At=>{Se=At})}}finally{we=!0,at&&(at(),at=null)}}).call(this)}function mt(Ye=void 0){return Ye!=null&&E(Ye,"options"),Ye?.signal!=null&&p(Ye.signal,"options.signal"),(async function*(){let bt=0;for await(const j of this){var ue;if(Ye!=null&&(ue=Ye.signal)!==null&&ue!==void 0&&ue.aborted)throw new y({cause:Ye.signal.reason});yield[bt++,j]}}).call(this)}async function Ne(Ye,Ue=void 0){for await(const bt of H.call(this,Ye,Ue))return!0;return!1}async function Me(Ye,Ue=void 0){if(typeof Ye!="function")throw new s("fn",["Function","AsyncFunction"],Ye);return!await Ne.call(this,async(...bt)=>!await Ye(...bt),Ue)}async function Fe(Ye,Ue){for await(const bt of H.call(this,Ye,Ue))return bt}async function it(Ye,Ue){if(typeof Ye!="function")throw new s("fn",["Function","AsyncFunction"],Ye);async function bt(ue,j){return await Ye(ue,j),pe}for await(const ue of wt.call(this,bt,Ue));}function H(Ye,Ue){if(typeof Ye!="function")throw new s("fn",["Function","AsyncFunction"],Ye);async function bt(ue,j){return await Ye(ue,j)?ue:pe}return wt.call(this,bt,Ue)}class he extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Re(Ye,Ue,bt){var ue;if(typeof Ye!="function")throw new s("reducer",["Function","AsyncFunction"],Ye);bt!=null&&E(bt,"options"),bt?.signal!=null&&p(bt.signal,"options.signal");let j=arguments.length>1;if(bt!=null&&(ue=bt.signal)!==null&&ue!==void 0&&ue.aborted){const Se=new y(void 0,{cause:bt.signal.reason});throw this.once("error",()=>{}),await S(this.destroy(Se)),Se}const T=new a,G=T.signal;if(bt!=null&&bt.signal){const Se={once:!0,[m]:this,[_]:!0};bt.signal.addEventListener("abort",()=>T.abort(),Se)}let ee=!1;try{for await(const Se of this){var me;if(ee=!0,bt!=null&&(me=bt.signal)!==null&&me!==void 0&&me.aborted)throw new y;j?Ue=await Ye(Ue,Se,{signal:G}):(Ue=Se,j=!0)}if(!ee&&!j)throw new he}finally{T.abort()}return Ue}async function be(Ye){Ye!=null&&E(Ye,"options"),Ye?.signal!=null&&p(Ye.signal,"options.signal");const Ue=[];for await(const ue of this){var bt;if(Ye!=null&&(bt=Ye.signal)!==null&&bt!==void 0&&bt.aborted)throw new y(void 0,{cause:Ye.signal.reason});F(Ue,ue)}return Ue}function tt(Ye,Ue){const bt=wt.call(this,Ye,Ue);return(async function*(){for await(const j of bt)yield*j}).call(this)}function gt(Ye){if(Ye=B(Ye),z(Ye))return 0;if(Ye<0)throw new d("number",">= 0",Ye);return Ye}function xt(Ye,Ue=void 0){return Ue!=null&&E(Ue,"options"),Ue?.signal!=null&&p(Ue.signal,"options.signal"),Ye=gt(Ye),(async function*(){var ue;if(Ue!=null&&(ue=Ue.signal)!==null&&ue!==void 0&&ue.aborted)throw new y;for await(const T of this){var j;if(Ue!=null&&(j=Ue.signal)!==null&&j!==void 0&&j.aborted)throw new y;Ye--<=0&&(yield T)}}).call(this)}function Ut(Ye,Ue=void 0){return Ue!=null&&E(Ue,"options"),Ue?.signal!=null&&p(Ue.signal,"options.signal"),Ye=gt(Ye),(async function*(){var ue;if(Ue!=null&&(ue=Ue.signal)!==null&&ue!==void 0&&ue.aborted)throw new y;for await(const T of this){var j;if(Ue!=null&&(j=Ue.signal)!==null&&j!==void 0&&j.aborted)throw new y;if(Ye-- >0&&(yield T),Ye<=0)return}}).call(this)}return Yl.streamReturningOperators={asIndexedPairs:U(mt,"readable.asIndexedPairs will be removed in a future version."),drop:xt,filter:H,flatMap:tt,map:wt,take:Ut,compose:ke},Yl.promiseReturningOperators={every:Me,forEach:it,reduce:Re,toArray:be,some:Ne,find:Fe},Yl}var Jd,C0;function Mm(){if(C0)return Jd;C0=1;const{ArrayPrototypePop:a,Promise:n}=Wn(),{isIterable:s,isNodeStream:i,isWebStream:d}=Oa(),{pipelineImpl:y}=Sh(),{finished:p}=uo();Bm();function g(...E){return new n((m,_)=>{let S,D;const M=E[E.length-1];if(M&&typeof M=="object"&&!i(M)&&!s(M)&&!d(M)){const C=a(E);S=C.signal,D=C.end}y(E,(C,O)=>{C?_(C):m(O)},{signal:S,end:D})})}return Jd={finished:p,pipeline:g},Jd}var O0;function Bm(){if(O0)return Td.exports;O0=1;const{Buffer:a}=Ca(),{ObjectDefineProperty:n,ObjectKeys:s,ReflectApply:i}=Wn(),{promisify:{custom:d}}=oi(),{streamReturningOperators:y,promiseReturningOperators:p}=R1(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:g}}=Wr(),E=Lm(),{setDefaultHighWaterMark:m,getDefaultHighWaterMark:_}=yc(),{pipeline:S}=Sh(),{destroyer:D}=ws(),M=uo(),C=Mm(),O=Oa(),U=Td.exports=_h().Stream;U.isDestroyed=O.isDestroyed,U.isDisturbed=O.isDisturbed,U.isErrored=O.isErrored,U.isReadable=O.isReadable,U.isWritable=O.isWritable,U.Readable=mc();for(const I of s(y)){let z=function(...Y){if(new.target)throw g();return U.Readable.from(i(B,this,Y))};var P=z;const B=y[I];n(z,"name",{__proto__:null,value:B.name}),n(z,"length",{__proto__:null,value:B.length}),n(U.Readable.prototype,I,{__proto__:null,value:z,enumerable:!1,configurable:!0,writable:!0})}for(const I of s(p)){let z=function(...Q){if(new.target)throw g();return i(B,this,Q)};var P=z;const B=p[I];n(z,"name",{__proto__:null,value:B.name}),n(z,"length",{__proto__:null,value:B.length}),n(U.Readable.prototype,I,{__proto__:null,value:z,enumerable:!1,configurable:!0,writable:!0})}U.Writable=wh(),U.Duplex=Na(),U.Transform=Um(),U.PassThrough=Pm(),U.pipeline=S;const{addAbortSignal:F}=gc();return U.addAbortSignal=F,U.finished=M,U.destroy=D,U.compose=E,U.setDefaultHighWaterMark=m,U.getDefaultHighWaterMark=_,n(U,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return C}}),n(S,d,{__proto__:null,enumerable:!0,get(){return C.pipeline}}),n(M,d,{__proto__:null,enumerable:!0,get(){return C.finished}}),U.Stream=U,U._isUint8Array=function(B){return B instanceof Uint8Array},U._uint8ArrayToBuffer=function(B){return a.from(B.buffer,B.byteOffset,B.byteLength)},Td.exports}var D0;function k1(){return D0||(D0=1,function(a){const n=Bm(),s=Mm(),i=n.Readable.destroy;a.exports=n.Readable,a.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,a.exports._isUint8Array=n._isUint8Array,a.exports.isDisturbed=n.isDisturbed,a.exports.isErrored=n.isErrored,a.exports.isReadable=n.isReadable,a.exports.Readable=n.Readable,a.exports.Writable=n.Writable,a.exports.Duplex=n.Duplex,a.exports.Transform=n.Transform,a.exports.PassThrough=n.PassThrough,a.exports.addAbortSignal=n.addAbortSignal,a.exports.finished=n.finished,a.exports.destroy=n.destroy,a.exports.destroy=i,a.exports.pipeline=n.pipeline,a.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get(){return s}}),a.exports.Stream=n.Stream,a.exports.default=a.exports}(xd)),xd.exports}class I0 extends Error{}const F1="application/problem+json",N1=new URL("about:blank");function j0(a,n){if(a!==void 0)try{return new URL(a,n)}catch{}}function C1(a){let n,s,i,d,y;if(a.headers.get("Content-Type")===F1)try{const p=JSON.parse(a.body),g=j0(p.type,a.url);g!==void 0&&(n=g),typeof p.title=="string"&&(s=p.title),typeof p.status=="number"&&(i=p.status),typeof p.detail=="string"&&(d=p.detail);const E=j0(p.instance,a.url);E!==void 0&&(y=E)}catch{}return Object.freeze({type:n??N1,title:s??a.statusText,status:i??a.status,detail:d,instance:y})}class U0 extends I0{constructor(n,s,i,d){if(super(i,d),n.status>=200&&n.status<400)throw new I0(`A ClientHttpError cannot be built from a success response, got ${n.status} ${n.statusText}`);this.errorResponse=Object.freeze({status:n.status,statusText:n.statusText,headers:n.headers,url:n.url,body:s,ok:!1}),this.details=C1(this.errorResponse)}get response(){return this.errorResponse}get problemDetails(){return this.details}}function Mu(a){const n=a;return typeof n=="object"&&typeof n.internal_resourceInfo=="object"}function Eh(a){const n=a;return typeof n=="object"&&typeof n.internal_resourceInfo=="object"&&typeof n.internal_resourceInfo.linkedResources=="object"}function Ss(a){const n=a;return typeof n.internal_changeLog=="object"&&Array.isArray(n.internal_changeLog.additions)&&Array.isArray(n.internal_changeLog.deletions)}class Bu extends Error{}function tr(a){return typeof a=="string"?a:a.value}function vc(a,n={}){const s=new URL(a);return s.pathname=s.pathname.replace(/\/\/+/g,"/"),n.trailingSlash===!1&&s.pathname.slice(-1)==="/"&&(s.pathname=s.pathname.slice(0,s.pathname.length-1)),n.trailingSlash===!0&&s.pathname.slice(-1)!=="/"&&(s.pathname=`${s.pathname}/`),s.href}var O1=S1();const D1=Uu(O1);function xh(a){var n,s,i,d,y;const p=(s=(n=a.headers.get("Content-Type"))===null||n===void 0?void 0:n.split(";"))!==null&&s!==void 0?s:[],g=p.length>0&&["text/turtle","application/ld+json"].includes(p[0]),E={sourceIri:a.url,isRawData:!g,contentLocation:(i=a.headers.get("Content-Location"))!==null&&i!==void 0?i:void 0,contentType:(d=a.headers.get("Content-Type"))!==null&&d!==void 0?d:void 0,linkedResources:{},location:(y=a.headers.get("Location"))!==null&&y!==void 0?y:void 0},m=a.headers.get("Link");if(m){const S=D1.parse(m),D=S.get("rel","acl");D.length===1&&(E.aclUrl=new URL(D[0].uri,E.sourceIri).href),E.linkedResources=S.refs.reduce((M,C)=>{var O,U;return(O=M[U=C.rel])!==null&&O!==void 0||(M[U]=[]),M[C.rel].push(new URL(C.uri,E.sourceIri).href),M},E.linkedResources)}const _=a.headers.get("WAC-Allow");return _&&(E.permissions=I1(_)),E}function I1(a){function n(i){const d=i.split(" ");return d.includes("write")?{read:d.includes("read"),append:!0,write:!0,control:d.includes("control")}:{read:d.includes("read"),append:d.includes("append"),write:!1,control:d.includes("control")}}function s(i,d){const y=i.split(",").map(g=>g.split("=")).filter(g=>g.length===2&&g[0].trim()===d);if(y.length!==1)return"";const p=y[0][1].trim();return p.charAt(0)!=='"'||p.charAt(p.length-1)!=='"'?"":p.substring(1,p.length-1)}return{user:n(s(a,"user")),public:n(s(a,"public"))}}function Es(a){return!a.ok}function j1(a){return a.status===401||a.status===403}const Hm={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Resource:"http://www.w3.org/ns/ldp#Resource"};function U1(a,n={ignoreAuthenticationErrors:!1}){if(Es(a)&&(!j1(a)||!n.ignoreAuthenticationErrors))throw new xs(`Fetching the metadata of the Resource at [${a.url}] failed: [${a.status}] [${a.statusText}].`,a);return{internal_resourceInfo:xh(a)}}function P1(a){var n;return(n=a.internal_resourceInfo.contentType)!==null&&n!==void 0?n:null}function Jr(a){return Mu(a)?a.internal_resourceInfo.sourceIri:null}const L1=Jr;class xs extends Bu{constructor(n,s,i){super(n),this.response=s,typeof i=="string"?this.httpError=new U0(s,i,n):this.httpError=new U0(s,"",n)}get statusCode(){return this.response.status}get statusText(){return this.response.statusText}get problemDetails(){return this.httpError.problemDetails}}var M1=Ca();const Eu="http://www.w3.org/1999/02/22-rdf-syntax-ns#",xu="http://www.w3.org/2001/XMLSchema#",Zl="http://www.w3.org/2000/10/swap/",Or={xsd:{decimal:`${xu}decimal`,boolean:`${xu}boolean`,double:`${xu}double`,integer:`${xu}integer`,string:`${xu}string`},rdf:{type:`${Eu}type`,nil:`${Eu}nil`,first:`${Eu}first`,rest:`${Eu}rest`,langString:`${Eu}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Zl}reify#forSome`,forAll:`${Zl}reify#forAll`},log:{implies:`${Zl}log#implies`,isImpliedBy:`${Zl}log#isImpliedBy`}},{xsd:ec}=Or,B1=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,P0={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},H1=/[\x00-\x20<>\\"\{\}\|\^\`]/,K1={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},q1=/$0^/;class z1{constructor(n){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,n=n||{},this._isImpliedBy=n.isImpliedBy,this._lineMode=!!n.lineMode){this._n3Mode=!1;for(const s in this)!(s in K1)&&this[s]instanceof RegExp&&(this[s]=q1)}else this._n3Mode=n.n3!==!1;this.comments=!!n.comments,this._literalClosingPos=0}_tokenizeToEnd(n,s){let i=this._input,d=i.length;for(;;){let g,E;for(;g=this._newline.exec(i);)this.comments&&(E=this._comment.exec(g[0]))&&y("comment",E[1],"",this._line,g[0].length),i=i.substr(g[0].length,i.length),d=i.length,this._line++;if(!g&&(g=this._whitespace.exec(i))&&(i=i.substr(g[0].length,i.length)),this._endOfFile.test(i))return s&&(this.comments&&(E=this._comment.exec(i))&&y("comment",E[1],"",this._line,i.length),i=null,y("eof","","",this._line,0)),this._input=i;const m=this._line,_=i[0];let S="",D="",M="",C=null,O=0,U=!1;switch(_){case"^":if(i.length<3)break;if(i[1]==="^"){if(this._previousMarker="^^",i=i.substr(2),i[0]!=="<"){U=!0;break}}else{this._n3Mode&&(O=1,S="^");break}case"<":if(C=this._unescapedIri.exec(i))S="IRI",D=C[1];else if(C=this._iri.exec(i)){if(D=this._unescape(C[1]),D===null||H1.test(D))return p(this);S="IRI"}else i.length>1&&i[1]==="<"?(S="<<",O=2):this._n3Mode&&i.length>1&&i[1]==="="&&(O=2,this._isImpliedBy?(S="abbreviation",D="<"):(S="inverse",D=">"));break;case">":i.length>1&&i[1]===">"&&(S=">>",O=2);break;case"_":((C=this._blank.exec(i))||s&&(C=this._blank.exec(`${i} `)))&&(S="blank",M="_",D=C[1]);break;case'"':if(C=this._simpleQuotedString.exec(i))D=C[1];else if({value:D,matchLength:O}=this._parseLiteral(i),D===null)return p(this);(C!==null||O!==0)&&(S="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(C=this._simpleApostropheString.exec(i))D=C[1];else if({value:D,matchLength:O}=this._parseLiteral(i),D===null)return p(this);(C!==null||O!==0)&&(S="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(C=this._variable.exec(i))&&(S="var",D=C[0]);break;case"@":this._previousMarker==="literal"&&(C=this._langcode.exec(i))?(S="langcode",D=C[1]):(C=this._keyword.exec(i))&&(S=C[0]);break;case".":if(i.length===1?s:i[1]<"0"||i[1]>"9"){S=".",O=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(C=this._number.exec(i)||s&&(C=this._number.exec(`${i} `)))&&(S="literal",D=C[0],M=typeof C[1]=="string"?ec.double:typeof C[2]=="string"?ec.decimal:ec.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(C=this._sparqlKeyword.exec(i))?S=C[0].toUpperCase():U=!0;break;case"f":case"t":(C=this._boolean.exec(i))?(S="literal",D=C[0],M=ec.boolean):U=!0;break;case"a":(C=this._shortPredicates.exec(i))?(S="abbreviation",D="a"):U=!0;break;case"=":this._n3Mode&&i.length>1&&(S="abbreviation",i[1]!==">"?(O=1,D="="):(O=2,D=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(O=1,S=_);break;case"{":!this._lineMode&&i.length>=2&&(i[1]==="|"?(S="{|",O=2):(S=_,O=1));break;case"|":i.length>=2&&i[1]==="}"&&(S="|}",O=2);break;default:U=!0}if(U&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(C=this._prefix.exec(i))?(S="prefix",D=C[1]||""):((C=this._prefixed.exec(i))||s&&(C=this._prefixed.exec(`${i} `)))&&(S="prefixed",M=C[1]||"",D=this._unescape(C[2]))),this._previousMarker==="^^")switch(S){case"prefixed":S="type";break;case"IRI":S="typeIRI";break;default:S=""}if(!S)return s||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?p(this):this._input=i;const F=O||C[0].length,P=y(S,D,M,m,F);this.previousToken=P,this._previousMarker=S,i=i.substr(F,i.length)}function y(g,E,m,_,S){const D=i?d-i.length:d,M=D+S,C={type:g,value:E,prefix:m,line:_,start:D,end:M};return n(null,C),C}function p(g){n(g._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(n){let s=!1;const i=n.replace(B1,(d,y,p,g)=>{if(typeof y=="string")return String.fromCharCode(Number.parseInt(y,16));if(typeof p=="string"){let E=Number.parseInt(p,16);return E<=65535?String.fromCharCode(Number.parseInt(p,16)):String.fromCharCode(55296+((E-=65536)>>10),56320+(E&1023))}return g in P0?P0[g]:(s=!0,"")});return s?null:i}_parseLiteral(n){if(n.length>=3){const s=n.match(/^(?:"""|"|'''|'|)/)[0],i=s.length;let d=Math.max(this._literalClosingPos,i);for(;(d=n.indexOf(s,d))>0;){let y=0;for(;n[d-y-1]==="\\";)y++;if(y%2===0){const p=n.substring(i,d),g=p.split(/\r\n|\r|\n/).length-1,E=d+i;if(i===1&&g!==0||i===3&&this._lineMode)break;return this._line+=g,{value:this._unescape(p),matchLength:E}}d++}this._literalClosingPos=n.length-i+1}return{value:"",matchLength:0}}_syntaxError(n){this._input=null;const s=new Error(`Unexpected "${n}" on line ${this._line}.`);return s.context={token:void 0,line:this._line,previousToken:this.previousToken},s}_readStartingBom(n){return n.startsWith("\uFEFF")?n.substr(1):n}tokenize(n,s){if(this._line=1,typeof n=="string")if(this._input=this._readStartingBom(n),typeof s=="function")queueMicrotask(()=>this._tokenizeToEnd(s,!0));else{const i=[];let d;if(this._tokenizeToEnd((y,p)=>y?d=y:i.push(p),!0),d)throw d;return i}else this._pendingBuffer=null,typeof n.setEncoding=="function"&&n.setEncoding("utf8"),n.on("data",i=>{this._input!==null&&i.length!==0&&(this._pendingBuffer&&(i=M1.Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),i[i.length-1]&128?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom(typeof i=="string"?i:i.toString()):this._input+=i,this._tokenizeToEnd(s,!1)))}),n.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(s,!0)}),n.on("error",s)}}const{rdf:V1,xsd:No}=Or;let Ts,G1=0;const Yn={namedNode:zm,blankNode:Vm,variable:$m,literal:Gm,defaultGraph:Y1,quad:sh,triple:sh,fromTerm:Nu,fromQuad:Jm};class Gi{constructor(n){this.id=n}get value(){return this.id}equals(n){return n instanceof Gi?this.id===n.id:!!n&&this.termType===n.termType&&this.value===n.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Km extends Gi{get termType(){return"NamedNode"}}class ms extends Gi{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const n=this.id;let s=n.lastIndexOf('"')+1;return s<n.length&&n[s++]==="@"?n.substr(s).toLowerCase():""}get datatype(){return new Km(this.datatypeString)}get datatypeString(){const n=this.id,s=n.lastIndexOf('"')+1,i=s<n.length?n[s]:"";return i==="^"?n.substr(s+2):i!=="@"?No.string:V1.langString}equals(n){return n instanceof ms?this.id===n.id:!!n&&!!n.datatype&&this.termType===n.termType&&this.value===n.value&&this.language===n.language&&this.datatype.value===n.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class $1 extends Gi{constructor(n){super(`_:${n}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class J1 extends Gi{constructor(n){super(`?${n}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class W1 extends Gi{constructor(){return super(""),Ts||this}get termType(){return"DefaultGraph"}equals(n){return this===n||!!n&&this.termType===n.termType}}Ts=new W1;function Fu(a,n,s){if(n=n||Yn,!a)return n.defaultGraph();switch(a[0]){case"?":return n.variable(a.substr(1));case"_":return n.blankNode(a.substr(2));case'"':if(n===Yn)return new ms(a);if(a[a.length-1]==='"')return n.literal(a.substr(1,a.length-2));const i=a.lastIndexOf('"',a.length-1);return n.literal(a.substr(1,i-1),a[i+1]==="@"?a.substr(i+2):n.namedNode(a.substr(i+3)));case"[":a=JSON.parse(a);break;default:if(!s||!Array.isArray(a))return n.namedNode(a)}return n.quad(Fu(a[0],n,!0),Fu(a[1],n,!0),Fu(a[2],n,!0),a[3]&&Fu(a[3],n,!0))}function ys(a,n){if(typeof a=="string")return a;if(a instanceof Gi&&a.termType!=="Quad")return a.id;if(!a)return Ts.id;switch(a.termType){case"NamedNode":return a.value;case"BlankNode":return`_:${a.value}`;case"Variable":return`?${a.value}`;case"DefaultGraph":return"";case"Literal":return`"${a.value}"${a.language?`@${a.language}`:a.datatype&&a.datatype.value!==No.string?`^^${a.datatype.value}`:""}`;case"Quad":const s=[ys(a.subject,!0),ys(a.predicate,!0),ys(a.object,!0)];return a.graph&&a.graph.termType!=="DefaultGraph"&&s.push(ys(a.graph,!0)),n?s:JSON.stringify(s);default:throw new Error(`Unexpected termType: ${a.termType}`)}}class qm extends Gi{constructor(n,s,i,d){super(""),this._subject=n,this._predicate=s,this._object=i,this._graph=d||Ts}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(n){return!!n&&this._subject.equals(n.subject)&&this._predicate.equals(n.predicate)&&this._object.equals(n.object)&&this._graph.equals(n.graph)}}function zm(a){return new Km(a)}function Vm(a){return new $1(a||`n3-${G1++}`)}function Gm(a,n){if(typeof n=="string")return new ms(`"${a}"@${n.toLowerCase()}`);let s=n?n.value:"";return s===""&&(typeof a=="boolean"?s=No.boolean:typeof a=="number"&&(Number.isFinite(a)?s=Number.isInteger(a)?No.integer:No.double:(s=No.double,Number.isNaN(a)||(a=a>0?"INF":"-INF")))),s===""||s===No.string?new ms(`"${a}"`):new ms(`"${a}"^^${s}`)}function $m(a){return new J1(a)}function Y1(){return Ts}function sh(a,n,s,i){return new qm(a,n,s,i)}function Nu(a){if(a instanceof Gi)return a;switch(a.termType){case"NamedNode":return zm(a.value);case"BlankNode":return Vm(a.value);case"Variable":return $m(a.value);case"DefaultGraph":return Ts;case"Literal":return Gm(a.value,a.language||a.datatype);case"Quad":return Jm(a);default:throw new Error(`Unexpected termType: ${a.termType}`)}}function Jm(a){if(a instanceof qm)return a;if(a.termType!=="Quad")throw new Error(`Unexpected termType: ${a.termType}`);return sh(Nu(a.subject),Nu(a.predicate),Nu(a.object),Nu(a.graph))}let L0=0;class Wm{constructor(n){this._contextStack=[],this._graph=null,n=n||{},this._setBase(n.baseIRI),n.factory&&Ym(this,n.factory);const s=typeof n.format=="string"?n.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(s),d=/trig/.test(s),y=/triple/.test(s),p=/quad/.test(s),g=this._n3Mode=/n3/.test(s),E=y||p;(this._supportsNamedGraphs=!(i||g))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||d||y||g),this._isImpliedBy=n.isImpliedBy,this._supportsRDFStar=s===""||/star|\*$/.test(s),E&&(this._resolveRelativeIRI=m=>null),this._blankNodePrefix=typeof n.blankNodePrefix!="string"?"":n.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=n.lexer||new z1({lineMode:E,n3:g,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!n.explicitQuantifiers}static _resetBlankNodePrefix(){L0=0}_setBase(n){if(!n)this._base="",this._basePath="";else{const s=n.indexOf("#");s>=0&&(n=n.substr(0,s)),this._base=n,this._basePath=n.indexOf("/")<0?n:n.replace(/[^\/?]*(?:\?.*)?$/,""),n=n.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=n[0],this._baseScheme=n[1]}}_saveContext(n,s,i,d,y){const p=this._n3Mode;this._contextStack.push({type:n,subject:i,predicate:d,object:y,graph:s,inverse:p?this._inversePredicate:!1,blankPrefix:p?this._prefixes._:"",quantified:p?this._quantified:null}),p&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(n,s){const i=this._contextStack.pop();if(!i||i.type!==n)return this._error(`Unexpected ${s.type}`,s);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(n){switch(n.type){case"eof":return this._graph!==null?this._error("Unclosed graph",n):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(n)}}_readEntity(n,s){let i;switch(n.type){case"IRI":case"typeIRI":const d=this._resolveIRI(n.value);if(d===null)return this._error("Invalid IRI",n);i=this._factory.namedNode(d);break;case"type":case"prefixed":const y=this._prefixes[n.prefix];if(y===void 0)return this._error(`Undefined prefix "${n.prefix}:"`,n);i=this._factory.namedNode(y+n.value);break;case"blank":i=this._factory.blankNode(this._prefixes[n.prefix]+n.value);break;case"var":i=this._factory.variable(n.value.substr(1));break;default:return this._error(`Expected entity but got ${n.type}`,n)}return!s&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(n){switch(this._predicate=null,n.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",n);case"}":return this._readPunctuation(n);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',n);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',n);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",n);if(n.prefix.length===0)return this._literalValue=n.value,this._completeSubjectLiteral;this._subject=this._factory.literal(n.value,this._factory.namedNode(n.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",n);default:if((this._subject=this._readEntity(n))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(n){const s=n.type;switch(s){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[n.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${s}`,n):(this._subject=null,s==="]"?this._readBlankNodeTail(n):this._readPunctuation(n));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",n);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",n);default:if((this._predicate=this._readEntity(n))===void 0)return}return this._readObject}_readObject(n){switch(n.type){case"literal":if(n.prefix.length===0)return this._literalValue=n.value,this._readDataTypeOrLang;this._object=this._factory.literal(n.value,this._factory.namedNode(n.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",n);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",n);default:if((this._object=this._readEntity(n))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(n){return n.type==="{"?this._readGraph(n):this._readPredicate(n)}_readGraph(n){return n.type!=="{"?this._error(`Expected graph but got ${n.type}`,n):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(n){return n.type==="]"?(this._subject=null,this._readBlankNodeTail(n)):(this._predicate=null,this._readPredicate(n))}_readBlankNodeTail(n){if(n.type!=="]")return this._readBlankNodePunctuation(n);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const s=this._predicate===null;return this._restoreContext("blank",n),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:s?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(n){switch(n.type){case".":case"}":return this._subject=null,this._readPunctuation(n);default:return this._readPredicate(n)}}_readListItem(n){let s=null,i=null,d=this._readListItem;const y=this._subject,p=this._contextStack,g=p[p.length-1];switch(n.type){case"[":this._saveContext("blank",this._graph,i=this._factory.blankNode(),this.RDF_FIRST,this._subject=s=this._factory.blankNode()),d=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",n),p.length!==0&&p[p.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(d=this._readPredicate,this._subject===this.RDF_NIL)return d}else if(d=this._getContextEndReader(),this._object===this.RDF_NIL)return d;i=this.RDF_NIL;break;case"literal":n.prefix.length===0?(this._literalValue=n.value,d=this._readListItemDataTypeOrLang):(s=this._factory.literal(n.value,this._factory.namedNode(n.prefix)),d=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",n);default:if((s=this._readEntity(n))===void 0)return}if(i===null&&(this._subject=i=this._factory.blankNode()),y===null?g.predicate===null?g.subject=i:g.object=i:this._emit(y,this.RDF_REST,i,this._graph),s!==null){if(this._n3Mode&&(n.type==="IRI"||n.type==="prefixed"))return this._saveContext("item",this._graph,i,this.RDF_FIRST,s),this._subject=s,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,s,this._graph)}return d}_readDataTypeOrLang(n){return this._completeObjectLiteral(n,!1)}_readListItemDataTypeOrLang(n){return this._completeObjectLiteral(n,!0)}_completeLiteral(n){let s=this._factory.literal(this._literalValue);switch(n.type){case"type":case"typeIRI":const i=this._readEntity(n);if(i===void 0)return;s=this._factory.literal(this._literalValue,i),n=null;break;case"langcode":s=this._factory.literal(this._literalValue,n.value),n=null;break}return{token:n,literal:s}}_completeSubjectLiteral(n){return this._subject=this._completeLiteral(n).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(n,s){const i=this._completeLiteral(n);if(i)return this._object=i.literal,s&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),i.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(n){return n.type!=="}"?this._readPunctuation(n):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",n),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(n){let s,i=this._graph;const d=this._subject,y=this._inversePredicate;switch(n.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",n);if(this._n3Mode)return this._readFormulaTail(n);this._graph=null;case".":this._subject=null,s=this._contextStack.length?this._readSubject:this._readInTopContext,y&&(this._inversePredicate=!1);break;case";":s=this._readPredicate;break;case",":s=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",n);const p=this._predicate,g=this._object;this._subject=this._factory.quad(d,p,g,this.DEFAULTGRAPH),s=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",n);this._subject=null,s=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(i=this._readEntity(n))!==void 0){s=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,n)}if(d!==null){const p=this._predicate,g=this._object;y?this._emit(g,p,d,i):this._emit(d,p,g,i)}return s}_readBlankNodePunctuation(n){let s;switch(n.type){case";":s=this._readPredicate;break;case",":s=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,n)}return this._emit(this._subject,this._predicate,this._object,this._graph),s}_readQuadPunctuation(n){return n.type!=="."?this._error("Expected dot to follow quad",n):this._readInTopContext}_readPrefix(n){return n.type!=="prefix"?this._error("Expected prefix to follow @prefix",n):(this._prefix=n.value,this._readPrefixIRI)}_readPrefixIRI(n){if(n.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,n);const s=this._readEntity(n);return this._prefixes[this._prefix]=s.value,this._prefixCallback(this._prefix,s),this._readDeclarationPunctuation}_readBaseIRI(n){const s=n.type==="IRI"&&this._resolveIRI(n.value);return s?(this._setBase(s),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",n)}_readNamedGraphLabel(n){switch(n.type){case"IRI":case"blank":case"prefixed":return this._readSubject(n),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",n)}}_readNamedGraphBlankLabel(n){return n.type!=="]"?this._error("Invalid graph label",n):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(n){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(n)):n.type!=="."?this._error("Expected declaration to end with a dot",n):this._readInTopContext}_readQuantifierList(n){let s;switch(n.type){case"IRI":case"prefixed":if((s=this._readEntity(n,!0))!==void 0)break;default:return this._error(`Unexpected ${n.type}`,n)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,s,this.QUANTIFIERS_GRAPH)):this._quantified[s.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(n){return n.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(n))}_getPathReader(n){return this._afterPath=n,this._readPath}_readPath(n){switch(n.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const s=this._contextStack,i=s.length&&s[s.length-1];if(i&&i.type==="item"){const d=this._subject;this._restoreContext("item",n),this._emit(this._subject,this.RDF_FIRST,d,this._graph)}return this._afterPath(n)}}_readForwardPath(n){let s,i;const d=this._factory.blankNode();if((i=this._readEntity(n))!==void 0)return this._predicate===null?(s=this._subject,this._subject=d):(s=this._object,this._object=d),this._emit(s,i,d,this._graph),this._readPath}_readBackwardPath(n){const s=this._factory.blankNode();let i,d;if((i=this._readEntity(n))!==void 0)return this._predicate===null?(d=this._subject,this._subject=s):(d=this._object,this._object=s),this._emit(s,i,d,this._graph),this._readPath}_readRDFStarTailOrGraph(n){return n.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(n))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,n):this._readRDFStarTail(n)}_readRDFStarTail(n){if(n.type!==">>")return this._error(`Expected >> but got ${n.type}`,n);const s=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",n),this._subject===null?(this._subject=s,this._readPredicate):(this._object=s,this._getContextEndReader())}_getContextEndReader(){const n=this._contextStack;if(!n.length)return this._readPunctuation;switch(n[n.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(n,s,i,d){this._callback(null,this._factory.quad(n,s,i,d||this.DEFAULTGRAPH))}_error(n,s){const i=new Error(`${n} on line ${s.line}.`);i.context={token:s,line:s.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=tc}_resolveIRI(n){return/^[a-z][a-z0-9+.-]*:/i.test(n)?n:this._resolveRelativeIRI(n)}_resolveRelativeIRI(n){if(!n.length)return this._base;switch(n[0]){case"#":return this._base+n;case"?":return this._base.replace(/(?:\?.*)?$/,n);case"/":return(n[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(n);default:return/^[^/:]*:/.test(n)?null:this._removeDotSegments(this._basePath+n)}}_removeDotSegments(n){if(!/(^|\/)\.\.?($|[/#?])/.test(n))return n;const s=n.length;let i="",d=-1,y=-1,p=0,g="/";for(;d<s;){switch(g){case":":if(y<0&&n[++d]==="/"&&n[++d]==="/")for(;(y=d+1)<s&&n[y]!=="/";)d=y;break;case"?":case"#":d=s;break;case"/":if(n[d+1]===".")switch(g=n[++d+1],g){case"/":i+=n.substring(p,d-1),p=d+1;break;case void 0:case"?":case"#":return i+n.substring(p,d)+n.substr(d+1);case".":if(g=n[++d+1],g===void 0||g==="/"||g==="?"||g==="#"){if(i+=n.substring(p,d-2),(p=i.lastIndexOf("/"))>=y&&(i=i.substr(0,p)),g!=="/")return`${i}/${n.substr(d+1)}`;p=d+1}}}g=n[++d]}return i+n.substring(p)}parse(n,s,i){let d,y,p;if(s&&(s.onQuad||s.onPrefix||s.onComment)?(d=s.onQuad,y=s.onPrefix,p=s.onComment):(d=s,y=i),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${L0++}_`,this._prefixCallback=y||tc,this._inversePredicate=!1,this._quantified=Object.create(null),!d){const E=[];let m;if(this._callback=(_,S)=>{_?m=_:S&&E.push(S)},this._lexer.tokenize(n).every(_=>this._readCallback=this._readCallback(_)),m)throw m;return E}let g=(E,m)=>{E!==null?(this._callback(E),this._callback=tc):this._readCallback&&(this._readCallback=this._readCallback(m))};p&&(this._lexer.comments=!0,g=(E,m)=>{E!==null?(this._callback(E),this._callback=tc):this._readCallback&&(m.type==="comment"?p(m.value):this._readCallback=this._readCallback(m))}),this._callback=d,this._lexer.tokenize(n,g)}}function tc(){}function Ym(a,n){a._factory=n,a.DEFAULTGRAPH=n.defaultGraph(),a.RDF_FIRST=n.namedNode(Or.rdf.first),a.RDF_REST=n.namedNode(Or.rdf.rest),a.RDF_NIL=n.namedNode(Or.rdf.nil),a.N3_FORALL=n.namedNode(Or.r.forAll),a.N3_FORSOME=n.namedNode(Or.r.forSome),a.ABBREVIATIONS={a:n.namedNode(Or.rdf.type),"=":n.namedNode(Or.owl.sameAs),">":n.namedNode(Or.log.implies),"<":n.namedNode(Or.log.isImpliedBy)},a.QUANTIFIERS_GRAPH=n.namedNode("urn:n3:quantifiers")}Ym(Wm.prototype,Yn);function uh(a){return!!a&&a.termType==="DefaultGraph"}function oc(a){return a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const Q1=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,X1=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,M0="./",Z1="../",Wd="?",B0="#";class Th{constructor(n){this.base=n,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(n.length+1)}static supports(n){return!Q1.test(n)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!Th.supports(this.base))return this._baseMatcher=/.^/;const n=/^[^:]*:\/*/.exec(this.base)[0],s=["^",oc(n)],i=[],d=[],y=/[^/?#]*([/?#])/y;let p,g=0,E=0,m=y.lastIndex=n.length;for(;!g&&!E&&(p=y.exec(this.base));)p[1]===B0?E=y.lastIndex-1:(s.push(oc(p[0]),"(?:"),i.push(")?"),p[1]!==Wd?d.push(m=y.lastIndex):(g=m=y.lastIndex,E=this.base.indexOf(B0,g),this._pathReplacements[g]=Wd));for(let _=0;_<d.length;_++)this._pathReplacements[d[_]]=Z1.repeat(d.length-_-1);return this._pathReplacements[d[d.length-1]]=M0,this._baseLength=E>0?E:this.base.length,s.push(oc(this.base.substring(m,this._baseLength)),g?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...s,...i].join(""))}toRelative(n){const s=this._getBaseMatcher().exec(n);if(!s)return n;const i=s[0].length;if(i===this._baseLength&&i===n.length)return"";const d=this._pathReplacements[i];if(d){const y=n.substring(i);return d!==Wd&&!X1.test(y)?n:d===M0&&/^[^?#]/.test(y)?y:d+y}return n.substring(i-1)}}const Tu=Yn.defaultGraph(),{rdf:eS,xsd:hs}=Or,H0=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,K0=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,tS={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Au extends Gi{equals(n){return n===this}}class Ah{constructor(n,s){if(this._prefixRegex=/$0^/,n&&typeof n.write!="function"&&(s=n,n=null),s=s||{},this._lists=s.lists,n)this._outputStream=n,this._endStream=s.end===void 0?!0:!!s.end;else{let i="";this._outputStream={write(d,y,p){i+=d,p&&p()},end:d=>{d&&d(null,i)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(s.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Tu,this._prefixIRIs=Object.create(null),s.prefixes&&this.addPrefixes(s.prefixes),s.baseIRI&&(this._baseIri=new Th(s.baseIRI)))}get _inDefaultGraph(){return Tu.equals(this._graph)}_write(n,s){this._outputStream.write(n,"utf8",s)}_writeQuad(n,s,i,d,y){try{d.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Tu.equals(d)?"":`${this._encodeIriOrBlank(d)} {
`)),this._graph=d,this._subject=null),n.equals(this._subject)?s.equals(this._predicate)?this._write(`, ${this._encodeObject(i)}`,y):this._write(`;
    ${this._encodePredicate(this._predicate=s)} ${this._encodeObject(i)}`,y):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=n)} ${this._encodePredicate(this._predicate=s)} ${this._encodeObject(i)}`,y)}catch(p){y&&y(p)}}_writeQuadLine(n,s,i,d,y){delete this._prefixMatch,this._write(this.quadToString(n,s,i,d),y)}quadToString(n,s,i,d){return`${this._encodeSubject(n)} ${this._encodeIriOrBlank(s)} ${this._encodeObject(i)}${d&&d.value?` ${this._encodeIriOrBlank(d)} .
`:` .
`}`}quadsToString(n){let s="";for(const i of n)s+=this.quadToString(i.subject,i.predicate,i.object,i.graph);return s}_encodeSubject(n){return n.termType==="Quad"?this._encodeQuad(n):this._encodeIriOrBlank(n)}_encodeIriOrBlank(n){if(n.termType!=="NamedNode")return this._lists&&n.value in this._lists&&(n=this.list(this._lists[n.value])),"id"in n?n.id:`_:${n.value}`;let s=n.value;this._baseIri&&(s=this._baseIri.toRelative(s)),H0.test(s)&&(s=s.replace(K0,q0));const i=this._prefixRegex.exec(s);return i?i[1]?this._prefixIRIs[i[1]]+i[2]:s:`<${s}>`}_encodeLiteral(n){let s=n.value;if(H0.test(s)&&(s=s.replace(K0,q0)),n.language)return`"${s}"@${n.language}`;if(this._lineMode){if(n.datatype.value===hs.string)return`"${s}"`}else switch(n.datatype.value){case hs.string:return`"${s}"`;case hs.boolean:if(s==="true"||s==="false")return s;break;case hs.integer:if(/^[+-]?\d+$/.test(s))return s;break;case hs.decimal:if(/^[+-]?\d*\.\d+$/.test(s))return s;break;case hs.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(s))return s;break}return`"${s}"^^${this._encodeIriOrBlank(n.datatype)}`}_encodePredicate(n){return n.value===eS.type?"a":this._encodeIriOrBlank(n)}_encodeObject(n){switch(n.termType){case"Quad":return this._encodeQuad(n);case"Literal":return this._encodeLiteral(n);default:return this._encodeIriOrBlank(n)}}_encodeQuad({subject:n,predicate:s,object:i,graph:d}){return`<<${this._encodeSubject(n)} ${this._encodePredicate(s)} ${this._encodeObject(i)}${uh(d)?"":` ${this._encodeIriOrBlank(d)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(n,s,i,d,y){i===void 0?this._writeQuad(n.subject,n.predicate,n.object,n.graph,s):typeof d=="function"?this._writeQuad(n,s,i,Tu,d):this._writeQuad(n,s,i,d||Tu,y)}addQuads(n){for(let s=0;s<n.length;s++)this.addQuad(n[s])}addPrefix(n,s,i){const d={};d[n]=s,this.addPrefixes(d,i)}addPrefixes(n,s){if(!this._prefixIRIs)return s&&s();let i=!1;for(let d in n){let y=n[d];typeof y!="string"&&(y=y.value),i=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[y]=d+=":",this._write(`@prefix ${d} <${y}>.
`)}if(i){let d="",y="";for(const p in this._prefixIRIs)d+=d?`|${p}`:p,y+=(y?"|":"")+this._prefixIRIs[p];d=oc(d),this._prefixRegex=new RegExp(`^(?:${y})[^/]*$|^(${d})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(i?`
`:"",s)}blank(n,s){let i=n,d,y;switch(n===void 0?i=[]:n.termType?i=[{predicate:n,object:s}]:"length"in n||(i=[n]),y=i.length){case 0:return new Au("[]");case 1:if(d=i[0],!(d.object instanceof Au))return new Au(`[ ${this._encodePredicate(d.predicate)} ${this._encodeObject(d.object)} ]`);default:let p="[";for(let g=0;g<y;g++)d=i[g],d.predicate.equals(n)?p+=`, ${this._encodeObject(d.object)}`:(p+=`${(g?`;
  `:`
  `)+this._encodePredicate(d.predicate)} ${this._encodeObject(d.object)}`,n=d.predicate);return new Au(`${p}
]`)}}list(n){const s=n&&n.length||0,i=new Array(s);for(let d=0;d<s;d++)i[d]=this._encodeObject(n[d]);return new Au(`(${i.join(" ")})`)}end(n){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let s=n&&((i,d)=>{s=null,n(i,d)});if(this._endStream)try{return this._outputStream.end(s)}catch{}s&&s()}}function q0(a){let n=tS[a];return n===void 0&&(a.length===1?(n=a.charCodeAt(0).toString(16),n="\\u0000".substr(0,6-n.length)+n):(n=((a.charCodeAt(0)-55296)*1024+a.charCodeAt(1)+9216).toString(16),n="\\U00000000".substr(0,10-n.length)+n)),n}var Qm=k1();const Yd=Symbol("iter");function Ou(a,n,s=4){if(s===0)return Object.assign(a,n);for(const i in n)a[i]=Ou(a[i]||Object.create(null),n[i],s-1);return a}function Xm(a,n,s=4){let i=!1;for(const d in a)if(d in n){const y=s===0?null:Xm(a[d],n[d],s-1);if(y!==!1)i=i||Object.create(null),i[d]=y;else if(s===3)return!1}return i}function Zm(a,n,s=4){let i=!1;for(const d in a)if(!(d in n))i=i||Object.create(null),i[d]=s===0?null:Ou({},a[d],s-1);else if(s!==0){const y=Zm(a[d],n[d],s-1);if(y!==!1)i=i||Object.create(null),i[d]=y;else if(s===3)return!1}return i}class nS{constructor(n={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=n.factory||Yn}_termFromId(n){if(n[0]==="."){const s=this._entities,i=n.split(".");return this._factory.quad(this._termFromId(s[i[1]]),this._termFromId(s[i[2]]),this._termFromId(s[i[3]]),i[4]&&this._termFromId(s[i[4]]))}return Fu(n,this._factory)}_termToNumericId(n){if(n.termType==="Quad"){const s=this._termToNumericId(n.subject),i=this._termToNumericId(n.predicate),d=this._termToNumericId(n.object);let y;return s&&i&&d&&(uh(n.graph)||(y=this._termToNumericId(n.graph)))&&this._ids[y?`.${s}.${i}.${d}.${y}`:`.${s}.${i}.${d}`]}return this._ids[ys(n)]}_termToNewNumericId(n){const s=n&&n.termType==="Quad"?`.${this._termToNewNumericId(n.subject)}.${this._termToNewNumericId(n.predicate)}.${this._termToNewNumericId(n.object)}${uh(n.graph)?"":`.${this._termToNewNumericId(n.graph)}`}`:ys(n);return this._ids[s]||(this._ids[this._entities[++this._id]=s]=this._id)}createBlankNode(n){let s,i;if(n)for(s=n=`_:${n}`,i=1;this._ids[s];)s=n+i++;else do s=`_:b${this._blankNodeIndex++}`;while(this._ids[s]);return this._ids[s]=++this._id,this._entities[this._id]=s,this._factory.blankNode(s.substr(2))}}class ri{constructor(n,s){this._size=0,this._graphs=Object.create(null),!s&&n&&!n[0]&&typeof n.match!="function"&&(s=n,n=null),s=s||{},this._factory=s.factory||Yn,this._entityIndex=s.entityIndex||new nS({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),n&&this.addAll(n)}get size(){let n=this._size;if(n!==null)return n;n=0;const s=this._graphs;let i,d;for(const y in s)for(const p in i=s[y].subjects)for(const g in d=i[p])n+=Object.keys(d[g]).length;return this._size=n}_addToIndex(n,s,i,d){const y=n[s]||(n[s]={}),p=y[i]||(y[i]={}),g=d in p;return g||(p[d]=null),!g}_removeFromIndex(n,s,i,d){const y=n[s],p=y[i];delete p[d];for(const g in p)return;delete y[i];for(const g in y)return;delete n[s]}*_findInIndex(n,s,i,d,y,p,g,E){let m,_,S;const D=this._entities,M=this._termFromId(D[E]),C={subject:null,predicate:null,object:null};s&&((m=n,n={})[s]=m[s]);for(const O in n)if(_=n[O]){C[y]=this._termFromId(D[O]),i&&((m=_,_={})[i]=m[i]);for(const U in _)if(S=_[U]){C[p]=this._termFromId(D[U]);const F=d?d in S?[d]:[]:Object.keys(S);for(let P=0;P<F.length;P++)C[g]=this._termFromId(D[F[P]]),yield this._factory.quad(C.subject,C.predicate,C.object,M)}}}_loop(n,s){for(const i in n)s(i)}_loopByKey0(n,s,i){let d,y;if(d=n[s])for(y in d)i(y)}_loopByKey1(n,s,i){let d,y;for(d in n)y=n[d],y[s]&&i(d)}_loopBy2Keys(n,s,i,d){let y,p,g;if((y=n[s])&&(p=y[i]))for(g in p)d(g)}_countInIndex(n,s,i,d){let y=0,p,g,E;s&&((p=n,n={})[s]=p[s]);for(const m in n)if(g=n[m]){i&&((p=g,g={})[i]=p[i]);for(const _ in g)(E=g[_])&&(d?d in E&&y++:y+=Object.keys(E).length)}return y}_getGraphs(n){return n=n===""?1:n&&(this._termToNumericId(n)||-1),typeof n!="number"?this._graphs:{[n]:this._graphs[n]}}_uniqueEntities(n){const s=Object.create(null);return i=>{i in s||(s[i]=!0,n(this._termFromId(this._entities[i],this._factory)))}}add(n){return this.addQuad(n),this}addQuad(n,s,i,d){s||(d=n.graph,i=n.object,s=n.predicate,n=n.subject),d=d?this._termToNewNumericId(d):1;let y=this._graphs[d];return y||(y=this._graphs[d]={subjects:{},predicates:{},objects:{}},Object.freeze(y)),n=this._termToNewNumericId(n),s=this._termToNewNumericId(s),i=this._termToNewNumericId(i),this._addToIndex(y.subjects,n,s,i)?(this._addToIndex(y.predicates,s,i,n),this._addToIndex(y.objects,i,n,s),this._size=null,!0):!1}addQuads(n){for(let s=0;s<n.length;s++)this.addQuad(n[s])}delete(n){return this.removeQuad(n),this}has(n,s,i,d){return n&&n.subject&&({subject:n,predicate:s,object:i,graph:d}=n),!this.readQuads(n,s,i,d).next().done}import(n){return n.on("data",s=>{this.addQuad(s)}),n}removeQuad(n,s,i,d){s||({subject:n,predicate:s,object:i,graph:d}=n),d=d?this._termToNumericId(d):1;const y=this._graphs;let p,g,E;if(!(n=n&&this._termToNumericId(n))||!(s=s&&this._termToNumericId(s))||!(i=i&&this._termToNumericId(i))||!(p=y[d])||!(g=p.subjects[n])||!(E=g[s])||!(i in E))return!1;this._removeFromIndex(p.subjects,n,s,i),this._removeFromIndex(p.predicates,s,i,n),this._removeFromIndex(p.objects,i,n,s),this._size!==null&&this._size--;for(n in p.subjects)return!0;return delete y[d],!0}removeQuads(n){for(let s=0;s<n.length;s++)this.removeQuad(n[s])}remove(n){return n.on("data",s=>{this.removeQuad(s)}),n}removeMatches(n,s,i,d){const y=new Qm.Readable({objectMode:!0}),p=this.readQuads(n,s,i,d);return y._read=g=>{for(;--g>=0;){const{done:E,value:m}=p.next();if(E){y.push(null);return}y.push(m)}},this.remove(y)}deleteGraph(n){return this.removeMatches(null,null,null,n)}getQuads(n,s,i,d){return[...this.readQuads(n,s,i,d)]}*readQuads(n,s,i,d){const y=this._getGraphs(d);let p,g,E,m;if(!(n&&!(g=this._termToNumericId(n))||s&&!(E=this._termToNumericId(s))||i&&!(m=this._termToNumericId(i))))for(const _ in y)(p=y[_])&&(g?m?yield*this._findInIndex(p.objects,m,g,E,"object","subject","predicate",_):yield*this._findInIndex(p.subjects,g,E,null,"subject","predicate","object",_):E?yield*this._findInIndex(p.predicates,E,m,null,"predicate","object","subject",_):m?yield*this._findInIndex(p.objects,m,null,null,"object","subject","predicate",_):yield*this._findInIndex(p.subjects,null,null,null,"subject","predicate","object",_))}match(n,s,i,d){return new so(this,n,s,i,d,{entityIndex:this._entityIndex})}countQuads(n,s,i,d){const y=this._getGraphs(d);let p=0,g,E,m,_;if(n&&!(E=this._termToNumericId(n))||s&&!(m=this._termToNumericId(s))||i&&!(_=this._termToNumericId(i)))return 0;for(const S in y)(g=y[S])&&(n?i?p+=this._countInIndex(g.objects,_,E,m):p+=this._countInIndex(g.subjects,E,m,_):s?p+=this._countInIndex(g.predicates,m,_,E):p+=this._countInIndex(g.objects,_,E,m));return p}forEach(n,s,i,d,y){this.some(p=>(n(p,this),!1),s,i,d,y)}every(n,s,i,d,y){return!this.some(p=>!n(p,this),s,i,d,y)}some(n,s,i,d,y){for(const p of this.readQuads(s,i,d,y))if(n(p,this))return!0;return!1}getSubjects(n,s,i){const d=[];return this.forSubjects(y=>{d.push(y)},n,s,i),d}forSubjects(n,s,i,d){const y=this._getGraphs(d);let p,g,E;if(n=this._uniqueEntities(n),!(s&&!(g=this._termToNumericId(s))||i&&!(E=this._termToNumericId(i))))for(d in y)(p=y[d])&&(g?E?this._loopBy2Keys(p.predicates,g,E,n):this._loopByKey1(p.subjects,g,n):E?this._loopByKey0(p.objects,E,n):this._loop(p.subjects,n))}getPredicates(n,s,i){const d=[];return this.forPredicates(y=>{d.push(y)},n,s,i),d}forPredicates(n,s,i,d){const y=this._getGraphs(d);let p,g,E;if(n=this._uniqueEntities(n),!(s&&!(g=this._termToNumericId(s))||i&&!(E=this._termToNumericId(i))))for(d in y)(p=y[d])&&(g?E?this._loopBy2Keys(p.objects,E,g,n):this._loopByKey0(p.subjects,g,n):E?this._loopByKey1(p.predicates,E,n):this._loop(p.predicates,n))}getObjects(n,s,i){const d=[];return this.forObjects(y=>{d.push(y)},n,s,i),d}forObjects(n,s,i,d){const y=this._getGraphs(d);let p,g,E;if(n=this._uniqueEntities(n),!(s&&!(g=this._termToNumericId(s))||i&&!(E=this._termToNumericId(i))))for(d in y)(p=y[d])&&(g?E?this._loopBy2Keys(p.subjects,g,E,n):this._loopByKey1(p.objects,g,n):E?this._loopByKey0(p.predicates,E,n):this._loop(p.objects,n))}getGraphs(n,s,i){const d=[];return this.forGraphs(y=>{d.push(y)},n,s,i),d}forGraphs(n,s,i,d){for(const y in this._graphs)this.some(p=>(n(p.graph),!0),s,i,d,this._termFromId(this._entities[y]))}createBlankNode(n){return this._entityIndex.createBlankNode(n)}extractLists({remove:n=!1,ignoreErrors:s=!1}={}){const i={},d=s?()=>!0:(g,E)=>{throw new Error(`${g.value} ${E}`)},y=this.getQuads(null,Or.rdf.rest,Or.rdf.nil,null),p=n?[...y]:[];return y.forEach(g=>{const E=[];let m=!1,_,S;const D=g.graph;let M=g.subject;for(;M&&!m;){const C=this.getQuads(null,null,M,null),O=this.getQuads(M,null,null,null);let U,F=null,P=null,I=null;for(let B=0;B<O.length&&!m;B++)U=O[B],U.graph.equals(D)?_?m=d(M,"has non-list arcs out"):U.predicate.value===Or.rdf.first?F?m=d(M,"has multiple rdf:first arcs"):p.push(F=U):U.predicate.value===Or.rdf.rest?P?m=d(M,"has multiple rdf:rest arcs"):p.push(P=U):C.length?m=d(M,"can't be subject and object"):(_=U,S="subject"):m=d(M,"not confined to single graph");for(let B=0;B<C.length&&!m;++B)U=C[B],_?m=d(M,"can't have coreferences"):U.predicate.value===Or.rdf.rest?I?m=d(M,"has incoming rdf:rest arcs"):I=U:(_=U,S="object");F?E.unshift(F.object):m=d(M,"has no list head"),M=I&&I.subject}m?n=!1:_&&(i[_[S].value]=E)}),n&&this.removeQuads(p),i}addAll(n){if(n instanceof so&&(n=n.filtered),Array.isArray(n))this.addQuads(n);else if(n instanceof ri&&n._entityIndex===this._entityIndex)n._size!==0&&(this._graphs=Ou(this._graphs,n._graphs),this._size=null);else for(const s of n)this.add(s);return this}contains(n){if(n instanceof so&&(n=n.filtered),n===this)return!0;if(!(n instanceof ri)||this._entityIndex!==n._entityIndex)return n.every(m=>this.has(m));const s=this._graphs,i=n._graphs;let d,y,p,g,E;for(const m in i){if(!(d=s[m]))return!1;d=d.subjects;for(const _ in y=i[m].subjects){if(!(p=d[_]))return!1;for(const S in g=y[_]){if(!(E=p[S]))return!1;for(const D in g[S])if(!(D in E))return!1}}}return!0}deleteMatches(n,s,i,d){for(const y of this.match(n,s,i,d))this.removeQuad(y);return this}difference(n){if(n&&n instanceof so&&(n=n.filtered),n===this)return new ri({entityIndex:this._entityIndex});if(n instanceof ri&&n._entityIndex===this._entityIndex){const s=new ri({entityIndex:this._entityIndex}),i=Zm(this._graphs,n._graphs);return i&&(s._graphs=i,s._size=null),s}return this.filter(s=>!n.has(s))}equals(n){return n instanceof so&&(n=n.filtered),n===this||this.size===n.size&&this.contains(n)}filter(n){const s=new ri({entityIndex:this._entityIndex});for(const i of this)n(i,this)&&s.add(i);return s}intersection(n){if(n instanceof so&&(n=n.filtered),n===this){const s=new ri({entityIndex:this._entityIndex});return s._graphs=Ou(Object.create(null),this._graphs),s._size=this._size,s}else if(n instanceof ri&&this._entityIndex===n._entityIndex){const s=new ri({entityIndex:this._entityIndex}),i=Xm(n._graphs,this._graphs);return i&&(s._graphs=i,s._size=null),s}return this.filter(s=>n.has(s))}map(n){const s=new ri({entityIndex:this._entityIndex});for(const i of this)s.add(n(i,this));return s}reduce(n,s){const i=this.readQuads();let d=s===void 0?i.next().value:s;for(const y of i)d=n(d,y,this);return d}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new Ah().quadsToString(this)}union(n){const s=new ri({entityIndex:this._entityIndex});return s._graphs=Ou(Object.create(null),this._graphs),s._size=this._size,s.addAll(n),s}*[Symbol.iterator](){yield*this.readQuads()}}function aa(a,n,s=0){const i=n[s];if(i&&!(i in a))return!1;let d=!1;for(const y in i?{[i]:a[i]}:a){const p=s===2?null:aa(a[y],n,s+1);p!==!1&&(d=d||Object.create(null),d[y]=p)}return d}class so extends Qm.Readable{constructor(n,s,i,d,y,p){super({objectMode:!0}),Object.assign(this,{n3Store:n,subject:s,predicate:i,object:d,graph:y,options:p})}get filtered(){if(!this._filtered){const{n3Store:n,graph:s,object:i,predicate:d,subject:y}=this,p=this._filtered=new ri({factory:n._factory,entityIndex:this.options.entityIndex});let g,E,m;if(y&&!(g=p._termToNumericId(y))||d&&!(E=p._termToNumericId(d))||i&&!(m=p._termToNumericId(i)))return p;const _=n._getGraphs(s);for(const S in _){let D,M,C,O;(O=_[S])&&(!g&&E?(M=aa(O.predicates,[E,m,g]))&&(D=aa(O.subjects,[g,E,m]),C=aa(O.objects,[m,g,E])):m?(C=aa(O.objects,[m,g,E]))&&(D=aa(O.subjects,[g,E,m]),M=aa(O.predicates,[E,m,g])):(D=aa(O.subjects,[g,E,m]))&&(M=aa(O.predicates,[E,m,g]),C=aa(O.objects,[m,g,E])),D&&(p._graphs[S]={subjects:D,predicates:M,objects:C}))}p._size=null}return this._filtered}get size(){return this.filtered.size}_read(n){n>0&&!this[Yd]&&(this[Yd]=this[Symbol.iterator]());const s=this[Yd];for(;--n>=0;){const{done:i,value:d}=s.next();if(i){this.push(null);return}this.push(d)}}addAll(n){return this.filtered.addAll(n)}contains(n){return this.filtered.contains(n)}deleteMatches(n,s,i,d){return this.filtered.deleteMatches(n,s,i,d)}difference(n){return this.filtered.difference(n)}equals(n){return this.filtered.equals(n)}every(n,s,i,d,y){return this.filtered.every(n,s,i,d,y)}filter(n){return this.filtered.filter(n)}forEach(n,s,i,d,y){return this.filtered.forEach(n,s,i,d,y)}import(n){return this.filtered.import(n)}intersection(n){return this.filtered.intersection(n)}map(n){return this.filtered.map(n)}some(n,s,i,d,y){return this.filtered.some(n,s,i,d,y)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(n){return this._filtered?this._filtered.union(n):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(n)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(n,s){return this.filtered.reduce(n,s)}toString(){return new Ah().quadsToString(this)}add(n){return this.filtered.add(n)}delete(n){return this.filtered.delete(n)}has(n){return this.filtered.has(n)}match(n,s,i,d){return new so(this.filtered,n,s,i,d,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}const rS=()=>{const a=[],n=[],s=[];return{onQuad:i=>{a.push(i)},onError:i=>{s.push(i)},onComplete:i=>{n.push(i)},parse:(i,d)=>{iS(Jr(d)).parse(i,(y,p)=>{y?s.forEach(g=>g(y)):p?a.forEach(g=>g(p)):n.forEach(g=>g())})}}};function iS(a){return new Wm({format:"text/turtle",baseIRI:a})}async function cc(a,n){const s="text/turtle",i=new Ah({format:s,prefixes:n?.prefixes}),d=a.map(g=>Yn.quad(g.subject,g.predicate,g.object,void 0));return i.addQuads(d),await new Promise((g,E)=>{i.end((m,_)=>{m?E(m):g(_)})})}const fc="https://inrupt.com/.well-known/sdk-local-node/",{freeze:Jt}=Object;function Vi(a){return a.substring(0,fc.length)===fc}function Oi(a){return a.substring(fc.length)}function aS(a){return`${fc}${a}`}function bc(a){return typeof a=="string"&&a.substring(0,2)==="_:"}function Rh(a){return a.substring(2)}function oS(a){return`_:${a.value}`}const Ra={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function sS(a){return a==="true"||a==="1"?!0:a==="false"||a==="0"?!1:null}function uS(a){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(a))return null;const[s,i]=a.split("T"),[d,y]=s.charAt(0)==="-"?[-1,s.substring(1)]:[1,s],[p,g,E]=y.split("-"),m=Number.parseInt(p,10)*d,_=Number.parseInt(g,10)-1,S=Number.parseInt(E,10),[D,M]=lS(i),[C,O]=typeof M=="string"?cS(M):[0,0],[U,F,P]=D.split(":"),I=Number.parseInt(U,10)+C,B=Number.parseInt(F,10)+O,[z,Y]=P.split("."),Q=Number.parseInt(z,10),ve=Y?Number.parseInt(Y,10):0,qe=new Date(Date.UTC(m,_,S,I,B,Q,ve));return m>=0&&m<100&&qe.setUTCFullYear(qe.getUTCFullYear()-1900),qe}function lS(a){if(a.endsWith("Z"))return[a.substring(0,a.length-1),"Z"];const n=a.split("+"),s=a.split("-");return n.length===1&&s.length===1?[n[0],void 0]:n.length>s.length?[n[0],`+${n[1]}`]:[s[0],`-${s[1]}`]}function cS(a){if(a==="Z")return[0,0];const n=a.charAt(0)==="+"?1:-1,[s,i]=a.substring(1).split(":"),d=Number.parseInt(s,10),y=Number.parseInt(i,10);return[d*n,y*n]}function fS(a){const n=Number.parseFloat(a);return Number.isNaN(n)?null:n}function dS(a){const n=Number.parseInt(a,10);return Number.isNaN(n)?null:n}function ai(a){return ev(a)&&a.termType==="NamedNode"}function hS(a){return ev(a)&&a.termType==="Literal"}function ev(a){return a!==null&&typeof a=="object"&&typeof a.termType=="string"&&typeof a.value=="string"&&typeof a.equals=="function"}function z0(a){return ai(a)&&Vi(a.value)}function Di(a){const n=tr(a);if(typeof URL!="function")return!0;try{return new URL(n),!0}catch{return!1}}function V0(a,n){return Yn.namedNode(Hu(Oi(a.value),n))}function Hu(a,n){if(typeof URL!="function")throw new Error("The URL interface is not available, so an IRI cannot be determined.");const s=new URL(n);return s.hash=a,s.href}function pS(a,n){var s;if(!["NamedNode","DefaultGraph"].includes(n.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${n.graph.termType}] as their Graph node.`);const d=n.graph.termType==="DefaultGraph"?"default":n.graph.value,y=(s=a.graphs[d])!==null&&s!==void 0?s:{};return Jt({...a,graphs:Jt({...a.graphs,[d]:gS(y,n)})})}function gS(a,n){var s;if(!["NamedNode","BlankNode"].includes(n.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${n.subject.termType}] as their Subject node.`);const d=n.subject.termType==="BlankNode"?`_:${n.subject.value}`:n.subject.value,y=(s=a[d])!==null&&s!==void 0?s:{type:"Subject",url:d,predicates:{}};return Jt({...a,[d]:yS(y,n)})}function yS(a,n){return Jt({...a,predicates:mS(a.predicates,n)})}function mS(a,n){var s;if(!["NamedNode"].includes(n.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${n.predicate.termType}] as their Predicate node.`);const d=n.predicate.value,y=(s=a[d])!==null&&s!==void 0?s:{};return Jt({...a,[d]:vS(y,n)})}function vS(a,n){var s,i,d,y,p,g,E,m;if(n.object.termType==="NamedNode"){const _=Jt([...(s=a.namedNodes)!==null&&s!==void 0?s:[],n.object.value]);return Jt({...a,namedNodes:_})}if(n.object.termType==="Literal"){if(n.object.datatype.value===Ra.langString){const D=n.object.language.toLowerCase(),M=Jt([...(d=(i=a.langStrings)===null||i===void 0?void 0:i[D])!==null&&d!==void 0?d:[],n.object.value]),C=Jt({...(y=a.langStrings)!==null&&y!==void 0?y:{},[D]:M});return Jt({...a,langStrings:C})}const _=Jt([...(g=(p=a.literals)===null||p===void 0?void 0:p[n.object.datatype.value])!==null&&g!==void 0?g:[],n.object.value]),S=Jt({...(E=a.literals)!==null&&E!==void 0?E:{},[n.object.datatype.value]:_});return Jt({...a,literals:S})}if(n.object.termType==="BlankNode"){const _=Jt([...(m=a.blankNodes)!==null&&m!==void 0?m:[],oS(n.object)]);return Jt({...a,blankNodes:_})}throw new Error(`Objects of type [${n.object.termType}] are not supported.`)}function tv(a,n={}){var s;const i=[],d=(s=n.dataFactory)!==null&&s!==void 0?s:Yn;return Object.keys(a.graphs).forEach(y=>{const p=a.graphs[y],g=y==="default"?d.defaultGraph():d.namedNode(y);Object.keys(p).forEach(E=>{const{predicates:m}=p[E],_=bc(E)?d.blankNode(Rh(E)):d.namedNode(E);i.push(...ju(m,_,g,n))})}),i}function ju(a,n,s,i={}){var d;const y=[],p=(d=i.dataFactory)!==null&&d!==void 0?d:Yn;return Object.keys(a).forEach(g=>{var E,m,_,S;const D=p.namedNode(g),M=(E=a[g].langStrings)!==null&&E!==void 0?E:{},C=(m=a[g].namedNodes)!==null&&m!==void 0?m:[],O=(_=a[g].literals)!==null&&_!==void 0?_:{},U=(S=a[g].blankNodes)!==null&&S!==void 0?S:[];Object.keys(O).forEach(I=>{const B=p.namedNode(I);O[I].forEach(Y=>{const Q=p.literal(Y,B);y.push(p.quad(n,D,Q,s))})}),Object.keys(M).forEach(I=>{M[I].forEach(z=>{const Y=p.literal(z,I);y.push(p.quad(n,D,Y,s))})}),C.forEach(I=>{const B=p.namedNode(I);y.push(p.quad(n,D,B,s))}),U.forEach(I=>{if(bc(I)){const B=p.blankNode(Rh(I));y.push(p.quad(n,D,B,s))}else{const B=p.blankNode(),z=p.quad(n,D,B,s),Y=ju(I,B,s);y.push(z),y.push(...Y)}})}),y}function bS(a){const n={graphs:{default:{}},type:"Dataset"};return Array.from(a).reduce((s,i)=>pS(s,i),n)}async function _S(a,n){var s;const i=Mu(a)?tr(L1(a)):vc(tr(a),{trailingSlash:!1}),d=await((s=n?.fetch)!==null&&s!==void 0?s:fetch)(i,{...n?.init,method:"DELETE"});if(Es(d)){const y=await d.clone().text();throw new xs(`Deleting the file at [${i}] failed: [${d.status}] [${d.statusText}] ${y}.`,d,y)}}var Cr=[];for(var Qd=0;Qd<256;++Qd)Cr.push((Qd+256).toString(16).slice(1));function wS(a,n=0){return(Cr[a[n+0]]+Cr[a[n+1]]+Cr[a[n+2]]+Cr[a[n+3]]+"-"+Cr[a[n+4]]+Cr[a[n+5]]+"-"+Cr[a[n+6]]+Cr[a[n+7]]+"-"+Cr[a[n+8]]+Cr[a[n+9]]+"-"+Cr[a[n+10]]+Cr[a[n+11]]+Cr[a[n+12]]+Cr[a[n+13]]+Cr[a[n+14]]+Cr[a[n+15]]).toLowerCase()}var nc,SS=new Uint8Array(16);function ES(){if(!nc&&(nc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nc(SS)}var xS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const G0={randomUUID:xS};function TS(a,n,s){if(G0.randomUUID&&!a)return G0.randomUUID();a=a||{};var i=a.random||(a.rng||ES)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,wS(i)}function lh(a){var n,s,i,d,y,p,g,E;if(ai(a))return`<${a.value}> (URL)`;if(hS(a)){if(!ai(a.datatype))return`[${a.value}] (RDF/JS Literal of unknown type)`;let m;switch(a.datatype.value){case Ra.boolean:return m=(s=(n=sS(a.value))===null||n===void 0?void 0:n.valueOf())!==null&&s!==void 0?s:`Invalid data: \`${a.value}\``,`${m} (boolean)`;case Ra.dateTime:return m=(d=(i=uS(a.value))===null||i===void 0?void 0:i.toUTCString())!==null&&d!==void 0?d:`Invalid data: \`${a.value}\``,`${m} (datetime)`;case Ra.decimal:return m=(p=(y=fS(a.value))===null||y===void 0?void 0:y.toString())!==null&&p!==void 0?p:`Invalid data: \`${a.value}\``,`${m} (decimal)`;case Ra.integer:return m=(E=(g=dS(a.value))===null||g===void 0?void 0:g.toString())!==null&&E!==void 0?E:`Invalid data: \`${a.value}\``,`${m} (integer)`;case Ra.langString:return`"${a.value}" (${a.language} string)`;case Ra.string:return`"${a.value}" (string)`;default:return`[${a.value}] (RDF/JS Literal of type: \`${a.datatype.value}\`)`}}return a.termType==="BlankNode"?`[${a.value}] (RDF/JS BlankNode)`:a.termType==="Quad"?"??? (nested RDF* Quad)":a.termType==="Variable"?`?${a.value} (RDF/JS Variable)`:a}function $i(a){if(!kh(a))throw new PS(a)}function AS(a,n){const s=Ss(a)?a.internal_changeLog:{additions:[],deletions:[]},[i,d]=n.filter(y=>!rv(y)).reduce(([y,p],g)=>typeof p.find(m=>m.equals(g))<"u"?[y,p.filter(m=>!m.equals(g))]:[y.concat(g),p],[s.additions,s.deletions]);return Jt({...a,internal_changeLog:{additions:i,deletions:d}})}function nv(a,n){const s=Ss(a)?a.internal_changeLog:{additions:[],deletions:[]},[i,d]=n.filter(y=>!rv(y)).reduce(([y,p],g)=>typeof y.find(m=>m.equals(g))<"u"?[y.filter(m=>!m.equals(g)),p]:[y,p.concat(g)],[s.additions,s.deletions]);return Jt({...a,internal_changeLog:{additions:i,deletions:d}})}function RS(a){return Ss(a)?a:Jt({...a,internal_changeLog:{additions:[],deletions:[]}})}function rv(a){return a.subject.termType==="BlankNode"||a.object.termType==="BlankNode"}function kS(a,n){var s,i,d;if($i(a),!Di(n))throw new lo(n);const y=tr(n),p=(d=(i=(s=a.predicates[y])===null||s===void 0?void 0:s.namedNodes)===null||i===void 0?void 0:i[0])!==null&&d!==void 0?d:null;return p===null?null:Vi(p)?`#${Oi(p)}`:p}function FS(a,n){var s,i,d;if($i(a),!Di(n))throw new lo(n);const y=tr(n);return(d=(i=(s=a.predicates[y])===null||s===void 0?void 0:s.namedNodes)===null||i===void 0?void 0:i.map(p=>Vi(p)?`#${Oi(p)}`:p))!==null&&d!==void 0?d:[]}const NS=FS;function Ru(a,n){return $i(a),IS(a,n,Ra.string)}function CS(a,n){return NS(a,n).map(i=>Yn.namedNode(i))}function OS(a,n){var s,i,d,y;if($i(a),!Di(n))throw new lo(n);const p=tr(n);let g=[];const E=(i=(s=a.predicates[p])===null||s===void 0?void 0:s.langStrings)!==null&&i!==void 0?i:{},m=Object.keys(E);for(const D of m){const C=E[D].map(O=>Yn.literal(O,D));g=g.concat(C)}const _=(y=(d=a.predicates[p])===null||d===void 0?void 0:d.literals)!==null&&y!==void 0?y:{},S=Object.keys(_);for(const D of S){const M=_[D],C=Yn.namedNode(D),O=M.map(U=>Yn.literal(U,C));g=g.concat(O)}return g}function DS(a,n){var s,i;$i(a);const d=CS(a,n),y=OS(a,n),p=tr(n),E=((i=(s=a.predicates[p])===null||s===void 0?void 0:s.blankNodes)!==null&&i!==void 0?i:[]).map(_=>{const S=bc(_)?Rh(_):void 0;return Yn.blankNode(S)});return d.concat(y).concat(E)}function IS(a,n,s){var i,d,y,p;if(!Di(n))throw new lo(n);const g=tr(n);return(p=(y=(d=(i=a.predicates[g])===null||i===void 0?void 0:i.literals)===null||d===void 0?void 0:d[s])===null||y===void 0?void 0:y[0])!==null&&p!==void 0?p:null}function $0(a,n,s={}){var i;if(!Di(n)&&!n.match(/^_:/))throw new cv(n);const d=typeof s.scope<"u"?tr(s.scope):"default",y=(i=a.graphs[d])!==null&&i!==void 0?i:{},p=tr(n),g=Vi(p)&&Eh(a)?Hu(Oi(p),Jr(a)):p,E=y[g];return typeof E>"u"?null:E}function iv(a,n={acceptBlankNodes:!1}){var s;const i=typeof n.scope<"u"?tr(n.scope):"default",d=(s=a.graphs[i])!==null&&s!==void 0?s:{};return Object.values(d).filter(y=>!bc(y.url)||n.acceptBlankNodes)}function av(a,n){var s;const i=Ku(n)&&Eh(a)?Hu(Oi(n.url),Jr(a)):n.url,d=a.graphs.default,y=Jt({...d,[i]:Jt({...n,url:i})}),p=Jt({...a.graphs,default:y}),g=Yn.namedNode(i),E=(s=a.graphs.default[i])===null||s===void 0?void 0:s.predicates,m=typeof E<"u"?ju(E,g,Yn.defaultGraph()):[],_=ju(n.predicates,g,Yn.defaultGraph());return AS(nv(Jt({...a,graphs:p}),m),_)}function jS(a,n){var s;let i;ai(n)?i=n.value:typeof n=="string"?i=Vi(n)&&Eh(a)?Hu(Oi(n),Jr(a)):n:Ku(n)?i=n.url:i=uv(n);const y={...a.graphs.default};delete y[i];const p=Jt({...a.graphs,default:Jt(y)}),g=Yn.namedNode(i),E=(s=a.graphs.default[i])===null||s===void 0?void 0:s.predicates,m=typeof E<"u"?ju(E,g,Yn.defaultGraph()):[];return nv(Jt({...a,graphs:p}),m)}function ov(a={}){var n;if(typeof a.url<"u"){const{url:y}=a;if(!Di(y))throw new cv(y);return Jt({type:"Subject",predicates:Jt({}),url:y})}const s=(n=a.name)!==null&&n!==void 0?n:LS(),i=aS(s);return Jt({type:"Subject",predicates:Jt({}),url:i})}function kh(a){return typeof a=="object"&&a!==null&&typeof a.type=="string"&&a.type==="Subject"}function sv(a,n){if(Ku(a)){if(typeof n>"u")throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return Hu(Oi(a.url),n)}return a.url}const uv=sv;function US(a){let n="";Ku(a)?n+=`## Thing (no URL yet — identifier: \`#${Oi(a.url)}\`)
`:n+=`## Thing: ${a.url}
`;const s=Object.keys(a.predicates);if(s.length===0)n+=`
<empty>
`;else for(const i of s){n+=`
Property: ${i}
`;const d=DS(a,i);n+=d.reduce((y,p)=>`${y}- ${lh(p)}
`,"")}return n}function Ku(a){return Vi(a.url)}class PS extends Bu{constructor(n){const s=`Expected a Thing, but received: [${n}].`;super(s),this.receivedValue=n}}class lo extends Bu{constructor(n){const s=ai(n)?n.value:n,i=`Expected a valid URL to identify a property, but received: [${s}].`;super(i),this.receivedProperty=s}}class lv extends Bu{constructor(n){const s=ai(n)?n.value:n,i=`Expected a valid URL value, but received: [${s}].`;super(i),this.receivedValue=s}}class cv extends Bu{constructor(n){const s=ai(n)?n.value:n,i=`Expected a valid URL to identify a Thing, but received: [${s}].`;super(i),this.receivedValue=s}}const LS=()=>TS();function J0(a){const n=new URL(a);return n.hash="",n.href}function Fh(){return Jt({type:"Dataset",graphs:{default:{}}})}async function MS(a,n={}){if(Es(a)){const _=await a.clone().text();throw new xs(`Fetching the SolidDataset at [${a.url}] failed: [${a.status}] [${a.statusText}] ${_}.`,a,_)}const s=U1(a),i={"text/turtle":rS(),...n.parsers},d=P1(s);if(d===null)throw new Error(`Could not determine the content type of the Resource at [${Jr(s)}].`);const y=d.split(";")[0],p=i[y];if(typeof p>"u")throw new Error(`The Resource at [${Jr(s)}] has a MIME type of [${y}], but the only parsers available are for the following MIME types: [${Object.keys(i).join(", ")}].`);const g=await a.text(),E=await new Promise((_,S)=>{const D=new ri;p.onError(M=>{S(new Error(`Encountered an error parsing the Resource at [${Jr(s)}] with content type [${d}]: ${M}`))}),p.onQuad(M=>{D.add(M)}),p.onComplete(()=>{_(D)}),p.parse(g,s)}),m=Jt(bS(E));return Jt({...m,...s})}async function _c(a,n){var s,i;const d=vc(tr(a)),y=Object.keys((s=n?.parsers)!==null&&s!==void 0?s:{}),p=y.length>0?y.join(", "):"text/turtle",g=await((i=n?.fetch)!==null&&i!==void 0?i:fetch)(d,{headers:{Accept:p}});if(Es(g)){const m=await g.clone().text();throw new xs(`Fetching the Resource at [${d}] failed: [${g.status}] [${g.statusText}] ${m}.`,g,m)}return await MS(g,n)}async function BS(a){const n=a.internal_changeLog.deletions.length>0?`DELETE DATA {${(await cc(a.internal_changeLog.deletions.map(dc))).trim()}};`:"",s=a.internal_changeLog.additions.length>0?`INSERT DATA {${(await cc(a.internal_changeLog.additions.map(dc))).trim()}};`:"";return{method:"PATCH",body:`${n} ${s}`,headers:{"Content-Type":"application/sparql-update"}}}async function HS(a,n){return{method:"PUT",body:await cc(tv(a).map(dc),n),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${Hm.Resource}>; rel="type"`}}}async function Nh(a,n,s){var i;const d=vc(tr(a)),y=RS(n),p=W0(y,d)?await BS(y):await HS(y,s),g=await((i=s?.fetch)!==null&&i!==void 0?i:fetch)(d,p);if(Es(g)){const S=W0(y,d)?`The changes that were sent to the Pod are listed below.

${VS(y)}`:`The SolidDataset that was sent to the Pod is listed below.

${zS(y)}`,D=await g.clone().text();throw new xs(`Storing the Resource at [${d}] failed: [${g.status}] [${g.statusText}] ${D}.

${S}`,g,D)}const E={...xh(g),isRawData:!1},m=Jt({...n,internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:E});return JS(m)}async function KS(a,n={}){var s,i;const d=vc(tr(a),{trailingSlash:!0}),y=await((s=n.fetch)!==null&&s!==void 0?s:fetch)(d,{method:"PUT",body:n.initialContent?await cc(tv(n.initialContent).map(dc)):void 0,headers:{Accept:"text/turtle","Content-Type":"text/turtle","If-None-Match":"*",Link:`<${Hm.BasicContainer}>; rel="type"`}});if(Es(y)){const E=n.initialContent===void 0?"empty":"non-empty",m=await y.clone().text();throw new xs(`Creating the ${E} Container at [${a}] failed: [${y.status}] [${y.statusText}] ${m}.`,y,m)}const p=xh(y);return Jt({...(i=n.initialContent)!==null&&i!==void 0?i:Fh(),internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:p})}function qS(a,n){return J0(a.internal_resourceInfo.sourceIri)===J0(n)}function W0(a,n){return Ss(a)&&Mu(a)&&typeof a.internal_resourceInfo.sourceIri=="string"&&qS(a,n)}function zS(a){let n="";Mu(a)?n+=`# SolidDataset: ${Jr(a)}
`:n+=`# SolidDataset (no URL yet)
`;const s=iv(a);return s.length===0?n+=`
<empty>
`:s.forEach(i=>{n+=`
${US(i)}`,Ss(a)&&(n+=`
${$S(a,i)}
`)}),n}function VS(a){if(!Mu(a))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!Ss(a)||a.internal_changeLog.additions.length===0&&a.internal_changeLog.deletions.length===0)return`## Changes compared to ${Jr(a)}

This SolidDataset has not been modified since it was fetched from ${Jr(a)}.
`;let n=`## Changes compared to ${Jr(a)}
`;const s=GS(a);return Object.keys(s).forEach(i=>{n+=`
### Thing: ${i}
`;const d=s[i];Object.keys(d).forEach(y=>{n+=`
Property: ${y}
`;const{deleted:p}=d[y],{added:g}=d[y];p.length>0&&(n+=`- Removed:
`,n+=p.reduce((E,m)=>`${E}  - ${lh(m)}
`,"")),g.length>0&&(n+=`- Added:
`,n+=g.reduce((E,m)=>`${E}  - ${lh(m)}
`,""))})}),n}function GS(a){const n=Object.create(null);return a.internal_changeLog.deletions.forEach(s=>{var i,d,y;const p=z0(s.subject)?V0(s.subject,Jr(a)):s.subject;if(!ai(p)||!ai(s.predicate))return;const g=tr(p),E=tr(s.predicate);(i=n[g])!==null&&i!==void 0||(n[g]=Object.create(null)),(d=(y=n[g])[E])!==null&&d!==void 0||(y[E]={added:[],deleted:[]}),n[g][E].deleted.push(s.object)}),a.internal_changeLog.additions.forEach(s=>{var i,d,y;const p=z0(s.subject)?V0(s.subject,Jr(a)):s.subject;if(!ai(p)||!ai(s.predicate))return;const g=tr(p),E=tr(s.predicate);(i=n[g])!==null&&i!==void 0||(n[g]=Object.create(null)),(d=(y=n[g])[E])!==null&&d!==void 0||(y[E]={added:[],deleted:[]}),n[g][E].added.push(s.object)}),n}function $S(a,n){const s=Yn.namedNode(n.url),i=a.internal_changeLog.additions.reduce((g,E)=>E.subject.equals(s)?g+1:g,0),d=a.internal_changeLog.deletions.reduce((g,E)=>E.subject.equals(s)?g+1:g,0),y=i===1?"1 new value added":`${i} new values added`,p=d===1?"1 value removed":`${d} values removed`;return`(${y} / ${p})`}function dc(a){const n=ai(a.subject)?Y0(a.subject):a.subject,s=ai(a.object)?Y0(a.object):a.object;return Yn.quad(n,a.predicate,s,a.graph)}function Y0(a){return Vi(a.value)?Yn.namedNode(`#${Oi(a.value)}`):a}function JS(a){const n=Jr(a),s=a.graphs.default,d=Object.keys(s).reduce((p,g)=>{const E=WS(p[g],n),m=Vi(g)?`${n}#${Oi(g)}`:g,_={...p};return delete _[g],_[m]=E,Jt(_)},s),y=Jt({...a.graphs,default:d});return Jt({...a,graphs:y})}function WS(a,n){const i=Object.keys(a.predicates).reduce((d,y)=>{var p;const g=(p=d[y].namedNodes)!==null&&p!==void 0?p:[];if(g.every(_=>!Vi(_)))return d;const E=Jt(g.map(_=>Vi(_)?`${n}#${Oi(_)}`:_)),m=Jt({...d[y],namedNodes:E});return Jt({...d,[y]:m})},a.predicates);return Jt({...a,predicates:i,url:Vi(a.url)?`${n}#${Oi(a.url)}`:a.url})}const YS=(a,n,s)=>{var i,d;if($i(a),!Di(n))throw new lo(n);if(!kh(s)&&!Di(s))throw new lv(s);const y=tr(n),p=(i=a.predicates[y])!==null&&i!==void 0?i:{},g=(d=p.namedNodes)!==null&&d!==void 0?d:[];let E;ai(s)?E=s.value:typeof s=="string"?E=s:Ku(s)?E=s.url:E=uv(s);const m=Jt(g.concat(tr(E))),_=Jt({...p,namedNodes:m}),S=Jt({...a.predicates,[y]:_});return Jt({...a,predicates:S})},QS=(a,n,s)=>($i(a),XS(a,n,s,Ra.string));function XS(a,n,s,i){var d,y,p;if($i(a),!Di(n))throw new lo(n);const g=tr(n),E=(d=a.predicates[g])!==null&&d!==void 0?d:{},m=(y=E.literals)!==null&&y!==void 0?y:{},_=(p=m[i])!==null&&p!==void 0?p:[],S=Jt(_.concat(s)),D=Jt({...m,[i]:S}),M=Jt({...E,literals:D}),C=Jt({...a.predicates,[g]:M});return Jt({...a,predicates:C})}function fv(a,n){if($i(a),!Di(n))throw new lo(n);const s=tr(n),i={...a.predicates};return delete i[s],Jt({...a,predicates:Jt(i)})}const dv=(a,n,s)=>{if($i(a),!Di(n))throw new lo(n);if(!kh(s)&&!Di(s))throw new lv(s);return YS(fv(a,n),n,s)},oa=(a,n,s)=>($i(a),QS(fv(a,n),n,s));var hv="http://www.w3.org/1999/02/22-rdf-syntax-ns#";function $n(a){return hv+a}var Ch={PREFIX:"rdf",NAMESPACE:hv,PREFIX_AND_NAMESPACE:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#"},NS:$n,Property:$n("Property"),HTML:$n("HTML"),langString:$n("langString"),PlainLiteral:$n("PlainLiteral"),Statement:$n("Statement"),Bag:$n("Bag"),Seq:$n("Seq"),Alt:$n("Alt"),List:$n("List"),XMLLiteral:$n("XMLLiteral"),JSON:$n("JSON"),CompoundLiteral:$n("CompoundLiteral"),type:$n("type"),subject:$n("subject"),predicate:$n("predicate"),object:$n("object"),value:$n("value"),nil:$n("nil"),first:$n("first"),rest:$n("rest"),language:$n("language"),direction:$n("direction")};const Sr={Project:"http://schema.org/CreativeWork",name:"http://schema.org/name",description:"http://schema.org/description",keywords:"http://schema.org/keywords",tasks:"http://purl.org/ontology/po/Task",notes:"http://purl.org/ontology/po/Note"},Oh=a=>{if(!a)throw new Error("WebID no definido.");return`${a.split("/profile/card#me")[0]}/private/gestor-proyectos/`},wc=a=>`${Oh(a)}data.ttl`;async function pv(a,n){try{await _c(a,{fetch:n})}catch(s){if(s.response&&s.response.status===404)await KS(a,{fetch:n});else throw s}}const gv=a=>({id:sv(a),name:Ru(a,Sr.name)||"Proyecto sin nombre",description:Ru(a,Sr.description)||"",keywords:JSON.parse(Ru(a,Sr.keywords)||"[]"),tasks:JSON.parse(Ru(a,Sr.tasks)||"[]"),notes:JSON.parse(Ru(a,Sr.notes)||"[]")});async function Q0(){const a=Fa();if(!a.info.isLoggedIn||!a.info.webId)return[];const n=wc(a.info.webId);try{const s=await _c(n,{fetch:a.fetch});return iv(s).filter(d=>kS(d,Ch.type)===Sr.Project).map(gv)}catch(s){if(s.response&&s.response.status===404)return[];throw console.error("Error al obtener los proyectos:",s),s}}async function ch(a){const n=Fa();if(!n.info.isLoggedIn||!n.info.webId)throw new Error("Usuario no autenticado o sin WebID.");const s=Oh(n.info.webId),i=wc(n.info.webId);await pv(s,n.fetch);let d;try{d=await _c(i,{fetch:n.fetch})}catch(S){if(S.response&&S.response.status===404)d=Fh();else throw S}const p=a.id&&!a.id.startsWith("local-")?a.id.substring(a.id.lastIndexOf("#")+1):`proj-${Date.now()}`,g=`${i}#${p}`;let E=$0(d,g)??ov({url:g});E=dv(E,Ch.type,Sr.Project),E=oa(E,Sr.name,a.name),E=oa(E,Sr.description,a.description||""),E=oa(E,Sr.keywords,JSON.stringify(a.keywords||[])),E=oa(E,Sr.tasks,JSON.stringify(a.tasks||[])),E=oa(E,Sr.notes,JSON.stringify(a.notes||[])),d=av(d,E);const m=await Nh(i,d,{fetch:n.fetch}),_=$0(m,g);if(!_)throw new Error("El proyecto no se encontró en el dataset después de guardar.");return gv(_)}async function yv(a){const n=Fa();if(!n.info.isLoggedIn||!n.info.webId)throw new Error("Usuario no autenticado.");const s=wc(n.info.webId);try{let i=await _c(s,{fetch:n.fetch});i=jS(i,a),await Nh(s,i,{fetch:n.fetch})}catch(i){throw console.error("Error al eliminar el proyecto:",i),i}}async function ZS(a){const n=Fa();if(!n.info.isLoggedIn||!n.info.webId)throw new Error("Usuario no autenticado o sin WebID.");const s=Oh(n.info.webId),i=wc(n.info.webId);await pv(s,n.fetch);try{await _S(i,{fetch:n.fetch})}catch(y){(!y.response||y.response.status!==404)&&console.error("No se pudo borrar el archivo antiguo, puede que no existiera:",y)}let d=Fh();for(const y of a){const p=`proj-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;let g=ov({name:p});g=dv(g,Ch.type,Sr.Project),g=oa(g,Sr.name,y.name),g=oa(g,Sr.description,y.description||""),g=oa(g,Sr.keywords,JSON.stringify(y.keywords||[])),g=oa(g,Sr.tasks,JSON.stringify(y.tasks||[])),g=oa(g,Sr.notes,JSON.stringify(y.notes||[])),d=av(d,g)}await Nh(i,d,{fetch:n.fetch})}async function eE(a){for(const n of a)try{n.type==="add"||n.type==="update"?await ch(n.payload):n.type==="delete"&&n.payload.id&&!n.payload.id.startsWith("local-")&&await yv(n.payload.id)}catch(s){console.error(`Falló el procesamiento del elemento de la cola: ${n.id}`,s)}}const Sn=new sc("GestorProyectosDB");Sn.version(3).stores({projects:"++id, name, description, createdAt, updatedAt",syncQueue:"++id, type, payload"});Sn.version(2).stores({projects:"++id, name, description, createdAt, updatedAt"});Sn.version(1).stores({projects:"++id, name, description, createdAt"}).upgrade(a=>a.table("projects").toCollection().modify(n=>{n.updatedAt||(n.updatedAt=n.createdAt)}));function tE(){const[a,n]=nn.useState(()=>localStorage.getItem("theme")||"system");return nn.useEffect(()=>{const s=window.document.documentElement,i=a==="dark"||a==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;s.classList.remove(i?"light":"dark"),s.classList.add(i?"dark":"light"),localStorage.setItem("theme",a)},[a]),nn.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)"),i=()=>{if(a==="system"){const d=s.matches;root.classList.remove(d?"light":"dark"),root.classList.add(d?"dark":"light")}};return s.addEventListener("change",i),()=>s.removeEventListener("change",i)},[a]),[a,n]}const X0={ca:{dashboardTitle:"Gestor de Projectes",dashboardSubtitle:"Organitza les teves idees, projectes i tasques en un sol lloc.",addProject:"Afegir Projecte",newProjectPlaceholder:"Nom de la teva nova idea o projecte...",searchAndFilter:"Cercar i Filtrar",searchPlaceholder:"Cerca per nom o descripció...",allKeywords:"Tots",noProjectsFoundTitle:"No s'han trobat projectes",noProjectsFoundSubtitle:"Intenta ajustar la teva cerca o filtre, o crea el teu primer projecte.",upcomingTasks:"Tasques Pròximes (7 dies)",noUpcomingTasks:"Cap tasca pròxima! Bona feina!",openProject:"Obrir Projecte",openFile:"Obrir",saveFile:"Desar",tasks:"Tasques",notes:"Notes",backToDashboard:"Tornar al Tauler",details:"Detalls",description:"Descripció",descriptionPlaceholder:"Afegeix una breu descripció...",formattingHelp:"Fes servir #, ##, ### per a encapçalaments, **negreta** i *cursiva*.",keywords:"Paraules Clau",keywordsPlaceholder:"Afegir i prémer Enter",addNote:"Afegir Nota",newNoteTitlePlaceholder:"Títol de la nova nota",newNoteContentPlaceholder:"Escriu el contingut de la nota...",addTask:"Afegir Tasca",newTaskPlaceholder:"Nova tasca...",confirm:"Confirmar",cancel:"Cancel·lar",deleteConfirmTitle:"Confirmar Eliminació?",deleteConfirmMessage:"Aquesta acció és permanent.",importConfirmTitle:"Confirmar Importació?",importConfirmMessage:"Això esborrarà totes les dades actuals i les reemplaçarà amb el contingut de l'arxiu. N'estàs segur?",note:"Nota",helpTitle:"Guia d'Ajuda",helpIntro:"Com funciona ara l'aplicació?",helpIntroText:"Aquest gestor de projectes es connecta al teu Pod de Solid personal. Un Pod és el teu magatzem de dades segur i privat a la web, on tu tens el control total.",helpStorageTitle:"Les teves Dades al Núvol: El teu Solid Pod",helpStorageText:"Totes les teves dades ara s'emmagatzemen de forma segura al teu Solid Pod. Això significa que pots accedir als teus projectes des de qualsevol dispositiu o navegador simplement iniciant sessió. Ja no hi ha risc de perdre dades si neteges la memòria cau del navegador.",helpOfflineTitle:"Treballa sense connexió",helpOfflineText:"L'aplicació guarda una còpia local de les teves dades al teu dispositiu. Si et quedes sense internet, pots seguir treballant sense interrupcions. Quan recuperis la connexió, tots els teus canvis se sincronitzaran automàticament amb el teu Pod.",helpBackupTitle:"Còpies de Seguretat Locals (Opcional)",helpBackupText:"Els botons 'Exportar' i 'Importar' ara serveixen per crear i restaurar còpies de seguretat locals addicionals en un arxiu .json. Això és útil si vols tenir una còpia extra o moure les teves dades a un altre Pod.",footerText:"Creat per Pablo G. Guizar amb l'ajuda de Gemini.",footerLicense:"Llicència Creative Commons Atribució 4.0 Internacional",githubRepo:"Repositori a GitHub",import:"Importar",export:"Exportar",help:"Ajuda",today:"Avui",tomorrow:"Demà",inXDays:"En {days} dies",addProjectError:"No s'ha pogut afegir el projecte.",deleteProjectError:"No s'ha pogut eliminar el projecte.",updateProjectError:"No s'ha pogut actualitzar el projecte.",exportError:"No s'han pogut exportar les dades.",jsonFormatError:"L'arxiu JSON no té el format correcte.",jsonParseError:"L'arxiu seleccionat no és un JSON vàlid o té un format incorrecte.",importError:"Hi ha hagut un error en importar les dades.",syncGenericError:"Ha ocorregut un error desconegut durant la sincronització.",loginWithSolid:"Iniciar Sessió amb Solid",logout:"Tancar Sessió",loggedInAs:"Connectat com: {webId}"},en:{dashboardTitle:"Project Manager",dashboardSubtitle:"Organize your ideas, projects, and tasks in one place.",addProject:"Add Project",newProjectPlaceholder:"Name of your new idea or project...",searchAndFilter:"Search and Filter",searchPlaceholder:"Search by name or description...",allKeywords:"All",noProjectsFoundTitle:"No Projects Found",noProjectsFoundSubtitle:"Try adjusting your search or filter, or create your first project.",upcomingTasks:"Upcoming Tasks (7 days)",noUpcomingTasks:"No upcoming tasks! Good job!",openProject:"Open Project",openFile:"Open",saveFile:"Save",tasks:"Tasks",notes:"Notes",backToDashboard:"Back to Dashboard",details:"Details",description:"Description",descriptionPlaceholder:"Add a brief description...",formattingHelp:"Use #, ##, ### for headers, **bold** and *italic*.",keywords:"Keywords",keywordsPlaceholder:"Add and press Enter",addNote:"Add Note",newNoteTitlePlaceholder:"Title for the new note",newNoteContentPlaceholder:"Write the note content...",addTask:"Add Task",newTaskPlaceholder:"New task...",confirm:"Confirm",cancel:"Cancel",deleteConfirmTitle:"Confirm Deletion?",deleteConfirmMessage:"This action is permanent.",importConfirmTitle:"Confirm Import?",importConfirmMessage:"This will delete all current data and replace it with the contents of the file. Are you sure?",note:"Note",helpTitle:"Help Guide",helpIntro:"How does the app work now?",helpIntroText:"This project manager connects to your personal Solid Pod. A Pod is your secure, private data store on the web, where you have full control.",helpStorageTitle:"Your Data in the Cloud: Your Solid Pod",helpStorageText:"All your data is now securely stored in your Solid Pod. This means you can access your projects from any device or browser just by logging in. There is no longer a risk of data loss if you clear your browser cache.",helpOfflineTitle:"Work Offline",helpOfflineText:"The application saves a local copy of your data on your device. If you lose your internet connection, you can continue working without interruption. When you reconnect, all your changes will be automatically synced to your Pod.",helpBackupTitle:"Local Backups (Optional)",helpBackupText:"The 'Export' and 'Import' buttons now serve to create and restore additional local backups in a .json file. This is useful if you want an extra copy or to move your data to another Pod.",footerText:"Created by Pablo G. Guizar with the help of Gemini.",footerLicense:"Creative Commons Attribution 4.0 International License",githubRepo:"GitHub Repository",import:"Import",export:"Export",help:"Help",today:"Today",tomorrow:"Tomorrow",inXDays:"In {days} days",addProjectError:"Could not add the project.",deleteProjectError:"Could not delete the project.",updateProjectError:"Could not update the project.",exportError:"Could not export the data.",jsonFormatError:"The JSON file does not have the correct format.",jsonParseError:"The selected file is not a valid JSON or has an incorrect format.",importError:"An error occurred while importing the data.",syncGenericError:"An unknown error occurred during synchronization.",loginWithSolid:"Login with Solid",logout:"Logout",loggedInAs:"Logged in as: {webId}"},es:{dashboardTitle:"Gestor de Proyectos",dashboardSubtitle:"Organiza tus ideas, proyectos y tareas en un solo lugar.",addProject:"Añadir Proyecto",newProjectPlaceholder:"Nombre de tu nueva idea o proyecto...",searchAndFilter:"Buscar y Filtrar",searchPlaceholder:"Buscar por nombre o descripción...",allKeywords:"Todos",noProjectsFoundTitle:"No se encontraron proyectos",noProjectsFoundSubtitle:"Intenta ajustar tu búsqueda o filtro, o crea tu primer proyecto.",upcomingTasks:"Próximas Tareas (7 días)",noUpcomingTasks:"¡Ninguna tarea próxima! ¡Buen trabajo!",openProject:"Abrir Proyecto",openFile:"Abrir",saveFile:"Guardar",tasks:"Tareas",notes:"Notas",backToDashboard:"Volver al Tablero",details:"Detalles",description:"Descripción",descriptionPlaceholder:"Añade una breve descripción...",formattingHelp:"Usa #, ##, ### para encabezados, **negrita** y *cursiva*.",keywords:"Palabras Clave",keywordsPlaceholder:"Añadir y presionar Enter",addNote:"Añadir Nota",newNoteTitlePlaceholder:"Título de la nueva nota",newNoteContentPlaceholder:"Escribe el contenido de la nota...",addTask:"Añadir Tarea",newTaskPlaceholder:"Nueva tarea...",confirm:"Confirmar",cancel:"Cancelar",deleteConfirmTitle:"¿Confirmar Eliminación?",deleteConfirmMessage:"Esta acción es permanente.",importConfirmTitle:"¿Confirmar Importación?",importConfirmMessage:"Esto borrará todos los datos actuales y los reemplazará con el contenido del archivo. ¿Estás seguro?",note:"Nota",helpTitle:"Guía de Ayuda",helpIntro:"¿Cómo funciona ahora la aplicación?",helpIntroText:"Este gestor de proyectos se conecta a tu Pod de Solid personal. Un Pod es tu almacén de datos seguro y privado en la web, donde tú tienes el control total.",helpStorageTitle:"Tus Datos en la Nube: Tu Solid Pod",helpStorageText:"Todos tus datos ahora se almacenan de forma segura en tu Solid Pod. Esto significa que puedes acceder a tus proyectos desde cualquier dispositivo o navegador simplemente iniciando sesión. Ya no hay riesgo de perder datos si limpias la caché del navegador.",helpOfflineTitle:"Trabaja sin conexión",helpOfflineText:"La aplicación guarda una copia local de tus datos en tu dispositivo. Si te quedas sin internet, puedes seguir trabajando sin interrupciones. Cuando recuperes la conexión, todos tus cambios se sincronizarán automáticamente con tu Pod.",helpBackupTitle:"Respaldos Locales (Opcional)",helpBackupText:"Los botones 'Exportar' e 'Importar' ahora sirven para crear y restaurar respaldos locales adicionales en un archivo .json. Esto es útil si quieres tener una copia extra o mover tus datos a otro Pod.",footerText:"Creado por Pablo G. Guizar con la ayuda de Gemini.",footerLicense:"Licencia Creative Commons Atribución 4.0 Internacional",githubRepo:"Repositorio en GitHub",import:"Importar",export:"Exportar",help:"Ayuda",today:"Hoy",tomorrow:"Mañana",inXDays:"En {days} días",addProjectError:"No se pudo agregar el proyecto.",deleteProjectError:"No se pudo eliminar el proyecto.",updateProjectError:"No se pudo actualizar el proyecto.",exportError:"No se pudieron exportar los datos.",jsonFormatError:"El archivo JSON no tiene el formato correcto.",jsonParseError:"El archivo seleccionado no es un JSON válido o tiene un formato incorrecto.",importError:"Ocurrió un error al importar los datos.",syncGenericError:"Ocurrió un error desconocido durante la sincronización.",loginWithSolid:"Iniciar Sesión con Solid",logout:"Cerrar Sesión",loggedInAs:"Conectado como: {webId}"},eu:{dashboardTitle:"Proiektu Kudeatzailea",dashboardSubtitle:"Antolatu zure ideiak, proiektuak eta lanak leku bakarrean.",addProject:"Proiektua Gehitu",newProjectPlaceholder:"Zure ideia edo proiektu berriaren izena...",searchAndFilter:"Bilatu eta Iragazi",searchPlaceholder:"Bilatu izenaren edo deskribapenaren arabera...",allKeywords:"Guztiak",noProjectsFoundTitle:"Ez da proiekturik aurkitu",noProjectsFoundSubtitle:"Saiatu bilaketa edo iragazkia doitzen, edo sortu zure lehen proiektua.",upcomingTasks:"Hurrengo Lanak (7 egun)",noUpcomingTasks:"Ez dago hurrengo lanik! Lan ona!",openProject:"Proiektua Ireki",openFile:"Ireki",saveFile:"Gorde",tasks:"Lanak",notes:"Oharrak",backToDashboard:"Arbelera Itzuli",details:"Xehetasunak",description:"Deskribapena",descriptionPlaceholder:"Gehitu deskribapen labur bat...",formattingHelp:"Erabili #, ##, ### goiburukietarako, **lodia** eta *etzana*.",keywords:"Gako-hitzak",keywordsPlaceholder:"Gehitu eta sakatu Enter",addNote:"Oharra Gehitu",newNoteTitlePlaceholder:"Ohar berriaren izenburua",newNoteContentPlaceholder:"Idatzi oharraren edukia...",addTask:"Lana Gehitu",newTaskPlaceholder:"Lan berria...",confirm:"Berretsi",cancel:"Utzi",deleteConfirmTitle:"Ezabatzea Berretsi?",deleteConfirmMessage:"Ekintza hau iraunkorra da.",importConfirmTitle:"Inportazioa Berretsi?",importConfirmMessage:"Honek uneko datu guztiak ezabatuko ditu eta fitxategiaren edukiarekin ordezkatuko ditu. Ziur zaude?",note:"Oharra",helpTitle:"Laguntza Gida",helpIntro:"Nola funtzionatzen du orain aplikazioak?",helpIntroText:"Proiektu-kudeatzaile hau zure Solid Pod pertsonalera konektatzen da. Pod bat zure datu-biltegi seguru eta pribatua da webean, non kontrol osoa duzun.",helpStorageTitle:"Zure Datuak Hodeian: Zure Solid Pod-a",helpStorageText:"Zure datu guztiak orain modu seguruan gordetzen dira zure Solid Pod-ean. Horrek esan nahi du zure proiektuak edozein gailutatik edo arakatzailetatik atzi ditzakezula saioa hasita. Jada ez dago datuak galtzeko arriskurik arakatzailearen katxea garbitzen baduzu.",helpOfflineTitle:"Lan egin konexiorik gabe",helpOfflineText:"Aplikazioak zure datuen kopia lokal bat gordetzen du zure gailuan. Interneteko konexioa galtzen baduzu, etenik gabe lanean jarrai dezakezu. Berriro konektatzen zarenean, zure aldaketa guztiak automatikoki sinkronizatuko dira zure Pod-arekin.",helpBackupTitle:"Babeskopia Lokalak (Aukerakoa)",helpBackupText:"'Esportatu' eta 'Inportatu' botoiek orain .json fitxategi batean babeskopia lokal gehigarriak sortzeko eta leheneratzeko balio dute. Hau erabilgarria da kopia gehigarri bat nahi baduzu edo zure datuak beste Pod batera eraman nahi badituzu.",footerText:"Pablo G. Guizar-ek sortua, Gemini-ren laguntzarekin.",footerLicense:"Creative Commons Aitortu 4.0 Nazioarteko Lizentzia",githubRepo:"GitHub Repositorioa",import:"Inportatu",export:"Esportatu",help:"Laguntza",today:"Gaur",tomorrow:"Bihar",inXDays:"{days} egun barru",addProjectError:"Ezin izan da proiektua gehitu.",deleteProjectError:"Ezin izan da proiektua ezabatu.",updateProjectError:"Ezin izan da proiektua eguneratu.",exportError:"Ezin izan dira datuak esportatu.",jsonFormatError:"JSON fitxategiak ez du formatu zuzena.",jsonParseError:"Hautatutako fitxategia ez da JSON balioduna edo formatu okerra du.",importError:"Errore bat gertatu da datuak inportatzean.",syncGenericError:"Errore ezezagun bat gertatu da sinkronizazioan.",loginWithSolid:"Hasi Saioa Solid-ekin",logout:"Saioa Itxi",loggedInAs:"Konektatuta: {webId}"},gl:{dashboardTitle:"Xestor de Proxectos",dashboardSubtitle:"Organiza as túas ideas, proxectos e tarefas nun só lugar.",addProject:"Engadir Proxecto",newProjectPlaceholder:"Nome da túa nova idea ou proxecto...",searchAndFilter:"Buscar e Filtrar",searchPlaceholder:"Buscar por nome ou descrición...",allKeywords:"Todos",noProjectsFoundTitle:"Non se atoparon proxectos",noProjectsFoundSubtitle:"Tenta axustar a túa busca ou filtro, ou crea o teu primeiro proxecto.",upcomingTasks:"Vindeiras Tarefas (7 días)",noUpcomingTasks:"Ningunha tarefa vindeira! Bo traballo!",openProject:"Abrir Proxecto",openFile:"Abrir",saveFile:"Gardar",tasks:"Tarefas",notes:"Notas",backToDashboard:"Volver ao Taboleiro",details:"Detalles",description:"Descrición",descriptionPlaceholder:"Engade unha breve descrición...",formattingHelp:"Usa #, ##, ### para cabeceiras, **negra** e *cursiva*.",keywords:"Palabras Clave",keywordsPlaceholder:"Engadir e premer Enter",addNote:"Engadir Nota",newNoteTitlePlaceholder:"Título da nova nota",newNoteContentPlaceholder:"Escribe o contido da nota...",addTask:"Engadir Tarefa",newTaskPlaceholder:"Nova tarefa...",confirm:"Confirmar",cancel:"Cancelar",deleteConfirmTitle:"Confirmar Eliminación?",deleteConfirmMessage:"Esta acción é permanente.",importConfirmTitle:"Confirmar Importación?",importConfirmMessage:"Isto borrará todos os datos actuais e substituiraos polo contido do ficheiro. Estás seguro?",note:"Nota",helpTitle:"Guía de Axuda",helpIntro:"Como funciona agora a aplicación?",helpIntroText:"Este xestor de proxectos conéctase ao teu Pod de Solid persoal. Un Pod é o teu almacén de datos seguro e privado na web, onde ti tes o control total.",helpStorageTitle:"Os teus Datos na Nube: O teu Solid Pod",helpStorageText:"Todos os teus datos agora almacénanse de forma segura no teu Solid Pod. Isto significa que podes acceder aos teus proxectos desde calquera dispositivo ou navegador simplemente iniciando sesión. Xa non hai risco de perder datos se limpas a caché do navegador.",helpOfflineTitle:"Traballa sen conexión",helpOfflineText:"A aplicación garda unha copia local dos teus datos no teu dispositivo. Se perdes a conexión a internet, podes seguir traballando sen interrupcións. Cando recuperes a conexión, todos os teus cambios sincronizaranse automaticamente co teu Pod.",helpBackupTitle:"Copias de Seguridade Locais (Opcional)",helpBackupText:"Os botóns 'Exportar' e 'Importar' agora serven para crear e restaurar copias de seguridade locais adicionais nun ficheiro .json. Isto é útil se queres ter unha copia extra ou mover os teus datos a outro Pod.",footerText:"Creado por Pablo G. Guizar coa axuda de Gemini.",footerLicense:"Licenza Creative Commons Atribución 4.0 Internacional",githubRepo:"Repositorio en GitHub",import:"Importar",export:"Exportar",help:"Axuda",today:"Hoxe",tomorrow:"Mañá",inXDays:"En {days} días",addProjectError:"Non se puido engadir o proxecto.",deleteProjectError:"Non se puido eliminar o proxecto.",updateProjectError:"Non se puido actualizar o proxecto.",exportError:"Non se puideron exportar os datos.",jsonFormatError:"O ficheiro JSON non ten o formato correcto.",jsonParseError:"O ficheiro seleccionado non é un JSON válido ou ten un formato incorrecto.",importError:"Ocorreu un erro ao importar os datos.",syncGenericError:"Ocorreu un erro descoñecido durante a sincronización.",loginWithSolid:"Iniciar Sesión con Solid",logout:"Pechar Sesión",loggedInAs:"Conectado como: {webId}"}},mv=nn.createContext();function nE({children:a}){const[n,s]=nn.useState(()=>localStorage.getItem("locale")||"es");nn.useEffect(()=>{localStorage.setItem("locale",n)},[n]);const i=(d,y={})=>{let p=X0[n]?.[d]||X0.en?.[d]||d;return Object.keys(y).forEach(g=>{p=p.replace(`{${g}}`,y[g])}),p};return Te.jsx(mv.Provider,{value:{locale:n,setLocale:s,t:i},children:a})}function Ji(){return nn.useContext(mv)}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iE=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,i)=>i?i.toUpperCase():s.toLowerCase()),Z0=a=>{const n=iE(a);return n.charAt(0).toUpperCase()+n.slice(1)},vv=(...a)=>a.filter((n,s,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===s).join(" ").trim(),aE=a=>{for(const n in a)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=nn.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:d="",children:y,iconNode:p,...g},E)=>nn.createElement("svg",{ref:E,...oE,width:n,height:n,stroke:a,strokeWidth:i?Number(s)*24/Number(n):s,className:vv("lucide",d),...!y&&!aE(g)&&{"aria-hidden":"true"},...g},[...p.map(([m,_])=>nn.createElement(m,_)),...Array.isArray(y)?y:[y]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=(a,n)=>{const s=nn.forwardRef(({className:i,...d},y)=>nn.createElement(sE,{ref:y,iconNode:n,className:vv(`lucide-${rE(Z0(a))}`,`lucide-${a}`,i),...d}));return s.displayName=Z0(a),s};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],lE=Qn("arrow-left",uE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],fE=Qn("book-open",cE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bv=Qn("calendar",dE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pE=Qn("check",hE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yE=Qn("circle-question-mark",gE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],vE=Qn("cloud",mE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],_E=Qn("download",bE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],SE=Qn("file-text",wE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],xE=Qn("folder-open",EE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],AE=Qn("github",TE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],kE=Qn("monitor",RE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],NE=Qn("moon",FE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],OE=Qn("pen",CE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fh=Qn("plus",DE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jE=Qn("save",IE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],PE=Qn("search",UE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_v=Qn("square-check-big",LE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],BE=Qn("square",ME);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],KE=Qn("sun",HE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],dh=Qn("trash-2",qE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],VE=Qn("triangle-alert",zE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$E=Qn("wifi-off",GE);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hc=Qn("x",JE);function Dh({text:a,className:n}){if(!a)return null;const s=a.replace(/^### (.*$)/gim,'<h3 class="text-xl font-bold my-2">$1</h3>').replace(/^## (.*$)/gim,'<h2 class="text-2xl font-bold my-3">$1</h2>').replace(/^# (.*$)/gim,'<h1 class="text-3xl font-bold my-4">$1</h1>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br />");return Te.jsx("div",{className:n,dangerouslySetInnerHTML:{__html:s}})}function WE({project:a,onOpen:n,onDelete:s}){const{t:i}=Ji();return Te.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl shadow-sm hover:shadow-xl transition-shadow duration-300 ease-in-out overflow-hidden flex flex-col border border-slate-200 dark:border-slate-700",children:[Te.jsxs("div",{className:"p-5 flex-grow flex flex-col",children:[Te.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white truncate mb-2",children:a.name}),Te.jsx(Dh,{text:a.description,className:"text-sm text-slate-600 dark:text-slate-400 flex-grow min-h-[40px] mb-3 line-clamp-2"}),Te.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[24px] mb-4",children:(a.keywords||[]).slice(0,3).map(d=>Te.jsx("span",{className:"bg-slate-200 text-slate-700 text-xs font-semibold px-2 py-1 rounded-full dark:bg-slate-700 dark:text-slate-300",children:d},d))}),Te.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 mt-auto pt-3 flex justify-around text-sm text-slate-500 dark:text-slate-400",children:[Te.jsxs("div",{className:"flex items-center gap-1.5",title:i("tasks"),children:[Te.jsx(_v,{size:16}),Te.jsxs("span",{children:[(a.tasks||[]).filter(d=>d.completed).length,"/",(a.tasks||[]).length]})]}),Te.jsxs("div",{className:"flex items-center gap-1.5",title:i("notes"),children:[Te.jsx(SE,{size:16}),Te.jsx("span",{children:(a.notes||[]).length})]})]})]}),Te.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 flex justify-between items-center border-t border-slate-200 dark:border-slate-700",children:[Te.jsxs("button",{onClick:()=>n(a.id),className:"text-sm font-semibold text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1.5",children:[Te.jsx(fE,{size:16}),i("openProject")]}),Te.jsx("button",{onClick:()=>s(a.id),className:"p-2 rounded-full text-slate-400 hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900/50 dark:hover:text-red-400 transition-colors",children:Te.jsx(dh,{size:18})})]})]})}function YE({projects:a,onOpenProject:n}){const{t:s}=Ji(),i=new Date;i.setHours(0,0,0,0);const d=new Date(i);d.setDate(i.getDate()+7);const y=a.flatMap(g=>(g.tasks||[]).map(E=>({...E,projectName:g.name,projectId:g.id}))).filter(g=>{if(!g.dueDate||g.completed)return!1;const E=new Date(g.dueDate+"T00:00:00");return E>=i&&E<=d}).sort((g,E)=>new Date(g.dueDate)-new Date(E.dueDate)),p=g=>{const m=new Date(g+"T00:00:00").getTime()-i.getTime(),_=Math.ceil(m/(1e3*60*60*24));return _===0?s("today"):_===1?s("tomorrow"):s("inXDays",{days:_})};return Te.jsxs("section",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[Te.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-700 dark:text-white",children:s("upcomingTasks")}),y.length>0?Te.jsx("ul",{className:"space-y-4",children:y.map(g=>Te.jsxs("li",{className:"border-l-4 border-blue-500 pl-4 py-2 bg-slate-100 dark:bg-slate-700/50 rounded-r-lg",children:[Te.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:g.text}),Te.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 flex justify-between items-center",children:[Te.jsx("button",{onClick:()=>n(g.projectId),className:"hover:underline font-medium text-blue-600 dark:text-blue-400 truncate pr-2",children:g.projectName}),Te.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400 flex items-center gap-1.5 flex-shrink-0",children:[Te.jsx(bv,{size:14}),p(g.dueDate)]})]})]},g.id))}):Te.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:s("noUpcomingTasks")})]})}function QE({theme:a,setTheme:n}){const[s,i]=nn.useState(!1),d=nn.useRef(null),y=[{value:"light",label:"Claro",icon:KE},{value:"dark",label:"Oscuro",icon:NE},{value:"system",label:"Sistema",icon:kE}],p=y.find(g=>g.value===a);return nn.useEffect(()=>{function g(E){d.current&&!d.current.contains(E.target)&&i(!1)}return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[d]),Te.jsxs("div",{className:"relative",ref:d,children:[Te.jsxs("button",{onClick:()=>i(!s),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:[p&&Te.jsx(p.icon,{size:18}),Te.jsx("span",{className:"hidden sm:inline",children:p?.label})]}),s&&Te.jsx("div",{className:"absolute top-full right-0 mt-2 w-36 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-10",children:y.map(g=>Te.jsxs("button",{onClick:()=>{n(g.value),i(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700",children:[Te.jsx(g.icon,{size:16}),g.label]},g.value))})]})}function XE(){const{locale:a,setLocale:n}=Ji(),s=[{code:"ca",name:"Català"},{code:"en",name:"English"},{code:"es",name:"Español"},{code:"eu",name:"Euskara"},{code:"gl",name:"Galego"}];return Te.jsx("select",{value:a,onChange:i=>n(i.target.value),className:"bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white p-2 rounded-lg font-semibold hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors appearance-none cursor-pointer text-sm",title:"Seleccionar idioma",children:s.map(i=>Te.jsx("option",{value:i.code,children:i.name},i.code))})}function ZE({projects:a,onAddProject:n,onOpenProject:s,onDeleteProject:i,isLoading:d,onOpenHelp:y,theme:p,setTheme:g,onOpenFile:E,onSaveFile:m}){const{t:_}=Ji(),[S,D]=nn.useState(""),[M,C]=nn.useState(""),[O,U]=nn.useState(_("allKeywords")),F=()=>{S.trim()&&(n(S),D(""))},P=nn.useMemo(()=>{const B=new Set([_("allKeywords")]);return(a||[]).forEach(z=>{(z.keywords||[]).forEach(Y=>B.add(Y))}),Array.from(B)},[a,_]);nn.useEffect(()=>{U(_("allKeywords"))},[_]);const I=nn.useMemo(()=>(a||[]).filter(B=>{const z=O===_("allKeywords")||(B.keywords||[]).includes(O),Y=M.toLowerCase(),Q=M===""||B.name.toLowerCase().includes(Y)||(B.description||"").toLowerCase().includes(Y);return z&&Q}),[a,M,O,_]);return Te.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Te.jsxs("div",{className:"lg:col-span-2",children:[Te.jsx("header",{className:"mb-8",children:Te.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4",children:[Te.jsxs("div",{className:"flex-grow",children:[Te.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 dark:text-white",children:_("dashboardTitle")}),Te.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:_("dashboardSubtitle")})]}),Te.jsxs("div",{className:"flex-shrink-0 flex items-center flex-wrap gap-2",children:[Te.jsx(XE,{}),Te.jsx(QE,{theme:p,setTheme:g}),Te.jsxs("button",{onClick:E,title:_("openFile"),className:"bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white p-2 rounded-lg font-semibold flex items-center gap-2 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:[Te.jsx(xE,{size:18})," ",Te.jsx("span",{className:"hidden sm:inline",children:_("openFile")})]}),Te.jsxs("button",{onClick:m,title:_("saveFile"),className:"bg-blue-600 text-white p-2 rounded-lg font-semibold flex items-center gap-2 hover:bg-blue-700 transition-colors",children:[Te.jsx(jE,{size:18})," ",Te.jsx("span",{className:"hidden sm:inline",children:_("saveFile")})]}),Te.jsx("button",{onClick:y,title:_("help"),className:"bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-white p-2 rounded-lg font-semibold flex items-center gap-2 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:Te.jsx(yE,{size:18})})]})]})}),Te.jsxs("div",{className:"mb-8 p-6 bg-white dark:bg-slate-800/50 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 space-y-6",children:[Te.jsxs("div",{children:[Te.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-white",children:_("addProject")}),Te.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[Te.jsx("input",{type:"text",value:S,onChange:B=>D(B.target.value),onKeyPress:B=>B.key==="Enter"&&F(),placeholder:_("newProjectPlaceholder"),className:"flex-grow w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-shadow"}),Te.jsxs("button",{onClick:F,disabled:!S.trim(),className:"w-full sm:w-auto bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-md hover:shadow-lg disabled:bg-blue-400 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",children:[Te.jsx(fh,{}),_("addProject")]})]})]}),Te.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[Te.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-white",children:_("searchAndFilter")}),Te.jsxs("div",{className:"relative mb-4",children:[Te.jsx(PE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),Te.jsx("input",{type:"text",value:M,onChange:B=>C(B.target.value),placeholder:_("searchPlaceholder"),className:"w-full p-3 pl-10 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-shadow"})]}),Te.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(B=>Te.jsx("button",{onClick:()=>U(B),className:`px-3 py-1 text-sm font-medium rounded-full transition-colors ${O===B?"bg-blue-600 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600"}`,children:B},B))})]})]}),d?Te.jsx("div",{className:"text-center py-10",children:Te.jsx("p",{className:"text-lg text-slate-500",children:"Sincronizando con tu Solid Pod..."})}):Te.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 xl:grid-cols-2 gap-6",children:I.map(B=>Te.jsx(WE,{project:B,onOpen:s,onDelete:i},B.id))}),!d&&I.length===0&&Te.jsxs("div",{className:"text-center py-16 px-6 bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[Te.jsx("h3",{className:"text-2xl font-semibold text-slate-800 dark:text-white",children:_("noProjectsFoundTitle")}),Te.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:_("noProjectsFoundSubtitle")})]})]}),Te.jsx("div",{className:"lg:col-span-1",children:Te.jsx("div",{className:"sticky top-8",children:Te.jsx(YE,{projects:a||[],onOpenProject:s})})})]})}function ex({project:a,onUpdateProject:n,onBack:s,onViewNote:i}){const{t:d}=Ji(),[y,p]=nn.useState(!1),[g,E]=nn.useState(a.name),[m,_]=nn.useState(""),[S,D]=nn.useState(""),[M,C]=nn.useState(""),[O,U]=nn.useState(""),[F,P]=nn.useState(a.description||""),[I,B]=nn.useState(a.keywords||[]),[z,Y]=nn.useState("");nn.useEffect(()=>{E(a.name)},[a.name]);const Q=()=>{g.trim()&&g.trim()!==a.name&&n(a.id,{name:g.trim()}),p(!1)},ve=()=>{p(!1),E(a.name)},qe=()=>{F!==a.description&&n(a.id,{description:F})},J=()=>{const Me=z.trim();if(Me&&!I.includes(Me)){const Fe=[...I,Me];B(Fe),n(a.id,{keywords:Fe}),Y("")}},pe=Me=>{const Fe=I.filter(it=>it!==Me);B(Fe),n(a.id,{keywords:Fe})},Xe=()=>{if(m.trim()==="")return;const Me={id:crypto.randomUUID(),text:m.trim(),completed:!1,dueDate:S||null};n(a.id,{tasks:[...a.tasks||[],Me]}),_(""),D("")},ke=Me=>{const Fe=a.tasks.map(it=>it.id===Me?{...it,completed:!it.completed}:it);n(a.id,{tasks:Fe})},wt=Me=>{const Fe=a.tasks.filter(it=>it.id!==Me);n(a.id,{tasks:Fe})},mt=()=>{if(M.trim()==="")return;const Me={id:crypto.randomUUID(),title:M.trim(),text:O.trim()};n(a.id,{notes:[...a.notes||[],Me]}),C(""),U("")},Ne=Me=>{const Fe=a.notes.filter(it=>it.id!==Me);n(a.id,{notes:Fe})};return Te.jsxs("div",{className:"animate-fade-in",children:[Te.jsxs("header",{className:"mb-8",children:[Te.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white mb-4 transition-colors",children:[Te.jsx(lE,{size:20}),d("backToDashboard")]}),Te.jsx("div",{className:"flex items-center gap-4",children:y?Te.jsxs(Te.Fragment,{children:[Te.jsx("input",{type:"text",value:g,onChange:Me=>E(Me.target.value),onKeyPress:Me=>Me.key==="Enter"&&Q(),className:"text-4xl font-extrabold text-slate-900 dark:text-white bg-transparent border-b-2 border-blue-500 focus:outline-none w-full",autoFocus:!0}),Te.jsx("button",{onClick:Q,className:"p-2 text-green-500 hover:bg-green-100 rounded-full transition-colors",children:Te.jsx(pE,{size:24})}),Te.jsx("button",{onClick:ve,className:"p-2 text-red-500 hover:bg-red-100 rounded-full transition-colors",children:Te.jsx(hc,{size:24})})]}):Te.jsxs(Te.Fragment,{children:[Te.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 dark:text-white mr-2",children:a.name}),Te.jsx("button",{onClick:()=>p(!0),className:"p-2 text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:Te.jsx(OE,{size:20})})]})})]}),Te.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Te.jsxs("div",{className:"flex flex-col gap-8",children:[Te.jsxs("section",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[Te.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-700 dark:text-white",children:d("details")}),Te.jsxs("div",{className:"space-y-4",children:[Te.jsxs("div",{children:[Te.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:d("description")}),Te.jsx("textarea",{id:"description",value:F,onChange:Me=>P(Me.target.value),onBlur:qe,placeholder:d("descriptionPlaceholder"),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 focus:outline-none",rows:"4"}),Te.jsx("p",{className:"text-xs text-slate-500 mt-1",children:d("formattingHelp")})]}),Te.jsxs("div",{children:[Te.jsx("label",{htmlFor:"keywords",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:d("keywords")}),Te.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:I.map(Me=>Te.jsxs("span",{className:"flex items-center bg-blue-100 text-blue-800 text-sm font-medium px-2.5 py-1 rounded-full dark:bg-blue-900 dark:text-blue-300",children:[Me,Te.jsx("button",{onClick:()=>pe(Me),className:"ml-1.5 p-0.5 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800",children:Te.jsx(hc,{size:12})})]},Me))}),Te.jsx("div",{className:"flex gap-2",children:Te.jsx("input",{id:"keywords",type:"text",value:z,onChange:Me=>Y(Me.target.value),onKeyPress:Me=>Me.key==="Enter"&&J(),placeholder:d("keywordsPlaceholder"),className:"flex-grow p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 focus:outline-none"})})]})]})]}),Te.jsxs("section",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[Te.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-700 dark:text-white",children:d("notes")}),Te.jsx("div",{className:"space-y-3 mb-4 max-h-60 overflow-y-auto pr-2",children:(a.notes||[]).map(Me=>Te.jsxs("div",{className:"flex items-start justify-between bg-yellow-50 dark:bg-slate-700/80 p-3 rounded-lg cursor-pointer hover:shadow-md transition-shadow",onClick:()=>i(Me),children:[Te.jsxs("div",{className:"flex-grow mr-4",children:[Te.jsx("h4",{className:"font-bold text-slate-800 dark:text-white truncate",children:Me.title}),Te.jsx(Dh,{text:Me.text,className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap line-clamp-2"})]}),Te.jsx("button",{onClick:Fe=>{Fe.stopPropagation(),Ne(Me.id)},className:"p-1 text-slate-400 hover:text-red-500 dark:hover:text-red-400 transition-colors flex-shrink-0",children:Te.jsx(dh,{size:18})})]},Me.id))}),Te.jsxs("div",{className:"flex flex-col gap-2 border-t pt-4 border-slate-200 dark:border-slate-700",children:[Te.jsx("input",{type:"text",value:M,onChange:Me=>C(Me.target.value),placeholder:d("newNoteTitlePlaceholder"),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:ring-2 focus:ring-yellow-500 focus:outline-none"}),Te.jsx("textarea",{value:O,onChange:Me=>U(Me.target.value),placeholder:d("newNoteContentPlaceholder"),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:ring-2 focus:ring-yellow-500 focus:outline-none",rows:"3"}),Te.jsx("p",{className:"text-xs text-slate-500 -mt-1 mb-1",children:d("formattingHelp")}),Te.jsxs("button",{onClick:mt,disabled:!M.trim(),className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors font-semibold flex items-center justify-center gap-2 self-end disabled:bg-yellow-300 disabled:cursor-not-allowed",children:[Te.jsx(fh,{size:18})," ",d("addNote")]})]})]})]}),Te.jsxs("section",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[Te.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-700 dark:text-white",children:d("tasks")}),Te.jsx("div",{className:"space-y-3 mb-4 max-h-[400px] overflow-y-auto pr-2",children:(a.tasks||[]).sort((Me,Fe)=>Me.completed-Fe.completed).map(Me=>Te.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 p-3 rounded-lg transition-all hover:shadow-md",children:[Te.jsx("button",{onClick:()=>ke(Me.id),className:"mr-3",children:Me.completed?Te.jsx(_v,{className:"text-green-500"}):Te.jsx(BE,{className:"text-slate-400"})}),Te.jsx("span",{className:`flex-grow ${Me.completed?"line-through text-slate-500 dark:text-slate-400":"text-slate-800 dark:text-slate-100"}`,children:Me.text}),Me.dueDate&&Te.jsxs("div",{className:"flex items-center text-sm text-slate-500 dark:text-slate-400 ml-4",children:[Te.jsx(bv,{size:16,className:"mr-1.5"}),Te.jsx("span",{children:Me.dueDate})]}),Te.jsx("button",{onClick:()=>wt(Me.id),className:"ml-4 p-1 text-slate-400 hover:text-red-500 dark:hover:text-red-400 transition-colors",children:Te.jsx(dh,{size:18})})]},Me.id))}),Te.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[Te.jsx("input",{type:"text",value:m,onChange:Me=>_(Me.target.value),placeholder:d("newTaskPlaceholder"),className:"flex-grow p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 focus:outline-none"}),Te.jsx("input",{type:"date",value:S,onChange:Me=>D(Me.target.value),className:"p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 focus:outline-none"}),Te.jsxs("button",{onClick:Xe,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center justify-center gap-2",children:[Te.jsx(fh,{size:18})," ",d("addTask")]})]})]})]})]})}function em({title:a,message:n,onConfirm:s,onCancel:i}){const{t:d}=Ji();return Te.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center p-4 animate-fade-in",children:Te.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-sm p-6 text-center",children:[Te.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/50 mb-4",children:Te.jsx(VE,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),Te.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:a}),Te.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-6",children:n}),Te.jsxs("div",{className:"flex justify-center gap-4",children:[Te.jsx("button",{onClick:i,className:"px-6 py-2 rounded-lg bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 hover:bg-slate-300 dark:hover:bg-slate-600 font-semibold transition-colors",children:d("cancel")}),Te.jsx("button",{onClick:s,className:"px-6 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 font-semibold transition-colors",children:d("confirm")})]})]})})}function tx({note:a,onClose:n}){const{t:s}=Ji();return Te.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center p-4 animate-fade-in",children:Te.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col",onClick:i=>i.stopPropagation(),children:[Te.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[Te.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white truncate",children:a.title||s("note")}),Te.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:Te.jsx(hc,{className:"text-slate-600 dark:text-slate-300"})})]}),Te.jsx("div",{className:"p-6 overflow-y-auto",children:Te.jsx(Dh,{text:a.text,className:"prose dark:prose-invert max-w-none"})})]})})}function nx({onClose:a}){const{t:n}=Ji();return Te.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center p-4 animate-fade-in",children:Te.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:s=>s.stopPropagation(),children:[Te.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[Te.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white",children:n("helpTitle")}),Te.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:Te.jsx(hc,{className:"text-slate-600 dark:text-slate-300"})})]}),Te.jsxs("div",{className:"p-6 overflow-y-auto text-slate-700 dark:text-slate-300 space-y-6",children:[Te.jsxs("section",{children:[Te.jsx("h4",{className:"font-bold text-lg text-slate-900 dark:text-white mb-2 flex items-center gap-2",children:n("helpIntro")}),Te.jsx("p",{children:n("helpIntroText")})]}),Te.jsxs("section",{children:[Te.jsxs("h4",{className:"font-bold text-lg text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-2",children:[Te.jsx(vE,{size:20})," ",n("helpStorageTitle")]}),Te.jsx("p",{className:"bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-500 p-4 rounded-r-lg",children:n("helpStorageText")})]}),Te.jsxs("section",{children:[Te.jsxs("h4",{className:"font-bold text-lg text-green-600 dark:text-green-400 mb-2 flex items-center gap-2",children:[Te.jsx($E,{size:20})," ",n("helpOfflineTitle")]}),Te.jsx("p",{children:n("helpOfflineText")})]}),Te.jsxs("section",{children:[Te.jsxs("h4",{className:"font-bold text-lg text-slate-600 dark:text-slate-300 mb-2 flex items-center gap-2",children:[Te.jsx(_E,{size:20})," ",n("helpBackupTitle")]}),Te.jsx("p",{children:n("helpBackupText")})]})]})]})})}function rx(){const{t:a}=Ji();return Te.jsxs("footer",{className:"text-center py-6 px-4 text-sm text-slate-500 dark:text-slate-400",children:[Te.jsx("p",{children:a("footerText")}),Te.jsxs("div",{className:"flex justify-center items-center flex-wrap gap-x-4 gap-y-2 mt-2",children:[Te.jsx("a",{href:"http://creativecommons.org/licenses/by/4.0/",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-500",children:a("footerLicense")}),Te.jsx("span",{className:"hidden sm:inline text-slate-300 dark:text-slate-600",children:"|"}),Te.jsxs("a",{href:"https://github.com/PabloGGuizar/gestor-proyectos",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline hover:text-blue-500",children:[Te.jsx(AE,{size:16}),a("githubRepo")]})]})]})}function ix({isLoggedIn:a,webId:n}){const{t:s}=Ji(),[i,d]=nn.useState("https://solidcommunity.net"),y=()=>{if(!i.trim()){alert("Por favor, introduce la URL de tu proveedor de Solid Pod.");return}m1({oidcIssuer:i,redirectUrl:window.location.href,clientName:"Gestor de Proyectos"})},p=()=>{v1()};return a?Te.jsxs("div",{className:"flex items-center gap-2",children:[Te.jsx("span",{className:"text-sm mr-2 hidden md:inline truncate max-w-xs",title:n,children:s("loggedInAs",{webId:n})}),Te.jsx("button",{onClick:p,className:"bg-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-700 transition-colors",children:s("logout")})]}):Te.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[Te.jsx("input",{type:"url",placeholder:"URL de tu Pod Provider",value:i,onChange:g=>d(g.target.value),className:"px-3 py-2 border rounded-lg dark:bg-slate-700 w-full sm:w-auto"}),Te.jsx("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors w-full sm:w-auto",children:s("loginWithSolid")})]})}function ax(){const[a,n]=tE(),{t:s}=Ji(),[i,d]=nn.useState(null),[y,p]=nn.useState(null),[g,E]=nn.useState("dashboard"),[m,_]=nn.useState(null),[S,D]=nn.useState(null),[M,C]=nn.useState(!1),[O,U]=nn.useState(!0),[F,P]=nn.useState(null),[I,B]=nn.useState(null),[z,Y]=nn.useState(!1),[Q,ve]=nn.useState(void 0),[qe,J]=nn.useState(navigator.onLine),pe=Zb(()=>Sn.projects.toArray(),[]);nn.useEffect(()=>{const Re=()=>{const tt=Fa();Y(tt.info.isLoggedIn),ve(tt.info.webId)};b1({restorePreviousSession:!0}).then(()=>{Re()});const be=Fa();be.events.on("login",Re),be.events.on("sessionRestore",Re),be.events.on("logout",()=>{Y(!1),ve(void 0),H()})},[]),nn.useEffect(()=>{const Re=()=>J(!0),be=()=>J(!1);return window.addEventListener("online",Re),window.addEventListener("offline",be),()=>{window.removeEventListener("online",Re),window.removeEventListener("offline",be)}},[]),nn.useEffect(()=>{z&&qe?Xe():U(!1)},[z,qe]);const Xe=async()=>{if(Q){U(!0),d(null);try{const Re=await Sn.syncQueue.toArray();Re.length>0&&(await eE(Re),await Sn.syncQueue.clear());const be=await Q0();await Sn.transaction("rw",Sn.projects,async()=>{await Sn.projects.clear(),await Sn.projects.bulkAdd(be)})}catch(Re){console.error("Error de sincronización:",Re),d("No se pudo sincronizar con el Pod.")}finally{U(!1)}}},ke=async Re=>{if(!Re.trim())return;const be=`local-${crypto.randomUUID()}`,tt={id:be,name:Re.trim(),description:"",keywords:[],notes:[],tasks:[],createdAt:new Date,updatedAt:new Date};if(await Sn.projects.add(tt),qe&&z)try{const gt=await ch(tt);await Sn.transaction("rw",Sn.projects,async()=>{await Sn.projects.delete(be),await Sn.projects.add(gt)})}catch(gt){console.error("Error guardando en Pod, encolando...",gt),await Sn.syncQueue.add({type:"add",payload:tt})}else await Sn.syncQueue.add({type:"add",payload:tt})},wt=async(Re,be)=>{const tt={...be,updatedAt:new Date};await Sn.projects.update(Re,tt);const gt=await Sn.projects.get(Re);if(qe&&z)try{await ch(gt)}catch(xt){console.error("Error actualizando en Pod, encolando...",xt),await Sn.syncQueue.add({type:"update",payload:gt})}else await Sn.syncQueue.add({type:"update",payload:gt})},mt=async()=>{if(!y)return;const Re=y,be=await Sn.projects.get(Re);if(await Sn.projects.delete(Re),p(null),m===Re&&H(),qe&&z)try{be&&!be.id.startsWith("local-")&&await yv(be.id)}catch{be&&await Sn.syncQueue.add({type:"delete",payload:{id:be.id}})}else be&&await Sn.syncQueue.add({type:"delete",payload:{id:be.id}})},Ne=async()=>{if(!pe||pe.length===0){alert("No hay proyectos para exportar.");return}const Re=JSON.stringify(pe,null,2),be=new Blob([Re],{type:"application/json"}),tt=document.createElement("a");tt.href=URL.createObjectURL(be),tt.download=`gestor-proyectos-respaldo-${new Date().toISOString().split("T")[0]}.json`,tt.click(),URL.revokeObjectURL(tt.href)},Me=()=>{const Re=document.createElement("input");Re.type="file",Re.accept=".json",Re.onchange=async be=>{const tt=be.target.files[0];if(tt)try{const gt=await tt.text(),xt=JSON.parse(gt);if(!Array.isArray(xt))throw new Error(s("jsonFormatError"));B(xt),P(!0)}catch{d(s("jsonParseError"))}},Re.click()},Fe=async()=>{if(I){U(!0),d(null),P(null);try{const Re=I.map(({id:be,...tt})=>tt);if(qe&&z){await ZS(Re);const be=await Q0();await Sn.transaction("rw",Sn.projects,async()=>{await Sn.projects.clear(),await Sn.projects.bulkAdd(be)})}else await Sn.transaction("rw",Sn.projects,async()=>{await Sn.projects.clear(),await Sn.projects.bulkAdd(I)}),d("Importado localmente. Se sincronizará con el Pod cuando haya conexión.");B(null)}catch{d(s("importError"))}finally{U(!1)}}},it=Re=>{_(Re),E("project")},H=()=>{_(null),E("dashboard")},he=pe?.find(Re=>Re.id===m);return Te.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 min-h-screen font-sans text-slate-800 dark:text-slate-200 flex flex-col transition-colors duration-300",children:[Te.jsxs("header",{className:"container mx-auto p-4 sm:p-6 lg:p-8 flex flex-wrap justify-between items-center gap-4",children:[Te.jsx("div",{className:"flex-shrink-0",children:Te.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:s("dashboardTitle")})}),Te.jsx("div",{className:"flex-grow flex justify-end",children:Te.jsx(ix,{isLoggedIn:z,webId:Q})})]}),Te.jsxs("main",{className:"container mx-auto p-4 sm:p-6 lg:p-8 flex-grow",children:[i&&Te.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded-md",role:"alert",children:Te.jsx("p",{children:i})}),g==="dashboard"?Te.jsx(ZE,{projects:pe,onAddProject:ke,onOpenProject:it,onDeleteProject:p,isLoading:O,onOpenFile:Me,onSaveFile:Ne,onOpenHelp:()=>C(!0),theme:a,setTheme:n}):he&&Te.jsx(ex,{project:he,onUpdateProject:wt,onBack:H,onViewNote:D}),y&&Te.jsx(em,{title:s("deleteConfirmTitle"),message:s("deleteConfirmMessage"),onConfirm:mt,onCancel:()=>p(null)}),F&&Te.jsx(em,{title:s("importConfirmTitle"),message:s("importConfirmMessage"),onConfirm:Fe,onCancel:()=>P(null)}),S&&Te.jsx(tx,{note:S,onClose:()=>D(null)}),M&&Te.jsx(nx,{onClose:()=>C(!1)})]}),Te.jsx(rx,{})]})}$b.createRoot(document.getElementById("root")).render(Te.jsx(ps.StrictMode,{children:Te.jsx(nE,{children:Te.jsx(ax,{})})}));
